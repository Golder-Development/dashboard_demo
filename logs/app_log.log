2025/02/28 04:04:33 PM INFO:Logging is set up correctly!
2025/02/28 04:04:33 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\utils',)
2025/02/28 04:04:33 PM INFO:get_git_version executed successfully
2025/02/28 04:04:33 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\data',)
2025/02/28 04:04:33 PM INFO:get_git_version executed successfully
2025/02/28 04:04:33 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\components',)
2025/02/28 04:04:33 PM INFO:get_git_version executed successfully
2025/02/28 04:04:33 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/02/28 04:04:33 PM INFO:Setting up the package
2025/02/28 04:04:33 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/02/28 04:04:33 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',)
2025/02/28 04:04:34 PM INFO:get_git_version executed successfully
2025/02/28 04:04:34 PM INFO:Version: v20.111
2025/02/28 04:04:34 PM INFO:Calling initialize_session_state with args=()
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('BASE_DIR', 'H:\\VScode\\dashboard_demo-1')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('filenames', {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}})
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('PLACEHOLDER_DATE', Timestamp('1900-01-01 00:00:00'))
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('PLACEHOLDER_ID', 1000001)
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('thresholds', {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'})
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('data_remappings', {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}})
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('filter_def', {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}})
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('security', {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''})
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('perc_target', 0.5)
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('reference_dir', 'H:\\VScode\\dashboard_demo-1\\reference_files')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('data_dir', 'H:\\VScode\\dashboard_demo-1\\data')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('output_dir', 'H:\\VScode\\dashboard_demo-1\\output')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('logs_dir', 'H:\\VScode\\dashboard_demo-1\\logs')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('components_dir', 'H:\\VScode\\dashboard_demo-1\\components')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('app_pages_dir', 'H:\\VScode\\dashboard_demo-1\\app_pages')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('utils_dir', 'H:\\VScode\\dashboard_demo-1\\utils')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('Donor_dedupe_cleaned_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\Donor_dedupe_cleaned_data.csv')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('ListofPoliticalPeople_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople.csv')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('mppartymemb_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\mppartymemb_pypd.csv')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('donor_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalDonorsDeDuped.csv')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('politician_party_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople_Final.csv')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('regentity_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalEntityDeDuped.csv')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('potential_donor_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_donor_duplicates.csv')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('potential_regulatedentity_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_regentiity_duplicates.csv')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('original_data_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\original_data.csv')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('CREDENTIALS_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_credentials.json')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('TEXT_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_text.json')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('cleaned_data_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_data.csv')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('cleaned_donations_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donations.csv')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('cleaned_donorlist_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donorlist.csv')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('cleaned_regentity_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_regentity.csv')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('party_summary_fname', 'H:\\VScode\\dashboard_demo-1\\output\\party_summary.csv')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'Donations_accepted_by_political_parties.csv')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Calling init_state_var with args=('Cash_ftr', {'DonationType': 'Cash'})
2025/02/28 04:04:34 PM INFO:init_state_var executed successfully
2025/02/28 04:04:34 PM INFO:Session_state variables initialized
2025/02/28 04:04:34 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/02/28 04:04:34 PM INFO:perc_target: 0.5
2025/02/28 04:04:34 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/02/28 04:04:34 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/02/28 04:04:34 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/02/28 04:04:34 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/02/28 04:04:34 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/02/28 04:04:34 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/02/28 04:04:34 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/02/28 04:04:34 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/02/28 04:04:34 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/02/28 04:04:34 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/02/28 04:04:34 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/02/28 04:04:34 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/02/28 04:04:34 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/02/28 04:04:34 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/02/28 04:04:34 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/02/28 04:04:34 PM INFO:directories: {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/02/28 04:04:34 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/02/28 04:04:34 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/02/28 04:04:34 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/02/28 04:04:34 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/02/28 04:04:34 PM INFO:filter_def: {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/02/28 04:04:34 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/02/28 04:04:34 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/02/28 04:04:34 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/02/28 04:04:34 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/02/28 04:04:34 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/02/28 04:04:34 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/02/28 04:04:34 PM INFO:PLACEHOLDER_ID: 1000001
2025/02/28 04:04:34 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/02/28 04:04:34 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/02/28 04:04:34 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/02/28 04:04:34 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/02/28 04:04:34 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/02/28 04:04:34 PM INFO:Session state Setup complete
2025/02/28 04:04:34 PM INFO:initialize_session_state executed successfully
2025/02/28 04:04:34 PM INFO:Package setup complete
2025/02/28 04:04:34 PM INFO:Calling pagesetup with args=()
2025/02/28 04:04:34 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\app_pages',)
2025/02/28 04:04:34 PM INFO:get_git_version executed successfully
2025/02/28 04:04:35 PM INFO:Calling get_git_version with args=()
2025/02/28 04:04:35 PM INFO:get_git_version executed successfully
2025/02/28 04:04:35 PM INFO:App Version: v20.126
2025/02/28 04:04:35 PM INFO:Switched to page: Introduction
2025/02/28 04:04:35 PM INFO:pagesetup executed successfully
2025/02/28 04:04:35 PM INFO:Calling firstload with args=()
2025/02/28 04:04:35 PM INFO:Calling load_data_to_session with args=('raw_data', <function get_raw_data at 0x000001FF13C9E200>)
2025/02/28 04:04:35 PM INFO:Calling get_raw_data with args=()
2025/02/28 04:04:35 PM INFO:Calling load_raw_data with args=()
2025/02/28 04:04:35 PM INFO:Calling raw_data_cleanup with args=(           ECRef              RegulatedEntityName    RegulatedEntityType        Value AcceptedDate  ... AccountingUnitId  DonorId CampaigningName   RegisterName IsIrishSource
index                                                                                               ...                                                                       
0      NC0408174                   Mr Andy Street        Regulated Donee    £1,876.56   02/09/2019  ...              NaN  86310.0             NaN  Great Britain         False
1      NC0408173                   Mr Andy Street        Regulated Donee    £2,700.00   02/09/2019  ...              NaN  86310.0             NaN  Great Britain         False
2      NC0408177                   Mr Andy Street        Regulated Donee    £4,852.58   30/08/2019  ...              NaN  86310.0             NaN  Great Britain         False
3      NC0408176                   Mr Andy Street        Regulated Donee    £2,500.00   30/08/2019  ...              NaN  86310.0             NaN  Great Britain         False
4      NC0408170                   Mr Andy Street        Regulated Donee    £4,524.05   29/08/2019  ...              NaN  86310.0             NaN  Great Britain         False
...          ...                              ...                    ...          ...          ...  ...              ...      ...             ...            ...           ...
65273   C0242478               Vote Leave Limited  Permitted Participant   £10,000.00          NaN  ...              NaN  74198.0             NaN            NaN         False
65274   C0242461               Vote Leave Limited  Permitted Participant  £100,000.00          NaN  ...              NaN  74184.0             NaN            NaN         False
65275   C0243560               Vote Leave Limited  Permitted Participant   £40,000.00          NaN  ...              NaN  74576.0             NaN            NaN         False
65276   C0319710  Conservative and Unionist Party        Political Party   £50,000.00          NaN  ...              NaN  34241.0             NaN  Great Britain         False
65277   C0319727  Conservative and Unionist Party        Political Party   £15,000.00          NaN  ...              NaN  74743.0             NaN  Great Britain         False

[65278 rows x 29 columns],)
2025/02/28 04:04:36 PM INFO:Calling dedupe_entity_file with args=()
2025/02/28 04:04:36 PM INFO:map_filename: regentity_map_fname
2025/02/28 04:04:36 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/02/28 04:04:36 PM INFO:Dedupe by file
2025/02/28 04:04:37 PM INFO:Dedupe by file, shape: (65279, 34)
2025/02/28 04:04:37 PM INFO:dedupe_entity_file executed successfully
2025/02/28 04:04:37 PM INFO:Calling dedupe_entity_file with args=()
2025/02/28 04:04:37 PM INFO:map_filename: donor_map_fname
2025/02/28 04:04:37 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/02/28 04:04:37 PM INFO:Dedupe by file
2025/02/28 04:04:37 PM INFO:Dedupe by file, shape: (66011, 40)
2025/02/28 04:04:37 PM INFO:dedupe_entity_file executed successfully
2025/02/28 04:04:37 PM INFO:Data cleanup completed, shape: (63939, 40)
2025/02/28 04:04:37 PM INFO:raw_data_cleanup executed successfully
2025/02/28 04:04:38 PM INFO:load_raw_data executed successfully
2025/02/28 04:04:38 PM INFO:get_raw_data executed successfully
2025/02/28 04:04:38 PM INFO:load_data_to_session executed successfully
2025/02/28 04:04:38 PM INFO:Calling load_data_to_session with args=('data_clean', <function get_cleaned_data at 0x000001FF13C9E8C0>)
2025/02/28 04:04:38 PM INFO:Calling get_cleaned_data with args=()
2025/02/28 04:04:38 PM INFO:Calling load_cleaned_data with args=()
2025/02/28 04:04:42 PM INFO:Cleaned Data completed, shape: (63939, 40)
2025/02/28 04:04:42 PM INFO:load_cleaned_data executed successfully
2025/02/28 04:04:42 PM INFO:get_cleaned_data executed successfully
2025/02/28 04:04:42 PM INFO:load_data_to_session executed successfully
2025/02/28 04:04:42 PM INFO:Calling load_data_to_session with args=('data_party_sum', <function get_party_summary_data at 0x000001FF13C9E830>)
2025/02/28 04:04:42 PM INFO:Calling get_party_summary_data with args=()
2025/02/28 04:04:42 PM INFO:Calling load_entity_summary_data with args=()
2025/02/28 04:04:42 PM INFO:load_entity_summary_data executed successfully
2025/02/28 04:04:42 PM INFO:get_party_summary_data executed successfully
2025/02/28 04:04:42 PM INFO:load_data_to_session executed successfully
2025/02/28 04:04:42 PM INFO:Calling load_data_to_session with args=('data_donor', <function get_donor_data at 0x000001FF13C9E9E0>)
2025/02/28 04:04:42 PM INFO:Calling get_donor_data with args=()
2025/02/28 04:04:42 PM INFO:Calling load_donorList_data with args=()
2025/02/28 04:04:43 PM INFO:load_donorList_data executed successfully
2025/02/28 04:04:43 PM INFO:get_donor_data executed successfully
2025/02/28 04:04:43 PM INFO:load_data_to_session executed successfully
2025/02/28 04:04:43 PM INFO:Calling load_data_to_session with args=('data_regentity', <function get_regentity_data at 0x000001FF13C9EB00>)
2025/02/28 04:04:43 PM INFO:Calling get_regentity_data with args=()
2025/02/28 04:04:43 PM INFO:Calling load_regulated_entity_data with args=()
2025/02/28 04:04:43 PM INFO:load_regulated_entity_data executed successfully
2025/02/28 04:04:43 PM INFO:get_regentity_data executed successfully
2025/02/28 04:04:43 PM INFO:load_data_to_session executed successfully
2025/02/28 04:04:43 PM INFO:firstload executed successfully
2025/02/28 04:38:06 PM INFO:Logging is set up correctly!
2025/02/28 04:38:06 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\utils',)
2025/02/28 04:38:06 PM INFO:get_git_version executed successfully
2025/02/28 04:38:06 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\data',)
2025/02/28 04:38:06 PM INFO:get_git_version executed successfully
2025/02/28 04:38:06 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\components',)
2025/02/28 04:38:06 PM INFO:get_git_version executed successfully
2025/02/28 04:38:06 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/02/28 04:38:06 PM INFO:Setting up the package
2025/02/28 04:38:06 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/02/28 04:38:06 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',)
2025/02/28 04:38:07 PM INFO:get_git_version executed successfully
2025/02/28 04:38:07 PM INFO:Version: v20.111
2025/02/28 04:38:07 PM INFO:Calling initialize_session_state with args=()
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('BASE_DIR', 'H:\\VScode\\dashboard_demo-1')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('filenames', {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}})
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('PLACEHOLDER_DATE', Timestamp('1900-01-01 00:00:00'))
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('PLACEHOLDER_ID', 1000001)
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('thresholds', {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'})
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('data_remappings', {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}})
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('filter_def', {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}})
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('security', {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''})
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('perc_target', 0.5)
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('reference_dir', 'H:\\VScode\\dashboard_demo-1\\reference_files')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('data_dir', 'H:\\VScode\\dashboard_demo-1\\data')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('output_dir', 'H:\\VScode\\dashboard_demo-1\\output')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('logs_dir', 'H:\\VScode\\dashboard_demo-1\\logs')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('components_dir', 'H:\\VScode\\dashboard_demo-1\\components')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('app_pages_dir', 'H:\\VScode\\dashboard_demo-1\\app_pages')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('utils_dir', 'H:\\VScode\\dashboard_demo-1\\utils')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('Donor_dedupe_cleaned_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\Donor_dedupe_cleaned_data.csv')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('ListofPoliticalPeople_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople.csv')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('mppartymemb_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\mppartymemb_pypd.csv')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('donor_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalDonorsDeDuped.csv')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('politician_party_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople_Final.csv')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('regentity_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalEntityDeDuped.csv')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('potential_donor_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_donor_duplicates.csv')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('potential_regulatedentity_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_regentiity_duplicates.csv')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('original_data_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\original_data.csv')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('CREDENTIALS_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_credentials.json')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('TEXT_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_text.json')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('cleaned_data_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_data.csv')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('cleaned_donations_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donations.csv')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('cleaned_donorlist_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donorlist.csv')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('cleaned_regentity_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_regentity.csv')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('party_summary_fname', 'H:\\VScode\\dashboard_demo-1\\output\\party_summary.csv')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'Donations_accepted_by_political_parties.csv')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Calling init_state_var with args=('Cash_ftr', {'DonationType': 'Cash'})
2025/02/28 04:38:07 PM INFO:init_state_var executed successfully
2025/02/28 04:38:07 PM INFO:Session_state variables initialized
2025/02/28 04:38:07 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/02/28 04:38:07 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1319             Yorkshire Party         1000.00               1   1000.000000  Single Donation Entity
1320   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1321               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1322             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1323               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity

[1324 rows x 5 columns]
2025/02/28 04:38:07 PM INFO:perc_target: 0.5
2025/02/28 04:38:07 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/02/28 04:38:07 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/02/28 04:38:07 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/02/28 04:38:07 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/02/28 04:38:07 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/02/28 04:38:07 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/02/28 04:38:07 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[63939 rows x 40 columns]
2025/02/28 04:38:07 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/02/28 04:38:07 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/02/28 04:38:07 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/02/28 04:38:07 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/02/28 04:38:07 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/02/28 04:38:07 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/02/28 04:38:07 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/02/28 04:38:07 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/02/28 04:38:07 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/02/28 04:38:07 PM INFO:directories: {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/02/28 04:38:07 PM INFO:data_regentity:       RegulatedEntityId                Regulated Entity Name           Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                    English Democrats  Conservative And Unionist Party         10500.00                1   10500.000000
1                  17.0                    English Democrats                     Labour Party         13500.00                5    2700.000000
2                  17.0                    English Democrats                Liberal Democrats         66500.00                3   22166.666667
3                  17.0                    English Democrats              Small Medium Entity          1500.00                1    1500.000000
4                  17.0                    English Democrats                Very Small Entity          7000.00                1    7000.000000
...                 ...                                  ...                              ...              ...              ...            ...
3573            10264.0                        Robert Largan           Single Donation Entity          2000.00                1    2000.000000
3574            10265.0                           Jane Dodds                Liberal Democrats          3529.41                2    1764.705000
3575            10266.0                          Phil Wilson                Very Small Entity          2000.00                1    2000.000000
3576            10267.0  Scottish Unionist Association Trust                     Labour Party        207350.07                2  103675.035000
3577            10267.0  Scottish Unionist Association Trust                Liberal Democrats         11520.00                1   11520.000000

[3578 rows x 6 columns]
2025/02/28 04:38:07 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/02/28 04:38:07 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/02/28 04:38:07 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/02/28 04:38:07 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/02/28 04:38:07 PM INFO:filter_def: {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/02/28 04:38:07 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/02/28 04:38:07 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/02/28 04:38:07 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/02/28 04:38:07 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/02/28 04:38:07 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns]
2025/02/28 04:38:07 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/02/28 04:38:07 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/02/28 04:38:07 PM INFO:PLACEHOLDER_ID: 1000001
2025/02/28 04:38:07 PM INFO:menu_selection: {'title': 'Introduction', 'function': <function introduction_body at 0x000001FF13D39000>}
2025/02/28 04:38:07 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/02/28 04:38:07 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/02/28 04:38:07 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/02/28 04:38:07 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         53000.00                2   26500.000000
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         26625.00                3    8875.000000
3            4.0        Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                    Bridgwater Trust          7700.00                3    2566.666667
...          ...                                 ...              ...              ...            ...
29493    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
29494  1000001.0             Not Recorded 1900-01-01         17500.00                2    8750.000000
29495  1000001.0             Not Recorded 1961-01-01         11454.00                2    5727.000000
29496  1000001.0             Not Recorded 1995-05-10         27938.19                2   13969.095000
29497  1000001.0                  Unidentified Donor        728205.67               92    7915.279022

[29498 rows x 5 columns]
2025/02/28 04:38:07 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/02/28 04:38:07 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/02/28 04:38:07 PM INFO:Session state Setup complete
2025/02/28 04:38:07 PM INFO:initialize_session_state executed successfully
2025/02/28 04:38:07 PM INFO:Package setup complete
2025/02/28 04:38:07 PM INFO:Calling pagesetup with args=()
2025/02/28 04:38:07 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\app_pages',)
2025/02/28 04:38:07 PM INFO:get_git_version executed successfully
2025/02/28 04:38:07 PM INFO:Calling get_git_version with args=()
2025/02/28 04:38:07 PM INFO:get_git_version executed successfully
2025/02/28 04:38:07 PM INFO:App Version: v20.126
2025/02/28 04:38:07 PM INFO:Switched to page: Introduction
2025/02/28 04:38:07 PM INFO:pagesetup executed successfully
2025/02/28 04:38:07 PM INFO:Calling firstload with args=()
2025/02/28 04:38:07 PM INFO:firstload executed successfully
2025/02/28 04:38:11 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/02/28 04:38:11 PM INFO:Setting up the package
2025/02/28 04:38:11 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/02/28 04:38:11 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',)
2025/02/28 04:38:11 PM INFO:get_git_version executed successfully
2025/02/28 04:38:11 PM INFO:Version: v20.111
2025/02/28 04:38:11 PM INFO:Calling initialize_session_state with args=()
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('BASE_DIR', 'H:\\VScode\\dashboard_demo-1')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('filenames', {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}})
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('PLACEHOLDER_DATE', Timestamp('1900-01-01 00:00:00'))
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('PLACEHOLDER_ID', 1000001)
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('thresholds', {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'})
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('data_remappings', {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}})
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('filter_def', {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}})
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('security', {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''})
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('perc_target', 0.5)
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('reference_dir', 'H:\\VScode\\dashboard_demo-1\\reference_files')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('data_dir', 'H:\\VScode\\dashboard_demo-1\\data')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('output_dir', 'H:\\VScode\\dashboard_demo-1\\output')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('logs_dir', 'H:\\VScode\\dashboard_demo-1\\logs')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('components_dir', 'H:\\VScode\\dashboard_demo-1\\components')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('app_pages_dir', 'H:\\VScode\\dashboard_demo-1\\app_pages')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('utils_dir', 'H:\\VScode\\dashboard_demo-1\\utils')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('Donor_dedupe_cleaned_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\Donor_dedupe_cleaned_data.csv')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('ListofPoliticalPeople_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople.csv')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('mppartymemb_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\mppartymemb_pypd.csv')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('donor_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalDonorsDeDuped.csv')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('politician_party_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople_Final.csv')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('regentity_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalEntityDeDuped.csv')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('potential_donor_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_donor_duplicates.csv')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('potential_regulatedentity_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_regentiity_duplicates.csv')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('original_data_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\original_data.csv')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('CREDENTIALS_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_credentials.json')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('TEXT_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_text.json')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('cleaned_data_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_data.csv')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('cleaned_donations_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donations.csv')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('cleaned_donorlist_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donorlist.csv')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('cleaned_regentity_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_regentity.csv')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('party_summary_fname', 'H:\\VScode\\dashboard_demo-1\\output\\party_summary.csv')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'Donations_accepted_by_political_parties.csv')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Calling init_state_var with args=('Cash_ftr', {'DonationType': 'Cash'})
2025/02/28 04:38:11 PM INFO:init_state_var executed successfully
2025/02/28 04:38:11 PM INFO:Session_state variables initialized
2025/02/28 04:38:11 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/02/28 04:38:11 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1319             Yorkshire Party         1000.00               1   1000.000000  Single Donation Entity
1320   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1321               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1322             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1323               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity

[1324 rows x 5 columns]
2025/02/28 04:38:11 PM INFO:perc_target: 0.5
2025/02/28 04:38:11 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/02/28 04:38:11 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/02/28 04:38:11 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/02/28 04:38:11 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/02/28 04:38:11 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/02/28 04:38:11 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/02/28 04:38:11 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[63939 rows x 40 columns]
2025/02/28 04:38:11 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/02/28 04:38:11 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/02/28 04:38:11 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/02/28 04:38:11 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/02/28 04:38:11 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/02/28 04:38:11 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/02/28 04:38:11 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/02/28 04:38:11 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/02/28 04:38:11 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/02/28 04:38:11 PM INFO:directories: {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/02/28 04:38:11 PM INFO:data_regentity:       RegulatedEntityId                Regulated Entity Name           Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                    English Democrats  Conservative And Unionist Party         10500.00                1   10500.000000
1                  17.0                    English Democrats                     Labour Party         13500.00                5    2700.000000
2                  17.0                    English Democrats                Liberal Democrats         66500.00                3   22166.666667
3                  17.0                    English Democrats              Small Medium Entity          1500.00                1    1500.000000
4                  17.0                    English Democrats                Very Small Entity          7000.00                1    7000.000000
...                 ...                                  ...                              ...              ...              ...            ...
3573            10264.0                        Robert Largan           Single Donation Entity          2000.00                1    2000.000000
3574            10265.0                           Jane Dodds                Liberal Democrats          3529.41                2    1764.705000
3575            10266.0                          Phil Wilson                Very Small Entity          2000.00                1    2000.000000
3576            10267.0  Scottish Unionist Association Trust                     Labour Party        207350.07                2  103675.035000
3577            10267.0  Scottish Unionist Association Trust                Liberal Democrats         11520.00                1   11520.000000

[3578 rows x 6 columns]
2025/02/28 04:38:11 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/02/28 04:38:11 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/02/28 04:38:11 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/02/28 04:38:11 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/02/28 04:38:11 PM INFO:filter_def: {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/02/28 04:38:11 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/02/28 04:38:11 PM INFO:menu_selection: {'title': 'Head Line Figures', 'function': <function hlf_body at 0x000001FF1A358A60>}
2025/02/28 04:38:11 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/02/28 04:38:11 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/02/28 04:38:11 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/02/28 04:38:11 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns]
2025/02/28 04:38:11 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/02/28 04:38:11 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/02/28 04:38:11 PM INFO:PLACEHOLDER_ID: 1000001
2025/02/28 04:38:11 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/02/28 04:38:11 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/02/28 04:38:11 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/02/28 04:38:11 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         53000.00                2   26500.000000
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         26625.00                3    8875.000000
3            4.0        Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                    Bridgwater Trust          7700.00                3    2566.666667
...          ...                                 ...              ...              ...            ...
29493    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
29494  1000001.0             Not Recorded 1900-01-01         17500.00                2    8750.000000
29495  1000001.0             Not Recorded 1961-01-01         11454.00                2    5727.000000
29496  1000001.0             Not Recorded 1995-05-10         27938.19                2   13969.095000
29497  1000001.0                  Unidentified Donor        728205.67               92    7915.279022

[29498 rows x 5 columns]
2025/02/28 04:38:11 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/02/28 04:38:11 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/02/28 04:38:11 PM INFO:Session state Setup complete
2025/02/28 04:38:11 PM INFO:initialize_session_state executed successfully
2025/02/28 04:38:11 PM INFO:Package setup complete
2025/02/28 04:38:11 PM INFO:Calling pagesetup with args=()
2025/02/28 04:38:11 PM INFO:Calling get_git_version with args=()
2025/02/28 04:38:11 PM INFO:get_git_version executed successfully
2025/02/28 04:38:11 PM INFO:App Version: v20.126
2025/02/28 04:38:11 PM INFO:Switched to page: Head Line Figures
2025/02/28 04:38:11 PM INFO:Calling plot_bar_line_by_year with args=(           ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns],)
2025/02/28 04:38:12 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:38:12 PM INFO:Calling plot_bar_line_by_year with args=(           ECRef                OriginalRegulatedEntityName RegulatedEntityType    Value  ...                  RegEntity_Group  IsBequestInt IsAggregationInt IsSponsorshipInt
65348   U0034053                               Labour Party     Political Party   400.00  ...                              NaN             1                1                1
65336  TV0036256                           Yes Campaign Ltd         Third Party   668.00  ...                              NaN             1                1                1
65449  TV0036257  British Declaration Of Independence [The]         Third Party  1500.00  ...                              NaN             1                1                1
65649  TV0036260        Campaign For An Independent Britain         Third Party  1450.00  ...                              NaN             1                1                1
65919  TV0036259                                 Charter 88         Third Party  1500.00  ...                              NaN             1                1                1
...          ...                                        ...                 ...      ...  ...                              ...           ...              ...              ...
2176    V0403814                       Mr Damian Collins Mp     Regulated Donee  5000.00  ...                     Small Entity             1                1                1
2188    V0403838                           Jess Phillips Mp     Regulated Donee  1787.62  ...  Conservative And Unionist Party             1                1                1
2615    V0408118                            Preet Kaur Gill     Regulated Donee  2682.55  ...                Liberal Democrats             1                1                1
5887    V0403834                              Mr Afzal Khan     Regulated Donee  1800.00  ...                Liberal Democrats             1                1                1
5889    V0403400                       Ms Yasmin Qureshi Mp     Regulated Donee  1800.00  ...  Conservative And Unionist Party             1                1                1

[63939 rows x 40 columns],)
2025/02/28 04:38:12 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:38:12 PM INFO:Calling plot_bar_line_by_year with args=(           ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns],)
2025/02/28 04:38:12 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:38:12 PM INFO:Calling plot_bar_line_by_year with args=(           ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns],)
2025/02/28 04:38:12 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:38:12 PM INFO:Calling plot_pie_chart with args=()
2025/02/28 04:38:12 PM INFO:plot_pie_chart executed successfully
2025/02/28 04:38:12 PM INFO:Calling plot_pie_chart with args=()
2025/02/28 04:38:12 PM INFO:plot_pie_chart executed successfully
2025/02/28 04:38:13 PM INFO:pagesetup executed successfully
2025/02/28 04:38:13 PM INFO:Calling firstload with args=()
2025/02/28 04:38:13 PM INFO:firstload executed successfully
2025/02/28 04:38:14 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/02/28 04:38:14 PM INFO:Setting up the package
2025/02/28 04:38:14 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/02/28 04:38:14 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',)
2025/02/28 04:38:14 PM INFO:get_git_version executed successfully
2025/02/28 04:38:14 PM INFO:Version: v20.111
2025/02/28 04:38:14 PM INFO:Calling initialize_session_state with args=()
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('BASE_DIR', 'H:\\VScode\\dashboard_demo-1')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('filenames', {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}})
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('PLACEHOLDER_DATE', Timestamp('1900-01-01 00:00:00'))
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('PLACEHOLDER_ID', 1000001)
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('thresholds', {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'})
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('data_remappings', {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}})
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('filter_def', {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}})
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('security', {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''})
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('perc_target', 0.5)
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('reference_dir', 'H:\\VScode\\dashboard_demo-1\\reference_files')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('data_dir', 'H:\\VScode\\dashboard_demo-1\\data')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('output_dir', 'H:\\VScode\\dashboard_demo-1\\output')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('logs_dir', 'H:\\VScode\\dashboard_demo-1\\logs')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('components_dir', 'H:\\VScode\\dashboard_demo-1\\components')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('app_pages_dir', 'H:\\VScode\\dashboard_demo-1\\app_pages')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('utils_dir', 'H:\\VScode\\dashboard_demo-1\\utils')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('Donor_dedupe_cleaned_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\Donor_dedupe_cleaned_data.csv')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('ListofPoliticalPeople_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople.csv')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('mppartymemb_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\mppartymemb_pypd.csv')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('donor_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalDonorsDeDuped.csv')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('politician_party_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople_Final.csv')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('regentity_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalEntityDeDuped.csv')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('potential_donor_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_donor_duplicates.csv')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('potential_regulatedentity_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_regentiity_duplicates.csv')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('original_data_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\original_data.csv')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('CREDENTIALS_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_credentials.json')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('TEXT_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_text.json')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('cleaned_data_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_data.csv')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('cleaned_donations_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donations.csv')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('cleaned_donorlist_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donorlist.csv')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('cleaned_regentity_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_regentity.csv')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('party_summary_fname', 'H:\\VScode\\dashboard_demo-1\\output\\party_summary.csv')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'Donations_accepted_by_political_parties.csv')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Calling init_state_var with args=('Cash_ftr', {'DonationType': 'Cash'})
2025/02/28 04:38:14 PM INFO:init_state_var executed successfully
2025/02/28 04:38:14 PM INFO:Session_state variables initialized
2025/02/28 04:38:14 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/02/28 04:38:14 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1319             Yorkshire Party         1000.00               1   1000.000000  Single Donation Entity
1320   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1321               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1322             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1323               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity

[1324 rows x 5 columns]
2025/02/28 04:38:14 PM INFO:perc_target: 0.5
2025/02/28 04:38:14 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/02/28 04:38:14 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/02/28 04:38:14 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/02/28 04:38:14 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/02/28 04:38:14 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/02/28 04:38:14 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/02/28 04:38:14 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[63939 rows x 40 columns]
2025/02/28 04:38:14 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/02/28 04:38:14 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/02/28 04:38:14 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/02/28 04:38:14 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/02/28 04:38:14 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/02/28 04:38:14 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/02/28 04:38:14 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/02/28 04:38:14 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/02/28 04:38:14 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/02/28 04:38:14 PM INFO:directories: {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/02/28 04:38:14 PM INFO:data_regentity:       RegulatedEntityId                Regulated Entity Name           Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                    English Democrats  Conservative And Unionist Party         10500.00                1   10500.000000
1                  17.0                    English Democrats                     Labour Party         13500.00                5    2700.000000
2                  17.0                    English Democrats                Liberal Democrats         66500.00                3   22166.666667
3                  17.0                    English Democrats              Small Medium Entity          1500.00                1    1500.000000
4                  17.0                    English Democrats                Very Small Entity          7000.00                1    7000.000000
...                 ...                                  ...                              ...              ...              ...            ...
3573            10264.0                        Robert Largan           Single Donation Entity          2000.00                1    2000.000000
3574            10265.0                           Jane Dodds                Liberal Democrats          3529.41                2    1764.705000
3575            10266.0                          Phil Wilson                Very Small Entity          2000.00                1    2000.000000
3576            10267.0  Scottish Unionist Association Trust                     Labour Party        207350.07                2  103675.035000
3577            10267.0  Scottish Unionist Association Trust                Liberal Democrats         11520.00                1   11520.000000

[3578 rows x 6 columns]
2025/02/28 04:38:14 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/02/28 04:38:14 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/02/28 04:38:14 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/02/28 04:38:14 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/02/28 04:38:14 PM INFO:filter_def: {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/02/28 04:38:14 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/02/28 04:38:14 PM INFO:menu_selection: {'title': 'Bequeths', 'function': <function mod_bequeths_page at 0x000001FF1A35AC20>}
2025/02/28 04:38:14 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/02/28 04:38:14 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/02/28 04:38:14 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/02/28 04:38:14 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns]
2025/02/28 04:38:14 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/02/28 04:38:14 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/02/28 04:38:14 PM INFO:PLACEHOLDER_ID: 1000001
2025/02/28 04:38:14 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/02/28 04:38:14 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/02/28 04:38:14 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/02/28 04:38:14 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         53000.00                2   26500.000000
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         26625.00                3    8875.000000
3            4.0        Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                    Bridgwater Trust          7700.00                3    2566.666667
...          ...                                 ...              ...              ...            ...
29493    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
29494  1000001.0             Not Recorded 1900-01-01         17500.00                2    8750.000000
29495  1000001.0             Not Recorded 1961-01-01         11454.00                2    5727.000000
29496  1000001.0             Not Recorded 1995-05-10         27938.19                2   13969.095000
29497  1000001.0                  Unidentified Donor        728205.67               92    7915.279022

[29498 rows x 5 columns]
2025/02/28 04:38:14 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/02/28 04:38:14 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/02/28 04:38:14 PM INFO:Session state Setup complete
2025/02/28 04:38:14 PM INFO:initialize_session_state executed successfully
2025/02/28 04:38:14 PM INFO:Package setup complete
2025/02/28 04:38:14 PM INFO:Calling pagesetup with args=()
2025/02/28 04:38:14 PM INFO:Calling get_git_version with args=()
2025/02/28 04:38:14 PM INFO:get_git_version executed successfully
2025/02/28 04:38:14 PM INFO:App Version: v20.126
2025/02/28 04:38:14 PM INFO:Switched to page: Bequeths
2025/02/28 04:38:14 PM INFO:Calling display_data_page with args=('Bequests_ftr', 'Bequest')
2025/02/28 04:38:14 PM INFO:Calling load_and_filter_data with args=('Bequests_ftr', 'filtered_keytarget_label')
2025/02/28 04:38:14 PM INFO:Calling load_cleaned_data with args=()
2025/02/28 04:38:17 PM INFO:Cleaned Data completed, shape: (63939, 40)
2025/02/28 04:38:17 PM INFO:load_cleaned_data executed successfully
2025/02/28 04:38:17 PM INFO:load_and_filter_data executed successfully
2025/02/28 04:38:17 PM INFO:Calling display_summary_statistics with args=(           ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns],            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns], 'Bequest', 'filtered_keytarget_label')
2025/02/28 04:38:17 PM INFO:display_summary_statistics executed successfully
2025/02/28 04:38:17 PM INFO:Calling display_textual_insights with args=('filtered_keytarget_label', 'Bequest', datetime.date(2001, 1, 1), datetime.date(2019, 9, 2), {'unique_reg_entities': 1324, 'unique_donors': 24066, 'unique_donations': np.int64(63939), 'total_value': np.float64(934089582.95), 'mean_value': np.float64(14609.074007256917), 'avg_donations_per_entity': np.float64(48.25584905660377), 'avg_value_per_entity': np.float64(9467.03590479101), 'avg_donors_per_entity': np.float64(20.86188679245283), 'donors_stdev': np.float64(819.2576959707048), 'value_stdev': np.float64(60679.81509488486), 'noofdonors_per_ent_stdev': np.float64(322.67849661732464)}, {'unique_reg_entities': 1324, 'unique_donors': 24066, 'unique_donations': np.int64(63939), 'total_value': np.float64(934089582.95), 'mean_value': np.float64(14609.074007256917), 'avg_donations_per_entity': np.float64(48.25584905660377), 'avg_value_per_entity': np.float64(9467.03590479101), 'avg_donors_per_entity': np.float64(20.86188679245283), 'donors_stdev': np.float64(819.2576959707048), 'value_stdev': np.float64(60679.81509488486), 'noofdonors_per_ent_stdev': np.float64(322.67849661732464)}, 0.5)
2025/02/28 04:38:17 PM INFO:display_textual_insights executed successfully
2025/02/28 04:38:18 PM INFO:Calling display_visualizations with args=(           ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns], 'Bequest', 'filtered_keytarget_label')
2025/02/28 04:38:18 PM INFO:Calling plot_bar_line_by_year with args=(           ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns],)
2025/02/28 04:38:18 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:38:18 PM INFO:Calling plot_bar_line_by_year with args=(           ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns],)
2025/02/28 04:38:18 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:38:18 PM INFO:display_visualizations executed successfully
2025/02/28 04:38:18 PM INFO:display_data_page executed successfully
2025/02/28 04:38:18 PM INFO:pagesetup executed successfully
2025/02/28 04:38:18 PM INFO:Calling firstload with args=()
2025/02/28 04:38:18 PM INFO:firstload executed successfully
2025/02/28 04:38:19 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/02/28 04:38:19 PM INFO:Setting up the package
2025/02/28 04:38:19 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/02/28 04:38:19 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',)
2025/02/28 04:38:19 PM INFO:get_git_version executed successfully
2025/02/28 04:38:19 PM INFO:Version: v20.111
2025/02/28 04:38:19 PM INFO:Calling initialize_session_state with args=()
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('BASE_DIR', 'H:\\VScode\\dashboard_demo-1')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('filenames', {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}})
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('PLACEHOLDER_DATE', Timestamp('1900-01-01 00:00:00'))
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('PLACEHOLDER_ID', 1000001)
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('thresholds', {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'})
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('data_remappings', {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}})
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('filter_def', {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}})
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('security', {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''})
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('perc_target', 0.5)
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('reference_dir', 'H:\\VScode\\dashboard_demo-1\\reference_files')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('data_dir', 'H:\\VScode\\dashboard_demo-1\\data')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('output_dir', 'H:\\VScode\\dashboard_demo-1\\output')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('logs_dir', 'H:\\VScode\\dashboard_demo-1\\logs')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('components_dir', 'H:\\VScode\\dashboard_demo-1\\components')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('app_pages_dir', 'H:\\VScode\\dashboard_demo-1\\app_pages')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('utils_dir', 'H:\\VScode\\dashboard_demo-1\\utils')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('Donor_dedupe_cleaned_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\Donor_dedupe_cleaned_data.csv')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('ListofPoliticalPeople_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople.csv')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('mppartymemb_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\mppartymemb_pypd.csv')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('donor_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalDonorsDeDuped.csv')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('politician_party_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople_Final.csv')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('regentity_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalEntityDeDuped.csv')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('potential_donor_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_donor_duplicates.csv')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('potential_regulatedentity_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_regentiity_duplicates.csv')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('original_data_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\original_data.csv')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('CREDENTIALS_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_credentials.json')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('TEXT_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_text.json')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('cleaned_data_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_data.csv')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('cleaned_donations_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donations.csv')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('cleaned_donorlist_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donorlist.csv')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('cleaned_regentity_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_regentity.csv')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('party_summary_fname', 'H:\\VScode\\dashboard_demo-1\\output\\party_summary.csv')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'Donations_accepted_by_political_parties.csv')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Calling init_state_var with args=('Cash_ftr', {'DonationType': 'Cash'})
2025/02/28 04:38:19 PM INFO:init_state_var executed successfully
2025/02/28 04:38:19 PM INFO:Session_state variables initialized
2025/02/28 04:38:19 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/02/28 04:38:19 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1319             Yorkshire Party         1000.00               1   1000.000000  Single Donation Entity
1320   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1321               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1322             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1323               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity

[1324 rows x 5 columns]
2025/02/28 04:38:19 PM INFO:perc_target: 0.5
2025/02/28 04:38:19 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/02/28 04:38:19 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/02/28 04:38:19 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/02/28 04:38:19 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/02/28 04:38:19 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/02/28 04:38:19 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/02/28 04:38:19 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[63939 rows x 40 columns]
2025/02/28 04:38:19 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/02/28 04:38:19 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/02/28 04:38:19 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/02/28 04:38:19 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/02/28 04:38:19 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/02/28 04:38:19 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/02/28 04:38:19 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/02/28 04:38:19 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/02/28 04:38:19 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/02/28 04:38:19 PM INFO:directories: {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/02/28 04:38:19 PM INFO:data_regentity:       RegulatedEntityId                Regulated Entity Name           Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                    English Democrats  Conservative And Unionist Party         10500.00                1   10500.000000
1                  17.0                    English Democrats                     Labour Party         13500.00                5    2700.000000
2                  17.0                    English Democrats                Liberal Democrats         66500.00                3   22166.666667
3                  17.0                    English Democrats              Small Medium Entity          1500.00                1    1500.000000
4                  17.0                    English Democrats                Very Small Entity          7000.00                1    7000.000000
...                 ...                                  ...                              ...              ...              ...            ...
3573            10264.0                        Robert Largan           Single Donation Entity          2000.00                1    2000.000000
3574            10265.0                           Jane Dodds                Liberal Democrats          3529.41                2    1764.705000
3575            10266.0                          Phil Wilson                Very Small Entity          2000.00                1    2000.000000
3576            10267.0  Scottish Unionist Association Trust                     Labour Party        207350.07                2  103675.035000
3577            10267.0  Scottish Unionist Association Trust                Liberal Democrats         11520.00                1   11520.000000

[3578 rows x 6 columns]
2025/02/28 04:38:19 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/02/28 04:38:19 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/02/28 04:38:19 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/02/28 04:38:19 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/02/28 04:38:19 PM INFO:filter_def: {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/02/28 04:38:19 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/02/28 04:38:19 PM INFO:menu_selection: {'title': 'Corporate Donations', 'function': <function mod_corporate_donations_page at 0x000001FF1A35ACB0>}
2025/02/28 04:38:19 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/02/28 04:38:19 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/02/28 04:38:19 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/02/28 04:38:19 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns]
2025/02/28 04:38:19 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/02/28 04:38:19 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/02/28 04:38:19 PM INFO:PLACEHOLDER_ID: 1000001
2025/02/28 04:38:19 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/02/28 04:38:19 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/02/28 04:38:19 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/02/28 04:38:19 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         53000.00                2   26500.000000
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         26625.00                3    8875.000000
3            4.0        Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                    Bridgwater Trust          7700.00                3    2566.666667
...          ...                                 ...              ...              ...            ...
29493    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
29494  1000001.0             Not Recorded 1900-01-01         17500.00                2    8750.000000
29495  1000001.0             Not Recorded 1961-01-01         11454.00                2    5727.000000
29496  1000001.0             Not Recorded 1995-05-10         27938.19                2   13969.095000
29497  1000001.0                  Unidentified Donor        728205.67               92    7915.279022

[29498 rows x 5 columns]
2025/02/28 04:38:19 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/02/28 04:38:19 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/02/28 04:38:19 PM INFO:Session state Setup complete
2025/02/28 04:38:19 PM INFO:initialize_session_state executed successfully
2025/02/28 04:38:19 PM INFO:Package setup complete
2025/02/28 04:38:20 PM INFO:Calling pagesetup with args=()
2025/02/28 04:38:20 PM INFO:Calling get_git_version with args=()
2025/02/28 04:38:20 PM INFO:get_git_version executed successfully
2025/02/28 04:38:20 PM INFO:App Version: v20.126
2025/02/28 04:38:20 PM INFO:Switched to page: Corporate Donations
2025/02/28 04:38:20 PM INFO:Calling display_data_page with args=('CorporateDonations_ftr', 'Corporate Donation')
2025/02/28 04:38:20 PM INFO:Calling load_and_filter_data with args=('CorporateDonations_ftr', 'filtered_keytarget_label')
2025/02/28 04:38:20 PM INFO:Calling load_cleaned_data with args=()
2025/02/28 04:38:23 PM INFO:Cleaned Data completed, shape: (63939, 40)
2025/02/28 04:38:23 PM INFO:load_cleaned_data executed successfully
2025/02/28 04:38:23 PM INFO:load_and_filter_data executed successfully
2025/02/28 04:38:23 PM INFO:Calling display_summary_statistics with args=(          ECRef                 OriginalRegulatedEntityName    RegulatedEntityType    Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
11     C0407531                    Labour For A Public-Vote        Regulated Donee  10000.0                     Open Britain  ...            0         Small Entity            1                1                1
12     C0407530                    Labour For A Public-Vote        Regulated Donee  30000.0                     Open Britain  ...            0         Small Entity            1                1                1
14     C0408135                   The Rt Hon Jeremy Hunt Mp        Regulated Donee  10000.0                      Acquind Ltd  ...            0  Small Medium Entity            1                1                1
15     C0408130                   The Rt Hon Jeremy Hunt Mp        Regulated Donee   2600.0                Pcl Transport Ltd  ...            0  Small Medium Entity            1                1                1
16     C0408134                   The Rt Hon Jeremy Hunt Mp        Regulated Donee   3500.0                       Pietas Ltd  ...            0  Small Medium Entity            1                1                1
...         ...                                         ...                    ...      ...                              ...  ...          ...                  ...          ...              ...              ...
65994  C0243534                        Labour Leave Limited  Permitted Participant  20000.0  The Freedom Association Limited  ...            0                  NaN            1                1                1
66000  C0259702  Trade Unionists Against The European Union  Permitted Participant   8000.0       Better For The Country Ltd  ...            0                  NaN            1                1                1
66001  C0400297                        Labour Leave Limited  Permitted Participant  75000.0                     Techtest Ltd  ...            0                  NaN            1                1                1
66003  I0088673                           Liberal Democrats        Political Party   1000.0      St Cross Consulting Limited  ...            2                  NaN            1                1                1
66006  C0242478                          Vote Leave Limited  Permitted Participant  10000.0          Shaftesbury Investments  ...            0                  NaN            1                1                1

[12361 rows x 40 columns],            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns], 'Corporate Donation', 'filtered_keytarget_label')
2025/02/28 04:38:23 PM INFO:display_summary_statistics executed successfully
2025/02/28 04:38:23 PM INFO:Calling display_textual_insights with args=('filtered_keytarget_label', 'Corporate Donation', datetime.date(2001, 1, 21), datetime.date(2019, 8, 9), {'unique_reg_entities': 699, 'unique_donors': 3033, 'unique_donations': np.int64(12361), 'total_value': np.float64(197371699.32), 'mean_value': np.float64(15967.292235256047), 'avg_donations_per_entity': np.float64(17.683834048640914), 'avg_value_per_entity': np.float64(8120.9660180429855), 'avg_donors_per_entity': np.float64(6.005722460658083), 'donors_stdev': np.float64(240.61138437591893), 'value_stdev': np.float64(14806.92152185142), 'noofdonors_per_ent_stdev': np.float64(65.90431086584725)}, {'unique_reg_entities': 1324, 'unique_donors': 24066, 'unique_donations': np.int64(63939), 'total_value': np.float64(934089582.95), 'mean_value': np.float64(14609.074007256917), 'avg_donations_per_entity': np.float64(48.25584905660377), 'avg_value_per_entity': np.float64(9467.03590479101), 'avg_donors_per_entity': np.float64(20.86188679245283), 'donors_stdev': np.float64(819.2576959707048), 'value_stdev': np.float64(60679.81509488486), 'noofdonors_per_ent_stdev': np.float64(322.67849661732464)}, 0.5)
2025/02/28 04:38:23 PM INFO:display_textual_insights executed successfully
2025/02/28 04:38:23 PM INFO:Calling display_visualizations with args=(          ECRef                 OriginalRegulatedEntityName    RegulatedEntityType    Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
11     C0407531                    Labour For A Public-Vote        Regulated Donee  10000.0                     Open Britain  ...            0         Small Entity            1                1                1
12     C0407530                    Labour For A Public-Vote        Regulated Donee  30000.0                     Open Britain  ...            0         Small Entity            1                1                1
14     C0408135                   The Rt Hon Jeremy Hunt Mp        Regulated Donee  10000.0                      Acquind Ltd  ...            0  Small Medium Entity            1                1                1
15     C0408130                   The Rt Hon Jeremy Hunt Mp        Regulated Donee   2600.0                Pcl Transport Ltd  ...            0  Small Medium Entity            1                1                1
16     C0408134                   The Rt Hon Jeremy Hunt Mp        Regulated Donee   3500.0                       Pietas Ltd  ...            0  Small Medium Entity            1                1                1
...         ...                                         ...                    ...      ...                              ...  ...          ...                  ...          ...              ...              ...
65994  C0243534                        Labour Leave Limited  Permitted Participant  20000.0  The Freedom Association Limited  ...            0                  NaN            1                1                1
66000  C0259702  Trade Unionists Against The European Union  Permitted Participant   8000.0       Better For The Country Ltd  ...            0                  NaN            1                1                1
66001  C0400297                        Labour Leave Limited  Permitted Participant  75000.0                     Techtest Ltd  ...            0                  NaN            1                1                1
66003  I0088673                           Liberal Democrats        Political Party   1000.0      St Cross Consulting Limited  ...            2                  NaN            1                1                1
66006  C0242478                          Vote Leave Limited  Permitted Participant  10000.0          Shaftesbury Investments  ...            0                  NaN            1                1                1

[12361 rows x 40 columns], 'Corporate Donation', 'filtered_keytarget_label')
2025/02/28 04:38:23 PM INFO:Calling plot_bar_line_by_year with args=(          ECRef                 OriginalRegulatedEntityName    RegulatedEntityType    Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
11     C0407531                    Labour For A Public-Vote        Regulated Donee  10000.0                     Open Britain  ...            0         Small Entity            1                1                1
12     C0407530                    Labour For A Public-Vote        Regulated Donee  30000.0                     Open Britain  ...            0         Small Entity            1                1                1
14     C0408135                   The Rt Hon Jeremy Hunt Mp        Regulated Donee  10000.0                      Acquind Ltd  ...            0  Small Medium Entity            1                1                1
15     C0408130                   The Rt Hon Jeremy Hunt Mp        Regulated Donee   2600.0                Pcl Transport Ltd  ...            0  Small Medium Entity            1                1                1
16     C0408134                   The Rt Hon Jeremy Hunt Mp        Regulated Donee   3500.0                       Pietas Ltd  ...            0  Small Medium Entity            1                1                1
...         ...                                         ...                    ...      ...                              ...  ...          ...                  ...          ...              ...              ...
65994  C0243534                        Labour Leave Limited  Permitted Participant  20000.0  The Freedom Association Limited  ...            0                  NaN            1                1                1
66000  C0259702  Trade Unionists Against The European Union  Permitted Participant   8000.0       Better For The Country Ltd  ...            0                  NaN            1                1                1
66001  C0400297                        Labour Leave Limited  Permitted Participant  75000.0                     Techtest Ltd  ...            0                  NaN            1                1                1
66003  I0088673                           Liberal Democrats        Political Party   1000.0      St Cross Consulting Limited  ...            2                  NaN            1                1                1
66006  C0242478                          Vote Leave Limited  Permitted Participant  10000.0          Shaftesbury Investments  ...            0                  NaN            1                1                1

[12361 rows x 40 columns],)
2025/02/28 04:38:23 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:38:23 PM INFO:Calling plot_bar_line_by_year with args=(          ECRef                 OriginalRegulatedEntityName    RegulatedEntityType    Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
11     C0407531                    Labour For A Public-Vote        Regulated Donee  10000.0                     Open Britain  ...            0         Small Entity            1                1                1
12     C0407530                    Labour For A Public-Vote        Regulated Donee  30000.0                     Open Britain  ...            0         Small Entity            1                1                1
14     C0408135                   The Rt Hon Jeremy Hunt Mp        Regulated Donee  10000.0                      Acquind Ltd  ...            0  Small Medium Entity            1                1                1
15     C0408130                   The Rt Hon Jeremy Hunt Mp        Regulated Donee   2600.0                Pcl Transport Ltd  ...            0  Small Medium Entity            1                1                1
16     C0408134                   The Rt Hon Jeremy Hunt Mp        Regulated Donee   3500.0                       Pietas Ltd  ...            0  Small Medium Entity            1                1                1
...         ...                                         ...                    ...      ...                              ...  ...          ...                  ...          ...              ...              ...
65994  C0243534                        Labour Leave Limited  Permitted Participant  20000.0  The Freedom Association Limited  ...            0                  NaN            1                1                1
66000  C0259702  Trade Unionists Against The European Union  Permitted Participant   8000.0       Better For The Country Ltd  ...            0                  NaN            1                1                1
66001  C0400297                        Labour Leave Limited  Permitted Participant  75000.0                     Techtest Ltd  ...            0                  NaN            1                1                1
66003  I0088673                           Liberal Democrats        Political Party   1000.0      St Cross Consulting Limited  ...            2                  NaN            1                1                1
66006  C0242478                          Vote Leave Limited  Permitted Participant  10000.0          Shaftesbury Investments  ...            0                  NaN            1                1                1

[12361 rows x 40 columns],)
2025/02/28 04:38:23 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:38:23 PM INFO:display_visualizations executed successfully
2025/02/28 04:38:23 PM INFO:display_data_page executed successfully
2025/02/28 04:38:23 PM INFO:pagesetup executed successfully
2025/02/28 04:38:23 PM INFO:Calling firstload with args=()
2025/02/28 04:38:23 PM INFO:firstload executed successfully
2025/02/28 04:38:41 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/02/28 04:38:41 PM INFO:Setting up the package
2025/02/28 04:38:41 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/02/28 04:38:41 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',)
2025/02/28 04:38:41 PM INFO:get_git_version executed successfully
2025/02/28 04:38:41 PM INFO:Version: v20.111
2025/02/28 04:38:41 PM INFO:Calling initialize_session_state with args=()
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('BASE_DIR', 'H:\\VScode\\dashboard_demo-1')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('filenames', {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}})
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('PLACEHOLDER_DATE', Timestamp('1900-01-01 00:00:00'))
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('PLACEHOLDER_ID', 1000001)
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('thresholds', {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'})
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('data_remappings', {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}})
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('filter_def', {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}})
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('security', {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''})
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('perc_target', 0.5)
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('reference_dir', 'H:\\VScode\\dashboard_demo-1\\reference_files')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('data_dir', 'H:\\VScode\\dashboard_demo-1\\data')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('output_dir', 'H:\\VScode\\dashboard_demo-1\\output')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('logs_dir', 'H:\\VScode\\dashboard_demo-1\\logs')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('components_dir', 'H:\\VScode\\dashboard_demo-1\\components')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('app_pages_dir', 'H:\\VScode\\dashboard_demo-1\\app_pages')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('utils_dir', 'H:\\VScode\\dashboard_demo-1\\utils')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('Donor_dedupe_cleaned_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\Donor_dedupe_cleaned_data.csv')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('ListofPoliticalPeople_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople.csv')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('mppartymemb_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\mppartymemb_pypd.csv')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('donor_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalDonorsDeDuped.csv')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('politician_party_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople_Final.csv')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('regentity_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalEntityDeDuped.csv')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('potential_donor_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_donor_duplicates.csv')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('potential_regulatedentity_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_regentiity_duplicates.csv')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('original_data_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\original_data.csv')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('CREDENTIALS_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_credentials.json')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('TEXT_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_text.json')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('cleaned_data_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_data.csv')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('cleaned_donations_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donations.csv')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('cleaned_donorlist_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donorlist.csv')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('cleaned_regentity_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_regentity.csv')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('party_summary_fname', 'H:\\VScode\\dashboard_demo-1\\output\\party_summary.csv')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'Donations_accepted_by_political_parties.csv')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Calling init_state_var with args=('Cash_ftr', {'DonationType': 'Cash'})
2025/02/28 04:38:41 PM INFO:init_state_var executed successfully
2025/02/28 04:38:41 PM INFO:Session_state variables initialized
2025/02/28 04:38:41 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/02/28 04:38:41 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1319             Yorkshire Party         1000.00               1   1000.000000  Single Donation Entity
1320   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1321               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1322             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1323               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity

[1324 rows x 5 columns]
2025/02/28 04:38:41 PM INFO:perc_target: 0.5
2025/02/28 04:38:41 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/02/28 04:38:41 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/02/28 04:38:41 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/02/28 04:38:41 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/02/28 04:38:41 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/02/28 04:38:41 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/02/28 04:38:41 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[63939 rows x 40 columns]
2025/02/28 04:38:41 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/02/28 04:38:41 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/02/28 04:38:41 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/02/28 04:38:41 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/02/28 04:38:41 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/02/28 04:38:41 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/02/28 04:38:41 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/02/28 04:38:41 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/02/28 04:38:41 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/02/28 04:38:41 PM INFO:directories: {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/02/28 04:38:41 PM INFO:data_regentity:       RegulatedEntityId                Regulated Entity Name           Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                    English Democrats  Conservative And Unionist Party         10500.00                1   10500.000000
1                  17.0                    English Democrats                     Labour Party         13500.00                5    2700.000000
2                  17.0                    English Democrats                Liberal Democrats         66500.00                3   22166.666667
3                  17.0                    English Democrats              Small Medium Entity          1500.00                1    1500.000000
4                  17.0                    English Democrats                Very Small Entity          7000.00                1    7000.000000
...                 ...                                  ...                              ...              ...              ...            ...
3573            10264.0                        Robert Largan           Single Donation Entity          2000.00                1    2000.000000
3574            10265.0                           Jane Dodds                Liberal Democrats          3529.41                2    1764.705000
3575            10266.0                          Phil Wilson                Very Small Entity          2000.00                1    2000.000000
3576            10267.0  Scottish Unionist Association Trust                     Labour Party        207350.07                2  103675.035000
3577            10267.0  Scottish Unionist Association Trust                Liberal Democrats         11520.00                1   11520.000000

[3578 rows x 6 columns]
2025/02/28 04:38:41 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/02/28 04:38:41 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/02/28 04:38:41 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/02/28 04:38:41 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/02/28 04:38:41 PM INFO:filter_def: {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/02/28 04:38:41 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/02/28 04:38:41 PM INFO:menu_selection: {'title': 'Sponsorships', 'function': <function mod_sponsorship_page at 0x000001FF1A35AB90>}
2025/02/28 04:38:41 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/02/28 04:38:41 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/02/28 04:38:41 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/02/28 04:38:41 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns]
2025/02/28 04:38:41 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/02/28 04:38:41 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/02/28 04:38:41 PM INFO:PLACEHOLDER_ID: 1000001
2025/02/28 04:38:41 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/02/28 04:38:41 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/02/28 04:38:41 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/02/28 04:38:41 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         53000.00                2   26500.000000
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         26625.00                3    8875.000000
3            4.0        Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                    Bridgwater Trust          7700.00                3    2566.666667
...          ...                                 ...              ...              ...            ...
29493    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
29494  1000001.0             Not Recorded 1900-01-01         17500.00                2    8750.000000
29495  1000001.0             Not Recorded 1961-01-01         11454.00                2    5727.000000
29496  1000001.0             Not Recorded 1995-05-10         27938.19                2   13969.095000
29497  1000001.0                  Unidentified Donor        728205.67               92    7915.279022

[29498 rows x 5 columns]
2025/02/28 04:38:41 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/02/28 04:38:41 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/02/28 04:38:41 PM INFO:Session state Setup complete
2025/02/28 04:38:41 PM INFO:initialize_session_state executed successfully
2025/02/28 04:38:41 PM INFO:Package setup complete
2025/02/28 04:38:41 PM INFO:Calling pagesetup with args=()
2025/02/28 04:38:41 PM INFO:Calling get_git_version with args=()
2025/02/28 04:38:41 PM INFO:get_git_version executed successfully
2025/02/28 04:38:41 PM INFO:App Version: v20.126
2025/02/28 04:38:41 PM INFO:Switched to page: Sponsorships
2025/02/28 04:38:41 PM INFO:Calling display_data_page with args=('Sponsorships_ftr', 'Sponsorship')
2025/02/28 04:38:41 PM INFO:Calling load_and_filter_data with args=('Sponsorships_ftr', 'filtered_keytarget_label')
2025/02/28 04:38:41 PM INFO:Calling load_cleaned_data with args=()
2025/02/28 04:38:44 PM INFO:Cleaned Data completed, shape: (63939, 40)
2025/02/28 04:38:44 PM INFO:load_cleaned_data executed successfully
2025/02/28 04:38:44 PM INFO:load_and_filter_data executed successfully
2025/02/28 04:38:44 PM INFO:Calling display_summary_statistics with args=(           ECRef      OriginalRegulatedEntityName RegulatedEntityType    Value         OriginalDonorName  ...  DubiousData                  RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
127    NC0406709         Mr Richard Harrington Mp     Regulated Donee  12000.0       Intu Properties Plc  ...            0                     Small Entity            1                1                1
129    NC0406708         Mr Richard Harrington Mp     Regulated Donee  10000.0  Camelot Uk Lotteries Ltd  ...            0  Conservative And Unionist Party            1                1                1
882    NC0405863        The Rt Hon Sajid Javid Mp     Regulated Donee   2500.0      Hannafin Contractors  ...            0                Very Small Entity            1                1                1
1187   NC0404760                 Tom Pursglove Mp     Regulated Donee   1600.0        Best 4 U Mortgages  ...            0  Conservative And Unionist Party            1                1                1
1503   NC0405687  Conservative And Unionist Party     Political Party   3293.0  Morley Hayes Leisure Ltd  ...            0  Conservative And Unionist Party            1                1                1
...          ...                              ...                 ...      ...                       ...  ...          ...                              ...          ...              ...              ...
62669  NC0027815  Conservative And Unionist Party     Political Party   2500.0    Carlton Television Ltd  ...            0                     Labour Party            1                1                1
63903  NC0027507                     Labour Party     Political Party   6007.0          Bloomberg Uk Ltd  ...            0              Small Medium Entity            1                1                1
63907  NC0027508                     Labour Party     Political Party   5541.0          Bloomberg Uk Ltd  ...            0  Conservative And Unionist Party            1                1                1
65315  NC0319597  Conservative And Unionist Party     Political Party   8942.0   Dpk Contractors Limited  ...            0                              NaN            1                1                1
65674  NC0319545                     Labour Party     Political Party  16800.0  Fujitsu Services Limited  ...            0                              NaN            1                1                1

[603 rows x 40 columns],            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns], 'Sponsorship', 'filtered_keytarget_label')
2025/02/28 04:38:44 PM INFO:display_summary_statistics executed successfully
2025/02/28 04:38:44 PM INFO:Calling display_textual_insights with args=('filtered_keytarget_label', 'Sponsorship', datetime.date(2001, 5, 29), datetime.date(2019, 5, 30), {'unique_reg_entities': 24, 'unique_donors': 438, 'unique_donations': np.int64(603), 'total_value': np.float64(3438162.24), 'mean_value': np.float64(5701.761592039801), 'avg_donations_per_entity': np.float64(25.125), 'avg_value_per_entity': np.float64(4038.2009070347667), 'avg_donors_per_entity': np.float64(18.291666666666668), 'donors_stdev': np.float64(108.86382099549478), 'value_stdev': np.float64(2866.1446826218885), 'noofdonors_per_ent_stdev': np.float64(79.22147225763143)}, {'unique_reg_entities': 1324, 'unique_donors': 24066, 'unique_donations': np.int64(63939), 'total_value': np.float64(934089582.95), 'mean_value': np.float64(14609.074007256917), 'avg_donations_per_entity': np.float64(48.25584905660377), 'avg_value_per_entity': np.float64(9467.03590479101), 'avg_donors_per_entity': np.float64(20.86188679245283), 'donors_stdev': np.float64(819.2576959707048), 'value_stdev': np.float64(60679.81509488486), 'noofdonors_per_ent_stdev': np.float64(322.67849661732464)}, 0.5)
2025/02/28 04:38:44 PM INFO:display_textual_insights executed successfully
2025/02/28 04:38:44 PM INFO:Calling display_visualizations with args=(           ECRef      OriginalRegulatedEntityName RegulatedEntityType    Value         OriginalDonorName  ...  DubiousData                  RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
127    NC0406709         Mr Richard Harrington Mp     Regulated Donee  12000.0       Intu Properties Plc  ...            0                     Small Entity            1                1                1
129    NC0406708         Mr Richard Harrington Mp     Regulated Donee  10000.0  Camelot Uk Lotteries Ltd  ...            0  Conservative And Unionist Party            1                1                1
882    NC0405863        The Rt Hon Sajid Javid Mp     Regulated Donee   2500.0      Hannafin Contractors  ...            0                Very Small Entity            1                1                1
1187   NC0404760                 Tom Pursglove Mp     Regulated Donee   1600.0        Best 4 U Mortgages  ...            0  Conservative And Unionist Party            1                1                1
1503   NC0405687  Conservative And Unionist Party     Political Party   3293.0  Morley Hayes Leisure Ltd  ...            0  Conservative And Unionist Party            1                1                1
...          ...                              ...                 ...      ...                       ...  ...          ...                              ...          ...              ...              ...
62669  NC0027815  Conservative And Unionist Party     Political Party   2500.0    Carlton Television Ltd  ...            0                     Labour Party            1                1                1
63903  NC0027507                     Labour Party     Political Party   6007.0          Bloomberg Uk Ltd  ...            0              Small Medium Entity            1                1                1
63907  NC0027508                     Labour Party     Political Party   5541.0          Bloomberg Uk Ltd  ...            0  Conservative And Unionist Party            1                1                1
65315  NC0319597  Conservative And Unionist Party     Political Party   8942.0   Dpk Contractors Limited  ...            0                              NaN            1                1                1
65674  NC0319545                     Labour Party     Political Party  16800.0  Fujitsu Services Limited  ...            0                              NaN            1                1                1

[603 rows x 40 columns], 'Sponsorship', 'filtered_keytarget_label')
2025/02/28 04:38:44 PM INFO:Calling plot_bar_line_by_year with args=(           ECRef      OriginalRegulatedEntityName RegulatedEntityType    Value         OriginalDonorName  ...  DubiousData                  RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
127    NC0406709         Mr Richard Harrington Mp     Regulated Donee  12000.0       Intu Properties Plc  ...            0                     Small Entity            1                1                1
129    NC0406708         Mr Richard Harrington Mp     Regulated Donee  10000.0  Camelot Uk Lotteries Ltd  ...            0  Conservative And Unionist Party            1                1                1
882    NC0405863        The Rt Hon Sajid Javid Mp     Regulated Donee   2500.0      Hannafin Contractors  ...            0                Very Small Entity            1                1                1
1187   NC0404760                 Tom Pursglove Mp     Regulated Donee   1600.0        Best 4 U Mortgages  ...            0  Conservative And Unionist Party            1                1                1
1503   NC0405687  Conservative And Unionist Party     Political Party   3293.0  Morley Hayes Leisure Ltd  ...            0  Conservative And Unionist Party            1                1                1
...          ...                              ...                 ...      ...                       ...  ...          ...                              ...          ...              ...              ...
62669  NC0027815  Conservative And Unionist Party     Political Party   2500.0    Carlton Television Ltd  ...            0                     Labour Party            1                1                1
63903  NC0027507                     Labour Party     Political Party   6007.0          Bloomberg Uk Ltd  ...            0              Small Medium Entity            1                1                1
63907  NC0027508                     Labour Party     Political Party   5541.0          Bloomberg Uk Ltd  ...            0  Conservative And Unionist Party            1                1                1
65315  NC0319597  Conservative And Unionist Party     Political Party   8942.0   Dpk Contractors Limited  ...            0                              NaN            1                1                1
65674  NC0319545                     Labour Party     Political Party  16800.0  Fujitsu Services Limited  ...            0                              NaN            1                1                1

[603 rows x 40 columns],)
2025/02/28 04:38:44 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:38:45 PM INFO:Calling plot_bar_line_by_year with args=(           ECRef      OriginalRegulatedEntityName RegulatedEntityType    Value         OriginalDonorName  ...  DubiousData                  RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
127    NC0406709         Mr Richard Harrington Mp     Regulated Donee  12000.0       Intu Properties Plc  ...            0                     Small Entity            1                1                1
129    NC0406708         Mr Richard Harrington Mp     Regulated Donee  10000.0  Camelot Uk Lotteries Ltd  ...            0  Conservative And Unionist Party            1                1                1
882    NC0405863        The Rt Hon Sajid Javid Mp     Regulated Donee   2500.0      Hannafin Contractors  ...            0                Very Small Entity            1                1                1
1187   NC0404760                 Tom Pursglove Mp     Regulated Donee   1600.0        Best 4 U Mortgages  ...            0  Conservative And Unionist Party            1                1                1
1503   NC0405687  Conservative And Unionist Party     Political Party   3293.0  Morley Hayes Leisure Ltd  ...            0  Conservative And Unionist Party            1                1                1
...          ...                              ...                 ...      ...                       ...  ...          ...                              ...          ...              ...              ...
62669  NC0027815  Conservative And Unionist Party     Political Party   2500.0    Carlton Television Ltd  ...            0                     Labour Party            1                1                1
63903  NC0027507                     Labour Party     Political Party   6007.0          Bloomberg Uk Ltd  ...            0              Small Medium Entity            1                1                1
63907  NC0027508                     Labour Party     Political Party   5541.0          Bloomberg Uk Ltd  ...            0  Conservative And Unionist Party            1                1                1
65315  NC0319597  Conservative And Unionist Party     Political Party   8942.0   Dpk Contractors Limited  ...            0                              NaN            1                1                1
65674  NC0319545                     Labour Party     Political Party  16800.0  Fujitsu Services Limited  ...            0                              NaN            1                1                1

[603 rows x 40 columns],)
2025/02/28 04:38:45 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:38:45 PM INFO:display_visualizations executed successfully
2025/02/28 04:38:45 PM INFO:display_data_page executed successfully
2025/02/28 04:38:45 PM INFO:pagesetup executed successfully
2025/02/28 04:38:45 PM INFO:Calling firstload with args=()
2025/02/28 04:38:45 PM INFO:firstload executed successfully
2025/02/28 04:38:46 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/02/28 04:38:46 PM INFO:Setting up the package
2025/02/28 04:38:46 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/02/28 04:38:46 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',)
2025/02/28 04:38:46 PM INFO:get_git_version executed successfully
2025/02/28 04:38:46 PM INFO:Version: v20.111
2025/02/28 04:38:46 PM INFO:Calling initialize_session_state with args=()
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('BASE_DIR', 'H:\\VScode\\dashboard_demo-1')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('filenames', {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}})
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('PLACEHOLDER_DATE', Timestamp('1900-01-01 00:00:00'))
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('PLACEHOLDER_ID', 1000001)
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('thresholds', {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'})
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('data_remappings', {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}})
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('filter_def', {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}})
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('security', {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''})
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('perc_target', 0.5)
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('reference_dir', 'H:\\VScode\\dashboard_demo-1\\reference_files')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('data_dir', 'H:\\VScode\\dashboard_demo-1\\data')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('output_dir', 'H:\\VScode\\dashboard_demo-1\\output')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('logs_dir', 'H:\\VScode\\dashboard_demo-1\\logs')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('components_dir', 'H:\\VScode\\dashboard_demo-1\\components')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('app_pages_dir', 'H:\\VScode\\dashboard_demo-1\\app_pages')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('utils_dir', 'H:\\VScode\\dashboard_demo-1\\utils')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('Donor_dedupe_cleaned_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\Donor_dedupe_cleaned_data.csv')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('ListofPoliticalPeople_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople.csv')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('mppartymemb_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\mppartymemb_pypd.csv')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('donor_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalDonorsDeDuped.csv')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('politician_party_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople_Final.csv')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('regentity_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalEntityDeDuped.csv')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('potential_donor_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_donor_duplicates.csv')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('potential_regulatedentity_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_regentiity_duplicates.csv')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('original_data_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\original_data.csv')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('CREDENTIALS_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_credentials.json')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('TEXT_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_text.json')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('cleaned_data_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_data.csv')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('cleaned_donations_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donations.csv')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('cleaned_donorlist_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donorlist.csv')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('cleaned_regentity_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_regentity.csv')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('party_summary_fname', 'H:\\VScode\\dashboard_demo-1\\output\\party_summary.csv')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'Donations_accepted_by_political_parties.csv')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Calling init_state_var with args=('Cash_ftr', {'DonationType': 'Cash'})
2025/02/28 04:38:46 PM INFO:init_state_var executed successfully
2025/02/28 04:38:46 PM INFO:Session_state variables initialized
2025/02/28 04:38:46 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/02/28 04:38:46 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1319             Yorkshire Party         1000.00               1   1000.000000  Single Donation Entity
1320   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1321               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1322             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1323               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity

[1324 rows x 5 columns]
2025/02/28 04:38:46 PM INFO:perc_target: 0.5
2025/02/28 04:38:46 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/02/28 04:38:46 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/02/28 04:38:46 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/02/28 04:38:46 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/02/28 04:38:46 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/02/28 04:38:46 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/02/28 04:38:47 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[63939 rows x 40 columns]
2025/02/28 04:38:47 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/02/28 04:38:47 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/02/28 04:38:47 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/02/28 04:38:47 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/02/28 04:38:47 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/02/28 04:38:47 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/02/28 04:38:47 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/02/28 04:38:47 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/02/28 04:38:47 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/02/28 04:38:47 PM INFO:directories: {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/02/28 04:38:47 PM INFO:data_regentity:       RegulatedEntityId                Regulated Entity Name           Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                    English Democrats  Conservative And Unionist Party         10500.00                1   10500.000000
1                  17.0                    English Democrats                     Labour Party         13500.00                5    2700.000000
2                  17.0                    English Democrats                Liberal Democrats         66500.00                3   22166.666667
3                  17.0                    English Democrats              Small Medium Entity          1500.00                1    1500.000000
4                  17.0                    English Democrats                Very Small Entity          7000.00                1    7000.000000
...                 ...                                  ...                              ...              ...              ...            ...
3573            10264.0                        Robert Largan           Single Donation Entity          2000.00                1    2000.000000
3574            10265.0                           Jane Dodds                Liberal Democrats          3529.41                2    1764.705000
3575            10266.0                          Phil Wilson                Very Small Entity          2000.00                1    2000.000000
3576            10267.0  Scottish Unionist Association Trust                     Labour Party        207350.07                2  103675.035000
3577            10267.0  Scottish Unionist Association Trust                Liberal Democrats         11520.00                1   11520.000000

[3578 rows x 6 columns]
2025/02/28 04:38:47 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/02/28 04:38:47 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/02/28 04:38:47 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/02/28 04:38:47 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/02/28 04:38:47 PM INFO:filter_def: {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/02/28 04:38:47 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/02/28 04:38:47 PM INFO:menu_selection: {'title': 'Paid Visits', 'function': <function mod_visits_page at 0x000001FF1A3596C0>}
2025/02/28 04:38:47 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/02/28 04:38:47 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/02/28 04:38:47 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/02/28 04:38:47 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns]
2025/02/28 04:38:47 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/02/28 04:38:47 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/02/28 04:38:47 PM INFO:PLACEHOLDER_ID: 1000001
2025/02/28 04:38:47 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/02/28 04:38:47 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/02/28 04:38:47 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/02/28 04:38:47 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         53000.00                2   26500.000000
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         26625.00                3    8875.000000
3            4.0        Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                    Bridgwater Trust          7700.00                3    2566.666667
...          ...                                 ...              ...              ...            ...
29493    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
29494  1000001.0             Not Recorded 1900-01-01         17500.00                2    8750.000000
29495  1000001.0             Not Recorded 1961-01-01         11454.00                2    5727.000000
29496  1000001.0             Not Recorded 1995-05-10         27938.19                2   13969.095000
29497  1000001.0                  Unidentified Donor        728205.67               92    7915.279022

[29498 rows x 5 columns]
2025/02/28 04:38:47 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/02/28 04:38:47 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/02/28 04:38:47 PM INFO:Session state Setup complete
2025/02/28 04:38:47 PM INFO:initialize_session_state executed successfully
2025/02/28 04:38:47 PM INFO:Package setup complete
2025/02/28 04:38:47 PM INFO:Calling pagesetup with args=()
2025/02/28 04:38:47 PM INFO:Calling get_git_version with args=()
2025/02/28 04:38:47 PM INFO:get_git_version executed successfully
2025/02/28 04:38:47 PM INFO:App Version: v20.126
2025/02/28 04:38:47 PM INFO:Switched to page: Paid Visits
2025/02/28 04:38:47 PM INFO:Calling display_data_page with args=('DonatedVisits_ftr', 'Donated Visit')
2025/02/28 04:38:47 PM INFO:Calling load_and_filter_data with args=('DonatedVisits_ftr', 'filtered_keytarget_label')
2025/02/28 04:38:47 PM INFO:Calling load_cleaned_data with args=()
2025/02/28 04:38:49 PM INFO:Cleaned Data completed, shape: (63939, 40)
2025/02/28 04:38:49 PM INFO:load_cleaned_data executed successfully
2025/02/28 04:38:50 PM INFO:load_and_filter_data executed successfully
2025/02/28 04:38:50 PM INFO:Calling display_summary_statistics with args=(          ECRef   OriginalRegulatedEntityName RegulatedEntityType    Value                                  OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
10     V0408145             Mr John Howell Mp     Regulated Donee  7085.46                 Chartered Institute Of Arbitrators  ...            0    Very Small Entity            1                1                1
21     V0408129          Mr Andrew Bridgen Mp     Regulated Donee  3300.00                               Mere Plantations Ltd  ...            0    Very Small Entity            1                1                1
22     V0408190            Sir David Amess Mp     Regulated Donee  2553.00  Yunus Emre Enstitüsü (Yunus Emre Institute) & ...  ...            0  Small Medium Entity            1                1                1
50     V0407538                  Scott Benton     Regulated Donee  2500.00                     Conservative Friends Of Israel  ...            0  Small Medium Entity            1                1                1
51     V0408156        Mr Andrew Rosindell Mp     Regulated Donee  2580.00           Conservative Friends Of Israel (Cfi Ltd)  ...            0  Small Medium Entity            1                1                1
...         ...                           ...                 ...      ...                                                ...  ...          ...                  ...          ...              ...              ...
62692  V0032900          Mr Parmjit Dhanda Mp     Regulated Donee  2000.00                                    Duke University  ...            1         Labour Party            1                1                1
62711  V0032318  The Rt Hon George Osborne Mp     Regulated Donee  1891.60                            The Close Up Foundation  ...            1         Labour Party            1                1                1
63085  V0032453           Ms Jean Lambert Mep     Regulated Donee   369.24  Org. Committee World Conference Against Atomic...  ...            1    Liberal Democrats            1                1                1
64035  V0032219        Lord Richard Inglewood     Regulated Donee  3500.00            Taipei Representative Office In Belgium  ...            1                  NaN            1                1                1
64327  V0032217                  Mr Roy Perry     Regulated Donee  3000.00                 Arab - British Chamber Of Commerce  ...            1                  NaN            1                1                1

[2605 rows x 40 columns],            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns], 'Donated Visit', 'filtered_keytarget_label')
2025/02/28 04:38:50 PM INFO:display_summary_statistics executed successfully
2025/02/28 04:38:50 PM INFO:Calling display_textual_insights with args=('filtered_keytarget_label', 'Donated Visit', datetime.date(2001, 5, 1), datetime.date(2019, 8, 29), {'unique_reg_entities': 757, 'unique_donors': 1062, 'unique_donations': np.int64(2605), 'total_value': np.float64(8996325.77), 'mean_value': np.float64(3453.483980806142), 'avg_donations_per_entity': np.float64(3.441215323645971), 'avg_value_per_entity': np.float64(3303.195575446386), 'avg_donors_per_entity': np.float64(3.047556142668428), 'donors_stdev': np.float64(4.1580282010869904), 'value_stdev': np.float64(1807.2948541344042), 'noofdonors_per_ent_stdev': np.float64(3.3278303740571378)}, {'unique_reg_entities': 1324, 'unique_donors': 24066, 'unique_donations': np.int64(63939), 'total_value': np.float64(934089582.95), 'mean_value': np.float64(14609.074007256917), 'avg_donations_per_entity': np.float64(48.25584905660377), 'avg_value_per_entity': np.float64(9467.03590479101), 'avg_donors_per_entity': np.float64(20.86188679245283), 'donors_stdev': np.float64(819.2576959707048), 'value_stdev': np.float64(60679.81509488486), 'noofdonors_per_ent_stdev': np.float64(322.67849661732464)}, 0.5)
2025/02/28 04:38:50 PM INFO:display_textual_insights executed successfully
2025/02/28 04:38:50 PM INFO:Calling display_visualizations with args=(          ECRef   OriginalRegulatedEntityName RegulatedEntityType    Value                                  OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
10     V0408145             Mr John Howell Mp     Regulated Donee  7085.46                 Chartered Institute Of Arbitrators  ...            0    Very Small Entity            1                1                1
21     V0408129          Mr Andrew Bridgen Mp     Regulated Donee  3300.00                               Mere Plantations Ltd  ...            0    Very Small Entity            1                1                1
22     V0408190            Sir David Amess Mp     Regulated Donee  2553.00  Yunus Emre Enstitüsü (Yunus Emre Institute) & ...  ...            0  Small Medium Entity            1                1                1
50     V0407538                  Scott Benton     Regulated Donee  2500.00                     Conservative Friends Of Israel  ...            0  Small Medium Entity            1                1                1
51     V0408156        Mr Andrew Rosindell Mp     Regulated Donee  2580.00           Conservative Friends Of Israel (Cfi Ltd)  ...            0  Small Medium Entity            1                1                1
...         ...                           ...                 ...      ...                                                ...  ...          ...                  ...          ...              ...              ...
62692  V0032900          Mr Parmjit Dhanda Mp     Regulated Donee  2000.00                                    Duke University  ...            1         Labour Party            1                1                1
62711  V0032318  The Rt Hon George Osborne Mp     Regulated Donee  1891.60                            The Close Up Foundation  ...            1         Labour Party            1                1                1
63085  V0032453           Ms Jean Lambert Mep     Regulated Donee   369.24  Org. Committee World Conference Against Atomic...  ...            1    Liberal Democrats            1                1                1
64035  V0032219        Lord Richard Inglewood     Regulated Donee  3500.00            Taipei Representative Office In Belgium  ...            1                  NaN            1                1                1
64327  V0032217                  Mr Roy Perry     Regulated Donee  3000.00                 Arab - British Chamber Of Commerce  ...            1                  NaN            1                1                1

[2605 rows x 40 columns], 'Donated Visit', 'filtered_keytarget_label')
2025/02/28 04:38:50 PM INFO:Calling plot_bar_line_by_year with args=(          ECRef   OriginalRegulatedEntityName RegulatedEntityType    Value                                  OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
10     V0408145             Mr John Howell Mp     Regulated Donee  7085.46                 Chartered Institute Of Arbitrators  ...            0    Very Small Entity            1                1                1
21     V0408129          Mr Andrew Bridgen Mp     Regulated Donee  3300.00                               Mere Plantations Ltd  ...            0    Very Small Entity            1                1                1
22     V0408190            Sir David Amess Mp     Regulated Donee  2553.00  Yunus Emre Enstitüsü (Yunus Emre Institute) & ...  ...            0  Small Medium Entity            1                1                1
50     V0407538                  Scott Benton     Regulated Donee  2500.00                     Conservative Friends Of Israel  ...            0  Small Medium Entity            1                1                1
51     V0408156        Mr Andrew Rosindell Mp     Regulated Donee  2580.00           Conservative Friends Of Israel (Cfi Ltd)  ...            0  Small Medium Entity            1                1                1
...         ...                           ...                 ...      ...                                                ...  ...          ...                  ...          ...              ...              ...
62692  V0032900          Mr Parmjit Dhanda Mp     Regulated Donee  2000.00                                    Duke University  ...            1         Labour Party            1                1                1
62711  V0032318  The Rt Hon George Osborne Mp     Regulated Donee  1891.60                            The Close Up Foundation  ...            1         Labour Party            1                1                1
63085  V0032453           Ms Jean Lambert Mep     Regulated Donee   369.24  Org. Committee World Conference Against Atomic...  ...            1    Liberal Democrats            1                1                1
64035  V0032219        Lord Richard Inglewood     Regulated Donee  3500.00            Taipei Representative Office In Belgium  ...            1                  NaN            1                1                1
64327  V0032217                  Mr Roy Perry     Regulated Donee  3000.00                 Arab - British Chamber Of Commerce  ...            1                  NaN            1                1                1

[2605 rows x 40 columns],)
2025/02/28 04:38:50 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:38:50 PM INFO:Calling plot_bar_line_by_year with args=(          ECRef   OriginalRegulatedEntityName RegulatedEntityType    Value                                  OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
10     V0408145             Mr John Howell Mp     Regulated Donee  7085.46                 Chartered Institute Of Arbitrators  ...            0    Very Small Entity            1                1                1
21     V0408129          Mr Andrew Bridgen Mp     Regulated Donee  3300.00                               Mere Plantations Ltd  ...            0    Very Small Entity            1                1                1
22     V0408190            Sir David Amess Mp     Regulated Donee  2553.00  Yunus Emre Enstitüsü (Yunus Emre Institute) & ...  ...            0  Small Medium Entity            1                1                1
50     V0407538                  Scott Benton     Regulated Donee  2500.00                     Conservative Friends Of Israel  ...            0  Small Medium Entity            1                1                1
51     V0408156        Mr Andrew Rosindell Mp     Regulated Donee  2580.00           Conservative Friends Of Israel (Cfi Ltd)  ...            0  Small Medium Entity            1                1                1
...         ...                           ...                 ...      ...                                                ...  ...          ...                  ...          ...              ...              ...
62692  V0032900          Mr Parmjit Dhanda Mp     Regulated Donee  2000.00                                    Duke University  ...            1         Labour Party            1                1                1
62711  V0032318  The Rt Hon George Osborne Mp     Regulated Donee  1891.60                            The Close Up Foundation  ...            1         Labour Party            1                1                1
63085  V0032453           Ms Jean Lambert Mep     Regulated Donee   369.24  Org. Committee World Conference Against Atomic...  ...            1    Liberal Democrats            1                1                1
64035  V0032219        Lord Richard Inglewood     Regulated Donee  3500.00            Taipei Representative Office In Belgium  ...            1                  NaN            1                1                1
64327  V0032217                  Mr Roy Perry     Regulated Donee  3000.00                 Arab - British Chamber Of Commerce  ...            1                  NaN            1                1                1

[2605 rows x 40 columns],)
2025/02/28 04:38:50 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:38:50 PM INFO:display_visualizations executed successfully
2025/02/28 04:38:50 PM INFO:display_data_page executed successfully
2025/02/28 04:38:50 PM INFO:pagesetup executed successfully
2025/02/28 04:38:50 PM INFO:Calling firstload with args=()
2025/02/28 04:38:50 PM INFO:firstload executed successfully
2025/02/28 04:38:51 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/02/28 04:38:51 PM INFO:Setting up the package
2025/02/28 04:38:51 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/02/28 04:38:51 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',)
2025/02/28 04:38:52 PM INFO:get_git_version executed successfully
2025/02/28 04:38:52 PM INFO:Version: v20.111
2025/02/28 04:38:52 PM INFO:Calling initialize_session_state with args=()
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('BASE_DIR', 'H:\\VScode\\dashboard_demo-1')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('filenames', {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}})
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('PLACEHOLDER_DATE', Timestamp('1900-01-01 00:00:00'))
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('PLACEHOLDER_ID', 1000001)
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('thresholds', {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'})
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('data_remappings', {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}})
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('filter_def', {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}})
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('security', {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''})
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('perc_target', 0.5)
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('reference_dir', 'H:\\VScode\\dashboard_demo-1\\reference_files')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('data_dir', 'H:\\VScode\\dashboard_demo-1\\data')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('output_dir', 'H:\\VScode\\dashboard_demo-1\\output')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('logs_dir', 'H:\\VScode\\dashboard_demo-1\\logs')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('components_dir', 'H:\\VScode\\dashboard_demo-1\\components')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('app_pages_dir', 'H:\\VScode\\dashboard_demo-1\\app_pages')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('utils_dir', 'H:\\VScode\\dashboard_demo-1\\utils')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('Donor_dedupe_cleaned_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\Donor_dedupe_cleaned_data.csv')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('ListofPoliticalPeople_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople.csv')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('mppartymemb_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\mppartymemb_pypd.csv')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('donor_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalDonorsDeDuped.csv')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('politician_party_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople_Final.csv')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('regentity_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalEntityDeDuped.csv')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('potential_donor_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_donor_duplicates.csv')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('potential_regulatedentity_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_regentiity_duplicates.csv')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('original_data_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\original_data.csv')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('CREDENTIALS_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_credentials.json')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('TEXT_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_text.json')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('cleaned_data_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_data.csv')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('cleaned_donations_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donations.csv')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('cleaned_donorlist_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donorlist.csv')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('cleaned_regentity_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_regentity.csv')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('party_summary_fname', 'H:\\VScode\\dashboard_demo-1\\output\\party_summary.csv')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'Donations_accepted_by_political_parties.csv')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Calling init_state_var with args=('Cash_ftr', {'DonationType': 'Cash'})
2025/02/28 04:38:52 PM INFO:init_state_var executed successfully
2025/02/28 04:38:52 PM INFO:Session_state variables initialized
2025/02/28 04:38:52 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/02/28 04:38:52 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1319             Yorkshire Party         1000.00               1   1000.000000  Single Donation Entity
1320   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1321               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1322             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1323               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity

[1324 rows x 5 columns]
2025/02/28 04:38:52 PM INFO:perc_target: 0.5
2025/02/28 04:38:52 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/02/28 04:38:52 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/02/28 04:38:52 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/02/28 04:38:52 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/02/28 04:38:52 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/02/28 04:38:52 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/02/28 04:38:52 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[63939 rows x 40 columns]
2025/02/28 04:38:52 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/02/28 04:38:52 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/02/28 04:38:52 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/02/28 04:38:52 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/02/28 04:38:52 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/02/28 04:38:52 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/02/28 04:38:52 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/02/28 04:38:52 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/02/28 04:38:52 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/02/28 04:38:52 PM INFO:directories: {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/02/28 04:38:52 PM INFO:data_regentity:       RegulatedEntityId                Regulated Entity Name           Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                    English Democrats  Conservative And Unionist Party         10500.00                1   10500.000000
1                  17.0                    English Democrats                     Labour Party         13500.00                5    2700.000000
2                  17.0                    English Democrats                Liberal Democrats         66500.00                3   22166.666667
3                  17.0                    English Democrats              Small Medium Entity          1500.00                1    1500.000000
4                  17.0                    English Democrats                Very Small Entity          7000.00                1    7000.000000
...                 ...                                  ...                              ...              ...              ...            ...
3573            10264.0                        Robert Largan           Single Donation Entity          2000.00                1    2000.000000
3574            10265.0                           Jane Dodds                Liberal Democrats          3529.41                2    1764.705000
3575            10266.0                          Phil Wilson                Very Small Entity          2000.00                1    2000.000000
3576            10267.0  Scottish Unionist Association Trust                     Labour Party        207350.07                2  103675.035000
3577            10267.0  Scottish Unionist Association Trust                Liberal Democrats         11520.00                1   11520.000000

[3578 rows x 6 columns]
2025/02/28 04:38:52 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/02/28 04:38:52 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/02/28 04:38:52 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/02/28 04:38:52 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/02/28 04:38:52 PM INFO:filter_def: {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/02/28 04:38:52 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/02/28 04:38:52 PM INFO:menu_selection: {'title': 'Dubious Donors', 'function': <function mod_dubious_donations_page at 0x000001FF1A35AD40>}
2025/02/28 04:38:52 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/02/28 04:38:52 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/02/28 04:38:52 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/02/28 04:38:52 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns]
2025/02/28 04:38:52 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/02/28 04:38:52 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/02/28 04:38:52 PM INFO:PLACEHOLDER_ID: 1000001
2025/02/28 04:38:52 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/02/28 04:38:52 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/02/28 04:38:52 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/02/28 04:38:52 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         53000.00                2   26500.000000
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         26625.00                3    8875.000000
3            4.0        Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                    Bridgwater Trust          7700.00                3    2566.666667
...          ...                                 ...              ...              ...            ...
29493    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
29494  1000001.0             Not Recorded 1900-01-01         17500.00                2    8750.000000
29495  1000001.0             Not Recorded 1961-01-01         11454.00                2    5727.000000
29496  1000001.0             Not Recorded 1995-05-10         27938.19                2   13969.095000
29497  1000001.0                  Unidentified Donor        728205.67               92    7915.279022

[29498 rows x 5 columns]
2025/02/28 04:38:52 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/02/28 04:38:52 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/02/28 04:38:52 PM INFO:Session state Setup complete
2025/02/28 04:38:52 PM INFO:initialize_session_state executed successfully
2025/02/28 04:38:52 PM INFO:Package setup complete
2025/02/28 04:38:52 PM INFO:Calling pagesetup with args=()
2025/02/28 04:38:52 PM INFO:Calling get_git_version with args=()
2025/02/28 04:38:52 PM INFO:get_git_version executed successfully
2025/02/28 04:38:52 PM INFO:App Version: v20.126
2025/02/28 04:38:52 PM INFO:Switched to page: Dubious Donors
2025/02/28 04:38:52 PM INFO:Calling display_data_page with args=('DubiousDonors_ftr', 'Dubious Donor')
2025/02/28 04:38:52 PM INFO:Calling load_and_filter_data with args=('DubiousDonors_ftr', 'filtered_keytarget_label')
2025/02/28 04:38:52 PM INFO:Calling load_cleaned_data with args=()
2025/02/28 04:38:55 PM INFO:Cleaned Data completed, shape: (63939, 40)
2025/02/28 04:38:55 PM INFO:load_cleaned_data executed successfully
2025/02/28 04:38:55 PM INFO:load_and_filter_data executed successfully
2025/02/28 04:38:55 PM INFO:Calling display_summary_statistics with args=(           ECRef                    OriginalRegulatedEntityName RegulatedEntityType     Value            OriginalDonorName  ...  DubiousData                  RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
13942   C0211283                Conservative And Unionist Party     Political Party   1250.00           Ms Louise D Mensch  ...            5  Conservative And Unionist Party            1                1                1
15185   C0203501                Conservative And Unionist Party     Political Party   1250.00           Ms Louise D Mensch  ...            5                Liberal Democrats            1                1                1
15238   C0203507                Conservative And Unionist Party     Political Party   3000.00           Ms Louise D Mensch  ...            4                     Labour Party            1                1                1
16423   C0194296                Conservative And Unionist Party     Political Party   5000.00           Ms Louise D Mensch  ...            4                     Labour Party            1                1                1
17245   C0194547                Conservative And Unionist Party     Political Party   2000.00           Ms Louise D Mensch  ...            4  Conservative And Unionist Party            1                1                1
...          ...                                            ...                 ...       ...                          ...  ...          ...                              ...          ...              ...              ...
65997  TV0036261  Society For The Protection Of Unborn Children         Third Party  27700.00           Unidentified Donor  ...            4                              NaN            1                1                1
66002   I0033983                Conservative And Unionist Party     Political Party   5900.00            Mr Roger Fletcher  ...            2                              NaN            1                1                1
66003   I0088673                              Liberal Democrats     Political Party   1000.00  St Cross Consulting Limited  ...            2                              NaN            1                1                1
66004   I0034020                              Liberal Democrats     Political Party   1000.00          Mr Ghazi Al-Jumaily  ...            2                              NaN            1                1                1
66005  TV0049377                                Labour No To Av         Third Party   5382.31           Unidentified Donor  ...            4                              NaN            1                1                1

[355 rows x 40 columns],            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns], 'Dubious Donor', 'filtered_keytarget_label')
2025/02/28 04:38:55 PM INFO:display_summary_statistics executed successfully
2025/02/28 04:38:55 PM INFO:Calling display_textual_insights with args=('filtered_keytarget_label', 'Dubious Donor', datetime.date(2001, 2, 21), datetime.date(2019, 6, 25), {'unique_reg_entities': 84, 'unique_donors': 255, 'unique_donations': np.int64(355), 'total_value': np.float64(1579956.98), 'mean_value': np.float64(4450.583042253521), 'avg_donations_per_entity': np.float64(4.226190476190476), 'avg_value_per_entity': np.float64(7095.520934832521), 'avg_donors_per_entity': np.float64(3.5952380952380953), 'donors_stdev': np.float64(14.838367063794726), 'value_stdev': np.float64(8161.073888832799), 'noofdonors_per_ent_stdev': np.float64(12.949502523466998)}, {'unique_reg_entities': 1324, 'unique_donors': 24066, 'unique_donations': np.int64(63939), 'total_value': np.float64(934089582.95), 'mean_value': np.float64(14609.074007256917), 'avg_donations_per_entity': np.float64(48.25584905660377), 'avg_value_per_entity': np.float64(9467.03590479101), 'avg_donors_per_entity': np.float64(20.86188679245283), 'donors_stdev': np.float64(819.2576959707048), 'value_stdev': np.float64(60679.81509488486), 'noofdonors_per_ent_stdev': np.float64(322.67849661732464)}, 0.5)
2025/02/28 04:38:55 PM INFO:display_textual_insights executed successfully
2025/02/28 04:38:55 PM INFO:Calling display_visualizations with args=(           ECRef                    OriginalRegulatedEntityName RegulatedEntityType     Value            OriginalDonorName  ...  DubiousData                  RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
13942   C0211283                Conservative And Unionist Party     Political Party   1250.00           Ms Louise D Mensch  ...            5  Conservative And Unionist Party            1                1                1
15185   C0203501                Conservative And Unionist Party     Political Party   1250.00           Ms Louise D Mensch  ...            5                Liberal Democrats            1                1                1
15238   C0203507                Conservative And Unionist Party     Political Party   3000.00           Ms Louise D Mensch  ...            4                     Labour Party            1                1                1
16423   C0194296                Conservative And Unionist Party     Political Party   5000.00           Ms Louise D Mensch  ...            4                     Labour Party            1                1                1
17245   C0194547                Conservative And Unionist Party     Political Party   2000.00           Ms Louise D Mensch  ...            4  Conservative And Unionist Party            1                1                1
...          ...                                            ...                 ...       ...                          ...  ...          ...                              ...          ...              ...              ...
65997  TV0036261  Society For The Protection Of Unborn Children         Third Party  27700.00           Unidentified Donor  ...            4                              NaN            1                1                1
66002   I0033983                Conservative And Unionist Party     Political Party   5900.00            Mr Roger Fletcher  ...            2                              NaN            1                1                1
66003   I0088673                              Liberal Democrats     Political Party   1000.00  St Cross Consulting Limited  ...            2                              NaN            1                1                1
66004   I0034020                              Liberal Democrats     Political Party   1000.00          Mr Ghazi Al-Jumaily  ...            2                              NaN            1                1                1
66005  TV0049377                                Labour No To Av         Third Party   5382.31           Unidentified Donor  ...            4                              NaN            1                1                1

[355 rows x 40 columns], 'Dubious Donor', 'filtered_keytarget_label')
2025/02/28 04:38:55 PM INFO:Calling plot_bar_line_by_year with args=(           ECRef                    OriginalRegulatedEntityName RegulatedEntityType     Value            OriginalDonorName  ...  DubiousData                  RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
13942   C0211283                Conservative And Unionist Party     Political Party   1250.00           Ms Louise D Mensch  ...            5  Conservative And Unionist Party            1                1                1
15185   C0203501                Conservative And Unionist Party     Political Party   1250.00           Ms Louise D Mensch  ...            5                Liberal Democrats            1                1                1
15238   C0203507                Conservative And Unionist Party     Political Party   3000.00           Ms Louise D Mensch  ...            4                     Labour Party            1                1                1
16423   C0194296                Conservative And Unionist Party     Political Party   5000.00           Ms Louise D Mensch  ...            4                     Labour Party            1                1                1
17245   C0194547                Conservative And Unionist Party     Political Party   2000.00           Ms Louise D Mensch  ...            4  Conservative And Unionist Party            1                1                1
...          ...                                            ...                 ...       ...                          ...  ...          ...                              ...          ...              ...              ...
65997  TV0036261  Society For The Protection Of Unborn Children         Third Party  27700.00           Unidentified Donor  ...            4                              NaN            1                1                1
66002   I0033983                Conservative And Unionist Party     Political Party   5900.00            Mr Roger Fletcher  ...            2                              NaN            1                1                1
66003   I0088673                              Liberal Democrats     Political Party   1000.00  St Cross Consulting Limited  ...            2                              NaN            1                1                1
66004   I0034020                              Liberal Democrats     Political Party   1000.00          Mr Ghazi Al-Jumaily  ...            2                              NaN            1                1                1
66005  TV0049377                                Labour No To Av         Third Party   5382.31           Unidentified Donor  ...            4                              NaN            1                1                1

[355 rows x 40 columns],)
2025/02/28 04:38:56 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:38:56 PM INFO:Calling plot_bar_line_by_year with args=(           ECRef                    OriginalRegulatedEntityName RegulatedEntityType     Value            OriginalDonorName  ...  DubiousData                  RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
13942   C0211283                Conservative And Unionist Party     Political Party   1250.00           Ms Louise D Mensch  ...            5  Conservative And Unionist Party            1                1                1
15185   C0203501                Conservative And Unionist Party     Political Party   1250.00           Ms Louise D Mensch  ...            5                Liberal Democrats            1                1                1
15238   C0203507                Conservative And Unionist Party     Political Party   3000.00           Ms Louise D Mensch  ...            4                     Labour Party            1                1                1
16423   C0194296                Conservative And Unionist Party     Political Party   5000.00           Ms Louise D Mensch  ...            4                     Labour Party            1                1                1
17245   C0194547                Conservative And Unionist Party     Political Party   2000.00           Ms Louise D Mensch  ...            4  Conservative And Unionist Party            1                1                1
...          ...                                            ...                 ...       ...                          ...  ...          ...                              ...          ...              ...              ...
65997  TV0036261  Society For The Protection Of Unborn Children         Third Party  27700.00           Unidentified Donor  ...            4                              NaN            1                1                1
66002   I0033983                Conservative And Unionist Party     Political Party   5900.00            Mr Roger Fletcher  ...            2                              NaN            1                1                1
66003   I0088673                              Liberal Democrats     Political Party   1000.00  St Cross Consulting Limited  ...            2                              NaN            1                1                1
66004   I0034020                              Liberal Democrats     Political Party   1000.00          Mr Ghazi Al-Jumaily  ...            2                              NaN            1                1                1
66005  TV0049377                                Labour No To Av         Third Party   5382.31           Unidentified Donor  ...            4                              NaN            1                1                1

[355 rows x 40 columns],)
2025/02/28 04:38:56 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:38:56 PM INFO:display_visualizations executed successfully
2025/02/28 04:38:56 PM INFO:display_data_page executed successfully
2025/02/28 04:38:56 PM INFO:pagesetup executed successfully
2025/02/28 04:38:56 PM INFO:Calling firstload with args=()
2025/02/28 04:38:56 PM INFO:firstload executed successfully
2025/02/28 04:38:56 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/02/28 04:38:56 PM INFO:Setting up the package
2025/02/28 04:38:56 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/02/28 04:38:56 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',)
2025/02/28 04:38:56 PM INFO:get_git_version executed successfully
2025/02/28 04:38:56 PM INFO:Version: v20.111
2025/02/28 04:38:56 PM INFO:Calling initialize_session_state with args=()
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('BASE_DIR', 'H:\\VScode\\dashboard_demo-1')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('filenames', {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}})
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('PLACEHOLDER_DATE', Timestamp('1900-01-01 00:00:00'))
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('PLACEHOLDER_ID', 1000001)
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('thresholds', {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'})
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('data_remappings', {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}})
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('filter_def', {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}})
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('security', {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''})
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('perc_target', 0.5)
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('reference_dir', 'H:\\VScode\\dashboard_demo-1\\reference_files')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('data_dir', 'H:\\VScode\\dashboard_demo-1\\data')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('output_dir', 'H:\\VScode\\dashboard_demo-1\\output')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('logs_dir', 'H:\\VScode\\dashboard_demo-1\\logs')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('components_dir', 'H:\\VScode\\dashboard_demo-1\\components')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('app_pages_dir', 'H:\\VScode\\dashboard_demo-1\\app_pages')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('utils_dir', 'H:\\VScode\\dashboard_demo-1\\utils')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('Donor_dedupe_cleaned_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\Donor_dedupe_cleaned_data.csv')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('ListofPoliticalPeople_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople.csv')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('mppartymemb_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\mppartymemb_pypd.csv')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('donor_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalDonorsDeDuped.csv')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('politician_party_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople_Final.csv')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('regentity_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalEntityDeDuped.csv')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('potential_donor_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_donor_duplicates.csv')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('potential_regulatedentity_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_regentiity_duplicates.csv')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('original_data_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\original_data.csv')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('CREDENTIALS_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_credentials.json')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('TEXT_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_text.json')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('cleaned_data_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_data.csv')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('cleaned_donations_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donations.csv')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('cleaned_donorlist_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donorlist.csv')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('cleaned_regentity_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_regentity.csv')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('party_summary_fname', 'H:\\VScode\\dashboard_demo-1\\output\\party_summary.csv')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'Donations_accepted_by_political_parties.csv')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Calling init_state_var with args=('Cash_ftr', {'DonationType': 'Cash'})
2025/02/28 04:38:56 PM INFO:init_state_var executed successfully
2025/02/28 04:38:56 PM INFO:Session_state variables initialized
2025/02/28 04:38:56 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/02/28 04:38:56 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1319             Yorkshire Party         1000.00               1   1000.000000  Single Donation Entity
1320   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1321               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1322             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1323               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity

[1324 rows x 5 columns]
2025/02/28 04:38:56 PM INFO:perc_target: 0.5
2025/02/28 04:38:56 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/02/28 04:38:56 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/02/28 04:38:56 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/02/28 04:38:56 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/02/28 04:38:56 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/02/28 04:38:56 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/02/28 04:38:56 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[63939 rows x 40 columns]
2025/02/28 04:38:56 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/02/28 04:38:56 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/02/28 04:38:56 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/02/28 04:38:56 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/02/28 04:38:56 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/02/28 04:38:56 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/02/28 04:38:56 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/02/28 04:38:56 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/02/28 04:38:56 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/02/28 04:38:56 PM INFO:directories: {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/02/28 04:38:56 PM INFO:data_regentity:       RegulatedEntityId                Regulated Entity Name           Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                    English Democrats  Conservative And Unionist Party         10500.00                1   10500.000000
1                  17.0                    English Democrats                     Labour Party         13500.00                5    2700.000000
2                  17.0                    English Democrats                Liberal Democrats         66500.00                3   22166.666667
3                  17.0                    English Democrats              Small Medium Entity          1500.00                1    1500.000000
4                  17.0                    English Democrats                Very Small Entity          7000.00                1    7000.000000
...                 ...                                  ...                              ...              ...              ...            ...
3573            10264.0                        Robert Largan           Single Donation Entity          2000.00                1    2000.000000
3574            10265.0                           Jane Dodds                Liberal Democrats          3529.41                2    1764.705000
3575            10266.0                          Phil Wilson                Very Small Entity          2000.00                1    2000.000000
3576            10267.0  Scottish Unionist Association Trust                     Labour Party        207350.07                2  103675.035000
3577            10267.0  Scottish Unionist Association Trust                Liberal Democrats         11520.00                1   11520.000000

[3578 rows x 6 columns]
2025/02/28 04:38:56 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/02/28 04:38:56 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/02/28 04:38:56 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/02/28 04:38:56 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/02/28 04:38:56 PM INFO:filter_def: {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/02/28 04:38:56 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/02/28 04:38:56 PM INFO:menu_selection: {'title': 'Corporate Donations per Entity', 'function': <function mod_corporate_donations_per_entity_page at 0x000001FF1A35ADD0>}
2025/02/28 04:38:56 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/02/28 04:38:56 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/02/28 04:38:56 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/02/28 04:38:56 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns]
2025/02/28 04:38:56 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/02/28 04:38:56 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/02/28 04:38:56 PM INFO:PLACEHOLDER_ID: 1000001
2025/02/28 04:38:56 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/02/28 04:38:56 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/02/28 04:38:56 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/02/28 04:38:56 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         53000.00                2   26500.000000
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         26625.00                3    8875.000000
3            4.0        Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                    Bridgwater Trust          7700.00                3    2566.666667
...          ...                                 ...              ...              ...            ...
29493    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
29494  1000001.0             Not Recorded 1900-01-01         17500.00                2    8750.000000
29495  1000001.0             Not Recorded 1961-01-01         11454.00                2    5727.000000
29496  1000001.0             Not Recorded 1995-05-10         27938.19                2   13969.095000
29497  1000001.0                  Unidentified Donor        728205.67               92    7915.279022

[29498 rows x 5 columns]
2025/02/28 04:38:56 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/02/28 04:38:56 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/02/28 04:38:56 PM INFO:Session state Setup complete
2025/02/28 04:38:56 PM INFO:initialize_session_state executed successfully
2025/02/28 04:38:56 PM INFO:Package setup complete
2025/02/28 04:38:56 PM INFO:Calling pagesetup with args=()
2025/02/28 04:38:56 PM INFO:Calling get_git_version with args=()
2025/02/28 04:38:56 PM INFO:get_git_version executed successfully
2025/02/28 04:38:56 PM INFO:App Version: v20.126
2025/02/28 04:38:56 PM INFO:Switched to page: Corporate Donations per Entity
2025/02/28 04:38:56 PM INFO:Calling load_and_filter_pergroup with args=()
2025/02/28 04:38:56 PM INFO:Calling load_cleaned_data with args=()
2025/02/28 04:38:59 PM INFO:Cleaned Data completed, shape: (63939, 40)
2025/02/28 04:38:59 PM INFO:load_cleaned_data executed successfully
2025/02/28 04:38:59 PM INFO:load_and_filter_pergroup executed successfully
2025/02/28 04:38:59 PM INFO:Calling display_summary_statistics with args=()
2025/02/28 04:38:59 PM INFO:display_summary_statistics executed successfully
2025/02/28 04:38:59 PM INFO:Calling display_textual_insights with args=()
2025/02/28 04:38:59 PM INFO:display_textual_insights executed successfully
2025/02/28 04:38:59 PM INFO:Calling display_visualizations with args=(          ECRef                 OriginalRegulatedEntityName    RegulatedEntityType    Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
11     C0407531                    Labour For A Public-Vote        Regulated Donee  10000.0                     Open Britain  ...            0         Small Entity            1                1                1
12     C0407530                    Labour For A Public-Vote        Regulated Donee  30000.0                     Open Britain  ...            0         Small Entity            1                1                1
14     C0408135                   The Rt Hon Jeremy Hunt Mp        Regulated Donee  10000.0                      Acquind Ltd  ...            0  Small Medium Entity            1                1                1
15     C0408130                   The Rt Hon Jeremy Hunt Mp        Regulated Donee   2600.0                Pcl Transport Ltd  ...            0  Small Medium Entity            1                1                1
16     C0408134                   The Rt Hon Jeremy Hunt Mp        Regulated Donee   3500.0                       Pietas Ltd  ...            0  Small Medium Entity            1                1                1
...         ...                                         ...                    ...      ...                              ...  ...          ...                  ...          ...              ...              ...
65994  C0243534                        Labour Leave Limited  Permitted Participant  20000.0  The Freedom Association Limited  ...            0                  NaN            1                1                1
66000  C0259702  Trade Unionists Against The European Union  Permitted Participant   8000.0       Better For The Country Ltd  ...            0                  NaN            1                1                1
66001  C0400297                        Labour Leave Limited  Permitted Participant  75000.0                     Techtest Ltd  ...            0                  NaN            1                1                1
66003  I0088673                           Liberal Democrats        Political Party   1000.0      St Cross Consulting Limited  ...            2                  NaN            1                1                1
66006  C0242478                          Vote Leave Limited  Permitted Participant  10000.0          Shaftesbury Investments  ...            0                  NaN            1                1                1

[12361 rows x 40 columns],)
2025/02/28 04:38:59 PM INFO:Calling plot_bar_line_by_year with args=(          ECRef                 OriginalRegulatedEntityName    RegulatedEntityType    Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
11     C0407531                    Labour For A Public-Vote        Regulated Donee  10000.0                     Open Britain  ...            0         Small Entity            1                1                1
12     C0407530                    Labour For A Public-Vote        Regulated Donee  30000.0                     Open Britain  ...            0         Small Entity            1                1                1
14     C0408135                   The Rt Hon Jeremy Hunt Mp        Regulated Donee  10000.0                      Acquind Ltd  ...            0  Small Medium Entity            1                1                1
15     C0408130                   The Rt Hon Jeremy Hunt Mp        Regulated Donee   2600.0                Pcl Transport Ltd  ...            0  Small Medium Entity            1                1                1
16     C0408134                   The Rt Hon Jeremy Hunt Mp        Regulated Donee   3500.0                       Pietas Ltd  ...            0  Small Medium Entity            1                1                1
...         ...                                         ...                    ...      ...                              ...  ...          ...                  ...          ...              ...              ...
65994  C0243534                        Labour Leave Limited  Permitted Participant  20000.0  The Freedom Association Limited  ...            0                  NaN            1                1                1
66000  C0259702  Trade Unionists Against The European Union  Permitted Participant   8000.0       Better For The Country Ltd  ...            0                  NaN            1                1                1
66001  C0400297                        Labour Leave Limited  Permitted Participant  75000.0                     Techtest Ltd  ...            0                  NaN            1                1                1
66003  I0088673                           Liberal Democrats        Political Party   1000.0      St Cross Consulting Limited  ...            2                  NaN            1                1                1
66006  C0242478                          Vote Leave Limited  Permitted Participant  10000.0          Shaftesbury Investments  ...            0                  NaN            1                1                1

[12361 rows x 40 columns],)
2025/02/28 04:38:59 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:39:00 PM INFO:Calling plot_bar_line_by_year with args=(          ECRef                 OriginalRegulatedEntityName    RegulatedEntityType    Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
11     C0407531                    Labour For A Public-Vote        Regulated Donee  10000.0                     Open Britain  ...            0         Small Entity            1                1                1
12     C0407530                    Labour For A Public-Vote        Regulated Donee  30000.0                     Open Britain  ...            0         Small Entity            1                1                1
14     C0408135                   The Rt Hon Jeremy Hunt Mp        Regulated Donee  10000.0                      Acquind Ltd  ...            0  Small Medium Entity            1                1                1
15     C0408130                   The Rt Hon Jeremy Hunt Mp        Regulated Donee   2600.0                Pcl Transport Ltd  ...            0  Small Medium Entity            1                1                1
16     C0408134                   The Rt Hon Jeremy Hunt Mp        Regulated Donee   3500.0                       Pietas Ltd  ...            0  Small Medium Entity            1                1                1
...         ...                                         ...                    ...      ...                              ...  ...          ...                  ...          ...              ...              ...
65994  C0243534                        Labour Leave Limited  Permitted Participant  20000.0  The Freedom Association Limited  ...            0                  NaN            1                1                1
66000  C0259702  Trade Unionists Against The European Union  Permitted Participant   8000.0       Better For The Country Ltd  ...            0                  NaN            1                1                1
66001  C0400297                        Labour Leave Limited  Permitted Participant  75000.0                     Techtest Ltd  ...            0                  NaN            1                1                1
66003  I0088673                           Liberal Democrats        Political Party   1000.0      St Cross Consulting Limited  ...            2                  NaN            1                1                1
66006  C0242478                          Vote Leave Limited  Permitted Participant  10000.0          Shaftesbury Investments  ...            0                  NaN            1                1                1

[12361 rows x 40 columns],)
2025/02/28 04:39:00 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:39:00 PM INFO:display_visualizations executed successfully
2025/02/28 04:39:00 PM INFO:pagesetup executed successfully
2025/02/28 04:39:00 PM INFO:Calling firstload with args=()
2025/02/28 04:39:00 PM INFO:firstload executed successfully
2025/02/28 04:39:07 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/02/28 04:39:07 PM INFO:Setting up the package
2025/02/28 04:39:07 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/02/28 04:39:07 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',)
2025/02/28 04:39:07 PM INFO:get_git_version executed successfully
2025/02/28 04:39:07 PM INFO:Version: v20.111
2025/02/28 04:39:07 PM INFO:Calling initialize_session_state with args=()
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('BASE_DIR', 'H:\\VScode\\dashboard_demo-1')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('filenames', {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}})
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('PLACEHOLDER_DATE', Timestamp('1900-01-01 00:00:00'))
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('PLACEHOLDER_ID', 1000001)
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('thresholds', {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'})
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('data_remappings', {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}})
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('filter_def', {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}})
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('security', {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''})
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('perc_target', 0.5)
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('reference_dir', 'H:\\VScode\\dashboard_demo-1\\reference_files')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('data_dir', 'H:\\VScode\\dashboard_demo-1\\data')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('output_dir', 'H:\\VScode\\dashboard_demo-1\\output')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('logs_dir', 'H:\\VScode\\dashboard_demo-1\\logs')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('components_dir', 'H:\\VScode\\dashboard_demo-1\\components')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('app_pages_dir', 'H:\\VScode\\dashboard_demo-1\\app_pages')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('utils_dir', 'H:\\VScode\\dashboard_demo-1\\utils')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('Donor_dedupe_cleaned_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\Donor_dedupe_cleaned_data.csv')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('ListofPoliticalPeople_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople.csv')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('mppartymemb_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\mppartymemb_pypd.csv')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('donor_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalDonorsDeDuped.csv')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('politician_party_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople_Final.csv')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('regentity_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalEntityDeDuped.csv')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('potential_donor_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_donor_duplicates.csv')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('potential_regulatedentity_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_regentiity_duplicates.csv')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('original_data_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\original_data.csv')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('CREDENTIALS_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_credentials.json')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('TEXT_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_text.json')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('cleaned_data_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_data.csv')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('cleaned_donations_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donations.csv')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('cleaned_donorlist_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donorlist.csv')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('cleaned_regentity_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_regentity.csv')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('party_summary_fname', 'H:\\VScode\\dashboard_demo-1\\output\\party_summary.csv')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'Donations_accepted_by_political_parties.csv')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Calling init_state_var with args=('Cash_ftr', {'DonationType': 'Cash'})
2025/02/28 04:39:07 PM INFO:init_state_var executed successfully
2025/02/28 04:39:07 PM INFO:Session_state variables initialized
2025/02/28 04:39:07 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/02/28 04:39:07 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1319             Yorkshire Party         1000.00               1   1000.000000  Single Donation Entity
1320   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1321               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1322             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1323               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity

[1324 rows x 5 columns]
2025/02/28 04:39:07 PM INFO:perc_target: 0.5
2025/02/28 04:39:07 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/02/28 04:39:07 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/02/28 04:39:07 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/02/28 04:39:07 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/02/28 04:39:07 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/02/28 04:39:07 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/02/28 04:39:07 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[63939 rows x 40 columns]
2025/02/28 04:39:07 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/02/28 04:39:07 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/02/28 04:39:07 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/02/28 04:39:07 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/02/28 04:39:07 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/02/28 04:39:07 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/02/28 04:39:07 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/02/28 04:39:07 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/02/28 04:39:07 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/02/28 04:39:07 PM INFO:directories: {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/02/28 04:39:07 PM INFO:data_regentity:       RegulatedEntityId                Regulated Entity Name           Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                    English Democrats  Conservative And Unionist Party         10500.00                1   10500.000000
1                  17.0                    English Democrats                     Labour Party         13500.00                5    2700.000000
2                  17.0                    English Democrats                Liberal Democrats         66500.00                3   22166.666667
3                  17.0                    English Democrats              Small Medium Entity          1500.00                1    1500.000000
4                  17.0                    English Democrats                Very Small Entity          7000.00                1    7000.000000
...                 ...                                  ...                              ...              ...              ...            ...
3573            10264.0                        Robert Largan           Single Donation Entity          2000.00                1    2000.000000
3574            10265.0                           Jane Dodds                Liberal Democrats          3529.41                2    1764.705000
3575            10266.0                          Phil Wilson                Very Small Entity          2000.00                1    2000.000000
3576            10267.0  Scottish Unionist Association Trust                     Labour Party        207350.07                2  103675.035000
3577            10267.0  Scottish Unionist Association Trust                Liberal Democrats         11520.00                1   11520.000000

[3578 rows x 6 columns]
2025/02/28 04:39:07 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/02/28 04:39:07 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/02/28 04:39:07 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/02/28 04:39:07 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/02/28 04:39:07 PM INFO:filter_def: {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/02/28 04:39:07 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/02/28 04:39:07 PM INFO:menu_selection: {'title': 'Sponsorship per Entity ', 'function': <function mod_sponsorships_per_entity_page at 0x000001FF1A35AE60>}
2025/02/28 04:39:07 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/02/28 04:39:07 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/02/28 04:39:07 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/02/28 04:39:07 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns]
2025/02/28 04:39:07 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/02/28 04:39:07 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/02/28 04:39:07 PM INFO:PLACEHOLDER_ID: 1000001
2025/02/28 04:39:07 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/02/28 04:39:07 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/02/28 04:39:07 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/02/28 04:39:07 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         53000.00                2   26500.000000
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         26625.00                3    8875.000000
3            4.0        Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                    Bridgwater Trust          7700.00                3    2566.666667
...          ...                                 ...              ...              ...            ...
29493    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
29494  1000001.0             Not Recorded 1900-01-01         17500.00                2    8750.000000
29495  1000001.0             Not Recorded 1961-01-01         11454.00                2    5727.000000
29496  1000001.0             Not Recorded 1995-05-10         27938.19                2   13969.095000
29497  1000001.0                  Unidentified Donor        728205.67               92    7915.279022

[29498 rows x 5 columns]
2025/02/28 04:39:07 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/02/28 04:39:07 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/02/28 04:39:07 PM INFO:Session state Setup complete
2025/02/28 04:39:07 PM INFO:initialize_session_state executed successfully
2025/02/28 04:39:07 PM INFO:Package setup complete
2025/02/28 04:39:07 PM INFO:Calling pagesetup with args=()
2025/02/28 04:39:07 PM INFO:Calling get_git_version with args=()
2025/02/28 04:39:07 PM INFO:get_git_version executed successfully
2025/02/28 04:39:07 PM INFO:App Version: v20.126
2025/02/28 04:39:07 PM INFO:Switched to page: Sponsorship per Entity 
2025/02/28 04:39:07 PM INFO:Calling load_and_filter_pergroup with args=()
2025/02/28 04:39:07 PM INFO:Calling load_cleaned_data with args=()
2025/02/28 04:39:10 PM INFO:Cleaned Data completed, shape: (63939, 40)
2025/02/28 04:39:10 PM INFO:load_cleaned_data executed successfully
2025/02/28 04:39:10 PM INFO:load_and_filter_pergroup executed successfully
2025/02/28 04:39:10 PM INFO:Calling display_summary_statistics with args=()
2025/02/28 04:39:10 PM INFO:display_summary_statistics executed successfully
2025/02/28 04:39:10 PM INFO:Calling display_textual_insights with args=()
2025/02/28 04:39:10 PM INFO:display_textual_insights executed successfully
2025/02/28 04:39:10 PM INFO:Calling display_visualizations with args=(           ECRef      OriginalRegulatedEntityName RegulatedEntityType    Value         OriginalDonorName  ...  DubiousData                  RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
127    NC0406709         Mr Richard Harrington Mp     Regulated Donee  12000.0       Intu Properties Plc  ...            0                     Small Entity            1                1                1
129    NC0406708         Mr Richard Harrington Mp     Regulated Donee  10000.0  Camelot Uk Lotteries Ltd  ...            0  Conservative And Unionist Party            1                1                1
882    NC0405863        The Rt Hon Sajid Javid Mp     Regulated Donee   2500.0      Hannafin Contractors  ...            0                Very Small Entity            1                1                1
1187   NC0404760                 Tom Pursglove Mp     Regulated Donee   1600.0        Best 4 U Mortgages  ...            0  Conservative And Unionist Party            1                1                1
1503   NC0405687  Conservative And Unionist Party     Political Party   3293.0  Morley Hayes Leisure Ltd  ...            0  Conservative And Unionist Party            1                1                1
...          ...                              ...                 ...      ...                       ...  ...          ...                              ...          ...              ...              ...
62669  NC0027815  Conservative And Unionist Party     Political Party   2500.0    Carlton Television Ltd  ...            0                     Labour Party            1                1                1
63903  NC0027507                     Labour Party     Political Party   6007.0          Bloomberg Uk Ltd  ...            0              Small Medium Entity            1                1                1
63907  NC0027508                     Labour Party     Political Party   5541.0          Bloomberg Uk Ltd  ...            0  Conservative And Unionist Party            1                1                1
65315  NC0319597  Conservative And Unionist Party     Political Party   8942.0   Dpk Contractors Limited  ...            0                              NaN            1                1                1
65674  NC0319545                     Labour Party     Political Party  16800.0  Fujitsu Services Limited  ...            0                              NaN            1                1                1

[603 rows x 40 columns],)
2025/02/28 04:39:10 PM INFO:Calling plot_bar_line_by_year with args=(           ECRef      OriginalRegulatedEntityName RegulatedEntityType    Value         OriginalDonorName  ...  DubiousData                  RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
127    NC0406709         Mr Richard Harrington Mp     Regulated Donee  12000.0       Intu Properties Plc  ...            0                     Small Entity            1                1                1
129    NC0406708         Mr Richard Harrington Mp     Regulated Donee  10000.0  Camelot Uk Lotteries Ltd  ...            0  Conservative And Unionist Party            1                1                1
882    NC0405863        The Rt Hon Sajid Javid Mp     Regulated Donee   2500.0      Hannafin Contractors  ...            0                Very Small Entity            1                1                1
1187   NC0404760                 Tom Pursglove Mp     Regulated Donee   1600.0        Best 4 U Mortgages  ...            0  Conservative And Unionist Party            1                1                1
1503   NC0405687  Conservative And Unionist Party     Political Party   3293.0  Morley Hayes Leisure Ltd  ...            0  Conservative And Unionist Party            1                1                1
...          ...                              ...                 ...      ...                       ...  ...          ...                              ...          ...              ...              ...
62669  NC0027815  Conservative And Unionist Party     Political Party   2500.0    Carlton Television Ltd  ...            0                     Labour Party            1                1                1
63903  NC0027507                     Labour Party     Political Party   6007.0          Bloomberg Uk Ltd  ...            0              Small Medium Entity            1                1                1
63907  NC0027508                     Labour Party     Political Party   5541.0          Bloomberg Uk Ltd  ...            0  Conservative And Unionist Party            1                1                1
65315  NC0319597  Conservative And Unionist Party     Political Party   8942.0   Dpk Contractors Limited  ...            0                              NaN            1                1                1
65674  NC0319545                     Labour Party     Political Party  16800.0  Fujitsu Services Limited  ...            0                              NaN            1                1                1

[603 rows x 40 columns],)
2025/02/28 04:39:10 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:39:11 PM INFO:Calling plot_bar_line_by_year with args=(           ECRef      OriginalRegulatedEntityName RegulatedEntityType    Value         OriginalDonorName  ...  DubiousData                  RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
127    NC0406709         Mr Richard Harrington Mp     Regulated Donee  12000.0       Intu Properties Plc  ...            0                     Small Entity            1                1                1
129    NC0406708         Mr Richard Harrington Mp     Regulated Donee  10000.0  Camelot Uk Lotteries Ltd  ...            0  Conservative And Unionist Party            1                1                1
882    NC0405863        The Rt Hon Sajid Javid Mp     Regulated Donee   2500.0      Hannafin Contractors  ...            0                Very Small Entity            1                1                1
1187   NC0404760                 Tom Pursglove Mp     Regulated Donee   1600.0        Best 4 U Mortgages  ...            0  Conservative And Unionist Party            1                1                1
1503   NC0405687  Conservative And Unionist Party     Political Party   3293.0  Morley Hayes Leisure Ltd  ...            0  Conservative And Unionist Party            1                1                1
...          ...                              ...                 ...      ...                       ...  ...          ...                              ...          ...              ...              ...
62669  NC0027815  Conservative And Unionist Party     Political Party   2500.0    Carlton Television Ltd  ...            0                     Labour Party            1                1                1
63903  NC0027507                     Labour Party     Political Party   6007.0          Bloomberg Uk Ltd  ...            0              Small Medium Entity            1                1                1
63907  NC0027508                     Labour Party     Political Party   5541.0          Bloomberg Uk Ltd  ...            0  Conservative And Unionist Party            1                1                1
65315  NC0319597  Conservative And Unionist Party     Political Party   8942.0   Dpk Contractors Limited  ...            0                              NaN            1                1                1
65674  NC0319545                     Labour Party     Political Party  16800.0  Fujitsu Services Limited  ...            0                              NaN            1                1                1

[603 rows x 40 columns],)
2025/02/28 04:39:11 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:39:11 PM INFO:display_visualizations executed successfully
2025/02/28 04:39:11 PM INFO:pagesetup executed successfully
2025/02/28 04:39:11 PM INFO:Calling firstload with args=()
2025/02/28 04:39:11 PM INFO:firstload executed successfully
2025/02/28 04:39:19 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/02/28 04:39:19 PM INFO:Setting up the package
2025/02/28 04:39:19 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/02/28 04:39:19 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',)
2025/02/28 04:39:19 PM INFO:get_git_version executed successfully
2025/02/28 04:39:19 PM INFO:Version: v20.111
2025/02/28 04:39:19 PM INFO:Calling initialize_session_state with args=()
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('BASE_DIR', 'H:\\VScode\\dashboard_demo-1')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('filenames', {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}})
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('PLACEHOLDER_DATE', Timestamp('1900-01-01 00:00:00'))
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('PLACEHOLDER_ID', 1000001)
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('thresholds', {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'})
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('data_remappings', {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}})
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('filter_def', {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}})
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('security', {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''})
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('perc_target', 0.5)
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('reference_dir', 'H:\\VScode\\dashboard_demo-1\\reference_files')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('data_dir', 'H:\\VScode\\dashboard_demo-1\\data')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('output_dir', 'H:\\VScode\\dashboard_demo-1\\output')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('logs_dir', 'H:\\VScode\\dashboard_demo-1\\logs')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('components_dir', 'H:\\VScode\\dashboard_demo-1\\components')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('app_pages_dir', 'H:\\VScode\\dashboard_demo-1\\app_pages')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('utils_dir', 'H:\\VScode\\dashboard_demo-1\\utils')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('Donor_dedupe_cleaned_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\Donor_dedupe_cleaned_data.csv')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('ListofPoliticalPeople_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople.csv')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('mppartymemb_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\mppartymemb_pypd.csv')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('donor_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalDonorsDeDuped.csv')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('politician_party_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople_Final.csv')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('regentity_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalEntityDeDuped.csv')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('potential_donor_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_donor_duplicates.csv')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('potential_regulatedentity_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_regentiity_duplicates.csv')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('original_data_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\original_data.csv')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('CREDENTIALS_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_credentials.json')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('TEXT_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_text.json')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('cleaned_data_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_data.csv')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('cleaned_donations_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donations.csv')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('cleaned_donorlist_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donorlist.csv')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('cleaned_regentity_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_regentity.csv')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('party_summary_fname', 'H:\\VScode\\dashboard_demo-1\\output\\party_summary.csv')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'Donations_accepted_by_political_parties.csv')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Calling init_state_var with args=('Cash_ftr', {'DonationType': 'Cash'})
2025/02/28 04:39:19 PM INFO:init_state_var executed successfully
2025/02/28 04:39:19 PM INFO:Session_state variables initialized
2025/02/28 04:39:19 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/02/28 04:39:19 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1319             Yorkshire Party         1000.00               1   1000.000000  Single Donation Entity
1320   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1321               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1322             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1323               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity

[1324 rows x 5 columns]
2025/02/28 04:39:19 PM INFO:perc_target: 0.5
2025/02/28 04:39:19 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/02/28 04:39:19 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/02/28 04:39:19 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/02/28 04:39:19 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/02/28 04:39:19 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/02/28 04:39:19 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/02/28 04:39:19 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[63939 rows x 40 columns]
2025/02/28 04:39:19 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/02/28 04:39:19 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/02/28 04:39:19 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/02/28 04:39:19 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/02/28 04:39:19 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/02/28 04:39:19 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/02/28 04:39:19 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/02/28 04:39:19 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/02/28 04:39:19 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/02/28 04:39:19 PM INFO:directories: {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/02/28 04:39:19 PM INFO:data_regentity:       RegulatedEntityId                Regulated Entity Name           Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                    English Democrats  Conservative And Unionist Party         10500.00                1   10500.000000
1                  17.0                    English Democrats                     Labour Party         13500.00                5    2700.000000
2                  17.0                    English Democrats                Liberal Democrats         66500.00                3   22166.666667
3                  17.0                    English Democrats              Small Medium Entity          1500.00                1    1500.000000
4                  17.0                    English Democrats                Very Small Entity          7000.00                1    7000.000000
...                 ...                                  ...                              ...              ...              ...            ...
3573            10264.0                        Robert Largan           Single Donation Entity          2000.00                1    2000.000000
3574            10265.0                           Jane Dodds                Liberal Democrats          3529.41                2    1764.705000
3575            10266.0                          Phil Wilson                Very Small Entity          2000.00                1    2000.000000
3576            10267.0  Scottish Unionist Association Trust                     Labour Party        207350.07                2  103675.035000
3577            10267.0  Scottish Unionist Association Trust                Liberal Democrats         11520.00                1   11520.000000

[3578 rows x 6 columns]
2025/02/28 04:39:19 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/02/28 04:39:19 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/02/28 04:39:19 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/02/28 04:39:19 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/02/28 04:39:19 PM INFO:filter_def: {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/02/28 04:39:19 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/02/28 04:39:19 PM INFO:menu_selection: {'title': 'Paid Visits per Entity', 'function': <function mod_visits_per_regulated_entity at 0x000001FF1A35B010>}
2025/02/28 04:39:19 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/02/28 04:39:19 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/02/28 04:39:19 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/02/28 04:39:19 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns]
2025/02/28 04:39:19 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/02/28 04:39:19 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/02/28 04:39:19 PM INFO:PLACEHOLDER_ID: 1000001
2025/02/28 04:39:19 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/02/28 04:39:19 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/02/28 04:39:19 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/02/28 04:39:19 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         53000.00                2   26500.000000
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         26625.00                3    8875.000000
3            4.0        Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                    Bridgwater Trust          7700.00                3    2566.666667
...          ...                                 ...              ...              ...            ...
29493    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
29494  1000001.0             Not Recorded 1900-01-01         17500.00                2    8750.000000
29495  1000001.0             Not Recorded 1961-01-01         11454.00                2    5727.000000
29496  1000001.0             Not Recorded 1995-05-10         27938.19                2   13969.095000
29497  1000001.0                  Unidentified Donor        728205.67               92    7915.279022

[29498 rows x 5 columns]
2025/02/28 04:39:19 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/02/28 04:39:19 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/02/28 04:39:19 PM INFO:Session state Setup complete
2025/02/28 04:39:19 PM INFO:initialize_session_state executed successfully
2025/02/28 04:39:19 PM INFO:Package setup complete
2025/02/28 04:39:19 PM INFO:Calling pagesetup with args=()
2025/02/28 04:39:19 PM INFO:Calling get_git_version with args=()
2025/02/28 04:39:19 PM INFO:get_git_version executed successfully
2025/02/28 04:39:19 PM INFO:App Version: v20.126
2025/02/28 04:39:19 PM INFO:Switched to page: Paid Visits per Entity
2025/02/28 04:39:19 PM INFO:Calling load_and_filter_pergroup with args=()
2025/02/28 04:39:19 PM INFO:Calling load_cleaned_data with args=()
2025/02/28 04:39:22 PM INFO:Cleaned Data completed, shape: (63939, 40)
2025/02/28 04:39:22 PM INFO:load_cleaned_data executed successfully
2025/02/28 04:39:22 PM INFO:load_and_filter_pergroup executed successfully
2025/02/28 04:39:22 PM INFO:Calling display_summary_statistics with args=()
2025/02/28 04:39:23 PM INFO:display_summary_statistics executed successfully
2025/02/28 04:39:23 PM INFO:Calling display_textual_insights with args=()
2025/02/28 04:39:23 PM INFO:display_textual_insights executed successfully
2025/02/28 04:39:23 PM INFO:Calling display_visualizations with args=(           ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns],)
2025/02/28 04:39:23 PM INFO:Calling plot_bar_line_by_year with args=(           ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns],)
2025/02/28 04:39:23 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:39:23 PM INFO:Calling plot_bar_line_by_year with args=(           ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns],)
2025/02/28 04:39:23 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:39:23 PM INFO:display_visualizations executed successfully
2025/02/28 04:39:23 PM INFO:pagesetup executed successfully
2025/02/28 04:39:23 PM INFO:Calling firstload with args=()
2025/02/28 04:39:23 PM INFO:firstload executed successfully
2025/02/28 04:39:32 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/02/28 04:39:32 PM INFO:Setting up the package
2025/02/28 04:39:32 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/02/28 04:39:32 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',)
2025/02/28 04:39:32 PM INFO:get_git_version executed successfully
2025/02/28 04:39:32 PM INFO:Version: v20.111
2025/02/28 04:39:32 PM INFO:Calling initialize_session_state with args=()
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('BASE_DIR', 'H:\\VScode\\dashboard_demo-1')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('filenames', {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}})
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('PLACEHOLDER_DATE', Timestamp('1900-01-01 00:00:00'))
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('PLACEHOLDER_ID', 1000001)
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('thresholds', {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'})
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('data_remappings', {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}})
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('filter_def', {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}})
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('security', {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''})
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('perc_target', 0.5)
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('reference_dir', 'H:\\VScode\\dashboard_demo-1\\reference_files')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('data_dir', 'H:\\VScode\\dashboard_demo-1\\data')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('output_dir', 'H:\\VScode\\dashboard_demo-1\\output')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('logs_dir', 'H:\\VScode\\dashboard_demo-1\\logs')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('components_dir', 'H:\\VScode\\dashboard_demo-1\\components')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('app_pages_dir', 'H:\\VScode\\dashboard_demo-1\\app_pages')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('utils_dir', 'H:\\VScode\\dashboard_demo-1\\utils')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('Donor_dedupe_cleaned_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\Donor_dedupe_cleaned_data.csv')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('ListofPoliticalPeople_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople.csv')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('mppartymemb_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\mppartymemb_pypd.csv')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('donor_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalDonorsDeDuped.csv')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('politician_party_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople_Final.csv')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('regentity_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalEntityDeDuped.csv')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('potential_donor_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_donor_duplicates.csv')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('potential_regulatedentity_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_regentiity_duplicates.csv')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('original_data_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\original_data.csv')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('CREDENTIALS_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_credentials.json')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('TEXT_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_text.json')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('cleaned_data_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_data.csv')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('cleaned_donations_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donations.csv')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('cleaned_donorlist_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donorlist.csv')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('cleaned_regentity_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_regentity.csv')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('party_summary_fname', 'H:\\VScode\\dashboard_demo-1\\output\\party_summary.csv')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'Donations_accepted_by_political_parties.csv')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Calling init_state_var with args=('Cash_ftr', {'DonationType': 'Cash'})
2025/02/28 04:39:32 PM INFO:init_state_var executed successfully
2025/02/28 04:39:32 PM INFO:Session_state variables initialized
2025/02/28 04:39:32 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/02/28 04:39:32 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1319             Yorkshire Party         1000.00               1   1000.000000  Single Donation Entity
1320   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1321               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1322             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1323               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity

[1324 rows x 5 columns]
2025/02/28 04:39:32 PM INFO:perc_target: 0.5
2025/02/28 04:39:32 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/02/28 04:39:32 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/02/28 04:39:32 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/02/28 04:39:32 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/02/28 04:39:32 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/02/28 04:39:32 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/02/28 04:39:32 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[63939 rows x 40 columns]
2025/02/28 04:39:32 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/02/28 04:39:32 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/02/28 04:39:32 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/02/28 04:39:32 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/02/28 04:39:32 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/02/28 04:39:32 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/02/28 04:39:32 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/02/28 04:39:32 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/02/28 04:39:32 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/02/28 04:39:32 PM INFO:directories: {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/02/28 04:39:32 PM INFO:data_regentity:       RegulatedEntityId                Regulated Entity Name           Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                    English Democrats  Conservative And Unionist Party         10500.00                1   10500.000000
1                  17.0                    English Democrats                     Labour Party         13500.00                5    2700.000000
2                  17.0                    English Democrats                Liberal Democrats         66500.00                3   22166.666667
3                  17.0                    English Democrats              Small Medium Entity          1500.00                1    1500.000000
4                  17.0                    English Democrats                Very Small Entity          7000.00                1    7000.000000
...                 ...                                  ...                              ...              ...              ...            ...
3573            10264.0                        Robert Largan           Single Donation Entity          2000.00                1    2000.000000
3574            10265.0                           Jane Dodds                Liberal Democrats          3529.41                2    1764.705000
3575            10266.0                          Phil Wilson                Very Small Entity          2000.00                1    2000.000000
3576            10267.0  Scottish Unionist Association Trust                     Labour Party        207350.07                2  103675.035000
3577            10267.0  Scottish Unionist Association Trust                Liberal Democrats         11520.00                1   11520.000000

[3578 rows x 6 columns]
2025/02/28 04:39:32 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/02/28 04:39:32 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/02/28 04:39:32 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/02/28 04:39:32 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/02/28 04:39:32 PM INFO:filter_def: {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/02/28 04:39:32 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/02/28 04:39:32 PM INFO:menu_selection: {'title': 'Donors per Regulated Entity', 'function': <function mod_regulated_entity_per_donors_page at 0x000001FF1A35B130>}
2025/02/28 04:39:32 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/02/28 04:39:32 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/02/28 04:39:32 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/02/28 04:39:32 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns]
2025/02/28 04:39:32 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/02/28 04:39:32 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/02/28 04:39:32 PM INFO:PLACEHOLDER_ID: 1000001
2025/02/28 04:39:32 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/02/28 04:39:32 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/02/28 04:39:32 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/02/28 04:39:32 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         53000.00                2   26500.000000
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         26625.00                3    8875.000000
3            4.0        Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                    Bridgwater Trust          7700.00                3    2566.666667
...          ...                                 ...              ...              ...            ...
29493    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
29494  1000001.0             Not Recorded 1900-01-01         17500.00                2    8750.000000
29495  1000001.0             Not Recorded 1961-01-01         11454.00                2    5727.000000
29496  1000001.0             Not Recorded 1995-05-10         27938.19                2   13969.095000
29497  1000001.0                  Unidentified Donor        728205.67               92    7915.279022

[29498 rows x 5 columns]
2025/02/28 04:39:32 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/02/28 04:39:32 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/02/28 04:39:32 PM INFO:Session state Setup complete
2025/02/28 04:39:32 PM INFO:initialize_session_state executed successfully
2025/02/28 04:39:32 PM INFO:Package setup complete
2025/02/28 04:39:32 PM INFO:Calling pagesetup with args=()
2025/02/28 04:39:32 PM INFO:Calling get_git_version with args=()
2025/02/28 04:39:32 PM INFO:get_git_version executed successfully
2025/02/28 04:39:32 PM INFO:App Version: v20.126
2025/02/28 04:39:32 PM INFO:Switched to page: Donors per Regulated Entity
2025/02/28 04:39:32 PM INFO:Calling load_and_filter_pergroup with args=()
2025/02/28 04:39:32 PM INFO:Calling load_cleaned_data with args=()
2025/02/28 04:39:35 PM INFO:Cleaned Data completed, shape: (63939, 40)
2025/02/28 04:39:35 PM INFO:load_cleaned_data executed successfully
2025/02/28 04:39:35 PM INFO:load_and_filter_pergroup executed successfully
2025/02/28 04:39:35 PM INFO:Calling display_summary_statistics with args=()
2025/02/28 04:39:35 PM INFO:display_summary_statistics executed successfully
2025/02/28 04:39:35 PM INFO:Calling display_textual_insights with args=()
2025/02/28 04:39:35 PM INFO:display_textual_insights executed successfully
2025/02/28 04:39:35 PM INFO:Calling display_visualizations with args=(           ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns],)
2025/02/28 04:39:35 PM INFO:Calling plot_bar_line_by_year with args=(           ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns],)
2025/02/28 04:39:35 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:39:36 PM INFO:Calling plot_bar_line_by_year with args=(           ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns],)
2025/02/28 04:39:36 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:39:36 PM INFO:display_visualizations executed successfully
2025/02/28 04:39:36 PM INFO:pagesetup executed successfully
2025/02/28 04:39:36 PM INFO:Calling firstload with args=()
2025/02/28 04:39:36 PM INFO:firstload executed successfully
2025/02/28 04:39:38 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/02/28 04:39:38 PM INFO:Setting up the package
2025/02/28 04:39:38 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/02/28 04:39:38 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',)
2025/02/28 04:39:38 PM INFO:get_git_version executed successfully
2025/02/28 04:39:38 PM INFO:Version: v20.111
2025/02/28 04:39:38 PM INFO:Calling initialize_session_state with args=()
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('BASE_DIR', 'H:\\VScode\\dashboard_demo-1')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('filenames', {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}})
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('PLACEHOLDER_DATE', Timestamp('1900-01-01 00:00:00'))
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('PLACEHOLDER_ID', 1000001)
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('thresholds', {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'})
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('data_remappings', {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}})
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('filter_def', {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}})
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('security', {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''})
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('perc_target', 0.5)
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('reference_dir', 'H:\\VScode\\dashboard_demo-1\\reference_files')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('data_dir', 'H:\\VScode\\dashboard_demo-1\\data')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('output_dir', 'H:\\VScode\\dashboard_demo-1\\output')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('logs_dir', 'H:\\VScode\\dashboard_demo-1\\logs')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('components_dir', 'H:\\VScode\\dashboard_demo-1\\components')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('app_pages_dir', 'H:\\VScode\\dashboard_demo-1\\app_pages')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('utils_dir', 'H:\\VScode\\dashboard_demo-1\\utils')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('Donor_dedupe_cleaned_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\Donor_dedupe_cleaned_data.csv')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('ListofPoliticalPeople_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople.csv')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('mppartymemb_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\mppartymemb_pypd.csv')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('donor_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalDonorsDeDuped.csv')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('politician_party_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople_Final.csv')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('regentity_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalEntityDeDuped.csv')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('potential_donor_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_donor_duplicates.csv')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('potential_regulatedentity_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_regentiity_duplicates.csv')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('original_data_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\original_data.csv')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('CREDENTIALS_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_credentials.json')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('TEXT_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_text.json')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('cleaned_data_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_data.csv')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('cleaned_donations_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donations.csv')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('cleaned_donorlist_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donorlist.csv')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('cleaned_regentity_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_regentity.csv')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('party_summary_fname', 'H:\\VScode\\dashboard_demo-1\\output\\party_summary.csv')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'Donations_accepted_by_political_parties.csv')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Calling init_state_var with args=('Cash_ftr', {'DonationType': 'Cash'})
2025/02/28 04:39:38 PM INFO:init_state_var executed successfully
2025/02/28 04:39:38 PM INFO:Session_state variables initialized
2025/02/28 04:39:38 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/02/28 04:39:38 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1319             Yorkshire Party         1000.00               1   1000.000000  Single Donation Entity
1320   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1321               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1322             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1323               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity

[1324 rows x 5 columns]
2025/02/28 04:39:38 PM INFO:perc_target: 0.5
2025/02/28 04:39:38 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/02/28 04:39:38 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/02/28 04:39:38 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/02/28 04:39:38 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/02/28 04:39:38 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/02/28 04:39:38 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/02/28 04:39:38 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[63939 rows x 40 columns]
2025/02/28 04:39:38 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/02/28 04:39:38 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/02/28 04:39:38 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/02/28 04:39:38 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/02/28 04:39:38 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/02/28 04:39:38 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/02/28 04:39:38 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/02/28 04:39:38 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/02/28 04:39:38 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/02/28 04:39:38 PM INFO:directories: {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/02/28 04:39:38 PM INFO:data_regentity:       RegulatedEntityId                Regulated Entity Name           Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                    English Democrats  Conservative And Unionist Party         10500.00                1   10500.000000
1                  17.0                    English Democrats                     Labour Party         13500.00                5    2700.000000
2                  17.0                    English Democrats                Liberal Democrats         66500.00                3   22166.666667
3                  17.0                    English Democrats              Small Medium Entity          1500.00                1    1500.000000
4                  17.0                    English Democrats                Very Small Entity          7000.00                1    7000.000000
...                 ...                                  ...                              ...              ...              ...            ...
3573            10264.0                        Robert Largan           Single Donation Entity          2000.00                1    2000.000000
3574            10265.0                           Jane Dodds                Liberal Democrats          3529.41                2    1764.705000
3575            10266.0                          Phil Wilson                Very Small Entity          2000.00                1    2000.000000
3576            10267.0  Scottish Unionist Association Trust                     Labour Party        207350.07                2  103675.035000
3577            10267.0  Scottish Unionist Association Trust                Liberal Democrats         11520.00                1   11520.000000

[3578 rows x 6 columns]
2025/02/28 04:39:38 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/02/28 04:39:38 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/02/28 04:39:38 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/02/28 04:39:38 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/02/28 04:39:38 PM INFO:filter_def: {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/02/28 04:39:38 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/02/28 04:39:38 PM INFO:menu_selection: {'title': 'Dubious Donors per Regulated Entity', 'function': <function mod_dubious_donations_per_entity_page at 0x000001FF1A35B250>}
2025/02/28 04:39:38 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/02/28 04:39:38 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/02/28 04:39:38 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/02/28 04:39:39 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns]
2025/02/28 04:39:39 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/02/28 04:39:39 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/02/28 04:39:39 PM INFO:PLACEHOLDER_ID: 1000001
2025/02/28 04:39:39 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/02/28 04:39:39 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/02/28 04:39:39 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/02/28 04:39:39 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         53000.00                2   26500.000000
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         26625.00                3    8875.000000
3            4.0        Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                    Bridgwater Trust          7700.00                3    2566.666667
...          ...                                 ...              ...              ...            ...
29493    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
29494  1000001.0             Not Recorded 1900-01-01         17500.00                2    8750.000000
29495  1000001.0             Not Recorded 1961-01-01         11454.00                2    5727.000000
29496  1000001.0             Not Recorded 1995-05-10         27938.19                2   13969.095000
29497  1000001.0                  Unidentified Donor        728205.67               92    7915.279022

[29498 rows x 5 columns]
2025/02/28 04:39:39 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/02/28 04:39:39 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/02/28 04:39:39 PM INFO:Session state Setup complete
2025/02/28 04:39:39 PM INFO:initialize_session_state executed successfully
2025/02/28 04:39:39 PM INFO:Package setup complete
2025/02/28 04:39:39 PM INFO:Calling pagesetup with args=()
2025/02/28 04:39:39 PM INFO:Calling get_git_version with args=()
2025/02/28 04:39:39 PM INFO:get_git_version executed successfully
2025/02/28 04:39:39 PM INFO:App Version: v20.126
2025/02/28 04:39:39 PM INFO:Switched to page: Dubious Donors per Regulated Entity
2025/02/28 04:39:39 PM INFO:Calling load_and_filter_perentity with args=('RegulatedEntity', 'DubiousDonors_ftr', 'filtered_keytarget_label')
2025/02/28 04:39:39 PM INFO:Calling load_cleaned_data with args=()
2025/02/28 04:39:41 PM INFO:Cleaned Data completed, shape: (63939, 40)
2025/02/28 04:39:41 PM INFO:load_cleaned_data executed successfully
2025/02/28 04:39:42 PM INFO:load_and_filter_perentity executed successfully
2025/02/28 04:39:42 PM ERROR:Error in pagesetup: too many values to unpack (expected 2)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 26, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 61, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 104, in mod_dubious_donations_per_entity_page
    display_per_entity_data_page("DubiousDonors_ftr",
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_entity.py", line 20, in display_data_page
    cleaned_df, filtered_df = load_and_filter_perentity(
ValueError: too many values to unpack (expected 2)
2025/02/28 04:39:42 PM CRITICAL:Menu setup crashed: too many values to unpack (expected 2)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 35, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 31, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 26, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 61, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 104, in mod_dubious_donations_per_entity_page
    display_per_entity_data_page("DubiousDonors_ftr",
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_entity.py", line 20, in display_data_page
    cleaned_df, filtered_df = load_and_filter_perentity(
ValueError: too many values to unpack (expected 2)
2025/02/28 04:39:46 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/02/28 04:39:46 PM INFO:Setting up the package
2025/02/28 04:39:46 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/02/28 04:39:46 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',)
2025/02/28 04:39:46 PM INFO:get_git_version executed successfully
2025/02/28 04:39:46 PM INFO:Version: v20.111
2025/02/28 04:39:46 PM INFO:Calling initialize_session_state with args=()
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('BASE_DIR', 'H:\\VScode\\dashboard_demo-1')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('filenames', {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}})
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('PLACEHOLDER_DATE', Timestamp('1900-01-01 00:00:00'))
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('PLACEHOLDER_ID', 1000001)
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('thresholds', {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'})
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('data_remappings', {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}})
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('filter_def', {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}})
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('security', {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''})
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('perc_target', 0.5)
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('reference_dir', 'H:\\VScode\\dashboard_demo-1\\reference_files')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('data_dir', 'H:\\VScode\\dashboard_demo-1\\data')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('output_dir', 'H:\\VScode\\dashboard_demo-1\\output')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('logs_dir', 'H:\\VScode\\dashboard_demo-1\\logs')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('components_dir', 'H:\\VScode\\dashboard_demo-1\\components')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('app_pages_dir', 'H:\\VScode\\dashboard_demo-1\\app_pages')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('utils_dir', 'H:\\VScode\\dashboard_demo-1\\utils')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('Donor_dedupe_cleaned_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\Donor_dedupe_cleaned_data.csv')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('ListofPoliticalPeople_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople.csv')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('mppartymemb_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\mppartymemb_pypd.csv')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('donor_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalDonorsDeDuped.csv')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('politician_party_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople_Final.csv')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('regentity_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalEntityDeDuped.csv')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('potential_donor_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_donor_duplicates.csv')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('potential_regulatedentity_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_regentiity_duplicates.csv')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('original_data_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\original_data.csv')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('CREDENTIALS_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_credentials.json')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('TEXT_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_text.json')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('cleaned_data_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_data.csv')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('cleaned_donations_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donations.csv')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('cleaned_donorlist_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donorlist.csv')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('cleaned_regentity_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_regentity.csv')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('party_summary_fname', 'H:\\VScode\\dashboard_demo-1\\output\\party_summary.csv')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'Donations_accepted_by_political_parties.csv')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Calling init_state_var with args=('Cash_ftr', {'DonationType': 'Cash'})
2025/02/28 04:39:46 PM INFO:init_state_var executed successfully
2025/02/28 04:39:46 PM INFO:Session_state variables initialized
2025/02/28 04:39:46 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/02/28 04:39:46 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1319             Yorkshire Party         1000.00               1   1000.000000  Single Donation Entity
1320   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1321               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1322             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1323               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity

[1324 rows x 5 columns]
2025/02/28 04:39:46 PM INFO:perc_target: 0.5
2025/02/28 04:39:46 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/02/28 04:39:46 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/02/28 04:39:46 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/02/28 04:39:46 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/02/28 04:39:46 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/02/28 04:39:46 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/02/28 04:39:46 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[63939 rows x 40 columns]
2025/02/28 04:39:46 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/02/28 04:39:46 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/02/28 04:39:46 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/02/28 04:39:46 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/02/28 04:39:46 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/02/28 04:39:46 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/02/28 04:39:46 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/02/28 04:39:46 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/02/28 04:39:46 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/02/28 04:39:46 PM INFO:directories: {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/02/28 04:39:46 PM INFO:data_regentity:       RegulatedEntityId                Regulated Entity Name           Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                    English Democrats  Conservative And Unionist Party         10500.00                1   10500.000000
1                  17.0                    English Democrats                     Labour Party         13500.00                5    2700.000000
2                  17.0                    English Democrats                Liberal Democrats         66500.00                3   22166.666667
3                  17.0                    English Democrats              Small Medium Entity          1500.00                1    1500.000000
4                  17.0                    English Democrats                Very Small Entity          7000.00                1    7000.000000
...                 ...                                  ...                              ...              ...              ...            ...
3573            10264.0                        Robert Largan           Single Donation Entity          2000.00                1    2000.000000
3574            10265.0                           Jane Dodds                Liberal Democrats          3529.41                2    1764.705000
3575            10266.0                          Phil Wilson                Very Small Entity          2000.00                1    2000.000000
3576            10267.0  Scottish Unionist Association Trust                     Labour Party        207350.07                2  103675.035000
3577            10267.0  Scottish Unionist Association Trust                Liberal Democrats         11520.00                1   11520.000000

[3578 rows x 6 columns]
2025/02/28 04:39:46 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/02/28 04:39:46 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/02/28 04:39:46 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/02/28 04:39:46 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/02/28 04:39:46 PM INFO:filter_def: {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/02/28 04:39:46 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/02/28 04:39:46 PM INFO:menu_selection: {'title': 'Corporate Donations by Donor', 'function': <function mod_corporate_donations_per_donor_page at 0x000001FF1A35B400>}
2025/02/28 04:39:46 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/02/28 04:39:46 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/02/28 04:39:46 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/02/28 04:39:46 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns]
2025/02/28 04:39:46 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/02/28 04:39:46 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/02/28 04:39:46 PM INFO:PLACEHOLDER_ID: 1000001
2025/02/28 04:39:46 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/02/28 04:39:46 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/02/28 04:39:46 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/02/28 04:39:46 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         53000.00                2   26500.000000
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         26625.00                3    8875.000000
3            4.0        Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                    Bridgwater Trust          7700.00                3    2566.666667
...          ...                                 ...              ...              ...            ...
29493    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
29494  1000001.0             Not Recorded 1900-01-01         17500.00                2    8750.000000
29495  1000001.0             Not Recorded 1961-01-01         11454.00                2    5727.000000
29496  1000001.0             Not Recorded 1995-05-10         27938.19                2   13969.095000
29497  1000001.0                  Unidentified Donor        728205.67               92    7915.279022

[29498 rows x 5 columns]
2025/02/28 04:39:46 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/02/28 04:39:46 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/02/28 04:39:46 PM INFO:Session state Setup complete
2025/02/28 04:39:46 PM INFO:initialize_session_state executed successfully
2025/02/28 04:39:46 PM INFO:Package setup complete
2025/02/28 04:39:46 PM INFO:Calling pagesetup with args=()
2025/02/28 04:39:46 PM INFO:Calling get_git_version with args=()
2025/02/28 04:39:46 PM INFO:get_git_version executed successfully
2025/02/28 04:39:46 PM INFO:App Version: v20.126
2025/02/28 04:39:46 PM INFO:Switched to page: Corporate Donations by Donor
2025/02/28 04:39:46 PM INFO:Calling load_and_filter_perentity with args=('Donor', 'CorporateDonations_ftr', 'filtered_keytarget_label')
2025/02/28 04:39:46 PM INFO:Calling load_cleaned_data with args=()
2025/02/28 04:39:49 PM INFO:Cleaned Data completed, shape: (63939, 40)
2025/02/28 04:39:49 PM INFO:load_cleaned_data executed successfully
2025/02/28 04:39:50 PM INFO:load_and_filter_perentity executed successfully
2025/02/28 04:39:50 PM ERROR:Error in pagesetup: too many values to unpack (expected 2)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 26, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 61, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 125, in mod_corporate_donations_per_donor_page
    display_per_entity_data_page("CorporateDonations_ftr",
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_entity.py", line 20, in display_data_page
    cleaned_df, filtered_df = load_and_filter_perentity(
ValueError: too many values to unpack (expected 2)
2025/02/28 04:39:50 PM CRITICAL:Menu setup crashed: too many values to unpack (expected 2)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 35, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 31, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 26, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 61, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 125, in mod_corporate_donations_per_donor_page
    display_per_entity_data_page("CorporateDonations_ftr",
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_entity.py", line 20, in display_data_page
    cleaned_df, filtered_df = load_and_filter_perentity(
ValueError: too many values to unpack (expected 2)
2025/02/28 04:39:52 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/02/28 04:39:52 PM INFO:Setting up the package
2025/02/28 04:39:52 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/02/28 04:39:52 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',)
2025/02/28 04:39:52 PM INFO:get_git_version executed successfully
2025/02/28 04:39:52 PM INFO:Version: v20.111
2025/02/28 04:39:52 PM INFO:Calling initialize_session_state with args=()
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('BASE_DIR', 'H:\\VScode\\dashboard_demo-1')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('filenames', {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}})
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('PLACEHOLDER_DATE', Timestamp('1900-01-01 00:00:00'))
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('PLACEHOLDER_ID', 1000001)
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('thresholds', {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'})
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('data_remappings', {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}})
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('filter_def', {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}})
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('security', {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''})
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('perc_target', 0.5)
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('reference_dir', 'H:\\VScode\\dashboard_demo-1\\reference_files')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('data_dir', 'H:\\VScode\\dashboard_demo-1\\data')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('output_dir', 'H:\\VScode\\dashboard_demo-1\\output')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('logs_dir', 'H:\\VScode\\dashboard_demo-1\\logs')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('components_dir', 'H:\\VScode\\dashboard_demo-1\\components')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('app_pages_dir', 'H:\\VScode\\dashboard_demo-1\\app_pages')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('utils_dir', 'H:\\VScode\\dashboard_demo-1\\utils')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('Donor_dedupe_cleaned_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\Donor_dedupe_cleaned_data.csv')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('ListofPoliticalPeople_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople.csv')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('mppartymemb_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\mppartymemb_pypd.csv')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('donor_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalDonorsDeDuped.csv')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('politician_party_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople_Final.csv')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('regentity_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalEntityDeDuped.csv')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('potential_donor_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_donor_duplicates.csv')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('potential_regulatedentity_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_regentiity_duplicates.csv')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('original_data_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\original_data.csv')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('CREDENTIALS_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_credentials.json')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('TEXT_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_text.json')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('cleaned_data_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_data.csv')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('cleaned_donations_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donations.csv')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('cleaned_donorlist_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donorlist.csv')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('cleaned_regentity_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_regentity.csv')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('party_summary_fname', 'H:\\VScode\\dashboard_demo-1\\output\\party_summary.csv')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'Donations_accepted_by_political_parties.csv')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Calling init_state_var with args=('Cash_ftr', {'DonationType': 'Cash'})
2025/02/28 04:39:52 PM INFO:init_state_var executed successfully
2025/02/28 04:39:52 PM INFO:Session_state variables initialized
2025/02/28 04:39:52 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/02/28 04:39:52 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1319             Yorkshire Party         1000.00               1   1000.000000  Single Donation Entity
1320   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1321               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1322             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1323               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity

[1324 rows x 5 columns]
2025/02/28 04:39:52 PM INFO:perc_target: 0.5
2025/02/28 04:39:52 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/02/28 04:39:52 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/02/28 04:39:52 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/02/28 04:39:52 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/02/28 04:39:52 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/02/28 04:39:52 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/02/28 04:39:52 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[63939 rows x 40 columns]
2025/02/28 04:39:52 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/02/28 04:39:52 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/02/28 04:39:52 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/02/28 04:39:52 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/02/28 04:39:52 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/02/28 04:39:52 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/02/28 04:39:52 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/02/28 04:39:52 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/02/28 04:39:52 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/02/28 04:39:52 PM INFO:directories: {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/02/28 04:39:52 PM INFO:data_regentity:       RegulatedEntityId                Regulated Entity Name           Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                    English Democrats  Conservative And Unionist Party         10500.00                1   10500.000000
1                  17.0                    English Democrats                     Labour Party         13500.00                5    2700.000000
2                  17.0                    English Democrats                Liberal Democrats         66500.00                3   22166.666667
3                  17.0                    English Democrats              Small Medium Entity          1500.00                1    1500.000000
4                  17.0                    English Democrats                Very Small Entity          7000.00                1    7000.000000
...                 ...                                  ...                              ...              ...              ...            ...
3573            10264.0                        Robert Largan           Single Donation Entity          2000.00                1    2000.000000
3574            10265.0                           Jane Dodds                Liberal Democrats          3529.41                2    1764.705000
3575            10266.0                          Phil Wilson                Very Small Entity          2000.00                1    2000.000000
3576            10267.0  Scottish Unionist Association Trust                     Labour Party        207350.07                2  103675.035000
3577            10267.0  Scottish Unionist Association Trust                Liberal Democrats         11520.00                1   11520.000000

[3578 rows x 6 columns]
2025/02/28 04:39:52 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/02/28 04:39:52 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/02/28 04:39:52 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/02/28 04:39:52 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/02/28 04:39:52 PM INFO:filter_def: {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/02/28 04:39:52 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/02/28 04:39:52 PM INFO:menu_selection: {'title': 'Sponsorships per Donor', 'function': <function mod_sponsorships_per_donor_page at 0x000001FF1A35AEF0>}
2025/02/28 04:39:52 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/02/28 04:39:52 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/02/28 04:39:52 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/02/28 04:39:53 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns]
2025/02/28 04:39:53 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/02/28 04:39:53 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/02/28 04:39:53 PM INFO:PLACEHOLDER_ID: 1000001
2025/02/28 04:39:53 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/02/28 04:39:53 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/02/28 04:39:53 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/02/28 04:39:53 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         53000.00                2   26500.000000
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         26625.00                3    8875.000000
3            4.0        Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                    Bridgwater Trust          7700.00                3    2566.666667
...          ...                                 ...              ...              ...            ...
29493    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
29494  1000001.0             Not Recorded 1900-01-01         17500.00                2    8750.000000
29495  1000001.0             Not Recorded 1961-01-01         11454.00                2    5727.000000
29496  1000001.0             Not Recorded 1995-05-10         27938.19                2   13969.095000
29497  1000001.0                  Unidentified Donor        728205.67               92    7915.279022

[29498 rows x 5 columns]
2025/02/28 04:39:53 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/02/28 04:39:53 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/02/28 04:39:53 PM INFO:Session state Setup complete
2025/02/28 04:39:53 PM INFO:initialize_session_state executed successfully
2025/02/28 04:39:53 PM INFO:Package setup complete
2025/02/28 04:39:53 PM INFO:Calling pagesetup with args=()
2025/02/28 04:39:53 PM INFO:Calling get_git_version with args=()
2025/02/28 04:39:53 PM INFO:get_git_version executed successfully
2025/02/28 04:39:53 PM INFO:App Version: v20.126
2025/02/28 04:39:53 PM INFO:Switched to page: Sponsorships per Donor
2025/02/28 04:39:53 PM INFO:Calling load_and_filter_pergroup with args=()
2025/02/28 04:39:53 PM INFO:Calling load_cleaned_data with args=()
2025/02/28 04:39:56 PM INFO:Cleaned Data completed, shape: (63939, 40)
2025/02/28 04:39:56 PM INFO:load_cleaned_data executed successfully
2025/02/28 04:39:56 PM INFO:load_and_filter_pergroup executed successfully
2025/02/28 04:39:56 PM INFO:Calling display_summary_statistics with args=()
2025/02/28 04:39:56 PM INFO:display_summary_statistics executed successfully
2025/02/28 04:39:56 PM INFO:Calling display_textual_insights with args=()
2025/02/28 04:39:56 PM INFO:display_textual_insights executed successfully
2025/02/28 04:39:56 PM INFO:Calling display_visualizations with args=(           ECRef      OriginalRegulatedEntityName RegulatedEntityType    Value         OriginalDonorName  ...  DubiousData                  RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
127    NC0406709         Mr Richard Harrington Mp     Regulated Donee  12000.0       Intu Properties Plc  ...            0                     Small Entity            1                1                1
129    NC0406708         Mr Richard Harrington Mp     Regulated Donee  10000.0  Camelot Uk Lotteries Ltd  ...            0  Conservative And Unionist Party            1                1                1
882    NC0405863        The Rt Hon Sajid Javid Mp     Regulated Donee   2500.0      Hannafin Contractors  ...            0                Very Small Entity            1                1                1
1187   NC0404760                 Tom Pursglove Mp     Regulated Donee   1600.0        Best 4 U Mortgages  ...            0  Conservative And Unionist Party            1                1                1
1503   NC0405687  Conservative And Unionist Party     Political Party   3293.0  Morley Hayes Leisure Ltd  ...            0  Conservative And Unionist Party            1                1                1
...          ...                              ...                 ...      ...                       ...  ...          ...                              ...          ...              ...              ...
62669  NC0027815  Conservative And Unionist Party     Political Party   2500.0    Carlton Television Ltd  ...            0                     Labour Party            1                1                1
63903  NC0027507                     Labour Party     Political Party   6007.0          Bloomberg Uk Ltd  ...            0              Small Medium Entity            1                1                1
63907  NC0027508                     Labour Party     Political Party   5541.0          Bloomberg Uk Ltd  ...            0  Conservative And Unionist Party            1                1                1
65315  NC0319597  Conservative And Unionist Party     Political Party   8942.0   Dpk Contractors Limited  ...            0                              NaN            1                1                1
65674  NC0319545                     Labour Party     Political Party  16800.0  Fujitsu Services Limited  ...            0                              NaN            1                1                1

[603 rows x 40 columns],)
2025/02/28 04:39:56 PM INFO:Calling plot_bar_line_by_year with args=(           ECRef      OriginalRegulatedEntityName RegulatedEntityType    Value         OriginalDonorName  ...  DubiousData                  RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
127    NC0406709         Mr Richard Harrington Mp     Regulated Donee  12000.0       Intu Properties Plc  ...            0                     Small Entity            1                1                1
129    NC0406708         Mr Richard Harrington Mp     Regulated Donee  10000.0  Camelot Uk Lotteries Ltd  ...            0  Conservative And Unionist Party            1                1                1
882    NC0405863        The Rt Hon Sajid Javid Mp     Regulated Donee   2500.0      Hannafin Contractors  ...            0                Very Small Entity            1                1                1
1187   NC0404760                 Tom Pursglove Mp     Regulated Donee   1600.0        Best 4 U Mortgages  ...            0  Conservative And Unionist Party            1                1                1
1503   NC0405687  Conservative And Unionist Party     Political Party   3293.0  Morley Hayes Leisure Ltd  ...            0  Conservative And Unionist Party            1                1                1
...          ...                              ...                 ...      ...                       ...  ...          ...                              ...          ...              ...              ...
62669  NC0027815  Conservative And Unionist Party     Political Party   2500.0    Carlton Television Ltd  ...            0                     Labour Party            1                1                1
63903  NC0027507                     Labour Party     Political Party   6007.0          Bloomberg Uk Ltd  ...            0              Small Medium Entity            1                1                1
63907  NC0027508                     Labour Party     Political Party   5541.0          Bloomberg Uk Ltd  ...            0  Conservative And Unionist Party            1                1                1
65315  NC0319597  Conservative And Unionist Party     Political Party   8942.0   Dpk Contractors Limited  ...            0                              NaN            1                1                1
65674  NC0319545                     Labour Party     Political Party  16800.0  Fujitsu Services Limited  ...            0                              NaN            1                1                1

[603 rows x 40 columns],)
2025/02/28 04:39:56 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:39:56 PM INFO:Calling plot_bar_line_by_year with args=(           ECRef      OriginalRegulatedEntityName RegulatedEntityType    Value         OriginalDonorName  ...  DubiousData                  RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
127    NC0406709         Mr Richard Harrington Mp     Regulated Donee  12000.0       Intu Properties Plc  ...            0                     Small Entity            1                1                1
129    NC0406708         Mr Richard Harrington Mp     Regulated Donee  10000.0  Camelot Uk Lotteries Ltd  ...            0  Conservative And Unionist Party            1                1                1
882    NC0405863        The Rt Hon Sajid Javid Mp     Regulated Donee   2500.0      Hannafin Contractors  ...            0                Very Small Entity            1                1                1
1187   NC0404760                 Tom Pursglove Mp     Regulated Donee   1600.0        Best 4 U Mortgages  ...            0  Conservative And Unionist Party            1                1                1
1503   NC0405687  Conservative And Unionist Party     Political Party   3293.0  Morley Hayes Leisure Ltd  ...            0  Conservative And Unionist Party            1                1                1
...          ...                              ...                 ...      ...                       ...  ...          ...                              ...          ...              ...              ...
62669  NC0027815  Conservative And Unionist Party     Political Party   2500.0    Carlton Television Ltd  ...            0                     Labour Party            1                1                1
63903  NC0027507                     Labour Party     Political Party   6007.0          Bloomberg Uk Ltd  ...            0              Small Medium Entity            1                1                1
63907  NC0027508                     Labour Party     Political Party   5541.0          Bloomberg Uk Ltd  ...            0  Conservative And Unionist Party            1                1                1
65315  NC0319597  Conservative And Unionist Party     Political Party   8942.0   Dpk Contractors Limited  ...            0                              NaN            1                1                1
65674  NC0319545                     Labour Party     Political Party  16800.0  Fujitsu Services Limited  ...            0                              NaN            1                1                1

[603 rows x 40 columns],)
2025/02/28 04:39:56 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:39:56 PM INFO:display_visualizations executed successfully
2025/02/28 04:39:56 PM INFO:pagesetup executed successfully
2025/02/28 04:39:56 PM INFO:Calling firstload with args=()
2025/02/28 04:39:56 PM INFO:firstload executed successfully
2025/02/28 04:40:02 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/02/28 04:40:02 PM INFO:Setting up the package
2025/02/28 04:40:02 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/02/28 04:40:02 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',)
2025/02/28 04:40:02 PM INFO:get_git_version executed successfully
2025/02/28 04:40:02 PM INFO:Version: v20.111
2025/02/28 04:40:02 PM INFO:Calling initialize_session_state with args=()
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('BASE_DIR', 'H:\\VScode\\dashboard_demo-1')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('filenames', {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}})
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('PLACEHOLDER_DATE', Timestamp('1900-01-01 00:00:00'))
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('PLACEHOLDER_ID', 1000001)
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('thresholds', {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'})
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('data_remappings', {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}})
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('filter_def', {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}})
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('security', {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''})
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('perc_target', 0.5)
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('reference_dir', 'H:\\VScode\\dashboard_demo-1\\reference_files')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('data_dir', 'H:\\VScode\\dashboard_demo-1\\data')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('output_dir', 'H:\\VScode\\dashboard_demo-1\\output')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('logs_dir', 'H:\\VScode\\dashboard_demo-1\\logs')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('components_dir', 'H:\\VScode\\dashboard_demo-1\\components')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('app_pages_dir', 'H:\\VScode\\dashboard_demo-1\\app_pages')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('utils_dir', 'H:\\VScode\\dashboard_demo-1\\utils')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('Donor_dedupe_cleaned_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\Donor_dedupe_cleaned_data.csv')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('ListofPoliticalPeople_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople.csv')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('mppartymemb_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\mppartymemb_pypd.csv')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('donor_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalDonorsDeDuped.csv')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('politician_party_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople_Final.csv')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('regentity_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalEntityDeDuped.csv')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('potential_donor_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_donor_duplicates.csv')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('potential_regulatedentity_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_regentiity_duplicates.csv')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('original_data_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\original_data.csv')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('CREDENTIALS_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_credentials.json')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('TEXT_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_text.json')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('cleaned_data_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_data.csv')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('cleaned_donations_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donations.csv')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('cleaned_donorlist_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donorlist.csv')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('cleaned_regentity_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_regentity.csv')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('party_summary_fname', 'H:\\VScode\\dashboard_demo-1\\output\\party_summary.csv')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'Donations_accepted_by_political_parties.csv')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Calling init_state_var with args=('Cash_ftr', {'DonationType': 'Cash'})
2025/02/28 04:40:02 PM INFO:init_state_var executed successfully
2025/02/28 04:40:02 PM INFO:Session_state variables initialized
2025/02/28 04:40:02 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/02/28 04:40:02 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1319             Yorkshire Party         1000.00               1   1000.000000  Single Donation Entity
1320   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1321               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1322             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1323               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity

[1324 rows x 5 columns]
2025/02/28 04:40:02 PM INFO:perc_target: 0.5
2025/02/28 04:40:02 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/02/28 04:40:02 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/02/28 04:40:02 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/02/28 04:40:02 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/02/28 04:40:02 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/02/28 04:40:02 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/02/28 04:40:02 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[63939 rows x 40 columns]
2025/02/28 04:40:03 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/02/28 04:40:03 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/02/28 04:40:03 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/02/28 04:40:03 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/02/28 04:40:03 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/02/28 04:40:03 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/02/28 04:40:03 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/02/28 04:40:03 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/02/28 04:40:03 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/02/28 04:40:03 PM INFO:directories: {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/02/28 04:40:03 PM INFO:data_regentity:       RegulatedEntityId                Regulated Entity Name           Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                    English Democrats  Conservative And Unionist Party         10500.00                1   10500.000000
1                  17.0                    English Democrats                     Labour Party         13500.00                5    2700.000000
2                  17.0                    English Democrats                Liberal Democrats         66500.00                3   22166.666667
3                  17.0                    English Democrats              Small Medium Entity          1500.00                1    1500.000000
4                  17.0                    English Democrats                Very Small Entity          7000.00                1    7000.000000
...                 ...                                  ...                              ...              ...              ...            ...
3573            10264.0                        Robert Largan           Single Donation Entity          2000.00                1    2000.000000
3574            10265.0                           Jane Dodds                Liberal Democrats          3529.41                2    1764.705000
3575            10266.0                          Phil Wilson                Very Small Entity          2000.00                1    2000.000000
3576            10267.0  Scottish Unionist Association Trust                     Labour Party        207350.07                2  103675.035000
3577            10267.0  Scottish Unionist Association Trust                Liberal Democrats         11520.00                1   11520.000000

[3578 rows x 6 columns]
2025/02/28 04:40:03 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/02/28 04:40:03 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/02/28 04:40:03 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/02/28 04:40:03 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/02/28 04:40:03 PM INFO:filter_def: {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/02/28 04:40:03 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/02/28 04:40:03 PM INFO:menu_selection: {'title': 'Paid Visits per Donor', 'function': <function mod_visits_per_donor at 0x000001FF1A35AF80>}
2025/02/28 04:40:03 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/02/28 04:40:03 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/02/28 04:40:03 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/02/28 04:40:03 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns]
2025/02/28 04:40:03 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/02/28 04:40:03 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/02/28 04:40:03 PM INFO:PLACEHOLDER_ID: 1000001
2025/02/28 04:40:03 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/02/28 04:40:03 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/02/28 04:40:03 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/02/28 04:40:03 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         53000.00                2   26500.000000
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         26625.00                3    8875.000000
3            4.0        Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                    Bridgwater Trust          7700.00                3    2566.666667
...          ...                                 ...              ...              ...            ...
29493    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
29494  1000001.0             Not Recorded 1900-01-01         17500.00                2    8750.000000
29495  1000001.0             Not Recorded 1961-01-01         11454.00                2    5727.000000
29496  1000001.0             Not Recorded 1995-05-10         27938.19                2   13969.095000
29497  1000001.0                  Unidentified Donor        728205.67               92    7915.279022

[29498 rows x 5 columns]
2025/02/28 04:40:03 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/02/28 04:40:03 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/02/28 04:40:03 PM INFO:Session state Setup complete
2025/02/28 04:40:03 PM INFO:initialize_session_state executed successfully
2025/02/28 04:40:03 PM INFO:Package setup complete
2025/02/28 04:40:03 PM INFO:Calling pagesetup with args=()
2025/02/28 04:40:03 PM INFO:Calling get_git_version with args=()
2025/02/28 04:40:03 PM INFO:get_git_version executed successfully
2025/02/28 04:40:03 PM INFO:App Version: v20.126
2025/02/28 04:40:03 PM INFO:Switched to page: Paid Visits per Donor
2025/02/28 04:40:03 PM INFO:Calling load_and_filter_pergroup with args=()
2025/02/28 04:40:03 PM INFO:Calling load_cleaned_data with args=()
2025/02/28 04:40:05 PM INFO:Cleaned Data completed, shape: (63939, 40)
2025/02/28 04:40:05 PM INFO:load_cleaned_data executed successfully
2025/02/28 04:40:06 PM INFO:load_and_filter_pergroup executed successfully
2025/02/28 04:40:06 PM INFO:Calling display_summary_statistics with args=()
2025/02/28 04:40:06 PM INFO:display_summary_statistics executed successfully
2025/02/28 04:40:06 PM INFO:Calling display_textual_insights with args=()
2025/02/28 04:40:06 PM INFO:display_textual_insights executed successfully
2025/02/28 04:40:06 PM INFO:Calling display_visualizations with args=(           ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns],)
2025/02/28 04:40:06 PM INFO:Calling plot_bar_line_by_year with args=(           ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns],)
2025/02/28 04:40:06 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:40:06 PM INFO:Calling plot_bar_line_by_year with args=(           ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns],)
2025/02/28 04:40:06 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:40:06 PM INFO:display_visualizations executed successfully
2025/02/28 04:40:06 PM INFO:pagesetup executed successfully
2025/02/28 04:40:06 PM INFO:Calling firstload with args=()
2025/02/28 04:40:06 PM INFO:firstload executed successfully
2025/02/28 04:40:08 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/02/28 04:40:08 PM INFO:Setting up the package
2025/02/28 04:40:08 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/02/28 04:40:08 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',)
2025/02/28 04:40:08 PM INFO:get_git_version executed successfully
2025/02/28 04:40:08 PM INFO:Version: v20.111
2025/02/28 04:40:08 PM INFO:Calling initialize_session_state with args=()
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('BASE_DIR', 'H:\\VScode\\dashboard_demo-1')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('filenames', {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}})
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('PLACEHOLDER_DATE', Timestamp('1900-01-01 00:00:00'))
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('PLACEHOLDER_ID', 1000001)
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('thresholds', {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'})
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('data_remappings', {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}})
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('filter_def', {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}})
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('security', {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''})
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('perc_target', 0.5)
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('reference_dir', 'H:\\VScode\\dashboard_demo-1\\reference_files')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('data_dir', 'H:\\VScode\\dashboard_demo-1\\data')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('output_dir', 'H:\\VScode\\dashboard_demo-1\\output')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('logs_dir', 'H:\\VScode\\dashboard_demo-1\\logs')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('components_dir', 'H:\\VScode\\dashboard_demo-1\\components')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('app_pages_dir', 'H:\\VScode\\dashboard_demo-1\\app_pages')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('utils_dir', 'H:\\VScode\\dashboard_demo-1\\utils')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('Donor_dedupe_cleaned_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\Donor_dedupe_cleaned_data.csv')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('ListofPoliticalPeople_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople.csv')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('mppartymemb_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\mppartymemb_pypd.csv')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('donor_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalDonorsDeDuped.csv')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('politician_party_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople_Final.csv')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('regentity_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalEntityDeDuped.csv')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('potential_donor_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_donor_duplicates.csv')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('potential_regulatedentity_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_regentiity_duplicates.csv')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('original_data_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\original_data.csv')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('CREDENTIALS_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_credentials.json')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('TEXT_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_text.json')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('cleaned_data_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_data.csv')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('cleaned_donations_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donations.csv')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('cleaned_donorlist_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donorlist.csv')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('cleaned_regentity_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_regentity.csv')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('party_summary_fname', 'H:\\VScode\\dashboard_demo-1\\output\\party_summary.csv')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'Donations_accepted_by_political_parties.csv')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Calling init_state_var with args=('Cash_ftr', {'DonationType': 'Cash'})
2025/02/28 04:40:08 PM INFO:init_state_var executed successfully
2025/02/28 04:40:08 PM INFO:Session_state variables initialized
2025/02/28 04:40:08 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/02/28 04:40:08 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1319             Yorkshire Party         1000.00               1   1000.000000  Single Donation Entity
1320   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1321               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1322             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1323               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity

[1324 rows x 5 columns]
2025/02/28 04:40:08 PM INFO:perc_target: 0.5
2025/02/28 04:40:08 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/02/28 04:40:08 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/02/28 04:40:08 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/02/28 04:40:08 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/02/28 04:40:08 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/02/28 04:40:08 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/02/28 04:40:08 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[63939 rows x 40 columns]
2025/02/28 04:40:08 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/02/28 04:40:08 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/02/28 04:40:08 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/02/28 04:40:08 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/02/28 04:40:08 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/02/28 04:40:08 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/02/28 04:40:08 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/02/28 04:40:08 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/02/28 04:40:08 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/02/28 04:40:08 PM INFO:directories: {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/02/28 04:40:08 PM INFO:data_regentity:       RegulatedEntityId                Regulated Entity Name           Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                    English Democrats  Conservative And Unionist Party         10500.00                1   10500.000000
1                  17.0                    English Democrats                     Labour Party         13500.00                5    2700.000000
2                  17.0                    English Democrats                Liberal Democrats         66500.00                3   22166.666667
3                  17.0                    English Democrats              Small Medium Entity          1500.00                1    1500.000000
4                  17.0                    English Democrats                Very Small Entity          7000.00                1    7000.000000
...                 ...                                  ...                              ...              ...              ...            ...
3573            10264.0                        Robert Largan           Single Donation Entity          2000.00                1    2000.000000
3574            10265.0                           Jane Dodds                Liberal Democrats          3529.41                2    1764.705000
3575            10266.0                          Phil Wilson                Very Small Entity          2000.00                1    2000.000000
3576            10267.0  Scottish Unionist Association Trust                     Labour Party        207350.07                2  103675.035000
3577            10267.0  Scottish Unionist Association Trust                Liberal Democrats         11520.00                1   11520.000000

[3578 rows x 6 columns]
2025/02/28 04:40:08 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/02/28 04:40:08 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/02/28 04:40:08 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/02/28 04:40:08 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/02/28 04:40:08 PM INFO:filter_def: {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/02/28 04:40:08 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/02/28 04:40:08 PM INFO:menu_selection: {'title': 'Regulated Entities per Donor', 'function': <function mod_regulated_donor_per_entity_page at 0x000001FF1A35B0A0>}
2025/02/28 04:40:08 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/02/28 04:40:08 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/02/28 04:40:08 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/02/28 04:40:08 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns]
2025/02/28 04:40:08 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/02/28 04:40:08 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/02/28 04:40:08 PM INFO:PLACEHOLDER_ID: 1000001
2025/02/28 04:40:08 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/02/28 04:40:08 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/02/28 04:40:08 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/02/28 04:40:08 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         53000.00                2   26500.000000
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         26625.00                3    8875.000000
3            4.0        Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                    Bridgwater Trust          7700.00                3    2566.666667
...          ...                                 ...              ...              ...            ...
29493    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
29494  1000001.0             Not Recorded 1900-01-01         17500.00                2    8750.000000
29495  1000001.0             Not Recorded 1961-01-01         11454.00                2    5727.000000
29496  1000001.0             Not Recorded 1995-05-10         27938.19                2   13969.095000
29497  1000001.0                  Unidentified Donor        728205.67               92    7915.279022

[29498 rows x 5 columns]
2025/02/28 04:40:08 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/02/28 04:40:08 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/02/28 04:40:08 PM INFO:Session state Setup complete
2025/02/28 04:40:08 PM INFO:initialize_session_state executed successfully
2025/02/28 04:40:08 PM INFO:Package setup complete
2025/02/28 04:40:08 PM INFO:Calling pagesetup with args=()
2025/02/28 04:40:08 PM INFO:Calling get_git_version with args=()
2025/02/28 04:40:08 PM INFO:get_git_version executed successfully
2025/02/28 04:40:08 PM INFO:App Version: v20.126
2025/02/28 04:40:08 PM INFO:Switched to page: Regulated Entities per Donor
2025/02/28 04:40:08 PM INFO:Calling load_and_filter_pergroup with args=()
2025/02/28 04:40:08 PM INFO:Calling load_cleaned_data with args=()
2025/02/28 04:40:11 PM INFO:Cleaned Data completed, shape: (63939, 40)
2025/02/28 04:40:11 PM INFO:load_cleaned_data executed successfully
2025/02/28 04:40:11 PM INFO:load_and_filter_pergroup executed successfully
2025/02/28 04:40:11 PM INFO:Calling display_summary_statistics with args=()
2025/02/28 04:40:11 PM INFO:display_summary_statistics executed successfully
2025/02/28 04:40:11 PM INFO:Calling display_textual_insights with args=()
2025/02/28 04:40:11 PM INFO:display_textual_insights executed successfully
2025/02/28 04:40:11 PM INFO:Calling display_visualizations with args=(           ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns],)
2025/02/28 04:40:11 PM INFO:Calling plot_bar_line_by_year with args=(           ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns],)
2025/02/28 04:40:11 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:40:11 PM INFO:Calling plot_bar_line_by_year with args=(           ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns],)
2025/02/28 04:40:11 PM INFO:plot_bar_line_by_year executed successfully
2025/02/28 04:40:11 PM INFO:display_visualizations executed successfully
2025/02/28 04:40:12 PM INFO:pagesetup executed successfully
2025/02/28 04:40:12 PM INFO:Calling firstload with args=()
2025/02/28 04:40:12 PM INFO:firstload executed successfully
2025/02/28 04:40:14 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/02/28 04:40:14 PM INFO:Setting up the package
2025/02/28 04:40:14 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/02/28 04:40:14 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',)
2025/02/28 04:40:14 PM INFO:get_git_version executed successfully
2025/02/28 04:40:14 PM INFO:Version: v20.111
2025/02/28 04:40:14 PM INFO:Calling initialize_session_state with args=()
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('BASE_DIR', 'H:\\VScode\\dashboard_demo-1')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('filenames', {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}})
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('PLACEHOLDER_DATE', Timestamp('1900-01-01 00:00:00'))
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('PLACEHOLDER_ID', 1000001)
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('thresholds', {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'})
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('data_remappings', {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}})
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('filter_def', {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}})
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('security', {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''})
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('perc_target', 0.5)
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('reference_dir', 'H:\\VScode\\dashboard_demo-1\\reference_files')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('data_dir', 'H:\\VScode\\dashboard_demo-1\\data')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('output_dir', 'H:\\VScode\\dashboard_demo-1\\output')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('logs_dir', 'H:\\VScode\\dashboard_demo-1\\logs')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('components_dir', 'H:\\VScode\\dashboard_demo-1\\components')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('app_pages_dir', 'H:\\VScode\\dashboard_demo-1\\app_pages')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('utils_dir', 'H:\\VScode\\dashboard_demo-1\\utils')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('Donor_dedupe_cleaned_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\Donor_dedupe_cleaned_data.csv')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('ListofPoliticalPeople_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople.csv')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('mppartymemb_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\mppartymemb_pypd.csv')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('donor_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalDonorsDeDuped.csv')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('politician_party_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople_Final.csv')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('regentity_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalEntityDeDuped.csv')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('potential_donor_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_donor_duplicates.csv')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('potential_regulatedentity_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_regentiity_duplicates.csv')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('original_data_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\original_data.csv')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('CREDENTIALS_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_credentials.json')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('TEXT_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_text.json')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('cleaned_data_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_data.csv')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('cleaned_donations_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donations.csv')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('cleaned_donorlist_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donorlist.csv')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('cleaned_regentity_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_regentity.csv')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('party_summary_fname', 'H:\\VScode\\dashboard_demo-1\\output\\party_summary.csv')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'Donations_accepted_by_political_parties.csv')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Calling init_state_var with args=('Cash_ftr', {'DonationType': 'Cash'})
2025/02/28 04:40:14 PM INFO:init_state_var executed successfully
2025/02/28 04:40:14 PM INFO:Session_state variables initialized
2025/02/28 04:40:14 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/02/28 04:40:14 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1319             Yorkshire Party         1000.00               1   1000.000000  Single Donation Entity
1320   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1321               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1322             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1323               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity

[1324 rows x 5 columns]
2025/02/28 04:40:14 PM INFO:perc_target: 0.5
2025/02/28 04:40:14 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/02/28 04:40:14 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/02/28 04:40:14 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/02/28 04:40:14 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/02/28 04:40:14 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/02/28 04:40:14 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/02/28 04:40:14 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[63939 rows x 40 columns]
2025/02/28 04:40:14 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/02/28 04:40:14 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/02/28 04:40:14 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/02/28 04:40:14 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/02/28 04:40:14 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/02/28 04:40:14 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/02/28 04:40:14 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/02/28 04:40:14 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/02/28 04:40:14 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/02/28 04:40:14 PM INFO:directories: {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/02/28 04:40:14 PM INFO:data_regentity:       RegulatedEntityId                Regulated Entity Name           Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                    English Democrats  Conservative And Unionist Party         10500.00                1   10500.000000
1                  17.0                    English Democrats                     Labour Party         13500.00                5    2700.000000
2                  17.0                    English Democrats                Liberal Democrats         66500.00                3   22166.666667
3                  17.0                    English Democrats              Small Medium Entity          1500.00                1    1500.000000
4                  17.0                    English Democrats                Very Small Entity          7000.00                1    7000.000000
...                 ...                                  ...                              ...              ...              ...            ...
3573            10264.0                        Robert Largan           Single Donation Entity          2000.00                1    2000.000000
3574            10265.0                           Jane Dodds                Liberal Democrats          3529.41                2    1764.705000
3575            10266.0                          Phil Wilson                Very Small Entity          2000.00                1    2000.000000
3576            10267.0  Scottish Unionist Association Trust                     Labour Party        207350.07                2  103675.035000
3577            10267.0  Scottish Unionist Association Trust                Liberal Democrats         11520.00                1   11520.000000

[3578 rows x 6 columns]
2025/02/28 04:40:14 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/02/28 04:40:14 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/02/28 04:40:14 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/02/28 04:40:14 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/02/28 04:40:14 PM INFO:filter_def: {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/02/28 04:40:14 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/02/28 04:40:14 PM INFO:menu_selection: {'title': 'Dubious donations per Donor', 'function': <function mod_dubious_donations_per_donor_page at 0x000001FF1A35B2E0>}
2025/02/28 04:40:14 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/02/28 04:40:14 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/02/28 04:40:14 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/02/28 04:40:14 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns]
2025/02/28 04:40:14 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/02/28 04:40:14 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/02/28 04:40:14 PM INFO:PLACEHOLDER_ID: 1000001
2025/02/28 04:40:14 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/02/28 04:40:14 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/02/28 04:40:14 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/02/28 04:40:14 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         53000.00                2   26500.000000
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         26625.00                3    8875.000000
3            4.0        Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                    Bridgwater Trust          7700.00                3    2566.666667
...          ...                                 ...              ...              ...            ...
29493    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
29494  1000001.0             Not Recorded 1900-01-01         17500.00                2    8750.000000
29495  1000001.0             Not Recorded 1961-01-01         11454.00                2    5727.000000
29496  1000001.0             Not Recorded 1995-05-10         27938.19                2   13969.095000
29497  1000001.0                  Unidentified Donor        728205.67               92    7915.279022

[29498 rows x 5 columns]
2025/02/28 04:40:14 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/02/28 04:40:14 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/02/28 04:40:14 PM INFO:Session state Setup complete
2025/02/28 04:40:14 PM INFO:initialize_session_state executed successfully
2025/02/28 04:40:14 PM INFO:Package setup complete
2025/02/28 04:40:14 PM INFO:Calling pagesetup with args=()
2025/02/28 04:40:14 PM INFO:Calling get_git_version with args=()
2025/02/28 04:40:14 PM INFO:get_git_version executed successfully
2025/02/28 04:40:14 PM INFO:App Version: v20.126
2025/02/28 04:40:14 PM INFO:Switched to page: Dubious donations per Donor
2025/02/28 04:40:14 PM INFO:Calling load_and_filter_perentity with args=('Donor', 'DubiousDonors_ftr', 'filtered_keytarget_label')
2025/02/28 04:40:14 PM INFO:Calling load_cleaned_data with args=()
2025/02/28 04:40:17 PM INFO:Cleaned Data completed, shape: (63939, 40)
2025/02/28 04:40:17 PM INFO:load_cleaned_data executed successfully
2025/02/28 04:40:17 PM INFO:load_and_filter_perentity executed successfully
2025/02/28 04:40:17 PM ERROR:Error in pagesetup: too many values to unpack (expected 2)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 26, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 61, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 111, in mod_dubious_donations_per_donor_page
    display_per_entity_data_page("DubiousDonors_ftr",
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_entity.py", line 20, in display_data_page
    cleaned_df, filtered_df = load_and_filter_perentity(
ValueError: too many values to unpack (expected 2)
2025/02/28 04:40:17 PM CRITICAL:Menu setup crashed: too many values to unpack (expected 2)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 35, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 31, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 26, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 61, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 111, in mod_dubious_donations_per_donor_page
    display_per_entity_data_page("DubiousDonors_ftr",
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_entity.py", line 20, in display_data_page
    cleaned_df, filtered_df = load_and_filter_perentity(
ValueError: too many values to unpack (expected 2)
2025/02/28 04:40:19 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/02/28 04:40:19 PM INFO:Setting up the package
2025/02/28 04:40:19 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/02/28 04:40:19 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',)
2025/02/28 04:40:19 PM INFO:get_git_version executed successfully
2025/02/28 04:40:19 PM INFO:Version: v20.111
2025/02/28 04:40:19 PM INFO:Calling initialize_session_state with args=()
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('BASE_DIR', 'H:\\VScode\\dashboard_demo-1')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('filenames', {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}})
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('PLACEHOLDER_DATE', Timestamp('1900-01-01 00:00:00'))
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('PLACEHOLDER_ID', 1000001)
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('thresholds', {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'})
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('data_remappings', {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}})
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('filter_def', {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}})
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('security', {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''})
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('perc_target', 0.5)
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('reference_dir', 'H:\\VScode\\dashboard_demo-1\\reference_files')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('data_dir', 'H:\\VScode\\dashboard_demo-1\\data')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('output_dir', 'H:\\VScode\\dashboard_demo-1\\output')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('logs_dir', 'H:\\VScode\\dashboard_demo-1\\logs')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('components_dir', 'H:\\VScode\\dashboard_demo-1\\components')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('app_pages_dir', 'H:\\VScode\\dashboard_demo-1\\app_pages')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('utils_dir', 'H:\\VScode\\dashboard_demo-1\\utils')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('Donor_dedupe_cleaned_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\Donor_dedupe_cleaned_data.csv')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('ListofPoliticalPeople_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople.csv')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('mppartymemb_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\mppartymemb_pypd.csv')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('donor_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalDonorsDeDuped.csv')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('politician_party_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople_Final.csv')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('regentity_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalEntityDeDuped.csv')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('potential_donor_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_donor_duplicates.csv')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('potential_regulatedentity_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_regentiity_duplicates.csv')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('original_data_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\original_data.csv')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('CREDENTIALS_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_credentials.json')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('TEXT_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_text.json')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('cleaned_data_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_data.csv')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('cleaned_donations_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donations.csv')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('cleaned_donorlist_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donorlist.csv')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('cleaned_regentity_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_regentity.csv')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('party_summary_fname', 'H:\\VScode\\dashboard_demo-1\\output\\party_summary.csv')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'Donations_accepted_by_political_parties.csv')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Calling init_state_var with args=('Cash_ftr', {'DonationType': 'Cash'})
2025/02/28 04:40:19 PM INFO:init_state_var executed successfully
2025/02/28 04:40:19 PM INFO:Session_state variables initialized
2025/02/28 04:40:19 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/02/28 04:40:19 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1319             Yorkshire Party         1000.00               1   1000.000000  Single Donation Entity
1320   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1321               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1322             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1323               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity

[1324 rows x 5 columns]
2025/02/28 04:40:19 PM INFO:perc_target: 0.5
2025/02/28 04:40:19 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/02/28 04:40:19 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/02/28 04:40:19 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/02/28 04:40:19 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/02/28 04:40:19 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/02/28 04:40:19 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/02/28 04:40:19 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[63939 rows x 40 columns]
2025/02/28 04:40:19 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/02/28 04:40:19 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/02/28 04:40:19 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/02/28 04:40:19 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/02/28 04:40:19 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/02/28 04:40:19 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/02/28 04:40:19 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/02/28 04:40:19 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/02/28 04:40:19 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/02/28 04:40:19 PM INFO:directories: {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/02/28 04:40:19 PM INFO:data_regentity:       RegulatedEntityId                Regulated Entity Name           Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                    English Democrats  Conservative And Unionist Party         10500.00                1   10500.000000
1                  17.0                    English Democrats                     Labour Party         13500.00                5    2700.000000
2                  17.0                    English Democrats                Liberal Democrats         66500.00                3   22166.666667
3                  17.0                    English Democrats              Small Medium Entity          1500.00                1    1500.000000
4                  17.0                    English Democrats                Very Small Entity          7000.00                1    7000.000000
...                 ...                                  ...                              ...              ...              ...            ...
3573            10264.0                        Robert Largan           Single Donation Entity          2000.00                1    2000.000000
3574            10265.0                           Jane Dodds                Liberal Democrats          3529.41                2    1764.705000
3575            10266.0                          Phil Wilson                Very Small Entity          2000.00                1    2000.000000
3576            10267.0  Scottish Unionist Association Trust                     Labour Party        207350.07                2  103675.035000
3577            10267.0  Scottish Unionist Association Trust                Liberal Democrats         11520.00                1   11520.000000

[3578 rows x 6 columns]
2025/02/28 04:40:19 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/02/28 04:40:19 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/02/28 04:40:19 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/02/28 04:40:19 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/02/28 04:40:19 PM INFO:filter_def: {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/02/28 04:40:19 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/02/28 04:40:19 PM INFO:menu_selection: {'title': 'Donations by Political Party', 'function': <function mod_donations_per_political_party_page at 0x000001FF1A35B1C0>}
2025/02/28 04:40:19 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/02/28 04:40:19 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/02/28 04:40:19 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/02/28 04:40:19 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns]
2025/02/28 04:40:19 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/02/28 04:40:19 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/02/28 04:40:19 PM INFO:PLACEHOLDER_ID: 1000001
2025/02/28 04:40:19 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/02/28 04:40:19 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/02/28 04:40:19 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/02/28 04:40:19 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         53000.00                2   26500.000000
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         26625.00                3    8875.000000
3            4.0        Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                    Bridgwater Trust          7700.00                3    2566.666667
...          ...                                 ...              ...              ...            ...
29493    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
29494  1000001.0             Not Recorded 1900-01-01         17500.00                2    8750.000000
29495  1000001.0             Not Recorded 1961-01-01         11454.00                2    5727.000000
29496  1000001.0             Not Recorded 1995-05-10         27938.19                2   13969.095000
29497  1000001.0                  Unidentified Donor        728205.67               92    7915.279022

[29498 rows x 5 columns]
2025/02/28 04:40:19 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/02/28 04:40:19 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/02/28 04:40:19 PM INFO:Session state Setup complete
2025/02/28 04:40:19 PM INFO:initialize_session_state executed successfully
2025/02/28 04:40:19 PM INFO:Package setup complete
2025/02/28 04:40:19 PM INFO:Calling pagesetup with args=()
2025/02/28 04:40:19 PM INFO:Calling get_git_version with args=()
2025/02/28 04:40:19 PM INFO:get_git_version executed successfully
2025/02/28 04:40:19 PM INFO:App Version: v20.126
2025/02/28 04:40:19 PM INFO:Switched to page: Donations by Political Party
2025/02/28 04:40:19 PM INFO:Calling load_and_filter_perentity with args=('Donor', 'PoliticalParty_ftr', 'filtered_keytarget_label')
2025/02/28 04:40:19 PM INFO:Calling load_cleaned_data with args=()
2025/02/28 04:40:22 PM INFO:Cleaned Data completed, shape: (63939, 40)
2025/02/28 04:40:22 PM INFO:load_cleaned_data executed successfully
2025/02/28 04:40:23 PM ERROR:Error in load_and_filter_perentity: 'DonorType'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 191, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 234, in pandas._libs.index.IndexEngine._get_loc_duplicates
  File "index.pyx", line 242, in pandas._libs.index.IndexEngine._maybe_get_bool_indexer
  File "index.pyx", line 134, in pandas._libs.index._unpack_bool_indexer
KeyError: 'DonorType'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 26, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 311, in load_and_filter_perentity
    cleaned_c_df = apply_filters(cleaned_df, current_target)
  File "H:\VScode\dashboard_demo-1\components\filters.py", line 37, in apply_filters
    conditions.append(df[column] == value)
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'DonorType'
2025/02/28 04:40:23 PM ERROR:Error in pagesetup: 'DonorType'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 191, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 234, in pandas._libs.index.IndexEngine._get_loc_duplicates
  File "index.pyx", line 242, in pandas._libs.index.IndexEngine._maybe_get_bool_indexer
  File "index.pyx", line 134, in pandas._libs.index._unpack_bool_indexer
KeyError: 'DonorType'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 26, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 61, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 97, in mod_donations_per_political_party_page
    display_per_entity_data_page("PoliticalParty_ftr",
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_entity.py", line 20, in display_data_page
    cleaned_df, filtered_df = load_and_filter_perentity(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 31, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 26, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 311, in load_and_filter_perentity
    cleaned_c_df = apply_filters(cleaned_df, current_target)
  File "H:\VScode\dashboard_demo-1\components\filters.py", line 37, in apply_filters
    conditions.append(df[column] == value)
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'DonorType'
2025/02/28 04:40:23 PM CRITICAL:Menu setup crashed: 'DonorType'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 191, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 234, in pandas._libs.index.IndexEngine._get_loc_duplicates
  File "index.pyx", line 242, in pandas._libs.index.IndexEngine._maybe_get_bool_indexer
  File "index.pyx", line 134, in pandas._libs.index._unpack_bool_indexer
KeyError: 'DonorType'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 35, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 31, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 26, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 61, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 97, in mod_donations_per_political_party_page
    display_per_entity_data_page("PoliticalParty_ftr",
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_entity.py", line 20, in display_data_page
    cleaned_df, filtered_df = load_and_filter_perentity(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 31, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 26, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 311, in load_and_filter_perentity
    cleaned_c_df = apply_filters(cleaned_df, current_target)
  File "H:\VScode\dashboard_demo-1\components\filters.py", line 37, in apply_filters
    conditions.append(df[column] == value)
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'DonorType'
2025/02/28 04:40:25 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/02/28 04:40:25 PM INFO:Setting up the package
2025/02/28 04:40:25 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/02/28 04:40:25 PM INFO:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',)
2025/02/28 04:40:26 PM INFO:get_git_version executed successfully
2025/02/28 04:40:26 PM INFO:Version: v20.111
2025/02/28 04:40:26 PM INFO:Calling initialize_session_state with args=()
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('BASE_DIR', 'H:\\VScode\\dashboard_demo-1')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('filenames', {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}})
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('PLACEHOLDER_DATE', Timestamp('1900-01-01 00:00:00'))
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('PLACEHOLDER_ID', 1000001)
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('thresholds', {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'})
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('data_remappings', {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}})
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('filter_def', {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}})
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('security', {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''})
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('perc_target', 0.5)
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('reference_dir', 'H:\\VScode\\dashboard_demo-1\\reference_files')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('data_dir', 'H:\\VScode\\dashboard_demo-1\\data')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('output_dir', 'H:\\VScode\\dashboard_demo-1\\output')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('logs_dir', 'H:\\VScode\\dashboard_demo-1\\logs')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('components_dir', 'H:\\VScode\\dashboard_demo-1\\components')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('app_pages_dir', 'H:\\VScode\\dashboard_demo-1\\app_pages')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('utils_dir', 'H:\\VScode\\dashboard_demo-1\\utils')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('directories', {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'})
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('Donor_dedupe_cleaned_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\Donor_dedupe_cleaned_data.csv')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('ListofPoliticalPeople_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople.csv')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('mppartymemb_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\mppartymemb_pypd.csv')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('donor_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalDonorsDeDuped.csv')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('politician_party_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\ListOfPoliticalPeople_Final.csv')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('regentity_map_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\PoliticalEntityDeDuped.csv')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('potential_donor_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_donor_duplicates.csv')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('potential_regulatedentity_duplicates_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\potential_regentiity_duplicates.csv')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('original_data_fname', 'H:\\VScode\\dashboard_demo-1\\reference_files\\original_data.csv')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('CREDENTIALS_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_credentials.json')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('TEXT_FILE', 'H:\\VScode\\dashboard_demo-1\\reference_files\\admin_text.json')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('cleaned_data_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_data.csv')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('cleaned_donations_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donations.csv')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('cleaned_donorlist_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_donorlist.csv')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('cleaned_regentity_fname', 'H:\\VScode\\dashboard_demo-1\\output\\cleaned_regentity.csv')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('party_summary_fname', 'H:\\VScode\\dashboard_demo-1\\output\\party_summary.csv')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'Donations_accepted_by_political_parties.csv')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('ec_donations_fname', 'H:\\VScode\\dashboard_demo-1\\Donations_accepted_by_political_parties.csv')
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Calling init_state_var with args=('Cash_ftr', {'DonationType': 'Cash'})
2025/02/28 04:40:26 PM INFO:init_state_var executed successfully
2025/02/28 04:40:26 PM INFO:Session_state variables initialized
2025/02/28 04:40:26 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/02/28 04:40:26 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1319             Yorkshire Party         1000.00               1   1000.000000  Single Donation Entity
1320   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1321               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1322             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1323               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity

[1324 rows x 5 columns]
2025/02/28 04:40:26 PM INFO:perc_target: 0.5
2025/02/28 04:40:26 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/02/28 04:40:26 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/02/28 04:40:26 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/02/28 04:40:26 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/02/28 04:40:26 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/02/28 04:40:26 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/02/28 04:40:26 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[63939 rows x 40 columns]
2025/02/28 04:40:26 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/02/28 04:40:26 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/02/28 04:40:26 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/02/28 04:40:26 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/02/28 04:40:26 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/02/28 04:40:26 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/02/28 04:40:26 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/02/28 04:40:26 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/02/28 04:40:26 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/02/28 04:40:26 PM INFO:directories: {'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/02/28 04:40:26 PM INFO:data_regentity:       RegulatedEntityId                Regulated Entity Name           Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                    English Democrats  Conservative And Unionist Party         10500.00                1   10500.000000
1                  17.0                    English Democrats                     Labour Party         13500.00                5    2700.000000
2                  17.0                    English Democrats                Liberal Democrats         66500.00                3   22166.666667
3                  17.0                    English Democrats              Small Medium Entity          1500.00                1    1500.000000
4                  17.0                    English Democrats                Very Small Entity          7000.00                1    7000.000000
...                 ...                                  ...                              ...              ...              ...            ...
3573            10264.0                        Robert Largan           Single Donation Entity          2000.00                1    2000.000000
3574            10265.0                           Jane Dodds                Liberal Democrats          3529.41                2    1764.705000
3575            10266.0                          Phil Wilson                Very Small Entity          2000.00                1    2000.000000
3576            10267.0  Scottish Unionist Association Trust                     Labour Party        207350.07                2  103675.035000
3577            10267.0  Scottish Unionist Association Trust                Liberal Democrats         11520.00                1   11520.000000

[3578 rows x 6 columns]
2025/02/28 04:40:26 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/02/28 04:40:26 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/02/28 04:40:26 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/02/28 04:40:26 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/02/28 04:40:26 PM INFO:filter_def: {'Sponsorships_ftr': {'DonationType': 'Sponsorship', 'NatureOfDonation': 'Sponsorship', 'IsSponsorship': 'True'}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregation': 'True', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/02/28 04:40:26 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/02/28 04:40:26 PM INFO:menu_selection: {'title': 'Notes on Data and Manipulations', 'function': <function notesondataprep_body at 0x000001FF1A359240>}
2025/02/28 04:40:26 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/02/28 04:40:26 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/02/28 04:40:26 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/02/28 04:40:26 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ...  DubiousData      RegEntity_Group IsBequestInt IsAggregationInt IsSponsorshipInt
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...            0  Small Medium Entity            1                1                1
...          ...                              ...                    ...        ...                              ...  ...          ...                  ...          ...              ...              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...            0                  NaN            1                1                1
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...            0                  NaN            1                1                1
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...            0                  NaN            1                1                1
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...            0                  NaN            1                1                1
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...            0                  NaN            1                1                1

[63939 rows x 40 columns]
2025/02/28 04:40:26 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/02/28 04:40:26 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/02/28 04:40:26 PM INFO:PLACEHOLDER_ID: 1000001
2025/02/28 04:40:26 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/02/28 04:40:26 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/02/28 04:40:26 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/02/28 04:40:26 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         53000.00                2   26500.000000
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         26625.00                3    8875.000000
3            4.0        Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                    Bridgwater Trust          7700.00                3    2566.666667
...          ...                                 ...              ...              ...            ...
29493    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
29494  1000001.0             Not Recorded 1900-01-01         17500.00                2    8750.000000
29495  1000001.0             Not Recorded 1961-01-01         11454.00                2    5727.000000
29496  1000001.0             Not Recorded 1995-05-10         27938.19                2   13969.095000
29497  1000001.0                  Unidentified Donor        728205.67               92    7915.279022

[29498 rows x 5 columns]
2025/02/28 04:40:26 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/02/28 04:40:26 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/02/28 04:40:26 PM INFO:Session state Setup complete
2025/02/28 04:40:26 PM INFO:initialize_session_state executed successfully
2025/02/28 04:40:26 PM INFO:Package setup complete
2025/02/28 04:40:26 PM INFO:Calling pagesetup with args=()
2025/02/28 04:40:26 PM INFO:Calling get_git_version with args=()
2025/02/28 04:40:26 PM INFO:get_git_version executed successfully
2025/02/28 04:40:26 PM INFO:App Version: v20.126
2025/02/28 04:40:26 PM INFO:Switched to page: Notes on Data and Manipulations
2025/02/28 04:40:26 PM INFO:pagesetup executed successfully
2025/02/28 04:40:26 PM INFO:Calling firstload with args=()
2025/02/28 04:40:26 PM INFO:firstload executed successfully
