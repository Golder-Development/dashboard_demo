2025/03/09 11:59 ERROR:Session state variables not initialized!
2025/03/09 11:59 ERROR:Error: originalfilepath is None!
2025/03/09 11:59 ERROR:Error in raw_data_cleanup: could not convert string to float: ' -   '
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\raw_data_clean.py", line 71, in raw_data_cleanup
    .astype(float)
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 6643, in astype
    new_data = self._mgr.astype(dtype=dtype, copy=copy, errors=errors)
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 430, in astype
    return self.apply(
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 363, in apply
    applied = getattr(b, f)(**kwargs)
  File "H:\python310\lib\site-packages\pandas\core\internals\blocks.py", line 758, in astype
    new_values = astype_array_safe(values, dtype, copy=copy, errors=errors)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 237, in astype_array_safe
    new_values = astype_array(values, dtype, copy=copy)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 182, in astype_array
    values = _astype_nansafe(values, dtype, copy=copy)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 133, in _astype_nansafe
    return arr.astype(dtype, copy=True)
ValueError: could not convert string to float: ' -   '
2025/03/09 11:59 CRITICAL:First load crashed: could not convert string to float: ' -   '
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 72, in firstload
    load_data_to_session("raw_data", get_raw_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 13, in get_raw_data
    return load_raw_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\datasetupandclean.py", line 129, in load_raw_data
    return imported_raw_data(loaddata_df)
  File "H:\VScode\dashboard_demo\data\datasetupandclean.py", line 120, in imported_raw_data
    loaddata_df = raw_data_cleanup(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\raw_data_clean.py", line 71, in raw_data_cleanup
    .astype(float)
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 6643, in astype
    new_data = self._mgr.astype(dtype=dtype, copy=copy, errors=errors)
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 430, in astype
    return self.apply(
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 363, in apply
    applied = getattr(b, f)(**kwargs)
  File "H:\python310\lib\site-packages\pandas\core\internals\blocks.py", line 758, in astype
    new_values = astype_array_safe(values, dtype, copy=copy, errors=errors)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 237, in astype_array_safe
    new_values = astype_array(values, dtype, copy=copy)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 182, in astype_array
    values = _astype_nansafe(values, dtype, copy=copy)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 133, in _astype_nansafe
    return arr.astype(dtype, copy=True)
ValueError: could not convert string to float: ' -   '
2025/03/09 12:00 ERROR:Session state variables not initialized!
2025/03/09 12:00 ERROR:Error: originalfilepath is None!
2025/03/09 12:00 ERROR:Error in raw_data_cleanup: could not convert string to float: ' -   '
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\raw_data_clean.py", line 64, in raw_data_cleanup
    .astype(float)
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 6643, in astype
    new_data = self._mgr.astype(dtype=dtype, copy=copy, errors=errors)
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 430, in astype
    return self.apply(
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 363, in apply
    applied = getattr(b, f)(**kwargs)
  File "H:\python310\lib\site-packages\pandas\core\internals\blocks.py", line 758, in astype
    new_values = astype_array_safe(values, dtype, copy=copy, errors=errors)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 237, in astype_array_safe
    new_values = astype_array(values, dtype, copy=copy)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 182, in astype_array
    values = _astype_nansafe(values, dtype, copy=copy)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 133, in _astype_nansafe
    return arr.astype(dtype, copy=True)
ValueError: could not convert string to float: ' -   '
2025/03/09 12:00 CRITICAL:First load crashed: could not convert string to float: ' -   '
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 72, in firstload
    load_data_to_session("raw_data", get_raw_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 13, in get_raw_data
    return load_raw_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\datasetupandclean.py", line 123, in load_raw_data
    return imported_raw_data(loaddata_df)
  File "H:\VScode\dashboard_demo\data\datasetupandclean.py", line 114, in imported_raw_data
    loaddata_df = raw_data_cleanup(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\raw_data_clean.py", line 64, in raw_data_cleanup
    .astype(float)
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 6643, in astype
    new_data = self._mgr.astype(dtype=dtype, copy=copy, errors=errors)
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 430, in astype
    return self.apply(
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 363, in apply
    applied = getattr(b, f)(**kwargs)
  File "H:\python310\lib\site-packages\pandas\core\internals\blocks.py", line 758, in astype
    new_values = astype_array_safe(values, dtype, copy=copy, errors=errors)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 237, in astype_array_safe
    new_values = astype_array(values, dtype, copy=copy)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 182, in astype_array
    values = _astype_nansafe(values, dtype, copy=copy)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 133, in _astype_nansafe
    return arr.astype(dtype, copy=True)
ValueError: could not convert string to float: ' -   '
2025/03/09 12:00 ERROR:Session state variables not initialized!
2025/03/09 12:03 ERROR:Session state variables not initialized!
2025/03/09 12:03 ERROR:Error: originalfilepath is None!
2025/03/09 12:03 ERROR:Error in raw_data_cleanup: could not convert string to float: '    '
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\raw_data_clean.py", line 64, in raw_data_cleanup
    .astype(float)
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 6643, in astype
    new_data = self._mgr.astype(dtype=dtype, copy=copy, errors=errors)
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 430, in astype
    return self.apply(
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 363, in apply
    applied = getattr(b, f)(**kwargs)
  File "H:\python310\lib\site-packages\pandas\core\internals\blocks.py", line 758, in astype
    new_values = astype_array_safe(values, dtype, copy=copy, errors=errors)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 237, in astype_array_safe
    new_values = astype_array(values, dtype, copy=copy)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 182, in astype_array
    values = _astype_nansafe(values, dtype, copy=copy)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 133, in _astype_nansafe
    return arr.astype(dtype, copy=True)
ValueError: could not convert string to float: '    '
2025/03/09 12:03 CRITICAL:First load crashed: could not convert string to float: '    '
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 72, in firstload
    load_data_to_session("raw_data", get_raw_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 13, in get_raw_data
    return load_raw_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\datasetupandclean.py", line 123, in load_raw_data
    return imported_raw_data(loaddata_df)
  File "H:\VScode\dashboard_demo\data\datasetupandclean.py", line 114, in imported_raw_data
    loaddata_df = raw_data_cleanup(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\raw_data_clean.py", line 64, in raw_data_cleanup
    .astype(float)
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 6643, in astype
    new_data = self._mgr.astype(dtype=dtype, copy=copy, errors=errors)
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 430, in astype
    return self.apply(
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 363, in apply
    applied = getattr(b, f)(**kwargs)
  File "H:\python310\lib\site-packages\pandas\core\internals\blocks.py", line 758, in astype
    new_values = astype_array_safe(values, dtype, copy=copy, errors=errors)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 237, in astype_array_safe
    new_values = astype_array(values, dtype, copy=copy)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 182, in astype_array
    values = _astype_nansafe(values, dtype, copy=copy)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 133, in _astype_nansafe
    return arr.astype(dtype, copy=True)
ValueError: could not convert string to float: '    '
2025/03/09 12:03 ERROR:Session state variables not initialized!
2025/03/09 12:04 ERROR:Session state variables not initialized!
2025/03/09 12:04 ERROR:Error: originalfilepath is None!
2025/03/09 12:04 ERROR:Error in raw_data_cleanup: 'Series' object has no attribute 'strip'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\raw_data_clean.py", line 62, in raw_data_cleanup
    loaddata_df["Value"].strip()
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 6299, in __getattr__
    return object.__getattribute__(self, name)
AttributeError: 'Series' object has no attribute 'strip'
2025/03/09 12:04 CRITICAL:First load crashed: 'Series' object has no attribute 'strip'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 72, in firstload
    load_data_to_session("raw_data", get_raw_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 13, in get_raw_data
    return load_raw_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\datasetupandclean.py", line 123, in load_raw_data
    return imported_raw_data(loaddata_df)
  File "H:\VScode\dashboard_demo\data\datasetupandclean.py", line 114, in imported_raw_data
    loaddata_df = raw_data_cleanup(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\raw_data_clean.py", line 62, in raw_data_cleanup
    loaddata_df["Value"].strip()
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 6299, in __getattr__
    return object.__getattribute__(self, name)
AttributeError: 'Series' object has no attribute 'strip'
2025/03/09 12:04 ERROR:Session state variables not initialized!
2025/03/09 12:04 ERROR:Error in raw_data_cleanup: 'Series' object has no attribute 'strip'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\raw_data_clean.py", line 62, in raw_data_cleanup
    loaddata_df["Value"].strip()
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 6299, in __getattr__
    return object.__getattribute__(self, name)
AttributeError: 'Series' object has no attribute 'strip'
2025/03/09 12:04 CRITICAL:First load crashed: 'Series' object has no attribute 'strip'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 72, in firstload
    load_data_to_session("raw_data", get_raw_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 13, in get_raw_data
    return load_raw_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\datasetupandclean.py", line 123, in load_raw_data
    return imported_raw_data(loaddata_df)
  File "H:\VScode\dashboard_demo\data\datasetupandclean.py", line 114, in imported_raw_data
    loaddata_df = raw_data_cleanup(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\raw_data_clean.py", line 62, in raw_data_cleanup
    loaddata_df["Value"].strip()
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 6299, in __getattr__
    return object.__getattribute__(self, name)
AttributeError: 'Series' object has no attribute 'strip'
2025/03/09 12:06 ERROR:Session state variables not initialized!
2025/03/09 12:06 ERROR:Error: originalfilepath is None!
2025/03/09 12:06 ERROR:Error in raw_data_cleanup: StringMethods.replace() missing 1 required positional argument: 'repl'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\raw_data_clean.py", line 62, in raw_data_cleanup
    loaddata_df["Value"].str
  File "H:\python310\lib\site-packages\pandas\core\strings\accessor.py", line 137, in wrapper
    return func(self, *args, **kwargs)
TypeError: StringMethods.replace() missing 1 required positional argument: 'repl'
2025/03/09 12:06 CRITICAL:First load crashed: StringMethods.replace() missing 1 required positional argument: 'repl'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 72, in firstload
    load_data_to_session("raw_data", get_raw_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 13, in get_raw_data
    return load_raw_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\datasetupandclean.py", line 123, in load_raw_data
    return imported_raw_data(loaddata_df)
  File "H:\VScode\dashboard_demo\data\datasetupandclean.py", line 114, in imported_raw_data
    loaddata_df = raw_data_cleanup(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\raw_data_clean.py", line 62, in raw_data_cleanup
    loaddata_df["Value"].str
  File "H:\python310\lib\site-packages\pandas\core\strings\accessor.py", line 137, in wrapper
    return func(self, *args, **kwargs)
TypeError: StringMethods.replace() missing 1 required positional argument: 'repl'
2025/03/09 12:06 ERROR:Session state variables not initialized!
2025/03/09 12:06 ERROR:Error in raw_data_cleanup: StringMethods.replace() missing 1 required positional argument: 'repl'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\raw_data_clean.py", line 62, in raw_data_cleanup
    loaddata_df["Value"].str
  File "H:\python310\lib\site-packages\pandas\core\strings\accessor.py", line 137, in wrapper
    return func(self, *args, **kwargs)
TypeError: StringMethods.replace() missing 1 required positional argument: 'repl'
2025/03/09 12:06 CRITICAL:First load crashed: StringMethods.replace() missing 1 required positional argument: 'repl'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 72, in firstload
    load_data_to_session("raw_data", get_raw_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 13, in get_raw_data
    return load_raw_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\datasetupandclean.py", line 123, in load_raw_data
    return imported_raw_data(loaddata_df)
  File "H:\VScode\dashboard_demo\data\datasetupandclean.py", line 114, in imported_raw_data
    loaddata_df = raw_data_cleanup(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\raw_data_clean.py", line 62, in raw_data_cleanup
    loaddata_df["Value"].str
  File "H:\python310\lib\site-packages\pandas\core\strings\accessor.py", line 137, in wrapper
    return func(self, *args, **kwargs)
TypeError: StringMethods.replace() missing 1 required positional argument: 'repl'
2025/03/09 12:06 ERROR:Session state variables not initialized!
2025/03/09 12:06 ERROR:Error: originalfilepath is None!
2025/03/09 12:06 ERROR:Error in raw_data_cleanup: could not convert string to float: ''
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\raw_data_clean.py", line 64, in raw_data_cleanup
    .astype(float)
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 6643, in astype
    new_data = self._mgr.astype(dtype=dtype, copy=copy, errors=errors)
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 430, in astype
    return self.apply(
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 363, in apply
    applied = getattr(b, f)(**kwargs)
  File "H:\python310\lib\site-packages\pandas\core\internals\blocks.py", line 758, in astype
    new_values = astype_array_safe(values, dtype, copy=copy, errors=errors)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 237, in astype_array_safe
    new_values = astype_array(values, dtype, copy=copy)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 182, in astype_array
    values = _astype_nansafe(values, dtype, copy=copy)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 133, in _astype_nansafe
    return arr.astype(dtype, copy=True)
ValueError: could not convert string to float: ''
2025/03/09 12:06 CRITICAL:First load crashed: could not convert string to float: ''
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 72, in firstload
    load_data_to_session("raw_data", get_raw_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 13, in get_raw_data
    return load_raw_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\datasetupandclean.py", line 123, in load_raw_data
    return imported_raw_data(loaddata_df)
  File "H:\VScode\dashboard_demo\data\datasetupandclean.py", line 114, in imported_raw_data
    loaddata_df = raw_data_cleanup(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\raw_data_clean.py", line 64, in raw_data_cleanup
    .astype(float)
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 6643, in astype
    new_data = self._mgr.astype(dtype=dtype, copy=copy, errors=errors)
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 430, in astype
    return self.apply(
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 363, in apply
    applied = getattr(b, f)(**kwargs)
  File "H:\python310\lib\site-packages\pandas\core\internals\blocks.py", line 758, in astype
    new_values = astype_array_safe(values, dtype, copy=copy, errors=errors)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 237, in astype_array_safe
    new_values = astype_array(values, dtype, copy=copy)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 182, in astype_array
    values = _astype_nansafe(values, dtype, copy=copy)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 133, in _astype_nansafe
    return arr.astype(dtype, copy=True)
ValueError: could not convert string to float: ''
2025/03/09 12:06 ERROR:Session state variables not initialized!
2025/03/09 12:06 ERROR:Error in raw_data_cleanup: could not convert string to float: ''
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\raw_data_clean.py", line 64, in raw_data_cleanup
    .astype(float)
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 6643, in astype
    new_data = self._mgr.astype(dtype=dtype, copy=copy, errors=errors)
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 430, in astype
    return self.apply(
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 363, in apply
    applied = getattr(b, f)(**kwargs)
  File "H:\python310\lib\site-packages\pandas\core\internals\blocks.py", line 758, in astype
    new_values = astype_array_safe(values, dtype, copy=copy, errors=errors)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 237, in astype_array_safe
    new_values = astype_array(values, dtype, copy=copy)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 182, in astype_array
    values = _astype_nansafe(values, dtype, copy=copy)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 133, in _astype_nansafe
    return arr.astype(dtype, copy=True)
ValueError: could not convert string to float: ''
2025/03/09 12:06 CRITICAL:First load crashed: could not convert string to float: ''
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 72, in firstload
    load_data_to_session("raw_data", get_raw_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 13, in get_raw_data
    return load_raw_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\datasetupandclean.py", line 123, in load_raw_data
    return imported_raw_data(loaddata_df)
  File "H:\VScode\dashboard_demo\data\datasetupandclean.py", line 114, in imported_raw_data
    loaddata_df = raw_data_cleanup(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\raw_data_clean.py", line 64, in raw_data_cleanup
    .astype(float)
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 6643, in astype
    new_data = self._mgr.astype(dtype=dtype, copy=copy, errors=errors)
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 430, in astype
    return self.apply(
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 363, in apply
    applied = getattr(b, f)(**kwargs)
  File "H:\python310\lib\site-packages\pandas\core\internals\blocks.py", line 758, in astype
    new_values = astype_array_safe(values, dtype, copy=copy, errors=errors)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 237, in astype_array_safe
    new_values = astype_array(values, dtype, copy=copy)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 182, in astype_array
    values = _astype_nansafe(values, dtype, copy=copy)
  File "H:\python310\lib\site-packages\pandas\core\dtypes\astype.py", line 133, in _astype_nansafe
    return arr.astype(dtype, copy=True)
ValueError: could not convert string to float: ''
2025/03/09 12:11 ERROR:Session state variables not initialized!
2025/03/09 12:11 ERROR:Error: originalfilepath is None!
2025/03/09 12:11 ERROR:Session state variables not initialized!
2025/03/09 12:11 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 12:11 ERROR:Failed to load election dates from file.
2025/03/09 12:11 ERROR:Error in load_cleaned_data: positional indexers are out-of-bounds
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\indexing.py", line 1714, in _get_list_axis
    return self.obj._take_with_is_copy(key, axis=axis)
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 4153, in _take_with_is_copy
    result = self.take(indices=indices, axis=axis)
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 4133, in take
    new_data = self._mgr.take(
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 891, in take
    indexer = maybe_convert_indices(indexer, n, verify=verify)
  File "H:\python310\lib\site-packages\pandas\core\indexers\utils.py", line 282, in maybe_convert_indices
    raise IndexError("indices are out-of-bounds")
IndexError: indices are out-of-bounds

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 425, in load_cleaned_data
    get_days_till_next_election(loadclean_df["ReceivedDate"])
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 408, in get_days_till_next_election
    election_dates_asc.iloc[idx],
  File "H:\python310\lib\site-packages\pandas\core\indexing.py", line 1191, in __getitem__
    return self._getitem_axis(maybe_callable, axis=axis)
  File "H:\python310\lib\site-packages\pandas\core\indexing.py", line 1743, in _getitem_axis
    return self._get_list_axis(key, axis=axis)
  File "H:\python310\lib\site-packages\pandas\core\indexing.py", line 1717, in _get_list_axis
    raise IndexError("positional indexers are out-of-bounds") from err
IndexError: positional indexers are out-of-bounds
2025/03/09 12:11 CRITICAL:First load crashed: positional indexers are out-of-bounds
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\indexing.py", line 1714, in _get_list_axis
    return self.obj._take_with_is_copy(key, axis=axis)
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 4153, in _take_with_is_copy
    result = self.take(indices=indices, axis=axis)
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 4133, in take
    new_data = self._mgr.take(
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 891, in take
    indexer = maybe_convert_indices(indexer, n, verify=verify)
  File "H:\python310\lib\site-packages\pandas\core\indexers\utils.py", line 282, in maybe_convert_indices
    raise IndexError("indices are out-of-bounds")
IndexError: indices are out-of-bounds

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 78, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 26, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 425, in load_cleaned_data
    get_days_till_next_election(loadclean_df["ReceivedDate"])
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 408, in get_days_till_next_election
    election_dates_asc.iloc[idx],
  File "H:\python310\lib\site-packages\pandas\core\indexing.py", line 1191, in __getitem__
    return self._getitem_axis(maybe_callable, axis=axis)
  File "H:\python310\lib\site-packages\pandas\core\indexing.py", line 1743, in _getitem_axis
    return self._get_list_axis(key, axis=axis)
  File "H:\python310\lib\site-packages\pandas\core\indexing.py", line 1717, in _get_list_axis
    raise IndexError("positional indexers are out-of-bounds") from err
IndexError: positional indexers are out-of-bounds
2025/03/09 12:15 ERROR:Session state variables not initialized!
2025/03/09 12:15 ERROR:Error: originalfilepath is None!
2025/03/09 12:15 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 12:16 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 12:16 ERROR:Failed to load election dates from file.
2025/03/09 12:16 ERROR:Error in load_cleaned_data: positional indexers are out-of-bounds
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\indexing.py", line 1714, in _get_list_axis
    return self.obj._take_with_is_copy(key, axis=axis)
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 4153, in _take_with_is_copy
    result = self.take(indices=indices, axis=axis)
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 4133, in take
    new_data = self._mgr.take(
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 891, in take
    indexer = maybe_convert_indices(indexer, n, verify=verify)
  File "H:\python310\lib\site-packages\pandas\core\indexers\utils.py", line 282, in maybe_convert_indices
    raise IndexError("indices are out-of-bounds")
IndexError: indices are out-of-bounds

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 425, in load_cleaned_data
    get_days_till_next_election(loadclean_df["ReceivedDate"])
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 408, in get_days_till_next_election
    election_dates_asc.iloc[idx],
  File "H:\python310\lib\site-packages\pandas\core\indexing.py", line 1191, in __getitem__
    return self._getitem_axis(maybe_callable, axis=axis)
  File "H:\python310\lib\site-packages\pandas\core\indexing.py", line 1743, in _getitem_axis
    return self._get_list_axis(key, axis=axis)
  File "H:\python310\lib\site-packages\pandas\core\indexing.py", line 1717, in _get_list_axis
    raise IndexError("positional indexers are out-of-bounds") from err
IndexError: positional indexers are out-of-bounds
2025/03/09 12:16 CRITICAL:First load crashed: positional indexers are out-of-bounds
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\indexing.py", line 1714, in _get_list_axis
    return self.obj._take_with_is_copy(key, axis=axis)
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 4153, in _take_with_is_copy
    result = self.take(indices=indices, axis=axis)
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 4133, in take
    new_data = self._mgr.take(
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 891, in take
    indexer = maybe_convert_indices(indexer, n, verify=verify)
  File "H:\python310\lib\site-packages\pandas\core\indexers\utils.py", line 282, in maybe_convert_indices
    raise IndexError("indices are out-of-bounds")
IndexError: indices are out-of-bounds

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 78, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 26, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 425, in load_cleaned_data
    get_days_till_next_election(loadclean_df["ReceivedDate"])
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 408, in get_days_till_next_election
    election_dates_asc.iloc[idx],
  File "H:\python310\lib\site-packages\pandas\core\indexing.py", line 1191, in __getitem__
    return self._getitem_axis(maybe_callable, axis=axis)
  File "H:\python310\lib\site-packages\pandas\core\indexing.py", line 1743, in _getitem_axis
    return self._get_list_axis(key, axis=axis)
  File "H:\python310\lib\site-packages\pandas\core\indexing.py", line 1717, in _get_list_axis
    raise IndexError("positional indexers are out-of-bounds") from err
IndexError: positional indexers are out-of-bounds
2025/03/09 12:16 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 12:16 ERROR:Error in load_cleaned_data: st.session_state has no attribute "ElectionDatesAscend". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "ElectionDatesAscend". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 376, in load_cleaned_data
    if st.session_state.ElectionDatesAscend is None:
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "ElectionDatesAscend". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 12:16 CRITICAL:First load crashed: st.session_state has no attribute "ElectionDatesAscend". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "ElectionDatesAscend". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 78, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 26, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 376, in load_cleaned_data
    if st.session_state.ElectionDatesAscend is None:
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "ElectionDatesAscend". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 12:19 ERROR:Session state variables not initialized!
2025/03/09 12:19 ERROR:Error: originalfilepath is None!
2025/03/09 12:19 ERROR:Session state variables not initialized!
2025/03/09 12:19 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 12:19 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 12:19 ERROR:Failed to load election dates from file.
2025/03/09 12:19 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 12:39 ERROR:Error in display_visualizations: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 113, in display_visualizations
    plot_bar_line.plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_line.py", line 168, in plot_bar_line_by_year
    st.plotly_chart(fig, use_container_width=use_container_width)
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\plotly_chart.py", line 509, in plotly_chart
    plotly_chart_proto.id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 131, in _register_element_id
    raise StreamlitDuplicateElementId(element_type)
streamlit.errors.StreamlitDuplicateElementId: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
2025/03/09 12:39 CRITICAL:Menu setup crashed: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 53, in mod_bequeths
    display_per_group_data_page(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page_per_donor.py", line 70, in display_per_group_data_page
    display_visualizations(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 113, in display_visualizations
    plot_bar_line.plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_line.py", line 168, in plot_bar_line_by_year
    st.plotly_chart(fig, use_container_width=use_container_width)
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\plotly_chart.py", line 509, in plotly_chart
    plotly_chart_proto.id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 131, in _register_element_id
    raise StreamlitDuplicateElementId(element_type)
streamlit.errors.StreamlitDuplicateElementId: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
2025/03/09 12:39 CRITICAL:Menu setup crashed: There are multiple `slider` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `slider` element.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 103, in mod_donations_per_political_party
    display_per_group_data_page(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page_per_donor.py", line 34, in display_per_group_data_page
    ) = load_and_filter_pergroup(
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 218, in load_and_filter_pergroup
    date_range2 = st.slider(
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\slider.py", line 504, in slider
    return self._slider(
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\slider.py", line 549, in _slider
    element_id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 131, in _register_element_id
    raise StreamlitDuplicateElementId(element_type)
streamlit.errors.StreamlitDuplicateElementId: There are multiple `slider` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `slider` element.
2025/03/09 12:47 CRITICAL:Menu setup crashed: get_value_total() takes from 1 to 2 positional arguments but 4 were given
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 274, in hlf_body
    avg_donation = get_value_total(
TypeError: get_value_total() takes from 1 to 2 positional arguments but 4 were given
2025/03/09 12:55 ERROR:Session state variables not initialized!
2025/03/09 12:55 ERROR:Error: originalfilepath is None!
2025/03/09 12:55 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 12:55 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 12:55 ERROR:Failed to load election dates from file.
2025/03/09 12:55 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 12:55 ERROR:Error in hlf_body: calculate_agg_by_variable() got an unexpected keyword argument 'df'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 275, in hlf_body
    avg_donation = calculate_agg_by_variable(
TypeError: calculate_agg_by_variable() got an unexpected keyword argument 'df'
2025/03/09 12:55 CRITICAL:Menu setup crashed: calculate_agg_by_variable() got an unexpected keyword argument 'df'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 275, in hlf_body
    avg_donation = calculate_agg_by_variable(
TypeError: calculate_agg_by_variable() got an unexpected keyword argument 'df'
2025/03/09 12:59 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 12:59 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 31, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 12:59 ERROR:Session state variables not initialized!
2025/03/09 12:59 ERROR:Error: originalfilepath is None!
2025/03/09 12:59 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 12:59 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 12:59 ERROR:Failed to load election dates from file.
2025/03/09 12:59 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 01:00 ERROR:Error in hlf_body: 'RegulatedEntityId'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 288, in hlf_body
    plot_bar_line.plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_line.py", line 55, in plot_bar_line_by_year
    graph_df.groupby([XValues, GroupData], observed=True)[YValues]
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 9183, in groupby
    return DataFrameGroupBy(
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1329, in __init__
    grouper, exclusions, obj = get_grouper(
  File "H:\python310\lib\site-packages\pandas\core\groupby\grouper.py", line 1043, in get_grouper
    raise KeyError(gpr)
KeyError: 'RegulatedEntityId'
2025/03/09 01:00 CRITICAL:Menu setup crashed: 'RegulatedEntityId'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 288, in hlf_body
    plot_bar_line.plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_line.py", line 55, in plot_bar_line_by_year
    graph_df.groupby([XValues, GroupData], observed=True)[YValues]
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 9183, in groupby
    return DataFrameGroupBy(
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1329, in __init__
    grouper, exclusions, obj = get_grouper(
  File "H:\python310\lib\site-packages\pandas\core\groupby\grouper.py", line 1043, in get_grouper
    raise KeyError(gpr)
KeyError: 'RegulatedEntityId'
2025/03/09 01:02 CRITICAL:Menu setup crashed: invalid syntax. Perhaps you forgot a comma? (headlinefigures.py, line 278)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 10, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 278
    groupby_name="Party"
                 
SyntaxError: invalid syntax. Perhaps you forgot a comma?
2025/03/09 01:02 ERROR:Error in pagesetup: expected an indented block after 'else' statement on line 304 (headlinefigures.py, line 306)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 10, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 306
    st.write("---")
IndentationError: expected an indented block after 'else' statement on line 304
2025/03/09 01:02 ERROR:Error in pagesetup: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo\app_pages\headlinefigures.py)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 10, in pagesetup
    from app_pages.headlinefigures import hlf_body
ImportError: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo\app_pages\headlinefigures.py)
2025/03/09 01:02 CRITICAL:Menu setup crashed: expected an indented block after 'else' statement on line 304 (headlinefigures.py, line 306)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 10, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 306
    st.write("---")
IndentationError: expected an indented block after 'else' statement on line 304
2025/03/09 01:02 CRITICAL:Menu setup crashed: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo\app_pages\headlinefigures.py)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 10, in pagesetup
    from app_pages.headlinefigures import hlf_body
ImportError: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo\app_pages\headlinefigures.py)
2025/03/09 01:04 ERROR:Session state variables not initialized!
2025/03/09 01:04 ERROR:Error: originalfilepath is None!
2025/03/09 01:04 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 01:04 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 01:04 ERROR:Failed to load election dates from file.
2025/03/09 01:04 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 01:04 ERROR:Error in hlf_body: 'RegulatedEntityId'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 289, in hlf_body
    plot_bar_line.plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_line.py", line 55, in plot_bar_line_by_year
    graph_df.groupby([XValues, GroupData], observed=True)[YValues]
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 9183, in groupby
    return DataFrameGroupBy(
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1329, in __init__
    grouper, exclusions, obj = get_grouper(
  File "H:\python310\lib\site-packages\pandas\core\groupby\grouper.py", line 1043, in get_grouper
    raise KeyError(gpr)
KeyError: 'RegulatedEntityId'
2025/03/09 01:04 CRITICAL:Menu setup crashed: 'RegulatedEntityId'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 289, in hlf_body
    plot_bar_line.plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_line.py", line 55, in plot_bar_line_by_year
    graph_df.groupby([XValues, GroupData], observed=True)[YValues]
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 9183, in groupby
    return DataFrameGroupBy(
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1329, in __init__
    grouper, exclusions, obj = get_grouper(
  File "H:\python310\lib\site-packages\pandas\core\groupby\grouper.py", line 1043, in get_grouper
    raise KeyError(gpr)
KeyError: 'RegulatedEntityId'
2025/03/09 01:05 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:05 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 31, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:05 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:05 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 31, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:05 ERROR:Session state variables not initialized!
2025/03/09 01:05 ERROR:Error: originalfilepath is None!
2025/03/09 01:05 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 01:05 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 01:05 ERROR:Failed to load election dates from file.
2025/03/09 01:05 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 01:05 ERROR:Error in hlf_body: cannot insert Party, already exists
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 289, in hlf_body
    plot_bar_line.plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_line.py", line 57, in plot_bar_line_by_year
    .reset_index()
  File "H:\python310\lib\site-packages\pandas\core\series.py", line 1770, in reset_index
    return df.reset_index(
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 6472, in reset_index
    new_obj.insert(
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 5158, in insert
    raise ValueError(f"cannot insert {column}, already exists")
ValueError: cannot insert Party, already exists
2025/03/09 01:05 CRITICAL:Menu setup crashed: cannot insert Party, already exists
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 289, in hlf_body
    plot_bar_line.plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_line.py", line 57, in plot_bar_line_by_year
    .reset_index()
  File "H:\python310\lib\site-packages\pandas\core\series.py", line 1770, in reset_index
    return df.reset_index(
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 6472, in reset_index
    new_obj.insert(
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 5158, in insert
    raise ValueError(f"cannot insert {column}, already exists")
ValueError: cannot insert Party, already exists
2025/03/09 01:06 CRITICAL:Menu setup crashed: 'RegEntity_Group'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 289, in hlf_body
    plot_bar_line.plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_line.py", line 55, in plot_bar_line_by_year
    graph_df.groupby([XValues, GroupData], observed=True)[YValues]
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 9183, in groupby
    return DataFrameGroupBy(
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1329, in __init__
    grouper, exclusions, obj = get_grouper(
  File "H:\python310\lib\site-packages\pandas\core\groupby\grouper.py", line 1043, in get_grouper
    raise KeyError(gpr)
KeyError: 'RegEntity_Group'
2025/03/09 01:07 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:07 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 31, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:07 ERROR:Session state variables not initialized!
2025/03/09 01:07 ERROR:Error: originalfilepath is None!
2025/03/09 01:07 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 01:07 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 01:07 ERROR:Failed to load election dates from file.
2025/03/09 01:07 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 01:07 ERROR:Error in hlf_body: 'RegEntity_Group'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 289, in hlf_body
    plot_bar_line.plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_line.py", line 55, in plot_bar_line_by_year
    graph_df.groupby([XValues, GroupData], observed=True)[YValues]
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 9183, in groupby
    return DataFrameGroupBy(
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1329, in __init__
    grouper, exclusions, obj = get_grouper(
  File "H:\python310\lib\site-packages\pandas\core\groupby\grouper.py", line 1043, in get_grouper
    raise KeyError(gpr)
KeyError: 'RegEntity_Group'
2025/03/09 01:07 CRITICAL:Menu setup crashed: 'RegEntity_Group'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 289, in hlf_body
    plot_bar_line.plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_line.py", line 55, in plot_bar_line_by_year
    graph_df.groupby([XValues, GroupData], observed=True)[YValues]
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 9183, in groupby
    return DataFrameGroupBy(
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1329, in __init__
    grouper, exclusions, obj = get_grouper(
  File "H:\python310\lib\site-packages\pandas\core\groupby\grouper.py", line 1043, in get_grouper
    raise KeyError(gpr)
KeyError: 'RegEntity_Group'
2025/03/09 01:09 ERROR:Session state variables not initialized!
2025/03/09 01:09 ERROR:Error: originalfilepath is None!
2025/03/09 01:09 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 01:09 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 01:09 ERROR:Failed to load election dates from file.
2025/03/09 01:09 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 01:09 ERROR:Error in hlf_body: 'NoneType' object is not callable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 289, in hlf_body
    plot_bar_line.plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_line.py", line 55, in plot_bar_line_by_year
    graph_df.groupby([XValues, GroupData], observed=True)[YValues]
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 9183, in groupby
    return DataFrameGroupBy(
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1329, in __init__
    grouper, exclusions, obj = get_grouper(
  File "H:\python310\lib\site-packages\pandas\core\groupby\grouper.py", line 1054, in get_grouper
    Grouping(
  File "H:\python310\lib\site-packages\pandas\core\groupby\grouper.py", line 603, in __init__
    grouping_vector = index.map(grouping_vector)
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 6491, in map
    new_values = self._map_values(mapper, na_action=na_action)
  File "H:\python310\lib\site-packages\pandas\core\base.py", line 921, in _map_values
    return algorithms.map_array(arr, mapper, na_action=na_action, convert=convert)
  File "H:\python310\lib\site-packages\pandas\core\algorithms.py", line 1743, in map_array
    return lib.map_infer(values, mapper, convert=convert)
  File "lib.pyx", line 2972, in pandas._libs.lib.map_infer
TypeError: 'NoneType' object is not callable
2025/03/09 01:09 CRITICAL:Menu setup crashed: 'NoneType' object is not callable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 289, in hlf_body
    plot_bar_line.plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_line.py", line 55, in plot_bar_line_by_year
    graph_df.groupby([XValues, GroupData], observed=True)[YValues]
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 9183, in groupby
    return DataFrameGroupBy(
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1329, in __init__
    grouper, exclusions, obj = get_grouper(
  File "H:\python310\lib\site-packages\pandas\core\groupby\grouper.py", line 1054, in get_grouper
    Grouping(
  File "H:\python310\lib\site-packages\pandas\core\groupby\grouper.py", line 603, in __init__
    grouping_vector = index.map(grouping_vector)
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 6491, in map
    new_values = self._map_values(mapper, na_action=na_action)
  File "H:\python310\lib\site-packages\pandas\core\base.py", line 921, in _map_values
    return algorithms.map_array(arr, mapper, na_action=na_action, convert=convert)
  File "H:\python310\lib\site-packages\pandas\core\algorithms.py", line 1743, in map_array
    return lib.map_infer(values, mapper, convert=convert)
  File "lib.pyx", line 2972, in pandas._libs.lib.map_infer
TypeError: 'NoneType' object is not callable
2025/03/09 01:09 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:09 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 31, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:09 ERROR:Session state variables not initialized!
2025/03/09 01:09 ERROR:Error: originalfilepath is None!
2025/03/09 01:09 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 01:09 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 01:09 ERROR:Failed to load election dates from file.
2025/03/09 01:10 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 01:10 ERROR:Error in hlf_body: cannot insert Party, already exists
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 289, in hlf_body
    plot_bar_line.plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_line.py", line 57, in plot_bar_line_by_year
    .reset_index()
  File "H:\python310\lib\site-packages\pandas\core\series.py", line 1770, in reset_index
    return df.reset_index(
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 6472, in reset_index
    new_obj.insert(
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 5158, in insert
    raise ValueError(f"cannot insert {column}, already exists")
ValueError: cannot insert Party, already exists
2025/03/09 01:10 CRITICAL:Menu setup crashed: cannot insert Party, already exists
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 289, in hlf_body
    plot_bar_line.plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_line.py", line 57, in plot_bar_line_by_year
    .reset_index()
  File "H:\python310\lib\site-packages\pandas\core\series.py", line 1770, in reset_index
    return df.reset_index(
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 6472, in reset_index
    new_obj.insert(
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 5158, in insert
    raise ValueError(f"cannot insert {column}, already exists")
ValueError: cannot insert Party, already exists
2025/03/09 01:11 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:11 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 31, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:11 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:11 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 31, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:12 ERROR:Session state variables not initialized!
2025/03/09 01:12 ERROR:Error: originalfilepath is None!
2025/03/09 01:12 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 01:12 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 01:12 ERROR:Failed to load election dates from file.
2025/03/09 01:12 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 01:12 ERROR:Error in hlf_body: 'Party'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 289, in hlf_body
    plot_bar_line.plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_line.py", line 55, in plot_bar_line_by_year
    graph_df.groupby([XValues, GroupData], observed=True)[YValues]
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 9183, in groupby
    return DataFrameGroupBy(
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1329, in __init__
    grouper, exclusions, obj = get_grouper(
  File "H:\python310\lib\site-packages\pandas\core\groupby\grouper.py", line 1043, in get_grouper
    raise KeyError(gpr)
KeyError: 'Party'
2025/03/09 01:12 CRITICAL:Menu setup crashed: 'Party'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 289, in hlf_body
    plot_bar_line.plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_line.py", line 55, in plot_bar_line_by_year
    graph_df.groupby([XValues, GroupData], observed=True)[YValues]
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 9183, in groupby
    return DataFrameGroupBy(
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1329, in __init__
    grouper, exclusions, obj = get_grouper(
  File "H:\python310\lib\site-packages\pandas\core\groupby\grouper.py", line 1043, in get_grouper
    raise KeyError(gpr)
KeyError: 'Party'
2025/03/09 01:12 CRITICAL:Menu setup crashed: 'Column not found: AverageDonation'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 289, in hlf_body
    plot_bar_line.plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_line.py", line 55, in plot_bar_line_by_year
    graph_df.groupby([XValues, GroupData], observed=True)[YValues]
  File "H:\python310\lib\site-packages\pandas\core\groupby\generic.py", line 1951, in __getitem__
    return super().__getitem__(key)
  File "H:\python310\lib\site-packages\pandas\core\base.py", line 244, in __getitem__
    raise KeyError(f"Column not found: {key}")
KeyError: 'Column not found: AverageDonation'
2025/03/09 01:18 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:18 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 31, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:18 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:18 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 31, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:18 ERROR:Session state variables not initialized!
2025/03/09 01:18 ERROR:Error: originalfilepath is None!
2025/03/09 01:18 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 01:19 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 01:19 ERROR:Failed to load election dates from file.
2025/03/09 01:19 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 01:24 ERROR:Session state variables not initialized!
2025/03/09 01:24 ERROR:Error: originalfilepath is None!
2025/03/09 01:24 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 01:24 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 01:24 ERROR:Failed to load election dates from file.
2025/03/09 01:24 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 01:25 ERROR:Error in hlf_body: 'SeriesGroupBy' object has no attribute 'avg'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 275, in hlf_body
    avg_donation = calculate_agg_by_variable(
  File "H:\VScode\dashboard_demo\components\calculations.py", line 486, in calculate_agg_by_variable
    agg_df = datafile.groupby(groupby_variable, as_index=False).agg({agg_variable: agg_type})
  File "H:\python310\lib\site-packages\pandas\core\groupby\generic.py", line 1432, in aggregate
    result = op.agg()
  File "H:\python310\lib\site-packages\pandas\core\apply.py", line 190, in agg
    return self.agg_dict_like()
  File "H:\python310\lib\site-packages\pandas\core\apply.py", line 423, in agg_dict_like
    return self.agg_or_apply_dict_like(op_name="agg")
  File "H:\python310\lib\site-packages\pandas\core\apply.py", line 1608, in agg_or_apply_dict_like
    result_index, result_data = self.compute_dict_like(
  File "H:\python310\lib\site-packages\pandas\core\apply.py", line 496, in compute_dict_like
    results = [
  File "H:\python310\lib\site-packages\pandas\core\apply.py", line 497, in <listcomp>
    getattr(obj._gotitem(key, ndim=1), op_name)(how, **kwargs)
  File "H:\python310\lib\site-packages\pandas\core\groupby\generic.py", line 249, in aggregate
    return getattr(self, func)(*args, **kwargs)
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1363, in __getattr__
    raise AttributeError(
AttributeError: 'SeriesGroupBy' object has no attribute 'avg'. Did you mean: 'agg'?
2025/03/09 01:25 CRITICAL:Menu setup crashed: 'SeriesGroupBy' object has no attribute 'avg'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 275, in hlf_body
    avg_donation = calculate_agg_by_variable(
  File "H:\VScode\dashboard_demo\components\calculations.py", line 486, in calculate_agg_by_variable
    agg_df = datafile.groupby(groupby_variable, as_index=False).agg({agg_variable: agg_type})
  File "H:\python310\lib\site-packages\pandas\core\groupby\generic.py", line 1432, in aggregate
    result = op.agg()
  File "H:\python310\lib\site-packages\pandas\core\apply.py", line 190, in agg
    return self.agg_dict_like()
  File "H:\python310\lib\site-packages\pandas\core\apply.py", line 423, in agg_dict_like
    return self.agg_or_apply_dict_like(op_name="agg")
  File "H:\python310\lib\site-packages\pandas\core\apply.py", line 1608, in agg_or_apply_dict_like
    result_index, result_data = self.compute_dict_like(
  File "H:\python310\lib\site-packages\pandas\core\apply.py", line 496, in compute_dict_like
    results = [
  File "H:\python310\lib\site-packages\pandas\core\apply.py", line 497, in <listcomp>
    getattr(obj._gotitem(key, ndim=1), op_name)(how, **kwargs)
  File "H:\python310\lib\site-packages\pandas\core\groupby\generic.py", line 249, in aggregate
    return getattr(self, func)(*args, **kwargs)
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1363, in __getattr__
    raise AttributeError(
AttributeError: 'SeriesGroupBy' object has no attribute 'avg'. Did you mean: 'agg'?
2025/03/09 01:28 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:28 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 31, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:28 ERROR:Session state variables not initialized!
2025/03/09 01:28 ERROR:Error: originalfilepath is None!
2025/03/09 01:28 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 01:28 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 01:28 ERROR:Failed to load election dates from file.
2025/03/09 01:28 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 01:28 ERROR:Error in hlf_body: 'DataFrameGroupBy' object has no attribute 'agg_type'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 275, in hlf_body
    avg_donation = calculate_agg_by_variable(
  File "H:\VScode\dashboard_demo\components\calculations.py", line 486, in calculate_agg_by_variable
    agg_df = datafile.groupby(groupby_variable, as_index=False).agg_type()
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1363, in __getattr__
    raise AttributeError(
AttributeError: 'DataFrameGroupBy' object has no attribute 'agg_type'
2025/03/09 01:28 CRITICAL:Menu setup crashed: 'DataFrameGroupBy' object has no attribute 'agg_type'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 275, in hlf_body
    avg_donation = calculate_agg_by_variable(
  File "H:\VScode\dashboard_demo\components\calculations.py", line 486, in calculate_agg_by_variable
    agg_df = datafile.groupby(groupby_variable, as_index=False).agg_type()
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1363, in __getattr__
    raise AttributeError(
AttributeError: 'DataFrameGroupBy' object has no attribute 'agg_type'
2025/03/09 01:30 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:30 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 31, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:30 ERROR:Session state variables not initialized!
2025/03/09 01:30 ERROR:Error: originalfilepath is None!
2025/03/09 01:30 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 01:30 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 01:30 ERROR:Failed to load election dates from file.
2025/03/09 01:30 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 01:30 ERROR:Error in hlf_body: Unsupported aggregation type: avg
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 275, in hlf_body
    avg_donation = calculate_agg_by_variable(
  File "H:\VScode\dashboard_demo\components\calculations.py", line 495, in calculate_agg_by_variable
    raise ValueError(f"Unsupported aggregation type: {agg_type}")
ValueError: Unsupported aggregation type: avg
2025/03/09 01:30 CRITICAL:Menu setup crashed: Unsupported aggregation type: avg
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 275, in hlf_body
    avg_donation = calculate_agg_by_variable(
  File "H:\VScode\dashboard_demo\components\calculations.py", line 495, in calculate_agg_by_variable
    raise ValueError(f"Unsupported aggregation type: {agg_type}")
ValueError: Unsupported aggregation type: avg
2025/03/09 01:31 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:31 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 31, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:31 ERROR:Session state variables not initialized!
2025/03/09 01:31 ERROR:Error: originalfilepath is None!
2025/03/09 01:31 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 01:31 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 01:31 ERROR:Failed to load election dates from file.
2025/03/09 01:31 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 01:31 ERROR:Error in hlf_body: agg function failed [how->mean,dtype->object]
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1942, in _agg_py_fallback
    res_values = self._grouper.agg_series(ser, alt, preserve_dtype=True)
  File "H:\python310\lib\site-packages\pandas\core\groupby\ops.py", line 864, in agg_series
    result = self._aggregate_series_pure_python(obj, func)
  File "H:\python310\lib\site-packages\pandas\core\groupby\ops.py", line 885, in _aggregate_series_pure_python
    res = func(group)
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 2454, in <lambda>
    alt=lambda x: Series(x, copy=False).mean(numeric_only=numeric_only),
  File "H:\python310\lib\site-packages\pandas\core\series.py", line 6549, in mean
    return NDFrame.mean(self, axis, skipna, numeric_only, **kwargs)
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 12420, in mean
    return self._stat_function(
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 12377, in _stat_function
    return self._reduce(
  File "H:\python310\lib\site-packages\pandas\core\series.py", line 6457, in _reduce
    return op(delegate, skipna=skipna, **kwds)
  File "H:\python310\lib\site-packages\pandas\core\nanops.py", line 147, in f
    result = alt(values, axis=axis, skipna=skipna, **kwds)
  File "H:\python310\lib\site-packages\pandas\core\nanops.py", line 404, in new_func
    result = func(values, axis=axis, skipna=skipna, mask=mask, **kwargs)
  File "H:\python310\lib\site-packages\pandas\core\nanops.py", line 720, in nanmean
    the_sum = _ensure_numeric(the_sum)
  File "H:\python310\lib\site-packages\pandas\core\nanops.py", line 1701, in _ensure_numeric
    raise TypeError(f"Could not convert string '{x}' to numeric")
TypeError: Could not convert string 'TV0036284' to numeric

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 275, in hlf_body
    avg_donation = calculate_agg_by_variable(
  File "H:\VScode\dashboard_demo\components\calculations.py", line 487, in calculate_agg_by_variable
    agg_df = datafile.groupby(groupby_variable, as_index=False).mean()
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 2452, in mean
    result = self._cython_agg_general(
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1998, in _cython_agg_general
    new_mgr = data.grouped_reduce(array_func)
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 1469, in grouped_reduce
    applied = sb.apply(func)
  File "H:\python310\lib\site-packages\pandas\core\internals\blocks.py", line 393, in apply
    result = func(self.values, **kwargs)
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1995, in array_func
    result = self._agg_py_fallback(how, values, ndim=data.ndim, alt=alt)
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1946, in _agg_py_fallback
    raise type(err)(msg) from err
TypeError: agg function failed [how->mean,dtype->object]
2025/03/09 01:31 CRITICAL:Menu setup crashed: agg function failed [how->mean,dtype->object]
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1942, in _agg_py_fallback
    res_values = self._grouper.agg_series(ser, alt, preserve_dtype=True)
  File "H:\python310\lib\site-packages\pandas\core\groupby\ops.py", line 864, in agg_series
    result = self._aggregate_series_pure_python(obj, func)
  File "H:\python310\lib\site-packages\pandas\core\groupby\ops.py", line 885, in _aggregate_series_pure_python
    res = func(group)
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 2454, in <lambda>
    alt=lambda x: Series(x, copy=False).mean(numeric_only=numeric_only),
  File "H:\python310\lib\site-packages\pandas\core\series.py", line 6549, in mean
    return NDFrame.mean(self, axis, skipna, numeric_only, **kwargs)
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 12420, in mean
    return self._stat_function(
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 12377, in _stat_function
    return self._reduce(
  File "H:\python310\lib\site-packages\pandas\core\series.py", line 6457, in _reduce
    return op(delegate, skipna=skipna, **kwds)
  File "H:\python310\lib\site-packages\pandas\core\nanops.py", line 147, in f
    result = alt(values, axis=axis, skipna=skipna, **kwds)
  File "H:\python310\lib\site-packages\pandas\core\nanops.py", line 404, in new_func
    result = func(values, axis=axis, skipna=skipna, mask=mask, **kwargs)
  File "H:\python310\lib\site-packages\pandas\core\nanops.py", line 720, in nanmean
    the_sum = _ensure_numeric(the_sum)
  File "H:\python310\lib\site-packages\pandas\core\nanops.py", line 1701, in _ensure_numeric
    raise TypeError(f"Could not convert string '{x}' to numeric")
TypeError: Could not convert string 'TV0036284' to numeric

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 275, in hlf_body
    avg_donation = calculate_agg_by_variable(
  File "H:\VScode\dashboard_demo\components\calculations.py", line 487, in calculate_agg_by_variable
    agg_df = datafile.groupby(groupby_variable, as_index=False).mean()
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 2452, in mean
    result = self._cython_agg_general(
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1998, in _cython_agg_general
    new_mgr = data.grouped_reduce(array_func)
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 1469, in grouped_reduce
    applied = sb.apply(func)
  File "H:\python310\lib\site-packages\pandas\core\internals\blocks.py", line 393, in apply
    result = func(self.values, **kwargs)
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1995, in array_func
    result = self._agg_py_fallback(how, values, ndim=data.ndim, alt=alt)
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1946, in _agg_py_fallback
    raise type(err)(msg) from err
TypeError: agg function failed [how->mean,dtype->object]
2025/03/09 01:32 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:32 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 31, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:32 ERROR:Session state variables not initialized!
2025/03/09 01:32 ERROR:Error: originalfilepath is None!
2025/03/09 01:32 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 01:32 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 01:32 ERROR:Failed to load election dates from file.
2025/03/09 01:32 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 01:38 ERROR:Session state variables not initialized!
2025/03/09 01:38 ERROR:Error: originalfilepath is None!
2025/03/09 01:38 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 01:38 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 01:38 ERROR:Failed to load election dates from file.
2025/03/09 01:38 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 01:40 ERROR:Error in pagesetup: invalid syntax. Perhaps you forgot a comma? (multi_page.py, line 36)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 8, in pagesetup
    from app_pages.multi_page import MultiPage
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 36
    version = get_git_version()
              ^
SyntaxError: invalid syntax. Perhaps you forgot a comma?
2025/03/09 01:40 CRITICAL:Menu setup crashed: invalid syntax. Perhaps you forgot a comma? (multi_page.py, line 36)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 8, in pagesetup
    from app_pages.multi_page import MultiPage
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 36
    version = get_git_version()
              ^
SyntaxError: invalid syntax. Perhaps you forgot a comma?
2025/03/09 01:40 CRITICAL:Menu setup crashed: invalid syntax. Perhaps you forgot a comma? (multi_page.py, line 36)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 8, in pagesetup
    from app_pages.multi_page import MultiPage
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 36
    version = get_git_version()
              ^
SyntaxError: invalid syntax. Perhaps you forgot a comma?
2025/03/09 01:40 ERROR:Error in pagesetup: positional argument follows keyword argument (multi_page.py, line 40)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 8, in pagesetup
    from app_pages.multi_page import MultiPage
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 40
    )
    ^
SyntaxError: positional argument follows keyword argument
2025/03/09 01:40 ERROR:Error in pagesetup: positional argument follows keyword argument (multi_page.py, line 40)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 8, in pagesetup
    from app_pages.multi_page import MultiPage
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 40
    )
    ^
SyntaxError: positional argument follows keyword argument
2025/03/09 01:40 CRITICAL:Menu setup crashed: positional argument follows keyword argument (multi_page.py, line 40)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 8, in pagesetup
    from app_pages.multi_page import MultiPage
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 40
    )
    ^
SyntaxError: positional argument follows keyword argument
2025/03/09 01:40 CRITICAL:Menu setup crashed: positional argument follows keyword argument (multi_page.py, line 40)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 8, in pagesetup
    from app_pages.multi_page import MultiPage
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 40
    )
    ^
SyntaxError: positional argument follows keyword argument
2025/03/09 01:41 ERROR:Error in pagesetup: invalid syntax. Perhaps you forgot a comma? (multi_page.py, line 36)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 8, in pagesetup
    from app_pages.multi_page import MultiPage
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 36
    st.text(f"Version: {version}")
    ^^^^^^^^^^
SyntaxError: invalid syntax. Perhaps you forgot a comma?
2025/03/09 01:41 ERROR:Error in pagesetup: invalid syntax. Perhaps you forgot a comma? (multi_page.py, line 36)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 8, in pagesetup
    from app_pages.multi_page import MultiPage
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 36
    st.text(f"Version: {version}")
    ^^^^^^^^^^
SyntaxError: invalid syntax. Perhaps you forgot a comma?
2025/03/09 01:41 CRITICAL:Menu setup crashed: invalid syntax. Perhaps you forgot a comma? (multi_page.py, line 36)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 8, in pagesetup
    from app_pages.multi_page import MultiPage
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 36
    st.text(f"Version: {version}")
    ^^^^^^^^^^
SyntaxError: invalid syntax. Perhaps you forgot a comma?
2025/03/09 01:41 CRITICAL:Menu setup crashed: invalid syntax. Perhaps you forgot a comma? (multi_page.py, line 36)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 8, in pagesetup
    from app_pages.multi_page import MultiPage
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 36
    st.text(f"Version: {version}")
    ^^^^^^^^^^
SyntaxError: invalid syntax. Perhaps you forgot a comma?
2025/03/09 01:42 ERROR:Error in pagesetup: 'function' object is not iterable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 34, in run
    page = st.sidebar.radio(
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\radio.py", line 275, in radio
    return self._radio(
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\radio.py", line 320, in _radio
    opt = convert_anything_to_list(options)
  File "H:\python310\lib\site-packages\streamlit\dataframe_util.py", line 941, in convert_anything_to_list
    data_df = convert_anything_to_pandas_df(obj, ensure_copy=True)
  File "H:\python310\lib\site-packages\streamlit\dataframe_util.py", line 678, in convert_anything_to_pandas_df
    [d[0] if d else "" for d in data.description] if data.description else None
TypeError: 'function' object is not iterable
2025/03/09 01:42 CRITICAL:Menu setup crashed: 'function' object is not iterable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 34, in run
    page = st.sidebar.radio(
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\radio.py", line 275, in radio
    return self._radio(
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\radio.py", line 320, in _radio
    opt = convert_anything_to_list(options)
  File "H:\python310\lib\site-packages\streamlit\dataframe_util.py", line 941, in convert_anything_to_list
    data_df = convert_anything_to_pandas_df(obj, ensure_copy=True)
  File "H:\python310\lib\site-packages\streamlit\dataframe_util.py", line 678, in convert_anything_to_pandas_df
    [d[0] if d else "" for d in data.description] if data.description else None
TypeError: 'function' object is not iterable
2025/03/09 01:42 ERROR:Error in pagesetup: 'function' object is not iterable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 34, in run
    st.warning("No pages have been added yet!")
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\radio.py", line 275, in radio
    return self._radio(
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\radio.py", line 320, in _radio
    opt = convert_anything_to_list(options)
  File "H:\python310\lib\site-packages\streamlit\dataframe_util.py", line 941, in convert_anything_to_list
    data_df = convert_anything_to_pandas_df(obj, ensure_copy=True)
  File "H:\python310\lib\site-packages\streamlit\dataframe_util.py", line 678, in convert_anything_to_pandas_df
    [d[0] if d else "" for d in data.description] if data.description else None
TypeError: 'function' object is not iterable
2025/03/09 01:42 CRITICAL:Menu setup crashed: 'function' object is not iterable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 34, in run
    st.warning("No pages have been added yet!")
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\radio.py", line 275, in radio
    return self._radio(
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\radio.py", line 320, in _radio
    opt = convert_anything_to_list(options)
  File "H:\python310\lib\site-packages\streamlit\dataframe_util.py", line 941, in convert_anything_to_list
    data_df = convert_anything_to_pandas_df(obj, ensure_copy=True)
  File "H:\python310\lib\site-packages\streamlit\dataframe_util.py", line 678, in convert_anything_to_pandas_df
    [d[0] if d else "" for d in data.description] if data.description else None
TypeError: 'function' object is not iterable
2025/03/09 01:43 ERROR:Session state variables not initialized!
2025/03/09 01:43 ERROR:Error: originalfilepath is None!
2025/03/09 01:43 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 01:43 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 01:43 ERROR:Failed to load election dates from file.
2025/03/09 01:43 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 01:43 ERROR:Error in hlf_body: 'DataFrameGroupBy' object has no attribute 'avg'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 275, in hlf_body
    avg_donation = calculate_agg_by_variable(
  File "H:\VScode\dashboard_demo\components\calculations.py", line 492, in calculate_agg_by_variable
    agg_df = datafile.groupby(groupby_variable, as_index=False).avg()
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1363, in __getattr__
    raise AttributeError(
AttributeError: 'DataFrameGroupBy' object has no attribute 'avg'. Did you mean: 'agg'?
2025/03/09 01:43 CRITICAL:Menu setup crashed: 'DataFrameGroupBy' object has no attribute 'avg'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 275, in hlf_body
    avg_donation = calculate_agg_by_variable(
  File "H:\VScode\dashboard_demo\components\calculations.py", line 492, in calculate_agg_by_variable
    agg_df = datafile.groupby(groupby_variable, as_index=False).avg()
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1363, in __getattr__
    raise AttributeError(
AttributeError: 'DataFrameGroupBy' object has no attribute 'avg'. Did you mean: 'agg'?
2025/03/09 01:45 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:45 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 31, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:45 ERROR:Session state variables not initialized!
2025/03/09 01:45 ERROR:Error: originalfilepath is None!
2025/03/09 01:45 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 01:45 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 01:45 ERROR:Failed to load election dates from file.
2025/03/09 01:45 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 01:45 ERROR:Error in hlf_body: agg function failed [how->mean,dtype->object]
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1942, in _agg_py_fallback
    res_values = self._grouper.agg_series(ser, alt, preserve_dtype=True)
  File "H:\python310\lib\site-packages\pandas\core\groupby\ops.py", line 864, in agg_series
    result = self._aggregate_series_pure_python(obj, func)
  File "H:\python310\lib\site-packages\pandas\core\groupby\ops.py", line 885, in _aggregate_series_pure_python
    res = func(group)
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 2454, in <lambda>
    alt=lambda x: Series(x, copy=False).mean(numeric_only=numeric_only),
  File "H:\python310\lib\site-packages\pandas\core\series.py", line 6549, in mean
    return NDFrame.mean(self, axis, skipna, numeric_only, **kwargs)
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 12420, in mean
    return self._stat_function(
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 12377, in _stat_function
    return self._reduce(
  File "H:\python310\lib\site-packages\pandas\core\series.py", line 6457, in _reduce
    return op(delegate, skipna=skipna, **kwds)
  File "H:\python310\lib\site-packages\pandas\core\nanops.py", line 147, in f
    result = alt(values, axis=axis, skipna=skipna, **kwds)
  File "H:\python310\lib\site-packages\pandas\core\nanops.py", line 404, in new_func
    result = func(values, axis=axis, skipna=skipna, mask=mask, **kwargs)
  File "H:\python310\lib\site-packages\pandas\core\nanops.py", line 720, in nanmean
    the_sum = _ensure_numeric(the_sum)
  File "H:\python310\lib\site-packages\pandas\core\nanops.py", line 1701, in _ensure_numeric
    raise TypeError(f"Could not convert string '{x}' to numeric")
TypeError: Could not convert string 'TV0036284' to numeric

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 275, in hlf_body
    avg_donation = calculate_agg_by_variable(
  File "H:\VScode\dashboard_demo\components\calculations.py", line 492, in calculate_agg_by_variable
    agg_df = datafile.groupby(groupby_variable, as_index=False).mean()
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 2452, in mean
    result = self._cython_agg_general(
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1998, in _cython_agg_general
    new_mgr = data.grouped_reduce(array_func)
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 1469, in grouped_reduce
    applied = sb.apply(func)
  File "H:\python310\lib\site-packages\pandas\core\internals\blocks.py", line 393, in apply
    result = func(self.values, **kwargs)
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1995, in array_func
    result = self._agg_py_fallback(how, values, ndim=data.ndim, alt=alt)
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1946, in _agg_py_fallback
    raise type(err)(msg) from err
TypeError: agg function failed [how->mean,dtype->object]
2025/03/09 01:45 CRITICAL:Menu setup crashed: agg function failed [how->mean,dtype->object]
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1942, in _agg_py_fallback
    res_values = self._grouper.agg_series(ser, alt, preserve_dtype=True)
  File "H:\python310\lib\site-packages\pandas\core\groupby\ops.py", line 864, in agg_series
    result = self._aggregate_series_pure_python(obj, func)
  File "H:\python310\lib\site-packages\pandas\core\groupby\ops.py", line 885, in _aggregate_series_pure_python
    res = func(group)
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 2454, in <lambda>
    alt=lambda x: Series(x, copy=False).mean(numeric_only=numeric_only),
  File "H:\python310\lib\site-packages\pandas\core\series.py", line 6549, in mean
    return NDFrame.mean(self, axis, skipna, numeric_only, **kwargs)
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 12420, in mean
    return self._stat_function(
  File "H:\python310\lib\site-packages\pandas\core\generic.py", line 12377, in _stat_function
    return self._reduce(
  File "H:\python310\lib\site-packages\pandas\core\series.py", line 6457, in _reduce
    return op(delegate, skipna=skipna, **kwds)
  File "H:\python310\lib\site-packages\pandas\core\nanops.py", line 147, in f
    result = alt(values, axis=axis, skipna=skipna, **kwds)
  File "H:\python310\lib\site-packages\pandas\core\nanops.py", line 404, in new_func
    result = func(values, axis=axis, skipna=skipna, mask=mask, **kwargs)
  File "H:\python310\lib\site-packages\pandas\core\nanops.py", line 720, in nanmean
    the_sum = _ensure_numeric(the_sum)
  File "H:\python310\lib\site-packages\pandas\core\nanops.py", line 1701, in _ensure_numeric
    raise TypeError(f"Could not convert string '{x}' to numeric")
TypeError: Could not convert string 'TV0036284' to numeric

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 275, in hlf_body
    avg_donation = calculate_agg_by_variable(
  File "H:\VScode\dashboard_demo\components\calculations.py", line 492, in calculate_agg_by_variable
    agg_df = datafile.groupby(groupby_variable, as_index=False).mean()
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 2452, in mean
    result = self._cython_agg_general(
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1998, in _cython_agg_general
    new_mgr = data.grouped_reduce(array_func)
  File "H:\python310\lib\site-packages\pandas\core\internals\managers.py", line 1469, in grouped_reduce
    applied = sb.apply(func)
  File "H:\python310\lib\site-packages\pandas\core\internals\blocks.py", line 393, in apply
    result = func(self.values, **kwargs)
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1995, in array_func
    result = self._agg_py_fallback(how, values, ndim=data.ndim, alt=alt)
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1946, in _agg_py_fallback
    raise type(err)(msg) from err
TypeError: agg function failed [how->mean,dtype->object]
2025/03/09 01:46 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:46 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 31, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:46 ERROR:Session state variables not initialized!
2025/03/09 01:46 ERROR:Error: originalfilepath is None!
2025/03/09 01:46 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 01:47 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 01:47 ERROR:Failed to load election dates from file.
2025/03/09 01:47 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 01:50 ERROR:Error in hlf_body: module 'Visualisations.plot_bar_chart' has no attribute 'plot_bar_chart'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 290, in hlf_body
    plot_bar_chart.plot_bar_chart(
AttributeError: module 'Visualisations.plot_bar_chart' has no attribute 'plot_bar_chart'
2025/03/09 01:50 CRITICAL:Menu setup crashed: module 'Visualisations.plot_bar_chart' has no attribute 'plot_bar_chart'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 290, in hlf_body
    plot_bar_chart.plot_bar_chart(
AttributeError: module 'Visualisations.plot_bar_chart' has no attribute 'plot_bar_chart'
2025/03/09 01:50 CRITICAL:Menu setup crashed: plot_custom_bar_chart() got an unexpected keyword argument 'Title'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 290, in hlf_body
    plot_bar_chart.plot_custom_bar_chart(
TypeError: plot_custom_bar_chart() got an unexpected keyword argument 'Title'
2025/03/09 01:53 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:53 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 32, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:53 ERROR:Session state variables not initialized!
2025/03/09 01:53 ERROR:Error: originalfilepath is None!
2025/03/09 01:54 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 01:54 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 01:54 ERROR:Failed to load election dates from file.
2025/03/09 01:54 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 01:54 ERROR:Error in hlf_body: 'PartyType'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 290, in hlf_body
    plot_bar_chart.plot_custom_bar_chart(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_chart.py", line 71, in plot_custom_bar_chart
    graph_df.groupby([XValues] + ([group_column] if group_column else []))
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 9183, in groupby
    return DataFrameGroupBy(
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1329, in __init__
    grouper, exclusions, obj = get_grouper(
  File "H:\python310\lib\site-packages\pandas\core\groupby\grouper.py", line 1043, in get_grouper
    raise KeyError(gpr)
KeyError: 'PartyType'
2025/03/09 01:54 CRITICAL:Menu setup crashed: 'PartyType'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 290, in hlf_body
    plot_bar_chart.plot_custom_bar_chart(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_chart.py", line 71, in plot_custom_bar_chart
    graph_df.groupby([XValues] + ([group_column] if group_column else []))
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 9183, in groupby
    return DataFrameGroupBy(
  File "H:\python310\lib\site-packages\pandas\core\groupby\groupby.py", line 1329, in __init__
    grouper, exclusions, obj = get_grouper(
  File "H:\python310\lib\site-packages\pandas\core\groupby\grouper.py", line 1043, in get_grouper
    raise KeyError(gpr)
KeyError: 'PartyType'
2025/03/09 01:56 CRITICAL:Menu setup crashed: cannot insert Party_Group, already exists
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 290, in hlf_body
    plot_bar_chart.plot_custom_bar_chart(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_chart.py", line 73, in plot_custom_bar_chart
    .reset_index()
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 6472, in reset_index
    new_obj.insert(
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 5158, in insert
    raise ValueError(f"cannot insert {column}, already exists")
ValueError: cannot insert Party_Group, already exists
2025/03/09 01:56 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:56 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 32, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 01:56 ERROR:Session state variables not initialized!
2025/03/09 01:56 ERROR:Error: originalfilepath is None!
2025/03/09 01:56 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 01:56 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 01:56 ERROR:Failed to load election dates from file.
2025/03/09 01:56 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 01:56 ERROR:Error in hlf_body: cannot insert Party_Group, already exists
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 290, in hlf_body
    plot_bar_chart.plot_custom_bar_chart(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_chart.py", line 73, in plot_custom_bar_chart
    .reset_index()
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 6472, in reset_index
    new_obj.insert(
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 5158, in insert
    raise ValueError(f"cannot insert {column}, already exists")
ValueError: cannot insert Party_Group, already exists
2025/03/09 01:56 CRITICAL:Menu setup crashed: cannot insert Party_Group, already exists
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 290, in hlf_body
    plot_bar_chart.plot_custom_bar_chart(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_chart.py", line 73, in plot_custom_bar_chart
    .reset_index()
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 6472, in reset_index
    new_obj.insert(
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 5158, in insert
    raise ValueError(f"cannot insert {column}, already exists")
ValueError: cannot insert Party_Group, already exists
2025/03/09 01:57 ERROR:Error in pagesetup: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo\app_pages\headlinefigures.py)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 10, in pagesetup
    from app_pages.headlinefigures import hlf_body
ImportError: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo\app_pages\headlinefigures.py)
2025/03/09 01:57 CRITICAL:Menu setup crashed: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo\app_pages\headlinefigures.py)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 10, in pagesetup
    from app_pages.headlinefigures import hlf_body
ImportError: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo\app_pages\headlinefigures.py)
2025/03/09 01:58 ERROR:Session state variables not initialized!
2025/03/09 01:58 ERROR:Error: originalfilepath is None!
2025/03/09 01:58 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 01:58 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 01:58 ERROR:Failed to load election dates from file.
2025/03/09 01:58 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 02:02 ERROR:Error in pagesetup: invalid syntax. Perhaps you forgot a comma? (plot_bar_chart.py, line 125)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 10, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 2, in <module>
    from Visualisations import (
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_chart.py", line 125
    legend=dict(orientation="h", yanchor="top", y=-0.1, xanchor="center", x=0.5), Display in Streamlit
                                                                                  
SyntaxError: invalid syntax. Perhaps you forgot a comma?
2025/03/09 02:02 CRITICAL:Menu setup crashed: invalid syntax. Perhaps you forgot a comma? (plot_bar_chart.py, line 125)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 10, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 2, in <module>
    from Visualisations import (
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_chart.py", line 125
    legend=dict(orientation="h", yanchor="top", y=-0.1, xanchor="center", x=0.5), Display in Streamlit
                                                                                  
SyntaxError: invalid syntax. Perhaps you forgot a comma?
2025/03/09 02:04 ERROR:Session state variables not initialized!
2025/03/09 02:04 ERROR:Error: originalfilepath is None!
2025/03/09 02:04 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 02:04 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 02:04 ERROR:Failed to load election dates from file.
2025/03/09 02:05 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 02:08 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 02:08 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 32, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 02:08 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 02:08 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 32, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 02:08 ERROR:Session state variables not initialized!
2025/03/09 02:08 ERROR:Error: originalfilepath is None!
2025/03/09 02:08 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 02:08 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 02:08 ERROR:Failed to load election dates from file.
2025/03/09 02:08 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 02:10 ERROR:Session state variables not initialized!
2025/03/09 02:10 ERROR:Error: originalfilepath is None!
2025/03/09 02:10 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 02:10 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 02:10 ERROR:Failed to load election dates from file.
2025/03/09 02:10 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 07:00 ERROR:Session state variables not initialized!
2025/03/09 07:00 ERROR:Error: originalfilepath is None!
2025/03/09 07:00 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 07:00 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 07:00 ERROR:Failed to load election dates from file.
2025/03/09 07:00 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 07:00 ERROR:Error in load_and_filter_data: load_and_filter_data() missing 1 required positional argument: 'pagereflabel'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
TypeError: load_and_filter_data() missing 1 required positional argument: 'pagereflabel'
2025/03/09 07:00 CRITICAL:Menu setup crashed: load_and_filter_data() missing 1 required positional argument: 'pagereflabel'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 29, in mod_visits
    (cleaned_df, filtered_df) = load_and_filter_data("Donated Visits")
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
TypeError: load_and_filter_data() missing 1 required positional argument: 'pagereflabel'
2025/03/09 07:03 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 07:03 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 23, in mod_visits
    display_data_page(functionname="mod_visits",
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page.py", line 22, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 07:03 ERROR:Session state variables not initialized!
2025/03/09 07:03 ERROR:Error: originalfilepath is None!
2025/03/09 07:03 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 07:03 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 07:03 ERROR:Failed to load election dates from file.
2025/03/09 07:03 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 07:03 ERROR:Error in pagesetup: 'module' object is not callable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 42, in mod_visits
    visit_graph1(target_label="Donated Visits",
  File "H:\VScode\dashboard_demo\components\predefined_visualizations.py", line 75, in visit_graph1
    plot_bar_line(graph_df=cleaned_c_d_df,
TypeError: 'module' object is not callable
2025/03/09 07:03 CRITICAL:Menu setup crashed: 'module' object is not callable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 42, in mod_visits
    visit_graph1(target_label="Donated Visits",
  File "H:\VScode\dashboard_demo\components\predefined_visualizations.py", line 75, in visit_graph1
    plot_bar_line(graph_df=cleaned_c_d_df,
TypeError: 'module' object is not callable
2025/03/09 07:19 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 07:19 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 07:19 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 23, in mod_visits
    display_data_page(functionname="mod_visits",
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page.py", line 22, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 07:19 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 23, in mod_visits
    display_data_page(functionname="mod_visits",
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page.py", line 22, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 07:19 ERROR:Session state variables not initialized!
2025/03/09 07:19 ERROR:Error: originalfilepath is None!
2025/03/09 07:19 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 07:19 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 07:19 ERROR:Failed to load election dates from file.
2025/03/09 07:19 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 07:20 ERROR:Error in pagesetup: 'module' object is not callable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 42, in mod_visits
    visit_graph1(target_label="Donated Visits",
  File "H:\VScode\dashboard_demo\components\predefined_visualizations.py", line 74, in visit_graph1
    plot_bar_line(graph_df=cleaned_c_d_df,
TypeError: 'module' object is not callable
2025/03/09 07:20 CRITICAL:Menu setup crashed: 'module' object is not callable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 42, in mod_visits
    visit_graph1(target_label="Donated Visits",
  File "H:\VScode\dashboard_demo\components\predefined_visualizations.py", line 74, in visit_graph1
    plot_bar_line(graph_df=cleaned_c_d_df,
TypeError: 'module' object is not callable
2025/03/09 07:31 ERROR:Session state variables not initialized!
2025/03/09 07:31 ERROR:Error: originalfilepath is None!
2025/03/09 07:31 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 07:31 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 07:31 ERROR:Failed to load election dates from file.
2025/03/09 07:31 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 07:32 ERROR:Error in pagesetup: 'module' object is not callable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 51, in mod_visits
    visits_graph2(target_label="Donated Visits",
  File "H:\VScode\dashboard_demo\components\predefined_visualizations.py", line 99, in visits_graph2
    plot_bar_line(graph_df=cleaned_c_d_df,
TypeError: 'module' object is not callable
2025/03/09 07:32 CRITICAL:Menu setup crashed: 'module' object is not callable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 51, in mod_visits
    visits_graph2(target_label="Donated Visits",
  File "H:\VScode\dashboard_demo\components\predefined_visualizations.py", line 99, in visits_graph2
    plot_bar_line(graph_df=cleaned_c_d_df,
TypeError: 'module' object is not callable
2025/03/09 07:35 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 07:35 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 30, in mod_visits
    display_data_page(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page.py", line 22, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 07:35 ERROR:Session state variables not initialized!
2025/03/09 07:35 ERROR:Error: originalfilepath is None!
2025/03/09 07:35 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 07:35 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 07:35 ERROR:Failed to load election dates from file.
2025/03/09 07:35 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 07:36 ERROR:Error in pagesetup: 'module' object is not callable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 53, in mod_visits
    visits_graph2(target_label="Donated Visits",
  File "H:\VScode\dashboard_demo\components\predefined_visualizations.py", line 99, in visits_graph2
    plot_bar_line(graph_df=cleaned_c_d_df,
TypeError: 'module' object is not callable
2025/03/09 07:36 CRITICAL:Menu setup crashed: 'module' object is not callable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 53, in mod_visits
    visits_graph2(target_label="Donated Visits",
  File "H:\VScode\dashboard_demo\components\predefined_visualizations.py", line 99, in visits_graph2
    plot_bar_line(graph_df=cleaned_c_d_df,
TypeError: 'module' object is not callable
2025/03/09 07:42 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 07:42 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 30, in mod_visits
    display_data_page(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page.py", line 22, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 07:42 ERROR:Session state variables not initialized!
2025/03/09 07:42 ERROR:Error: originalfilepath is None!
2025/03/09 07:42 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 07:42 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 07:42 ERROR:Failed to load election dates from file.
2025/03/09 07:42 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 07:42 ERROR:Error in pagesetup: 'module' object is not callable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 53, in mod_visits
    visits_graph2(target_label="Donated Visits",
  File "H:\VScode\dashboard_demo\components\predefined_visualizations.py", line 104, in visits_graph2
    plot_bar_line(graph_df=cleaned_c_d_df,
TypeError: 'module' object is not callable
2025/03/09 07:42 CRITICAL:Menu setup crashed: 'module' object is not callable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 53, in mod_visits
    visits_graph2(target_label="Donated Visits",
  File "H:\VScode\dashboard_demo\components\predefined_visualizations.py", line 104, in visits_graph2
    plot_bar_line(graph_df=cleaned_c_d_df,
TypeError: 'module' object is not callable
2025/03/09 07:44 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 07:44 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 30, in mod_visits
    display_data_page(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page.py", line 22, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 07:44 ERROR:Session state variables not initialized!
2025/03/09 07:44 ERROR:Error: originalfilepath is None!
2025/03/09 07:44 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 07:44 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 07:44 ERROR:Failed to load election dates from file.
2025/03/09 07:44 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 07:45 ERROR:Error in pagesetup: plot_custom_bar_chart() got an unexpected keyword argument 'Title'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 61, in mod_visits
    visits_graph4(target_label="Donated Visits",
  File "H:\VScode\dashboard_demo\components\predefined_visualizations.py", line 139, in visits_graph4
    plot_bar_chart.plot_custom_bar_chart(graph_df=cleaned_c_d_df,
TypeError: plot_custom_bar_chart() got an unexpected keyword argument 'Title'
2025/03/09 07:45 CRITICAL:Menu setup crashed: plot_custom_bar_chart() got an unexpected keyword argument 'Title'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 61, in mod_visits
    visits_graph4(target_label="Donated Visits",
  File "H:\VScode\dashboard_demo\components\predefined_visualizations.py", line 139, in visits_graph4
    plot_bar_chart.plot_custom_bar_chart(graph_df=cleaned_c_d_df,
TypeError: plot_custom_bar_chart() got an unexpected keyword argument 'Title'
2025/03/09 07:47 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 07:47 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 07:47 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 30, in mod_visits
    display_data_page(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page.py", line 22, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 07:47 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 30, in mod_visits
    display_data_page(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page.py", line 22, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 07:47 ERROR:Session state variables not initialized!
2025/03/09 07:47 ERROR:Error: originalfilepath is None!
2025/03/09 07:47 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 07:47 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 07:47 ERROR:Failed to load election dates from file.
2025/03/09 07:47 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 07:48 ERROR:Error in pagesetup: name 'title' is not defined
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 61, in mod_visits
    visits_graph4(target_label="Donated Visit",
  File "H:\VScode\dashboard_demo\components\predefined_visualizations.py", line 139, in visits_graph4
    plot_bar_chart.plot_custom_bar_chart(graph_df=cleaned_c_d_df,
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_chart.py", line 110, in plot_custom_bar_chart
    title=title,
NameError: name 'title' is not defined. Did you mean: 'Title'?
2025/03/09 07:48 CRITICAL:Menu setup crashed: name 'title' is not defined
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 61, in mod_visits
    visits_graph4(target_label="Donated Visit",
  File "H:\VScode\dashboard_demo\components\predefined_visualizations.py", line 139, in visits_graph4
    plot_bar_chart.plot_custom_bar_chart(graph_df=cleaned_c_d_df,
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_chart.py", line 110, in plot_custom_bar_chart
    title=title,
NameError: name 'title' is not defined. Did you mean: 'Title'?
2025/03/09 07:49 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 07:49 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 30, in mod_visits
    display_data_page(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page.py", line 22, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 07:49 ERROR:Session state variables not initialized!
2025/03/09 07:49 ERROR:Error: originalfilepath is None!
2025/03/09 07:49 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 07:49 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 07:49 ERROR:Failed to load election dates from file.
2025/03/09 07:49 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 07:59 ERROR:Session state variables not initialized!
2025/03/09 07:59 ERROR:Error: originalfilepath is None!
2025/03/09 07:59 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 07:59 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 07:59 ERROR:Failed to load election dates from file.
2025/03/09 07:59 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 08:12 ERROR:Error in initialize_session_state: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\utils\global_variables.py", line 70, in initialize_session_state
    init_state_var("Cash_ftr", config.FILTER_DEF.get("Cash_ftr"))
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:12 CRITICAL:App setup crashed: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\setup.py", line 69, in setup_package
    initialize_session_state()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\utils\global_variables.py", line 70, in initialize_session_state
    init_state_var("Cash_ftr", config.FILTER_DEF.get("Cash_ftr"))
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:15 ERROR:Session state variables not initialized!
2025/03/09 08:15 ERROR:Error: originalfilepath is None!
2025/03/09 08:15 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 08:15 ERROR:Error in load_cleaned_data: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 239, in load_cleaned_data
    st.session_state["filter_def"].get("DubiousDonationType_ftr")
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:15 CRITICAL:First load crashed: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 78, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 26, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 239, in load_cleaned_data
    st.session_state["filter_def"].get("DubiousDonationType_ftr")
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:15 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 08:15 ERROR:Error in load_cleaned_data: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 239, in load_cleaned_data
    st.session_state["filter_def"].get("DubiousDonationType_ftr")
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:15 CRITICAL:First load crashed: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 78, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 26, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 239, in load_cleaned_data
    st.session_state["filter_def"].get("DubiousDonationType_ftr")
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:27 ERROR:Session state variables not initialized!
2025/03/09 08:27 ERROR:Error: originalfilepath is None!
2025/03/09 08:27 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 08:27 ERROR:Error in load_cleaned_data: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 240, in load_cleaned_data
    for donation_type in st.session_state["filter_def"].get("DubiousDonationType_ftr")
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:27 CRITICAL:First load crashed: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 78, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 26, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 240, in load_cleaned_data
    for donation_type in st.session_state["filter_def"].get("DubiousDonationType_ftr")
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:27 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 08:27 ERROR:Error in load_cleaned_data: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 240, in load_cleaned_data
    for donation_type in st.session_state["filter_def"].get("DubiousDonationType_ftr")
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:27 CRITICAL:First load crashed: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 78, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 26, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 240, in load_cleaned_data
    for donation_type in st.session_state["filter_def"].get("DubiousDonationType_ftr")
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:27 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 08:27 ERROR:Error in load_cleaned_data: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 240, in load_cleaned_data
    for donation_type in st.session_state["filter_def"].get("DubiousDonationType_ftr")
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:27 CRITICAL:First load crashed: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 78, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 26, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 240, in load_cleaned_data
    for donation_type in st.session_state["filter_def"].get("DubiousDonationType_ftr")
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:30 ERROR:Error in initialise_data: invalid syntax (clean_and_enhance.py, line 240)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 47, in initialise_data
    from data.data_loader import firstload
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 3, in <module>
    from data.clean_and_enhance import load_cleaned_data
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 240
    for donation_type in st.session_state{"filter_def"}
                                         ^
SyntaxError: invalid syntax
2025/03/09 08:30 CRITICAL:First load crashed: invalid syntax (clean_and_enhance.py, line 240)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 47, in initialise_data
    from data.data_loader import firstload
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 3, in <module>
    from data.clean_and_enhance import load_cleaned_data
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 240
    for donation_type in st.session_state{"filter_def"}
                                         ^
SyntaxError: invalid syntax
2025/03/09 08:30 ERROR:Error in initialise_data: invalid syntax (clean_and_enhance.py, line 240)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 47, in initialise_data
    from data.data_loader import firstload
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 3, in <module>
    from data.clean_and_enhance import load_cleaned_data
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 240
    for donation_type in st.session_state{"filter_def"}
                                         ^
SyntaxError: invalid syntax
2025/03/09 08:30 CRITICAL:First load crashed: invalid syntax (clean_and_enhance.py, line 240)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 47, in initialise_data
    from data.data_loader import firstload
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 3, in <module>
    from data.clean_and_enhance import load_cleaned_data
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 240
    for donation_type in st.session_state{"filter_def"}
                                         ^
SyntaxError: invalid syntax
2025/03/09 08:30 ERROR:Error in initialise_data: invalid syntax (clean_and_enhance.py, line 240)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 47, in initialise_data
    from data.data_loader import firstload
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 3, in <module>
    from data.clean_and_enhance import load_cleaned_data
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 240
    for donation_type in st.session_state{"filter_def"}
                                         ^
SyntaxError: invalid syntax
2025/03/09 08:30 CRITICAL:First load crashed: invalid syntax (clean_and_enhance.py, line 240)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 47, in initialise_data
    from data.data_loader import firstload
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 3, in <module>
    from data.clean_and_enhance import load_cleaned_data
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 240
    for donation_type in st.session_state{"filter_def"}
                                         ^
SyntaxError: invalid syntax
2025/03/09 08:30 ERROR:Error in initialise_data: invalid syntax (clean_and_enhance.py, line 240)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 47, in initialise_data
    from data.data_loader import firstload
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 3, in <module>
    from data.clean_and_enhance import load_cleaned_data
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 240
    for donation_type in st.session_state{"filter_def"}
                                         ^
SyntaxError: invalid syntax
2025/03/09 08:30 CRITICAL:First load crashed: invalid syntax (clean_and_enhance.py, line 240)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 47, in initialise_data
    from data.data_loader import firstload
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 3, in <module>
    from data.clean_and_enhance import load_cleaned_data
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 240
    for donation_type in st.session_state{"filter_def"}
                                         ^
SyntaxError: invalid syntax
2025/03/09 08:33 ERROR:Session state variables not initialized!
2025/03/09 08:33 ERROR:Error: originalfilepath is None!
2025/03/09 08:33 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 08:33 ERROR:Error in load_cleaned_data: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 276, in load_cleaned_data
    .isin(st.session_state["filter_def"].get("SafeDonors_ftr"))
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:33 CRITICAL:First load crashed: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 78, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 26, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 276, in load_cleaned_data
    .isin(st.session_state["filter_def"].get("SafeDonors_ftr"))
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:33 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 08:33 ERROR:Error in load_cleaned_data: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 276, in load_cleaned_data
    .isin(st.session_state["filter_def"].get("SafeDonors_ftr"))
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:33 CRITICAL:First load crashed: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 78, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 26, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 276, in load_cleaned_data
    .isin(st.session_state["filter_def"].get("SafeDonors_ftr"))
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:41 ERROR:Session state variables not initialized!
2025/03/09 08:41 ERROR:Error: originalfilepath is None!
2025/03/09 08:41 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 08:41 ERROR:Error in load_cleaned_data: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 278, in load_cleaned_data
    .isin(st.session_state["filter_def"].get("SafeDonors_ftr"))
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:41 CRITICAL:First load crashed: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 78, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 26, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 278, in load_cleaned_data
    .isin(st.session_state["filter_def"].get("SafeDonors_ftr"))
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:41 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 08:41 ERROR:Error in load_cleaned_data: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 278, in load_cleaned_data
    .isin(st.session_state["filter_def"].get("SafeDonors_ftr"))
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:41 CRITICAL:First load crashed: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 78, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 26, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 278, in load_cleaned_data
    .isin(st.session_state["filter_def"].get("SafeDonors_ftr"))
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:41 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 08:42 ERROR:Error in load_cleaned_data: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 278, in load_cleaned_data
    .isin(st.session_state["filter_def"].get("SafeDonors_ftr"))
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:42 CRITICAL:First load crashed: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 78, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 26, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\clean_and_enhance.py", line 278, in load_cleaned_data
    .isin(st.session_state["filter_def"].get("SafeDonors_ftr"))
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:43 ERROR:Session state variables not initialized!
2025/03/09 08:43 ERROR:Error: originalfilepath is None!
2025/03/09 08:43 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 08:43 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 08:43 ERROR:Failed to load election dates from file.
2025/03/09 08:43 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 08:43 ERROR:Error in load_and_filter_data: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 48, in load_and_filter_data
    current_target = st.session_state["filter_def"].get(filter_key)
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:43 CRITICAL:Menu setup crashed: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 32, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 48, in load_and_filter_data
    current_target = st.session_state["filter_def"].get(filter_key)
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:46 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 08:46 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 32, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 08:46 ERROR:Session state variables not initialized!
2025/03/09 08:46 ERROR:Error: originalfilepath is None!
2025/03/09 08:46 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 08:46 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 08:46 ERROR:Failed to load election dates from file.
2025/03/09 08:46 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 08:47 ERROR:Error in display_per_group_data_page: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page_per_donor.py", line 34, in display_per_group_data_page
    ) = load_and_filter_pergroup(
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 283, in load_and_filter_pergroup
    current_target = st.session_state["filter_def"].get(filter_key)
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:47 CRITICAL:Menu setup crashed: 'tuple' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 185, in mod_cash_donations
    display_per_group_data_page(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page_per_donor.py", line 34, in display_per_group_data_page
    ) = load_and_filter_pergroup(
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 283, in load_and_filter_pergroup
    current_target = st.session_state["filter_def"].get(filter_key)
AttributeError: 'tuple' object has no attribute 'get'
2025/03/09 08:49 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 08:49 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 180, in mod_cash_donations
    display_data_page(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page.py", line 22, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/09 08:49 ERROR:Session state variables not initialized!
2025/03/09 08:49 ERROR:Error: originalfilepath is None!
2025/03/09 08:49 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 08:49 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 08:49 ERROR:Failed to load election dates from file.
2025/03/09 08:49 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 08:50 ERROR:Error in pagesetup: not enough values to unpack (expected 2, got 1)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 132, in mod_donations_per_political_party
    tab1, tab2 = st.tabs(["Donations per Political Party",])
ValueError: not enough values to unpack (expected 2, got 1)
2025/03/09 08:50 CRITICAL:Menu setup crashed: not enough values to unpack (expected 2, got 1)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 132, in mod_donations_per_political_party
    tab1, tab2 = st.tabs(["Donations per Political Party",])
ValueError: not enough values to unpack (expected 2, got 1)
2025/03/09 08:56 ERROR:Session state variables not initialized!
2025/03/09 08:56 ERROR:Error: originalfilepath is None!
2025/03/09 08:56 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/09 08:56 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/09 08:56 ERROR:Failed to load election dates from file.
2025/03/09 08:56 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/09 08:57 ERROR:Error in display_visualizations: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 118, in display_visualizations
    plot_bar_line.plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_line.py", line 175, in plot_bar_line_by_year
    st.plotly_chart(fig, use_container_width=use_container_width)
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\plotly_chart.py", line 509, in plotly_chart
    plotly_chart_proto.id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 131, in _register_element_id
    raise StreamlitDuplicateElementId(element_type)
streamlit.errors.StreamlitDuplicateElementId: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
2025/03/09 08:57 CRITICAL:Menu setup crashed: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 88, in mod_bequeths
    display_per_group_data_page(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page_per_donor.py", line 70, in display_per_group_data_page
    display_visualizations(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 118, in display_visualizations
    plot_bar_line.plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_line.py", line 175, in plot_bar_line_by_year
    st.plotly_chart(fig, use_container_width=use_container_width)
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\plotly_chart.py", line 509, in plotly_chart
    plotly_chart_proto.id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 131, in _register_element_id
    raise StreamlitDuplicateElementId(element_type)
streamlit.errors.StreamlitDuplicateElementId: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
2025/03/10 08:13 ERROR:Session state variables not initialized!
2025/03/10 08:13 ERROR:Error: originalfilepath is None!
2025/03/10 08:13 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/10 08:13 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/10 08:13 ERROR:Failed to load election dates from file.
2025/03/10 08:13 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/10 08:22 ERROR:Error in display_visualizations: name 'left_widget_graph_key2' is not defined
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 128, in display_visualizations
    widget_key=left_widget_graph_key2,
NameError: name 'left_widget_graph_key2' is not defined. Did you mean: 'left_widget_graph_key'?
2025/03/10 08:22 CRITICAL:Menu setup crashed: name 'left_widget_graph_key2' is not defined
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 195, in mod_non_cash_donations
    display_data_page(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page.py", line 58, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 128, in display_visualizations
    widget_key=left_widget_graph_key2,
NameError: name 'left_widget_graph_key2' is not defined. Did you mean: 'left_widget_graph_key'?
2025/03/10 08:26 CRITICAL:Menu setup crashed: name 'left_widget_graph_key2' is not defined
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 179, in mod_cash_donations
    display_data_page(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page.py", line 58, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 128, in display_visualizations
    widget_key=left_widget_graph_key,
NameError: name 'left_widget_graph_key2' is not defined. Did you mean: 'left_widget_graph_key'?
2025/03/10 08:26 ERROR:Session state variables not initialized!
2025/03/10 08:26 ERROR:Error: originalfilepath is None!
2025/03/10 08:26 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/10 08:26 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/10 08:26 ERROR:Failed to load election dates from file.
2025/03/10 08:26 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/10 01:54 ERROR:Session state variables not initialized!
2025/03/10 01:54 ERROR:Error: originalfilepath is None!
2025/03/10 01:54 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/10 01:54 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/10 01:54 ERROR:Failed to load election dates from file.
2025/03/10 01:54 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/10 01:56 ERROR:Session state variables not initialized!
2025/03/10 01:56 ERROR:Error: originalfilepath is None!
2025/03/10 01:56 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/10 01:57 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/10 01:57 ERROR:Failed to load election dates from file.
2025/03/10 01:57 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/10 02:07 ERROR:Session state variables not initialized!
2025/03/10 02:07 ERROR:Error: originalfilepath is None!
2025/03/10 02:07 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/10 02:07 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/10 02:07 ERROR:Failed to load election dates from file.
2025/03/10 02:07 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/18 07:43 ERROR:Session state variables not initialized!
2025/03/18 07:43 ERROR:Error: originalfilepath is None!
2025/03/18 07:43 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/18 07:44 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/18 07:44 ERROR:Failed to load election dates from file.
2025/03/18 07:44 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/18 07:46 INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/18 07:46 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:get_git_version executed successfully
2025/03/18 07:46 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:get_git_version executed successfully
2025/03/18 07:46 INFO:Streamlit App Starting...
2025/03/18 07:46 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 07:46 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 07:46 INFO:Running App setup...
2025/03/18 07:46 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:Setting up the package
2025/03/18 07:46 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 07:46 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:get_git_version executed successfully
2025/03/18 07:46 INFO:Version: v39.172
2025/03/18 07:46 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 07:46 DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo
2025/03/18 07:46 DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 07:46 DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/18 07:46 DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/18 07:46 DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 07:46 DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 07:46 DEBUG:Initialised filter_def with value: ({'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}},)
2025/03/18 07:46 DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 07:46 DEBUG:Initialised perc_target with value: 0.5
2025/03/18 07:46 DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/18 07:46 DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 07:46 DEBUG:Initialised reference_dir with value: reference_files
2025/03/18 07:46 DEBUG:Initialised data_dir with value: data
2025/03/18 07:46 DEBUG:Initialised output_dir with value: output
2025/03/18 07:46 DEBUG:Initialised logs_dir with value: logs
2025/03/18 07:46 DEBUG:Initialised components_dir with value: components
2025/03/18 07:46 DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/18 07:46 DEBUG:Initialised utils_dir with value: utils
2025/03/18 07:46 DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/18 07:46 DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/18 07:46 DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/18 07:46 DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/18 07:46 DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/18 07:46 DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/18 07:46 DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/18 07:46 DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/18 07:46 DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/18 07:46 DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/18 07:46 DEBUG:Initialised LAST_MODIFIED_DATES with value: reference_files\last_modified_dates.json
2025/03/18 07:46 DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/18 07:46 DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/18 07:46 DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/18 07:46 DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/18 07:46 DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/18 07:46 DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/18 07:46 DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/18 07:46 INFO:Session_state variables initialized
2025/03/18 07:46 DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/18 07:46 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 07:46 DEBUG:LAST_MODIFIED_DATES: reference_files\last_modified_dates.json
2025/03/18 07:46 DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/18 07:46 DEBUG:filter_def: ({'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}},)
2025/03/18 07:46 DEBUG:utils_dir: utils
2025/03/18 07:46 DEBUG:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 07:46 DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/18 07:46 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 07:46 DEBUG:components_dir: components
2025/03/18 07:46 DEBUG:PLACEHOLDER_ID: 1000001
2025/03/18 07:46 DEBUG:output_dir: output
2025/03/18 07:46 DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/18 07:46 DEBUG:logs_dir: logs
2025/03/18 07:46 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 07:46 DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/18 07:46 DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/18 07:46 DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/18 07:46 DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/18 07:46 DEBUG:perc_target: 0.5
2025/03/18 07:46 DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/18 07:46 DEBUG:data_dir: data
2025/03/18 07:46 DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/18 07:46 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 07:46 DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/18 07:46 DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/18 07:46 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/18 07:46 DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/18 07:46 DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/18 07:46 DEBUG:party_summary_fname: output\party_summary.csv
2025/03/18 07:46 DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/18 07:46 DEBUG:app_pages_dir: app_pages
2025/03/18 07:46 DEBUG:reference_dir: reference_files
2025/03/18 07:46 DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/18 07:46 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 07:46 DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/18 07:46 INFO:Session state Setup complete
2025/03/18 07:46 INFO:initialize_session_state executed successfully
2025/03/18 07:46 INFO:Package setup complete
2025/03/18 07:46 INFO:setup_package executed successfully
2025/03/18 07:46 INFO:Setup completed successfully.
2025/03/18 07:46 INFO:Running Menu setup...
2025/03/18 07:46 DEBUG:Calling pagesetup with args={args}, kwargs={kwargs}
2025/03/18 07:46 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:get_git_version executed successfully
2025/03/18 07:46 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:get_git_version executed successfully
2025/03/18 07:46 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:get_git_version executed successfully
2025/03/18 07:46 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:get_git_version executed successfully
2025/03/18 07:46 INFO:App Version: v39.201
2025/03/18 07:46 INFO:Switched to page: Introduction
2025/03/18 07:46 INFO:pagesetup executed successfully
2025/03/18 07:46 INFO:Menu setup completed successfully.
2025/03/18 07:46 DEBUG:Calling initialise_data with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:Running first load function.
2025/03/18 07:46 DEBUG:Calling firstload with args={args}, kwargs={kwargs}
2025/03/18 07:46 DEBUG:Calling get_raw_data with args={args}, kwargs={kwargs}
2025/03/18 07:46 DEBUG:Calling load_raw_data with args={args}, kwargs={kwargs}
2025/03/18 07:46 DEBUG:Original data file path pre raw data load: source_data_fname
2025/03/18 07:46 DEBUG:Processed data file path pre raw data load: imported_raw_fname
2025/03/18 07:46 DEBUG:Calling try_to_use_preprocessed_data with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:Original file path: source\Donations_accepted_by_political_parties.csv
2025/03/18 07:46 INFO:Saved file path: output\imported_raw.csv
2025/03/18 07:46 DEBUG:Calling is_file_updated with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:Checking if source\Donations_accepted_by_political_parties.csv has been updated.
2025/03/18 07:46 DEBUG:Calling get_file_modification_time with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:Getting modification time for source\Donations_accepted_by_political_parties.csv
2025/03/18 07:46 INFO:get_file_modification_time executed successfully
2025/03/18 07:46 INFO:Current modification time: 1741521516.7875266
2025/03/18 07:46 INFO:Last modification time: 1742283837.8725295
2025/03/18 07:46 INFO:is_file_updated executed successfully
2025/03/18 07:46 INFO:Loading preprocessed data. Using output\imported_raw.csv dated 1742283837.8725295 instead of source\Donations_accepted_by_political_parties.csv
2025/03/18 07:46 INFO:Importing file from output\imported_raw.csv
2025/03/18 07:46 INFO:try_to_use_preprocessed_data executed successfully
2025/03/18 07:46 INFO:Preprocessed data loaded successfully.
2025/03/18 07:46 DEBUG:Calling raw_data_cleanup with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:Cleaning up raw data
2025/03/18 07:46 ERROR:Session state variables not initialized!
2025/03/18 07:46 DEBUG:Calling try_to_use_preprocessed_data with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:Original file path: None
2025/03/18 07:46 INFO:Saved file path: output\cleaned_donations.csv
2025/03/18 07:46 ERROR:Error: originalfilepath is None!
2025/03/18 07:46 INFO:try_to_use_preprocessed_data executed successfully
2025/03/18 07:46 INFO:Data loaded, shape: (91407, 29)
2025/03/18 07:46 DEBUG:Calling dedupe_entity_file with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:Map file regentity_map_fname exists. Proceeding with deduplication.
2025/03/18 07:46 INFO:File deduplication complete, shape: ECRef                            639
OriginalRegulatedEntityName      639
RegulatedEntityType              639
Value                            639
AcceptedDate                     620
AccountingUnitName               639
DonorName                        639
AccountingUnitsAsCentralParty    639
IsSponsorship                    639
DonorStatus                      639
RegulatedDoneeType               639
CompanyRegistrationNumber        639
Postcode                         639
DonationType                     639
NatureOfDonation                 639
PurposeOfVisit                   639
DonationAction                   639
ReceivedDate                     532
ReportedDate                     639
IsReportedPrePoll                423
ReportingPeriodName              639
IsBequest                        639
IsAggregation                    639
OriginalRegulatedEntityId        639
AccountingUnitId                 639
DonorId                          639
CampaigningName                  639
RegisterName                     639
IsIrishSource                    639
CleanedRegulatedEntityName       639
CleanedRegulatedEntityId         639
RegulatedEntityId                639
RegulatedEntityName              639
dtype: int64 records updated with new RegulatedEntityId and ECRef                            10361
OriginalRegulatedEntityName      10361
RegulatedEntityType              10361
Value                            10359
AcceptedDate                     10050
AccountingUnitName               10361
DonorName                        10361
AccountingUnitsAsCentralParty    10361
IsSponsorship                    10361
DonorStatus                      10361
RegulatedDoneeType               10361
CompanyRegistrationNumber        10361
Postcode                         10361
DonationType                     10361
NatureOfDonation                 10361
PurposeOfVisit                   10361
DonationAction                   10361
ReceivedDate                      7316
ReportedDate                     10351
IsReportedPrePoll                 4878
ReportingPeriodName              10361
IsBequest                        10361
IsAggregation                    10361
OriginalRegulatedEntityId        10361
AccountingUnitId                 10361
DonorId                          10361
CampaigningName                  10361
RegisterName                     10361
IsIrishSource                    10361
CleanedRegulatedEntityName       10361
CleanedRegulatedEntityId         10361
RegulatedEntityId                10361
RegulatedEntityName              10361
dtype: int64 records updated with new RegulatedEntityName
2025/03/18 07:46 DEBUG:File deduplication cleaned complete, shape: ECRef                            3697
OriginalRegulatedEntityName      3697
RegulatedEntityType              3697
Value                            3697
AcceptedDate                     3600
AccountingUnitName               3697
DonorName                        3697
AccountingUnitsAsCentralParty    3697
IsSponsorship                    3697
DonorStatus                      3697
RegulatedDoneeType               3697
CompanyRegistrationNumber        3697
Postcode                         3697
DonationType                     3697
NatureOfDonation                 3697
PurposeOfVisit                   3697
DonationAction                   3697
ReceivedDate                     3309
ReportedDate                     3697
IsReportedPrePoll                 449
ReportingPeriodName              3697
IsBequest                        3697
IsAggregation                    3697
OriginalRegulatedEntityId        3697
AccountingUnitId                 3697
DonorId                          3697
CampaigningName                  3697
RegisterName                     3697
IsIrishSource                    3697
CleanedRegulatedEntityName        639
CleanedRegulatedEntityId          639
RegulatedEntityId                3697
RegulatedEntityName              3697
dtype: int64 records updated with new RegulatedEntityId and ECRef                            13419
OriginalRegulatedEntityName      13419
RegulatedEntityType              13419
Value                            13417
AcceptedDate                     13030
AccountingUnitName               13419
DonorName                        13419
AccountingUnitsAsCentralParty    13419
IsSponsorship                    13419
DonorStatus                      13419
RegulatedDoneeType               13419
CompanyRegistrationNumber        13419
Postcode                         13419
DonationType                     13419
NatureOfDonation                 13419
PurposeOfVisit                   13419
DonationAction                   13419
ReceivedDate                     10093
ReportedDate                     13409
IsReportedPrePoll                 4904
ReportingPeriodName              13419
IsBequest                        13419
IsAggregation                    13419
OriginalRegulatedEntityId        13419
AccountingUnitId                 13419
DonorId                          13419
CampaigningName                  13419
RegisterName                     13419
IsIrishSource                    13419
CleanedRegulatedEntityName       10361
CleanedRegulatedEntityId         10361
RegulatedEntityId                13419
RegulatedEntityName              13419
dtype: int64 records updated with new RegulatedEntityName
2025/03/18 07:46 INFO:File deduplication complete, shape: (91407, 33)
2025/03/18 07:46 INFO:dedupe_entity_file executed successfully
2025/03/18 07:46 DEBUG:Calling dedupe_entity_file with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:Map file donor_map_fname exists. Proceeding with deduplication.
2025/03/18 07:46 INFO:File deduplication complete, shape: ECRef                            34715
OriginalRegulatedEntityName      34715
RegulatedEntityType              34715
Value                            34712
AcceptedDate                     34322
AccountingUnitName               34715
OriginalDonorName                34715
AccountingUnitsAsCentralParty    34715
IsSponsorship                    34715
DonorStatus                      34715
RegulatedDoneeType               34715
CompanyRegistrationNumber        34715
Postcode                         34715
DonationType                     34715
NatureOfDonation                 34715
PurposeOfVisit                   34715
DonationAction                   34715
ReceivedDate                     33051
ReportedDate                     34704
IsReportedPrePoll                22707
ReportingPeriodName              34715
IsBequest                        34715
IsAggregation                    34715
OriginalRegulatedEntityId        34715
AccountingUnitId                 34715
OriginalDonorId                  34715
CampaigningName                  34715
RegisterName                     34715
IsIrishSource                    34715
CleanedRegulatedEntityName       34715
CleanedRegulatedEntityId         34715
RegulatedEntityId                34715
RegulatedEntityName              34715
CleanedDonorName                 34715
CleanedDonorId                   34715
DonorId                          34715
DonorName                        34715
dtype: int64 records updated with new DonorId and ECRef                            19257
OriginalRegulatedEntityName      19257
RegulatedEntityType              19257
Value                            19255
AcceptedDate                     18942
AccountingUnitName               19257
OriginalDonorName                19257
AccountingUnitsAsCentralParty    19257
IsSponsorship                    19257
DonorStatus                      19257
RegulatedDoneeType               19257
CompanyRegistrationNumber        19257
Postcode                         19257
DonationType                     19257
NatureOfDonation                 19257
PurposeOfVisit                   19257
DonationAction                   19257
ReceivedDate                     18704
ReportedDate                     19248
IsReportedPrePoll                13081
ReportingPeriodName              19257
IsBequest                        19257
IsAggregation                    19257
OriginalRegulatedEntityId        19257
AccountingUnitId                 19257
OriginalDonorId                  19257
CampaigningName                  19257
RegisterName                     19257
IsIrishSource                    19257
CleanedRegulatedEntityName       19256
CleanedRegulatedEntityId         19256
RegulatedEntityId                19257
RegulatedEntityName              19257
CleanedDonorName                 19257
CleanedDonorId                   19257
DonorId                          19257
DonorName                        19257
dtype: int64 records updated with new DonorName
2025/03/18 07:46 DEBUG:File deduplication cleaned complete, shape: ECRef                            51946
OriginalRegulatedEntityName      51946
RegulatedEntityType              51946
Value                            51943
AcceptedDate                     51179
AccountingUnitName               51946
OriginalDonorName                51946
AccountingUnitsAsCentralParty    51946
IsSponsorship                    51946
DonorStatus                      51946
RegulatedDoneeType               51946
CompanyRegistrationNumber        51946
Postcode                         51946
DonationType                     51946
NatureOfDonation                 51946
PurposeOfVisit                   51946
DonationAction                   51946
ReceivedDate                     49641
ReportedDate                     51935
IsReportedPrePoll                23658
ReportingPeriodName              51946
IsBequest                        51946
IsAggregation                    51946
OriginalRegulatedEntityId        51946
AccountingUnitId                 51946
OriginalDonorId                  51946
CampaigningName                  51946
RegisterName                     51946
IsIrishSource                    51946
CleanedRegulatedEntityName       48932
CleanedRegulatedEntityId         48932
RegulatedEntityId                51946
RegulatedEntityName              51946
CleanedDonorName                 34715
CleanedDonorId                   34715
DonorId                          51946
DonorName                        51946
dtype: int64 records updated with new DonorId and ECRef                            36488
OriginalRegulatedEntityName      36488
RegulatedEntityType              36488
Value                            36486
AcceptedDate                     35799
AccountingUnitName               36488
OriginalDonorName                36488
AccountingUnitsAsCentralParty    36488
IsSponsorship                    36488
DonorStatus                      36488
RegulatedDoneeType               36488
CompanyRegistrationNumber        36488
Postcode                         36488
DonationType                     36488
NatureOfDonation                 36488
PurposeOfVisit                   36488
DonationAction                   36488
ReceivedDate                     35294
ReportedDate                     36479
IsReportedPrePoll                14032
ReportingPeriodName              36488
IsBequest                        36488
IsAggregation                    36488
OriginalRegulatedEntityId        36488
AccountingUnitId                 36488
OriginalDonorId                  36488
CampaigningName                  36488
RegisterName                     36488
IsIrishSource                    36488
CleanedRegulatedEntityName       33473
CleanedRegulatedEntityId         33473
RegulatedEntityId                36488
RegulatedEntityName              36488
CleanedDonorName                 19257
CleanedDonorId                   19257
DonorId                          36488
DonorName                        36488
dtype: int64 records updated with new DonorName
2025/03/18 07:46 INFO:File deduplication complete, shape: (91407, 37)
2025/03/18 07:46 INFO:dedupe_entity_file executed successfully
2025/03/18 07:46 INFO:Raw Data cleanup completed
2025/03/18 07:46 INFO:Data shape: (91407, 37)
2025/03/18 07:46 INFO:Data saved to output\cleaned_donations.csv
2025/03/18 07:46 INFO:Data cleanup completed, shape: (91407, 37)
2025/03/18 07:46 INFO:raw_data_cleanup executed successfully
2025/03/18 07:46 INFO:load_raw_data executed successfully
2025/03/18 07:46 INFO:get_raw_data executed successfully
2025/03/18 07:46 DEBUG:st.session_state.raw_data: 91407
2025/03/18 07:46 DEBUG:Calling get_cleaned_data with args={args}, kwargs={kwargs}
2025/03/18 07:46 DEBUG:Calling load_cleaned_data with args={args}, kwargs={kwargs}
2025/03/18 07:46 DEBUG:Rows in Raw Data: 91407
2025/03/18 07:46 DEBUG:Calling try_to_use_preprocessed_data with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:Original file path: output\cleaned_donations.csv
2025/03/18 07:46 INFO:Saved file path: output\cleaned_data.csv
2025/03/18 07:46 DEBUG:Calling is_file_updated with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:Checking if output\cleaned_donations.csv has been updated.
2025/03/18 07:46 DEBUG:Calling get_file_modification_time with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:Getting modification time for output\cleaned_donations.csv
2025/03/18 07:46 INFO:get_file_modification_time executed successfully
2025/03/18 07:46 INFO:Current modification time: 1742283994.9360802
2025/03/18 07:46 INFO:Last modification time: 1742283837.8725295
2025/03/18 07:46 INFO:is_file_updated executed successfully
2025/03/18 07:46 INFO:try_to_use_preprocessed_data executed successfully
2025/03/18 07:46 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/18 07:46 INFO:Loading and cleaning data... data.clean_and_enhance
2025/03/18 07:46 DEBUG:Clean Data Prep: streamlitdata load: 91407
2025/03/18 07:46 DEBUG:Clean Data Prep 123: streamlitdata load: 91407
2025/03/18 07:46 INFO:Map file regentity_map_fname exists. Proceeding with deduplication.
2025/03/18 07:46 DEBUG:Clean Data Prep 150: Map Party: 91407
2025/03/18 07:46 DEBUG:Group assignment: group
Conservative And Unionist Party    28887
Labour Party                       22724
Liberal Democrats                  18627
Small Medium Entity                 6430
Small Entity                        2728
Medium Large Entity                 2528
Large Entity                        1982
Uk Independence Party (Ukip)        1840
Very Small Entity                   1808
Green Party                         1656
Medium Entity                       1649
Single Donation Entity               548
Name: count, dtype: int64
2025/03/18 07:46 DEBUG:Group assignment: group
Very Small Entity                  604
Single Donation Entity             548
Small Entity                       293
Small Medium Entity                189
Medium Entity                       11
Medium Large Entity                  9
Large Entity                         3
Conservative And Unionist Party      1
Green Party                          1
Labour Party                         1
Liberal Democrats                    1
Uk Independence Party (Ukip)         1
Name: count, dtype: int64
2025/03/18 07:46 DEBUG:Clean Data Prep 235: RegEntity_Map: 91407
2025/03/18 07:46 DEBUG:Group assignment: group
Conservative And Unionist Party    32493
Labour Party                       27325
Liberal Democrat                   18969
Small Medium Entity                 2117
Large Entity                        2057
Medium Large Entity                 1964
Uk Independence Party (Ukip)        1858
Green Party                         1681
Medium Entity                       1394
Small Entity                         777
Very Small Entity                    574
Single Donation Entity               198
Name: count, dtype: int64
2025/03/18 07:46 DEBUG:Group assignment: group
Very Small Entity                  200
Single Donation Entity             198
Small Entity                        83
Small Medium Entity                 58
Medium Entity                        9
Medium Large Entity                  7
Large Entity                         3
Conservative And Unionist Party      1
Green Party                          1
Labour Party                         1
Liberal Democrat                     1
Uk Independence Party (Ukip)         1
Name: count, dtype: int64
2025/03/18 07:46 DEBUG:Clean Data Prep 235: Party_Group: 91407
2025/03/18 07:46 DEBUG:Calling load_election_dates with args={args}, kwargs={kwargs}
2025/03/18 07:46 DEBUG:st.session_state.ELECTION_DATES: reference_files\elections.csv
2025/03/18 07:46 DEBUG:try to load previous election dates from file.
2025/03/18 07:46 DEBUG:Calling try_to_use_preprocessed_data with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:Original file path: source\Donations_accepted_by_political_parties.csv
2025/03/18 07:46 INFO:Saved file path: reference_files\elections.csv
2025/03/18 07:46 DEBUG:Calling is_file_updated with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:Checking if source\Donations_accepted_by_political_parties.csv has been updated.
2025/03/18 07:46 DEBUG:Calling get_file_modification_time with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:Getting modification time for source\Donations_accepted_by_political_parties.csv
2025/03/18 07:46 INFO:get_file_modification_time executed successfully
2025/03/18 07:46 INFO:Current modification time: 1741521516.7875266
2025/03/18 07:46 INFO:Last modification time: 1741521516.7875266
2025/03/18 07:46 INFO:is_file_updated executed successfully
2025/03/18 07:46 INFO:Loading preprocessed data. Using reference_files\elections.csv dated 1741521516.7875266 instead of source\Donations_accepted_by_political_parties.csv
2025/03/18 07:46 INFO:Importing file from reference_files\elections.csv
2025/03/18 07:46 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/18 07:46 INFO:try_to_use_preprocessed_data executed successfully
2025/03/18 07:46 ERROR:Failed to load election dates from file.
2025/03/18 07:46 INFO:Election_dates_df empty - loading from pdpy.
2025/03/18 07:46 INFO:Election Dates loaded vis pdpy.
2025/03/18 07:46 DEBUG:ElectionDates_dict from pdpy: {'1929': {'dissolution': datetime.date(1929, 5, 10), 'election': datetime.date(1929, 5, 30), 'type': 'General Election'}, '1931': {'dissolution': datetime.date(1931, 10, 7), 'election': datetime.date(1931, 10, 27), 'type': 'General Election'}, '1935': {'dissolution': datetime.date(1935, 10, 25), 'election': datetime.date(1935, 11, 14), 'type': 'General Election'}, '1945': {'dissolution': datetime.date(1945, 6, 15), 'election': datetime.date(1945, 7, 5), 'type': 'General Election'}, '1950': {'dissolution': datetime.date(1950, 2, 3), 'election': datetime.date(1950, 2, 23), 'type': 'General Election'}, '1951': {'dissolution': datetime.date(1951, 10, 5), 'election': datetime.date(1951, 10, 25), 'type': 'General Election'}, '1955': {'dissolution': datetime.date(1955, 5, 6), 'election': datetime.date(1955, 5, 26), 'type': 'General Election'}, '1959': {'dissolution': datetime.date(1959, 9, 18), 'election': datetime.date(1959, 10, 8), 'type': 'General Election'}, '1964': {'dissolution': datetime.date(1964, 9, 25), 'election': datetime.date(1964, 10, 15), 'type': 'General Election'}, '1966': {'dissolution': datetime.date(1966, 3, 10), 'election': datetime.date(1966, 3, 31), 'type': 'General Election'}, '1970': {'dissolution': datetime.date(1970, 5, 29), 'election': datetime.date(1970, 6, 18), 'type': 'General Election'}, '1974 (Feb)': {'dissolution': datetime.date(1974, 2, 8), 'election': datetime.date(1974, 2, 28), 'type': 'General Election'}, '1974 (Oct)': {'dissolution': datetime.date(1974, 9, 20), 'election': datetime.date(1974, 10, 10), 'type': 'General Election'}, '1979': {'dissolution': datetime.date(1979, 4, 7), 'election': datetime.date(1979, 5, 3), 'type': 'General Election'}, '1983': {'dissolution': datetime.date(1983, 5, 13), 'election': datetime.date(1983, 6, 9), 'type': 'General Election'}, '1987': {'dissolution': datetime.date(1987, 5, 18), 'election': datetime.date(1987, 6, 11), 'type': 'General Election'}, '1992': {'dissolution': datetime.date(1992, 3, 16), 'election': datetime.date(1992, 4, 9), 'type': 'General Election'}, '1997': {'dissolution': datetime.date(1997, 4, 8), 'election': datetime.date(1997, 5, 1), 'type': 'General Election'}, '2001': {'dissolution': datetime.date(2001, 5, 14), 'election': datetime.date(2001, 6, 7), 'type': 'General Election'}, '2005': {'dissolution': datetime.date(2005, 4, 11), 'election': datetime.date(2005, 5, 5), 'type': 'General Election'}, '2010': {'dissolution': datetime.date(2010, 4, 12), 'election': datetime.date(2010, 5, 6), 'type': 'General Election'}, '2015': {'dissolution': datetime.date(2015, 3, 30), 'election': datetime.date(2015, 5, 7), 'type': 'General Election'}, '2017': {'dissolution': datetime.date(2017, 5, 3), 'election': datetime.date(2017, 6, 8), 'type': 'General Election'}, '2019': {'dissolution': datetime.date(2019, 11, 6), 'election': datetime.date(2019, 12, 12), 'type': 'General Election'}}
2025/03/18 07:46 INFO:Election Dates Loaded Successfully.
2025/03/18 07:46 DEBUG:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/18 07:46 DEBUG:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/18 07:46 INFO:load_election_dates executed successfully
2025/03/18 07:46 DEBUG:Clean Data Prep 353: Election dates: 91407
2025/03/18 07:46 DEBUG:Clean Data Prep 386: End of clean: 91407
2025/03/18 07:46 INFO:Cleaned Data completed, shape: (91407, 55)
2025/03/18 07:46 INFO:load_cleaned_data executed successfully
2025/03/18 07:46 INFO:get_cleaned_data executed successfully
2025/03/18 07:46 DEBUG:st.session_state.raw_data: 91407
2025/03/18 07:46 DEBUG:Calling get_donor_data with args={args}, kwargs={kwargs}
2025/03/18 07:46 DEBUG:Calling load_donorList_data with args={args}, kwargs={kwargs}
2025/03/18 07:46 DEBUG:Calling try_to_use_preprocessed_data with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:Original file path: output\cleaned_data.csv
2025/03/18 07:46 INFO:Saved file path: output\cleaned_donorlist.csv
2025/03/18 07:46 DEBUG:Calling is_file_updated with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:Checking if output\cleaned_data.csv has been updated.
2025/03/18 07:46 DEBUG:Calling get_file_modification_time with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:Getting modification time for output\cleaned_data.csv
2025/03/18 07:46 INFO:get_file_modification_time executed successfully
2025/03/18 07:46 INFO:Current modification time: 1742283999.5995557
2025/03/18 07:46 INFO:Last modification time: 1742283842.857236
2025/03/18 07:46 INFO:is_file_updated executed successfully
2025/03/18 07:46 INFO:try_to_use_preprocessed_data executed successfully
2025/03/18 07:46 INFO:Donor data saved to output\cleaned_donorlist.csv
2025/03/18 07:46 INFO:Donor Data summary completed
2025/03/18 07:46 INFO:Data shape: (31460, 5)
2025/03/18 07:46 INFO:load_donorList_data executed successfully
2025/03/18 07:46 INFO:get_donor_data executed successfully
2025/03/18 07:46 DEBUG:st.session_state.data_donor: 31460
2025/03/18 07:46 DEBUG:st.session_state.data_clean: 91407
2025/03/18 07:46 DEBUG:Calling get_regentity_data with args={args}, kwargs={kwargs}
2025/03/18 07:46 DEBUG:Calling load_regulated_entity_data with args={args}, kwargs={kwargs}
2025/03/18 07:46 DEBUG:Calling try_to_use_preprocessed_data with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:Original file path: output\cleaned_data.csv
2025/03/18 07:46 INFO:Saved file path: output\cleaned_regentity.csv
2025/03/18 07:46 DEBUG:Calling is_file_updated with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:Checking if output\cleaned_data.csv has been updated.
2025/03/18 07:46 DEBUG:Calling get_file_modification_time with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:Getting modification time for output\cleaned_data.csv
2025/03/18 07:46 INFO:get_file_modification_time executed successfully
2025/03/18 07:46 INFO:Current modification time: 1742283999.5995557
2025/03/18 07:46 INFO:Last modification time: 1742283999.5995557
2025/03/18 07:46 INFO:is_file_updated executed successfully
2025/03/18 07:46 INFO:Loading preprocessed data. Using output\cleaned_regentity.csv dated 1742283999.5995557 instead of output\cleaned_data.csv
2025/03/18 07:46 INFO:Importing file from output\cleaned_regentity.csv
2025/03/18 07:46 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/18 07:46 INFO:try_to_use_preprocessed_data executed successfully
2025/03/18 07:46 INFO:Regulated entity data saved to output\cleaned_regentity.csv
2025/03/18 07:46 INFO:Raw Data cleanup completed
2025/03/18 07:46 INFO:Data shape: (1666, 6)
2025/03/18 07:46 INFO:load_regulated_entity_data executed successfully
2025/03/18 07:46 INFO:get_regentity_data executed successfully
2025/03/18 07:46 DEBUG:st.session_state.data_regentity: 1666
2025/03/18 07:46 DEBUG:st.session_state.data_donor: 31460
2025/03/18 07:46 DEBUG:st.session_state.data_clean: 91407
2025/03/18 07:46 INFO:firstload executed successfully
2025/03/18 07:46 INFO:Data first load completed successfully.
2025/03/18 07:46 INFO:initialise_data executed successfully
2025/03/18 07:46 INFO:App is fully loaded and ready!
2025/03/18 07:46 INFO:Streamlit App Starting...
2025/03/18 07:46 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 07:46 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 07:46 INFO:Running App setup...
2025/03/18 07:46 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:Setting up the package
2025/03/18 07:46 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 07:46 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:get_git_version executed successfully
2025/03/18 07:46 INFO:Version: v39.172
2025/03/18 07:46 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 07:46 DEBUG:BASE_DIR already exists in session state
2025/03/18 07:46 DEBUG:filenames already exists in session state
2025/03/18 07:46 DEBUG:PLACEHOLDER_DATE already exists in session state
2025/03/18 07:46 DEBUG:PLACEHOLDER_ID already exists in session state
2025/03/18 07:46 DEBUG:thresholds already exists in session state
2025/03/18 07:46 DEBUG:data_remappings already exists in session state
2025/03/18 07:46 DEBUG:filter_def already exists in session state
2025/03/18 07:46 DEBUG:security already exists in session state
2025/03/18 07:46 DEBUG:perc_target already exists in session state
2025/03/18 07:46 DEBUG:RERUN_MP_PARTY_MEMBERSHIP already exists in session state
2025/03/18 07:46 DEBUG:directories already exists in session state
2025/03/18 07:46 DEBUG:reference_dir already exists in session state
2025/03/18 07:46 DEBUG:data_dir already exists in session state
2025/03/18 07:46 DEBUG:output_dir already exists in session state
2025/03/18 07:46 DEBUG:logs_dir already exists in session state
2025/03/18 07:46 DEBUG:components_dir already exists in session state
2025/03/18 07:46 DEBUG:app_pages_dir already exists in session state
2025/03/18 07:46 DEBUG:utils_dir already exists in session state
2025/03/18 07:46 DEBUG:Donor_dedupe_cleaned_fname already exists in session state
2025/03/18 07:46 DEBUG:ListofPoliticalPeople_fname already exists in session state
2025/03/18 07:46 DEBUG:mppartymemb_fname already exists in session state
2025/03/18 07:46 DEBUG:donor_map_fname already exists in session state
2025/03/18 07:46 DEBUG:politician_party_fname already exists in session state
2025/03/18 07:46 DEBUG:regentity_map_fname already exists in session state
2025/03/18 07:46 DEBUG:original_data_fname already exists in session state
2025/03/18 07:46 DEBUG:CREDENTIALS_FILE already exists in session state
2025/03/18 07:46 DEBUG:TEXT_FILE already exists in session state
2025/03/18 07:46 DEBUG:ELECTION_DATES already exists in session state
2025/03/18 07:46 DEBUG:LAST_MODIFIED_DATES already exists in session state
2025/03/18 07:46 DEBUG:cleaned_data_fname already exists in session state
2025/03/18 07:46 DEBUG:cleaned_donations_fname already exists in session state
2025/03/18 07:46 DEBUG:cleaned_donorlist_fname already exists in session state
2025/03/18 07:46 DEBUG:cleaned_regentity_fname already exists in session state
2025/03/18 07:46 DEBUG:party_summary_fname already exists in session state
2025/03/18 07:46 DEBUG:imported_raw_fname already exists in session state
2025/03/18 07:46 DEBUG:source_data_fname already exists in session state
2025/03/18 07:46 INFO:Session_state variables initialized
2025/03/18 07:46 DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/18 07:46 DEBUG:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/18 07:46 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 07:46 DEBUG:LAST_MODIFIED_DATES: reference_files\last_modified_dates.json
2025/03/18 07:46 DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/18 07:46 DEBUG:load_raw_data_last_modified: 1742283994.9360802
2025/03/18 07:46 DEBUG:filter_def: ({'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}},)
2025/03/18 07:46 DEBUG:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/18 07:46 DEBUG:utils_dir: utils
2025/03/18 07:46 DEBUG:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 07:46 DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/18 07:46 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 07:46 DEBUG:menu_selection: {'title': 'Cash Donations', 'function': <function mod_cash_donations at 0x0000021AD6D1A5F0>}
2025/03/18 07:46 DEBUG:components_dir: components
2025/03/18 07:46 DEBUG:raw_data:            ECRef      OriginalRegulatedEntityName RegulatedEntityType      Value  ...                 CleanedDonorName CleanedDonorId    DonorId                        DonorName
0      NC0408174                   Mr Andy Street     Regulated Donee    1876.56  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street     Regulated Donee    2700.00  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street     Regulated Donee    4852.58  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street     Regulated Donee    2500.00  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street     Regulated Donee    4524.05  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
...          ...                              ...                 ...        ...  ...                              ...            ...        ...                              ...
91402   C0578847                        Reform Uk     Political Party   50000.00  ...                              NaN            NaN   100685.0              Mr Johnny Gallagher
91403  NC0414471                    Tactical.Vote         Third Party   10000.00  ...                              NaN            NaN    89129.0           Joint Digital Unit Ltd
91404   C0413721                     Labour Party     Political Party  425000.00  ...      Communication Workers Union          513.0      513.0      Communication Workers Union
91405  TV0514620         Centrum Campaign Limited         Third Party   19001.00  ...               Unidentified Donor      1000001.0  1000001.0               Unidentified Donor
91406  TV0490945  The League Against Cruel Sports         Third Party     800.00  ...               Unidentified Donor      1000001.0  1000001.0               Unidentified Donor

[91407 rows x 37 columns]
2025/03/18 07:46 DEBUG:PLACEHOLDER_ID: 1000001
2025/03/18 07:46 DEBUG:output_dir: output
2025/03/18 07:46 DEBUG:load_donorlist_data_last_modified: 1742283999.5995557
2025/03/18 07:46 DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/18 07:46 DEBUG:logs_dir: logs
2025/03/18 07:46 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 07:46 DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/18 07:46 DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/18 07:46 DEBUG:data_regentity:       RegulatedEntityId                        Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                            English Democrats            Small Entity        118532.00               12    9877.666667
1                  19.0                   Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0  Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                   Sinn FIn     Medium Large Entity       2506699.11              359    6982.448774
4                  39.0                                    Sinn Fin     Medium Large Entity       5936716.49              358   16583.006955
...                 ...                                          ...                     ...              ...              ...            ...
1661            18013.0                                 Shivani Raja  Single Donation Entity          3245.79                1    3245.790000
1662            18014.0                             Sir Geoffrey Cox  Single Donation Entity         13302.00                1   13302.000000
1663            18038.0                             Kevin Hollinrake  Single Donation Entity          2500.00                1    2500.000000
1664            18039.0                            Laura Kyrke-Smith  Single Donation Entity          6240.00                1    6240.000000
1665            18040.0                                  Rupert Lowe  Single Donation Entity         20000.00                1   20000.000000

[1666 rows x 6 columns]
2025/03/18 07:46 DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/18 07:46 DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/18 07:46 DEBUG:perc_target: 0.5
2025/03/18 07:46 DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/18 07:46 DEBUG:data_dir: data
2025/03/18 07:46 DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/18 07:46 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 07:46 DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/18 07:46 DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/18 07:46 DEBUG:data_donor:          DonorId                                         Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0                   Joseph Rowntree Refrom Trust Ltd         53000.00                2   26500.000000
1            2.0                   Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                               Bord Institute Trust         36893.54                4    9223.385000
3            4.0                       Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                                   Bridgwater Trust          7700.00                3    2566.666667
...          ...                                                ...              ...              ...            ...
31455   103426.0                                 Charles Max Keyner          2500.00                1    2500.000000
31456   103427.0  The Refugee Asylum And Migration Policy Projec...          6240.00                1    6240.000000
31457   103428.0                                       Bolton Agnew         20000.00                1   20000.000000
31458   103429.0                                  Opd Group Limited         15000.00                1   15000.000000
31459  1000001.0                                 Unidentified Donor       2359857.90              134   17610.879851

[31460 rows x 5 columns]
2025/03/18 07:46 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/18 07:46 DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/18 07:46 DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/18 07:46 DEBUG:party_summary_fname: output\party_summary.csv
2025/03/18 07:46 DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/18 07:46 DEBUG:app_pages_dir: app_pages
2025/03/18 07:46 DEBUG:data_clean:            ECRef RegulatedEntityType      Value IsSponsorship                 DonorStatus  ... WksSinceLastElection QtrsTillNextElection QtrsSinceLastElection YrsTillNextElection YrsSinceLastElection
0      NC0408174     Regulated Donee    1876.56         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
1      NC0408173     Regulated Donee    2700.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
2      NC0408177     Regulated Donee    4852.58         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
3      NC0408176     Regulated Donee    2500.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
4      NC0408170     Regulated Donee    4524.05         FALSE  Registered Political Party  ...               4709.0                  2.0                 363.0                 1.0                 91.0
...          ...                 ...        ...           ...                         ...  ...                  ...                  ...                   ...                 ...                  ...
91402   C0578847     Political Party   50000.00         FALSE                  Individual  ...               4961.0                -18.0                 382.0                -4.0                 96.0
91403  NC0414471         Third Party   10000.00         FALSE                     Company  ...               4724.0                  1.0                 364.0                 1.0                 91.0
91404   C0413721     Political Party  425000.00         FALSE                 Trade Union  ...               4720.0                  1.0                 364.0                 1.0                 91.0
91405  TV0514620         Third Party   19001.00         FALSE          Unidentified Donor  ...               4751.0                 -2.0                 366.0                -0.0                 92.0
91406  TV0490945         Third Party     800.00         FALSE          Unidentified Donor  ...               4737.0                 -0.0                 365.0                -0.0                 91.0

[91407 rows x 55 columns]
2025/03/18 07:46 DEBUG:reference_dir: reference_files
2025/03/18 07:46 DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/18 07:46 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 07:46 DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/18 07:46 INFO:Session state Setup complete
2025/03/18 07:46 INFO:initialize_session_state executed successfully
2025/03/18 07:46 INFO:Package setup complete
2025/03/18 07:46 INFO:setup_package executed successfully
2025/03/18 07:46 INFO:Setup completed successfully.
2025/03/18 07:46 INFO:Running Menu setup...
2025/03/18 07:46 DEBUG:Calling pagesetup with args={args}, kwargs={kwargs}
2025/03/18 07:46 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:get_git_version executed successfully
2025/03/18 07:46 INFO:App Version: v39.201
2025/03/18 07:46 INFO:Switched to page: Cash Donations
2025/03/18 07:46 DEBUG:Calling display_data_page with args={args}, kwargs={kwargs}
2025/03/18 07:46 DEBUG:Calling load_and_filter_data with args={args}, kwargs={kwargs}
2025/03/18 07:46 DEBUG:filter_def in session state: ({'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}},)
2025/03/18 07:46 DEBUG:Current target: {}
2025/03/18 07:46 INFO:load_and_filter_data executed successfully
2025/03/18 07:46 DEBUG:Calling display_summary_statistics with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:display_summary_statistics executed successfully
2025/03/18 07:46 DEBUG:Calling display_textual_insights_predefined with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:display_textual_insights_predefined executed successfully
2025/03/18 07:46 DEBUG:Calling display_visualizations with args={args}, kwargs={kwargs}
2025/03/18 07:46 DEBUG:DataFrame for plot_bar_line_by_year:        ECRef RegulatedEntityType    Value IsSponsorship                 DonorStatus  ... WksSinceLastElection QtrsTillNextElection QtrsSinceLastElection YrsTillNextElection YrsSinceLastElection
0  NC0408174     Regulated Donee  1876.56         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
1  NC0408173     Regulated Donee  2700.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
2  NC0408177     Regulated Donee  4852.58         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
3  NC0408176     Regulated Donee  2500.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
4  NC0408170     Regulated Donee  4524.05         FALSE  Registered Political Party  ...               4709.0                  2.0                 363.0                 1.0                 91.0

[5 rows x 55 columns]
2025/03/18 07:46 DEBUG:Grouped DataFrame:    YearReceived                      Party_Group        Value
0          2001  Conservative And Unionist Party  17664303.17
1          2001                      Green Party     68087.00
2          2001                     Labour Party  15031503.37
3          2001                     Large Entity    833032.54
4          2001                 Liberal Democrat   2811428.76
2025/03/18 07:46 DEBUG:DataFrame for plot_bar_line_by_year:        ECRef RegulatedEntityType    Value IsSponsorship                 DonorStatus  ... WksSinceLastElection QtrsTillNextElection QtrsSinceLastElection YrsTillNextElection YrsSinceLastElection
0  NC0408174     Regulated Donee  1876.56         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
1  NC0408173     Regulated Donee  2700.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
2  NC0408177     Regulated Donee  4852.58         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
3  NC0408176     Regulated Donee  2500.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
4  NC0408170     Regulated Donee  4524.05         FALSE  Registered Political Party  ...               4709.0                  2.0                 363.0                 1.0                 91.0

[5 rows x 55 columns]
2025/03/18 07:46 DEBUG:Grouped DataFrame:    YearReceived                      Party_Group  EventCount
0          2001  Conservative And Unionist Party         815
1          2001                      Green Party          15
2          2001                     Labour Party        1165
3          2001                     Large Entity          80
4          2001                 Liberal Democrat         369
2025/03/18 07:46 INFO:display_visualizations executed successfully
2025/03/18 07:46 INFO:display_data_page executed successfully
2025/03/18 07:46 DEBUG:Calling display_per_group_data_page with args={args}, kwargs={kwargs}
2025/03/18 07:46 DEBUG:Calling display_summary_statistics with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:display_summary_statistics executed successfully
2025/03/18 07:46 DEBUG:Calling display_textual_insights_predefined with args={args}, kwargs={kwargs}
2025/03/18 07:46 INFO:display_textual_insights_predefined executed successfully
2025/03/18 07:46 DEBUG:Calling display_visualizations with args={args}, kwargs={kwargs}
2025/03/18 07:46 DEBUG:DataFrame for plot_bar_line_by_year:        ECRef RegulatedEntityType    Value IsSponsorship                 DonorStatus  ... WksSinceLastElection QtrsTillNextElection QtrsSinceLastElection YrsTillNextElection YrsSinceLastElection
0  NC0408174     Regulated Donee  1876.56         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
1  NC0408173     Regulated Donee  2700.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
2  NC0408177     Regulated Donee  4852.58         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
3  NC0408176     Regulated Donee  2500.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
4  NC0408170     Regulated Donee  4524.05         FALSE  Registered Political Party  ...               4709.0                  2.0                 363.0                 1.0                 91.0

[5 rows x 55 columns]
2025/03/18 07:46 DEBUG:Grouped DataFrame:    YearReceived                      Party_Group        Value
0          2001  Conservative And Unionist Party  17664303.17
1          2001                      Green Party     68087.00
2          2001                     Labour Party  15031503.37
3          2001                     Large Entity    833032.54
4          2001                 Liberal Democrat   2811428.76
2025/03/18 07:46 DEBUG:DataFrame for plot_bar_line_by_year:        ECRef RegulatedEntityType    Value IsSponsorship                 DonorStatus  ... WksSinceLastElection QtrsTillNextElection QtrsSinceLastElection YrsTillNextElection YrsSinceLastElection
0  NC0408174     Regulated Donee  1876.56         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
1  NC0408173     Regulated Donee  2700.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
2  NC0408177     Regulated Donee  4852.58         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
3  NC0408176     Regulated Donee  2500.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
4  NC0408170     Regulated Donee  4524.05         FALSE  Registered Political Party  ...               4709.0                  2.0                 363.0                 1.0                 91.0

[5 rows x 55 columns]
2025/03/18 07:46 DEBUG:Grouped DataFrame:    YearReceived                      Party_Group  EventCount
0          2001  Conservative And Unionist Party         815
1          2001                      Green Party          15
2          2001                     Labour Party        1165
3          2001                     Large Entity          80
4          2001                 Liberal Democrat         369
2025/03/18 07:46 INFO:display_visualizations executed successfully
2025/03/18 07:46 INFO:display_per_group_data_page executed successfully
2025/03/18 07:46 INFO:pagesetup executed successfully
2025/03/18 07:46 INFO:Menu setup completed successfully.
2025/03/18 07:46 INFO:App is fully loaded and ready!
2025/03/18 07:50 INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/18 07:50 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 07:50 INFO:get_git_version executed successfully
2025/03/18 07:50 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 07:50 INFO:get_git_version executed successfully
2025/03/18 07:50 INFO:Streamlit App Starting...
2025/03/18 07:50 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 07:50 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 07:50 INFO:Running App setup...
2025/03/18 07:50 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 07:50 INFO:Setting up the package
2025/03/18 07:50 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 07:50 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 07:50 INFO:get_git_version executed successfully
2025/03/18 07:50 INFO:Version: v39.172
2025/03/18 07:50 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 07:50 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 07:50 DEBUG:BASE_DIR already exists in session state
2025/03/18 07:50 DEBUG:filenames already exists in session state
2025/03/18 07:50 DEBUG:PLACEHOLDER_DATE already exists in session state
2025/03/18 07:50 DEBUG:PLACEHOLDER_ID already exists in session state
2025/03/18 07:50 DEBUG:thresholds already exists in session state
2025/03/18 07:50 DEBUG:data_remappings already exists in session state
2025/03/18 07:50 DEBUG:filter_def already exists in session state
2025/03/18 07:50 DEBUG:security already exists in session state
2025/03/18 07:50 DEBUG:perc_target already exists in session state
2025/03/18 07:50 DEBUG:RERUN_MP_PARTY_MEMBERSHIP already exists in session state
2025/03/18 07:50 DEBUG:directories already exists in session state
2025/03/18 07:50 DEBUG:reference_dir already exists in session state
2025/03/18 07:50 DEBUG:data_dir already exists in session state
2025/03/18 07:50 DEBUG:output_dir already exists in session state
2025/03/18 07:50 DEBUG:logs_dir already exists in session state
2025/03/18 07:50 DEBUG:components_dir already exists in session state
2025/03/18 07:50 DEBUG:app_pages_dir already exists in session state
2025/03/18 07:50 DEBUG:utils_dir already exists in session state
2025/03/18 07:50 DEBUG:Donor_dedupe_cleaned_fname already exists in session state
2025/03/18 07:50 DEBUG:ListofPoliticalPeople_fname already exists in session state
2025/03/18 07:50 DEBUG:mppartymemb_fname already exists in session state
2025/03/18 07:50 DEBUG:donor_map_fname already exists in session state
2025/03/18 07:50 DEBUG:politician_party_fname already exists in session state
2025/03/18 07:50 DEBUG:regentity_map_fname already exists in session state
2025/03/18 07:50 DEBUG:original_data_fname already exists in session state
2025/03/18 07:50 DEBUG:CREDENTIALS_FILE already exists in session state
2025/03/18 07:50 DEBUG:TEXT_FILE already exists in session state
2025/03/18 07:50 DEBUG:ELECTION_DATES already exists in session state
2025/03/18 07:50 DEBUG:LAST_MODIFIED_DATES already exists in session state
2025/03/18 07:50 DEBUG:cleaned_data_fname already exists in session state
2025/03/18 07:50 DEBUG:cleaned_donations_fname already exists in session state
2025/03/18 07:50 DEBUG:cleaned_donorlist_fname already exists in session state
2025/03/18 07:50 DEBUG:cleaned_regentity_fname already exists in session state
2025/03/18 07:50 DEBUG:party_summary_fname already exists in session state
2025/03/18 07:50 DEBUG:imported_raw_fname already exists in session state
2025/03/18 07:50 DEBUG:source_data_fname already exists in session state
2025/03/18 07:50 INFO:Session_state variables initialized
2025/03/18 07:50 DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/18 07:50 DEBUG:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/18 07:50 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 07:50 DEBUG:LAST_MODIFIED_DATES: reference_files\last_modified_dates.json
2025/03/18 07:50 DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/18 07:50 DEBUG:load_raw_data_last_modified: 1742283994.9360802
2025/03/18 07:50 DEBUG:filter_def: ({'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}},)
2025/03/18 07:50 DEBUG:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/18 07:50 DEBUG:utils_dir: utils
2025/03/18 07:50 DEBUG:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 07:50 DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/18 07:50 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 07:50 DEBUG:menu_selection: {'title': 'Non Cash Donations', 'function': <function mod_non_cash_donations at 0x0000021AD6D1A680>}
2025/03/18 07:50 DEBUG:components_dir: components
2025/03/18 07:50 DEBUG:max_date: 2025-01-23
2025/03/18 07:50 DEBUG:raw_data:            ECRef      OriginalRegulatedEntityName RegulatedEntityType      Value  ...                 CleanedDonorName CleanedDonorId    DonorId                        DonorName
0      NC0408174                   Mr Andy Street     Regulated Donee    1876.56  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street     Regulated Donee    2700.00  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street     Regulated Donee    4852.58  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street     Regulated Donee    2500.00  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street     Regulated Donee    4524.05  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
...          ...                              ...                 ...        ...  ...                              ...            ...        ...                              ...
91402   C0578847                        Reform Uk     Political Party   50000.00  ...                              NaN            NaN   100685.0              Mr Johnny Gallagher
91403  NC0414471                    Tactical.Vote         Third Party   10000.00  ...                              NaN            NaN    89129.0           Joint Digital Unit Ltd
91404   C0413721                     Labour Party     Political Party  425000.00  ...      Communication Workers Union          513.0      513.0      Communication Workers Union
91405  TV0514620         Centrum Campaign Limited         Third Party   19001.00  ...               Unidentified Donor      1000001.0  1000001.0               Unidentified Donor
91406  TV0490945  The League Against Cruel Sports         Third Party     800.00  ...               Unidentified Donor      1000001.0  1000001.0               Unidentified Donor

[91407 rows x 37 columns]
2025/03/18 07:50 DEBUG:PLACEHOLDER_ID: 1000001
2025/03/18 07:50 DEBUG:output_dir: output
2025/03/18 07:50 DEBUG:load_donorlist_data_last_modified: 1742283999.5995557
2025/03/18 07:50 DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/18 07:50 DEBUG:logs_dir: logs
2025/03/18 07:50 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 07:50 DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/18 07:50 DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/18 07:50 DEBUG:data_regentity:       RegulatedEntityId                        Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                            English Democrats            Small Entity        118532.00               12    9877.666667
1                  19.0                   Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0  Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                   Sinn FIn     Medium Large Entity       2506699.11              359    6982.448774
4                  39.0                                    Sinn Fin     Medium Large Entity       5936716.49              358   16583.006955
...                 ...                                          ...                     ...              ...              ...            ...
1661            18013.0                                 Shivani Raja  Single Donation Entity          3245.79                1    3245.790000
1662            18014.0                             Sir Geoffrey Cox  Single Donation Entity         13302.00                1   13302.000000
1663            18038.0                             Kevin Hollinrake  Single Donation Entity          2500.00                1    2500.000000
1664            18039.0                            Laura Kyrke-Smith  Single Donation Entity          6240.00                1    6240.000000
1665            18040.0                                  Rupert Lowe  Single Donation Entity         20000.00                1   20000.000000

[1666 rows x 6 columns]
2025/03/18 07:50 DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/18 07:50 DEBUG:min_date: 2001-01-01
2025/03/18 07:50 DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/18 07:50 DEBUG:perc_target: 0.5
2025/03/18 07:50 DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/18 07:50 DEBUG:data_dir: data
2025/03/18 07:50 DEBUG:selected_group_entity: Donor
2025/03/18 07:50 DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/18 07:50 DEBUG:selected_entity_name: All
2025/03/18 07:50 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 07:50 DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/18 07:50 DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/18 07:50 DEBUG:data_donor:          DonorId                                         Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0                   Joseph Rowntree Refrom Trust Ltd         53000.00                2   26500.000000
1            2.0                   Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                               Bord Institute Trust         36893.54                4    9223.385000
3            4.0                       Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                                   Bridgwater Trust          7700.00                3    2566.666667
...          ...                                                ...              ...              ...            ...
31455   103426.0                                 Charles Max Keyner          2500.00                1    2500.000000
31456   103427.0  The Refugee Asylum And Migration Policy Projec...          6240.00                1    6240.000000
31457   103428.0                                       Bolton Agnew         20000.00                1   20000.000000
31458   103429.0                                  Opd Group Limited         15000.00                1   15000.000000
31459  1000001.0                                 Unidentified Donor       2359857.90              134   17610.879851

[31460 rows x 5 columns]
2025/03/18 07:50 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/18 07:50 DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/18 07:50 DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/18 07:50 DEBUG:party_summary_fname: output\party_summary.csv
2025/03/18 07:50 DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/18 07:50 DEBUG:app_pages_dir: app_pages
2025/03/18 07:50 DEBUG:data_clean:            ECRef RegulatedEntityType      Value IsSponsorship                 DonorStatus  ... WksSinceLastElection QtrsTillNextElection QtrsSinceLastElection YrsTillNextElection YrsSinceLastElection
0      NC0408174     Regulated Donee    1876.56         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
1      NC0408173     Regulated Donee    2700.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
2      NC0408177     Regulated Donee    4852.58         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
3      NC0408176     Regulated Donee    2500.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
4      NC0408170     Regulated Donee    4524.05         FALSE  Registered Political Party  ...               4709.0                  2.0                 363.0                 1.0                 91.0
...          ...                 ...        ...           ...                         ...  ...                  ...                  ...                   ...                 ...                  ...
91402   C0578847     Political Party   50000.00         FALSE                  Individual  ...               4961.0                -18.0                 382.0                -4.0                 96.0
91403  NC0414471         Third Party   10000.00         FALSE                     Company  ...               4724.0                  1.0                 364.0                 1.0                 91.0
91404   C0413721     Political Party  425000.00         FALSE                 Trade Union  ...               4720.0                  1.0                 364.0                 1.0                 91.0
91405  TV0514620         Third Party   19001.00         FALSE          Unidentified Donor  ...               4751.0                 -2.0                 366.0                -0.0                 92.0
91406  TV0490945         Third Party     800.00         FALSE          Unidentified Donor  ...               4737.0                 -0.0                 365.0                -0.0                 91.0

[91407 rows x 55 columns]
2025/03/18 07:50 DEBUG:reference_dir: reference_files
2025/03/18 07:50 DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/18 07:50 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 07:50 DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/18 07:50 INFO:Session state Setup complete
2025/03/18 07:50 INFO:initialize_session_state executed successfully
2025/03/18 07:50 INFO:Package setup complete
2025/03/18 07:50 INFO:setup_package executed successfully
2025/03/18 07:50 INFO:Setup completed successfully.
2025/03/18 07:50 INFO:Running Menu setup...
2025/03/18 07:50 DEBUG:Calling pagesetup with args={args}, kwargs={kwargs}
2025/03/18 07:50 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 07:50 INFO:get_git_version executed successfully
2025/03/18 07:50 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 07:50 INFO:get_git_version executed successfully
2025/03/18 07:50 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 07:50 INFO:get_git_version executed successfully
2025/03/18 07:50 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 07:50 INFO:get_git_version executed successfully
2025/03/18 07:50 INFO:App Version: v39.201
2025/03/18 07:50 INFO:Switched to page: Non Cash Donations
2025/03/18 07:50 DEBUG:Calling display_data_page with args={args}, kwargs={kwargs}
2025/03/18 07:50 DEBUG:Calling load_and_filter_data with args={args}, kwargs={kwargs}
2025/03/18 07:50 DEBUG:filter_def in session state: ({'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}},)
2025/03/18 07:50 DEBUG:Current target: {}
2025/03/18 07:50 INFO:load_and_filter_data executed successfully
2025/03/18 07:50 DEBUG:Calling display_summary_statistics with args={args}, kwargs={kwargs}
2025/03/18 07:50 INFO:display_summary_statistics executed successfully
2025/03/18 07:50 DEBUG:Calling display_textual_insights_predefined with args={args}, kwargs={kwargs}
2025/03/18 07:50 INFO:display_textual_insights_predefined executed successfully
2025/03/18 07:50 DEBUG:Calling display_visualizations with args={args}, kwargs={kwargs}
2025/03/18 07:50 DEBUG:DataFrame for plot_bar_line_by_year:        ECRef RegulatedEntityType    Value IsSponsorship                 DonorStatus  ... WksSinceLastElection QtrsTillNextElection QtrsSinceLastElection YrsTillNextElection YrsSinceLastElection
0  NC0408174     Regulated Donee  1876.56         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
1  NC0408173     Regulated Donee  2700.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
2  NC0408177     Regulated Donee  4852.58         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
3  NC0408176     Regulated Donee  2500.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
4  NC0408170     Regulated Donee  4524.05         FALSE  Registered Political Party  ...               4709.0                  2.0                 363.0                 1.0                 91.0

[5 rows x 55 columns]
2025/03/18 07:50 DEBUG:Grouped DataFrame:    YearReceived                      Party_Group        Value
0          2001  Conservative And Unionist Party  17664303.17
1          2001                      Green Party     68087.00
2          2001                     Labour Party  15031503.37
3          2001                     Large Entity    833032.54
4          2001                 Liberal Democrat   2811428.76
2025/03/18 07:50 DEBUG:DataFrame for plot_bar_line_by_year:        ECRef RegulatedEntityType    Value IsSponsorship                 DonorStatus  ... WksSinceLastElection QtrsTillNextElection QtrsSinceLastElection YrsTillNextElection YrsSinceLastElection
0  NC0408174     Regulated Donee  1876.56         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
1  NC0408173     Regulated Donee  2700.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
2  NC0408177     Regulated Donee  4852.58         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
3  NC0408176     Regulated Donee  2500.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
4  NC0408170     Regulated Donee  4524.05         FALSE  Registered Political Party  ...               4709.0                  2.0                 363.0                 1.0                 91.0

[5 rows x 55 columns]
2025/03/18 07:50 DEBUG:Grouped DataFrame:    YearReceived                      Party_Group  EventCount
0          2001  Conservative And Unionist Party         815
1          2001                      Green Party          15
2          2001                     Labour Party        1165
3          2001                     Large Entity          80
4          2001                 Liberal Democrat         369
2025/03/18 07:50 INFO:display_visualizations executed successfully
2025/03/18 07:50 INFO:display_data_page executed successfully
2025/03/18 07:50 DEBUG:Calling display_per_group_data_page with args={args}, kwargs={kwargs}
2025/03/18 07:50 DEBUG:Calling display_summary_statistics with args={args}, kwargs={kwargs}
2025/03/18 07:50 INFO:display_summary_statistics executed successfully
2025/03/18 07:50 DEBUG:Calling display_textual_insights_predefined with args={args}, kwargs={kwargs}
2025/03/18 07:50 INFO:display_textual_insights_predefined executed successfully
2025/03/18 07:50 DEBUG:Calling display_visualizations with args={args}, kwargs={kwargs}
2025/03/18 07:50 DEBUG:DataFrame for plot_bar_line_by_year:        ECRef RegulatedEntityType    Value IsSponsorship                 DonorStatus  ... WksSinceLastElection QtrsTillNextElection QtrsSinceLastElection YrsTillNextElection YrsSinceLastElection
0  NC0408174     Regulated Donee  1876.56         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
1  NC0408173     Regulated Donee  2700.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
2  NC0408177     Regulated Donee  4852.58         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
3  NC0408176     Regulated Donee  2500.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
4  NC0408170     Regulated Donee  4524.05         FALSE  Registered Political Party  ...               4709.0                  2.0                 363.0                 1.0                 91.0

[5 rows x 55 columns]
2025/03/18 07:50 DEBUG:Grouped DataFrame:    YearReceived                      Party_Group        Value
0          2001  Conservative And Unionist Party  17664303.17
1          2001                      Green Party     68087.00
2          2001                     Labour Party  15031503.37
3          2001                     Large Entity    833032.54
4          2001                 Liberal Democrat   2811428.76
2025/03/18 07:50 DEBUG:DataFrame for plot_bar_line_by_year:        ECRef RegulatedEntityType    Value IsSponsorship                 DonorStatus  ... WksSinceLastElection QtrsTillNextElection QtrsSinceLastElection YrsTillNextElection YrsSinceLastElection
0  NC0408174     Regulated Donee  1876.56         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
1  NC0408173     Regulated Donee  2700.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
2  NC0408177     Regulated Donee  4852.58         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
3  NC0408176     Regulated Donee  2500.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
4  NC0408170     Regulated Donee  4524.05         FALSE  Registered Political Party  ...               4709.0                  2.0                 363.0                 1.0                 91.0

[5 rows x 55 columns]
2025/03/18 07:50 DEBUG:Grouped DataFrame:    YearReceived                      Party_Group  EventCount
0          2001  Conservative And Unionist Party         815
1          2001                      Green Party          15
2          2001                     Labour Party        1165
3          2001                     Large Entity          80
4          2001                 Liberal Democrat         369
2025/03/18 07:50 INFO:display_visualizations executed successfully
2025/03/18 07:50 INFO:display_per_group_data_page executed successfully
2025/03/18 07:50 INFO:pagesetup executed successfully
2025/03/18 07:50 INFO:Menu setup completed successfully.
2025/03/18 07:50 INFO:App is fully loaded and ready!
2025/03/18 07:58 INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/18 07:58 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 07:58 INFO:get_git_version executed successfully
2025/03/18 07:58 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 07:58 INFO:get_git_version executed successfully
2025/03/18 07:58 INFO:Streamlit App Starting...
2025/03/18 07:58 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 07:58 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 07:58 INFO:Running App setup...
2025/03/18 07:58 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 07:58 INFO:Setting up the package
2025/03/18 07:58 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 07:58 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 07:58 INFO:get_git_version executed successfully
2025/03/18 07:58 INFO:Version: v39.172
2025/03/18 07:58 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 07:58 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 07:58 DEBUG:BASE_DIR already exists in session state
2025/03/18 07:58 DEBUG:filenames already exists in session state
2025/03/18 07:58 DEBUG:PLACEHOLDER_DATE already exists in session state
2025/03/18 07:58 DEBUG:PLACEHOLDER_ID already exists in session state
2025/03/18 07:58 DEBUG:thresholds already exists in session state
2025/03/18 07:58 DEBUG:data_remappings already exists in session state
2025/03/18 07:58 DEBUG:filter_def already exists in session state
2025/03/18 07:58 DEBUG:security already exists in session state
2025/03/18 07:58 DEBUG:perc_target already exists in session state
2025/03/18 07:58 DEBUG:RERUN_MP_PARTY_MEMBERSHIP already exists in session state
2025/03/18 07:58 DEBUG:directories already exists in session state
2025/03/18 07:58 DEBUG:reference_dir already exists in session state
2025/03/18 07:58 DEBUG:data_dir already exists in session state
2025/03/18 07:58 DEBUG:output_dir already exists in session state
2025/03/18 07:58 DEBUG:logs_dir already exists in session state
2025/03/18 07:58 DEBUG:components_dir already exists in session state
2025/03/18 07:58 DEBUG:app_pages_dir already exists in session state
2025/03/18 07:58 DEBUG:utils_dir already exists in session state
2025/03/18 07:58 DEBUG:Donor_dedupe_cleaned_fname already exists in session state
2025/03/18 07:58 DEBUG:ListofPoliticalPeople_fname already exists in session state
2025/03/18 07:58 DEBUG:mppartymemb_fname already exists in session state
2025/03/18 07:58 DEBUG:donor_map_fname already exists in session state
2025/03/18 07:58 DEBUG:politician_party_fname already exists in session state
2025/03/18 07:58 DEBUG:regentity_map_fname already exists in session state
2025/03/18 07:58 DEBUG:original_data_fname already exists in session state
2025/03/18 07:58 DEBUG:CREDENTIALS_FILE already exists in session state
2025/03/18 07:58 DEBUG:TEXT_FILE already exists in session state
2025/03/18 07:58 DEBUG:ELECTION_DATES already exists in session state
2025/03/18 07:58 DEBUG:LAST_MODIFIED_DATES already exists in session state
2025/03/18 07:58 DEBUG:cleaned_data_fname already exists in session state
2025/03/18 07:58 DEBUG:cleaned_donations_fname already exists in session state
2025/03/18 07:58 DEBUG:cleaned_donorlist_fname already exists in session state
2025/03/18 07:58 DEBUG:cleaned_regentity_fname already exists in session state
2025/03/18 07:58 DEBUG:party_summary_fname already exists in session state
2025/03/18 07:58 DEBUG:imported_raw_fname already exists in session state
2025/03/18 07:58 DEBUG:source_data_fname already exists in session state
2025/03/18 07:58 INFO:Session_state variables initialized
2025/03/18 07:58 DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/18 07:58 DEBUG:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/18 07:58 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 07:58 DEBUG:LAST_MODIFIED_DATES: reference_files\last_modified_dates.json
2025/03/18 07:58 DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/18 07:58 DEBUG:load_raw_data_last_modified: 1742283994.9360802
2025/03/18 07:58 DEBUG:filter_def: ({'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}},)
2025/03/18 07:58 DEBUG:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/18 07:58 DEBUG:utils_dir: utils
2025/03/18 07:58 DEBUG:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 07:58 DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/18 07:58 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 07:58 DEBUG:menu_selection: {'title': 'Cash Donations', 'function': <function mod_cash_donations at 0x0000021AD844FF40>}
2025/03/18 07:58 DEBUG:components_dir: components
2025/03/18 07:58 DEBUG:max_date: 2025-01-23
2025/03/18 07:58 DEBUG:raw_data:            ECRef      OriginalRegulatedEntityName RegulatedEntityType      Value  ...                 CleanedDonorName CleanedDonorId    DonorId                        DonorName
0      NC0408174                   Mr Andy Street     Regulated Donee    1876.56  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street     Regulated Donee    2700.00  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street     Regulated Donee    4852.58  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street     Regulated Donee    2500.00  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street     Regulated Donee    4524.05  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
...          ...                              ...                 ...        ...  ...                              ...            ...        ...                              ...
91402   C0578847                        Reform Uk     Political Party   50000.00  ...                              NaN            NaN   100685.0              Mr Johnny Gallagher
91403  NC0414471                    Tactical.Vote         Third Party   10000.00  ...                              NaN            NaN    89129.0           Joint Digital Unit Ltd
91404   C0413721                     Labour Party     Political Party  425000.00  ...      Communication Workers Union          513.0      513.0      Communication Workers Union
91405  TV0514620         Centrum Campaign Limited         Third Party   19001.00  ...               Unidentified Donor      1000001.0  1000001.0               Unidentified Donor
91406  TV0490945  The League Against Cruel Sports         Third Party     800.00  ...               Unidentified Donor      1000001.0  1000001.0               Unidentified Donor

[91407 rows x 37 columns]
2025/03/18 07:58 DEBUG:PLACEHOLDER_ID: 1000001
2025/03/18 07:58 DEBUG:output_dir: output
2025/03/18 07:58 DEBUG:load_donorlist_data_last_modified: 1742283999.5995557
2025/03/18 07:58 DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/18 07:58 DEBUG:logs_dir: logs
2025/03/18 07:58 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 07:58 DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/18 07:58 DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/18 07:58 DEBUG:data_regentity:       RegulatedEntityId                        Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                            English Democrats            Small Entity        118532.00               12    9877.666667
1                  19.0                   Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0  Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                   Sinn FIn     Medium Large Entity       2506699.11              359    6982.448774
4                  39.0                                    Sinn Fin     Medium Large Entity       5936716.49              358   16583.006955
...                 ...                                          ...                     ...              ...              ...            ...
1661            18013.0                                 Shivani Raja  Single Donation Entity          3245.79                1    3245.790000
1662            18014.0                             Sir Geoffrey Cox  Single Donation Entity         13302.00                1   13302.000000
1663            18038.0                             Kevin Hollinrake  Single Donation Entity          2500.00                1    2500.000000
1664            18039.0                            Laura Kyrke-Smith  Single Donation Entity          6240.00                1    6240.000000
1665            18040.0                                  Rupert Lowe  Single Donation Entity         20000.00                1   20000.000000

[1666 rows x 6 columns]
2025/03/18 07:58 DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/18 07:58 DEBUG:min_date: 2001-01-01
2025/03/18 07:58 DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/18 07:58 DEBUG:perc_target: 0.5
2025/03/18 07:58 DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/18 07:58 DEBUG:data_dir: data
2025/03/18 07:58 DEBUG:selected_group_entity: Donor
2025/03/18 07:58 DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/18 07:58 DEBUG:selected_entity_name: All
2025/03/18 07:58 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 07:58 DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/18 07:58 DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/18 07:58 DEBUG:data_donor:          DonorId                                         Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0                   Joseph Rowntree Refrom Trust Ltd         53000.00                2   26500.000000
1            2.0                   Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                               Bord Institute Trust         36893.54                4    9223.385000
3            4.0                       Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                                   Bridgwater Trust          7700.00                3    2566.666667
...          ...                                                ...              ...              ...            ...
31455   103426.0                                 Charles Max Keyner          2500.00                1    2500.000000
31456   103427.0  The Refugee Asylum And Migration Policy Projec...          6240.00                1    6240.000000
31457   103428.0                                       Bolton Agnew         20000.00                1   20000.000000
31458   103429.0                                  Opd Group Limited         15000.00                1   15000.000000
31459  1000001.0                                 Unidentified Donor       2359857.90              134   17610.879851

[31460 rows x 5 columns]
2025/03/18 07:58 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/18 07:58 DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/18 07:58 DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/18 07:58 DEBUG:party_summary_fname: output\party_summary.csv
2025/03/18 07:58 DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/18 07:58 DEBUG:app_pages_dir: app_pages
2025/03/18 07:58 DEBUG:data_clean:            ECRef RegulatedEntityType      Value IsSponsorship                 DonorStatus  ... WksSinceLastElection QtrsTillNextElection QtrsSinceLastElection YrsTillNextElection YrsSinceLastElection
0      NC0408174     Regulated Donee    1876.56         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
1      NC0408173     Regulated Donee    2700.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
2      NC0408177     Regulated Donee    4852.58         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
3      NC0408176     Regulated Donee    2500.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
4      NC0408170     Regulated Donee    4524.05         FALSE  Registered Political Party  ...               4709.0                  2.0                 363.0                 1.0                 91.0
...          ...                 ...        ...           ...                         ...  ...                  ...                  ...                   ...                 ...                  ...
91402   C0578847     Political Party   50000.00         FALSE                  Individual  ...               4961.0                -18.0                 382.0                -4.0                 96.0
91403  NC0414471         Third Party   10000.00         FALSE                     Company  ...               4724.0                  1.0                 364.0                 1.0                 91.0
91404   C0413721     Political Party  425000.00         FALSE                 Trade Union  ...               4720.0                  1.0                 364.0                 1.0                 91.0
91405  TV0514620         Third Party   19001.00         FALSE          Unidentified Donor  ...               4751.0                 -2.0                 366.0                -0.0                 92.0
91406  TV0490945         Third Party     800.00         FALSE          Unidentified Donor  ...               4737.0                 -0.0                 365.0                -0.0                 91.0

[91407 rows x 55 columns]
2025/03/18 07:58 DEBUG:reference_dir: reference_files
2025/03/18 07:58 DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/18 07:58 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 07:58 DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/18 07:58 INFO:Session state Setup complete
2025/03/18 07:58 INFO:initialize_session_state executed successfully
2025/03/18 07:58 INFO:Package setup complete
2025/03/18 07:58 INFO:setup_package executed successfully
2025/03/18 07:58 INFO:Setup completed successfully.
2025/03/18 07:58 INFO:Running Menu setup...
2025/03/18 07:58 DEBUG:Calling pagesetup with args={args}, kwargs={kwargs}
2025/03/18 07:58 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 07:58 INFO:get_git_version executed successfully
2025/03/18 07:58 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 07:58 INFO:get_git_version executed successfully
2025/03/18 07:58 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 07:58 INFO:get_git_version executed successfully
2025/03/18 07:58 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 07:58 INFO:get_git_version executed successfully
2025/03/18 07:58 INFO:App Version: v39.201
2025/03/18 07:58 INFO:Switched to page: Cash Donations
2025/03/18 07:58 DEBUG:Calling display_data_page with args={args}, kwargs={kwargs}
2025/03/18 07:58 DEBUG:Calling load_and_filter_data with args={args}, kwargs={kwargs}
2025/03/18 07:58 DEBUG:filter_def in session state: ({'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}},)
2025/03/18 07:58 DEBUG:Filter key: CashDonations_ftr
2025/03/18 07:58 ERROR:Error in load_and_filter_data: 'tuple' object does not support item assignment
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 52, in load_and_filter_data
    st.session_state.filter_def[filter_key_a] = {}
TypeError: 'tuple' object does not support item assignment
2025/03/18 07:58 CRITICAL:Menu setup crashed: 'tuple' object does not support item assignment
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 179, in mod_cash_donations
    display_data_page(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page.py", line 22, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 52, in load_and_filter_data
    st.session_state.filter_def[filter_key_a] = {}
TypeError: 'tuple' object does not support item assignment
2025/03/18 08:09 INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/18 08:09 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:get_git_version executed successfully
2025/03/18 08:09 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:get_git_version executed successfully
2025/03/18 08:09 INFO:Streamlit App Starting...
2025/03/18 08:09 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:09 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:09 INFO:Running App setup...
2025/03/18 08:09 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:Setting up the package
2025/03/18 08:09 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:09 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:get_git_version executed successfully
2025/03/18 08:09 INFO:Version: v39.172
2025/03/18 08:09 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:09 DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo
2025/03/18 08:09 DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:09 DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/18 08:09 DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/18 08:09 DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:09 DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:09 DEBUG:Initialised filter_def with value: ({'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}},)
2025/03/18 08:09 DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:09 DEBUG:Initialised perc_target with value: 0.5
2025/03/18 08:09 DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/18 08:09 DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:09 DEBUG:Initialised reference_dir with value: reference_files
2025/03/18 08:09 DEBUG:Initialised data_dir with value: data
2025/03/18 08:09 DEBUG:Initialised output_dir with value: output
2025/03/18 08:09 DEBUG:Initialised logs_dir with value: logs
2025/03/18 08:09 DEBUG:Initialised components_dir with value: components
2025/03/18 08:09 DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/18 08:09 DEBUG:Initialised utils_dir with value: utils
2025/03/18 08:09 DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/18 08:09 DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/18 08:09 DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/18 08:09 DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/18 08:09 DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/18 08:09 DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/18 08:09 DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/18 08:09 DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/18 08:09 DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/18 08:09 DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/18 08:09 DEBUG:Initialised LAST_MODIFIED_DATES with value: reference_files\last_modified_dates.json
2025/03/18 08:09 DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/18 08:09 DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/18 08:09 DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/18 08:09 DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/18 08:09 DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/18 08:09 DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/18 08:09 DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/18 08:09 INFO:Session_state variables initialized
2025/03/18 08:09 DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/18 08:09 DEBUG:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:09 DEBUG:perc_target: 0.5
2025/03/18 08:09 DEBUG:reference_dir: reference_files
2025/03/18 08:09 DEBUG:output_dir: output
2025/03/18 08:09 DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/18 08:09 DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/18 08:09 DEBUG:PLACEHOLDER_ID: 1000001
2025/03/18 08:09 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/18 08:09 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:09 DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/18 08:09 DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/18 08:09 DEBUG:party_summary_fname: output\party_summary.csv
2025/03/18 08:09 DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/18 08:09 DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/18 08:09 DEBUG:filter_def: ({'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}},)
2025/03/18 08:09 DEBUG:logs_dir: logs
2025/03/18 08:09 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:09 DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/18 08:09 DEBUG:LAST_MODIFIED_DATES: reference_files\last_modified_dates.json
2025/03/18 08:09 DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/18 08:09 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:09 DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/18 08:09 DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/18 08:09 DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/18 08:09 DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/18 08:09 DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/18 08:09 DEBUG:app_pages_dir: app_pages
2025/03/18 08:09 DEBUG:data_dir: data
2025/03/18 08:09 DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/18 08:09 DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/18 08:09 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:09 DEBUG:components_dir: components
2025/03/18 08:09 DEBUG:utils_dir: utils
2025/03/18 08:09 DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/18 08:09 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:09 INFO:Session state Setup complete
2025/03/18 08:09 INFO:initialize_session_state executed successfully
2025/03/18 08:09 INFO:Package setup complete
2025/03/18 08:09 INFO:setup_package executed successfully
2025/03/18 08:09 INFO:Setup completed successfully.
2025/03/18 08:09 INFO:Running Menu setup...
2025/03/18 08:09 DEBUG:Calling pagesetup with args={args}, kwargs={kwargs}
2025/03/18 08:09 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:get_git_version executed successfully
2025/03/18 08:09 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:get_git_version executed successfully
2025/03/18 08:09 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:get_git_version executed successfully
2025/03/18 08:09 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:get_git_version executed successfully
2025/03/18 08:09 INFO:App Version: v39.201
2025/03/18 08:09 INFO:Switched to page: Introduction
2025/03/18 08:09 INFO:pagesetup executed successfully
2025/03/18 08:09 INFO:Menu setup completed successfully.
2025/03/18 08:09 DEBUG:Calling initialise_data with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:Running first load function.
2025/03/18 08:09 DEBUG:Calling firstload with args={args}, kwargs={kwargs}
2025/03/18 08:09 DEBUG:Calling get_raw_data with args={args}, kwargs={kwargs}
2025/03/18 08:09 DEBUG:Calling load_raw_data with args={args}, kwargs={kwargs}
2025/03/18 08:09 DEBUG:Original data file path pre raw data load: source_data_fname
2025/03/18 08:09 DEBUG:Processed data file path pre raw data load: imported_raw_fname
2025/03/18 08:09 DEBUG:Calling try_to_use_preprocessed_data with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:Original file path: source\Donations_accepted_by_political_parties.csv
2025/03/18 08:09 INFO:Saved file path: output\imported_raw.csv
2025/03/18 08:09 DEBUG:Calling is_file_updated with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:Checking if source\Donations_accepted_by_political_parties.csv has been updated.
2025/03/18 08:09 DEBUG:Calling get_file_modification_time with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:Getting modification time for source\Donations_accepted_by_political_parties.csv
2025/03/18 08:09 INFO:get_file_modification_time executed successfully
2025/03/18 08:09 INFO:Current modification time: 1741521516.7875266
2025/03/18 08:09 INFO:Last modification time: 1742283994.9360802
2025/03/18 08:09 INFO:is_file_updated executed successfully
2025/03/18 08:09 INFO:Loading preprocessed data. Using output\imported_raw.csv dated 1742283994.9360802 instead of source\Donations_accepted_by_political_parties.csv
2025/03/18 08:09 INFO:Importing file from output\imported_raw.csv
2025/03/18 08:09 INFO:try_to_use_preprocessed_data executed successfully
2025/03/18 08:09 INFO:Preprocessed data loaded successfully.
2025/03/18 08:09 DEBUG:Calling raw_data_cleanup with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:Cleaning up raw data
2025/03/18 08:09 ERROR:Session state variables not initialized!
2025/03/18 08:09 DEBUG:Calling try_to_use_preprocessed_data with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:Original file path: None
2025/03/18 08:09 INFO:Saved file path: output\cleaned_donations.csv
2025/03/18 08:09 ERROR:Error: originalfilepath is None!
2025/03/18 08:09 INFO:try_to_use_preprocessed_data executed successfully
2025/03/18 08:09 INFO:Data loaded, shape: (91407, 29)
2025/03/18 08:09 DEBUG:Calling dedupe_entity_file with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:Map file regentity_map_fname exists. Proceeding with deduplication.
2025/03/18 08:09 INFO:File deduplication complete, shape: ECRef                            639
OriginalRegulatedEntityName      639
RegulatedEntityType              639
Value                            639
AcceptedDate                     620
AccountingUnitName               639
DonorName                        639
AccountingUnitsAsCentralParty    639
IsSponsorship                    639
DonorStatus                      639
RegulatedDoneeType               639
CompanyRegistrationNumber        639
Postcode                         639
DonationType                     639
NatureOfDonation                 639
PurposeOfVisit                   639
DonationAction                   639
ReceivedDate                     532
ReportedDate                     639
IsReportedPrePoll                423
ReportingPeriodName              639
IsBequest                        639
IsAggregation                    639
OriginalRegulatedEntityId        639
AccountingUnitId                 639
DonorId                          639
CampaigningName                  639
RegisterName                     639
IsIrishSource                    639
CleanedRegulatedEntityName       639
CleanedRegulatedEntityId         639
RegulatedEntityId                639
RegulatedEntityName              639
dtype: int64 records updated with new RegulatedEntityId and ECRef                            10361
OriginalRegulatedEntityName      10361
RegulatedEntityType              10361
Value                            10359
AcceptedDate                     10050
AccountingUnitName               10361
DonorName                        10361
AccountingUnitsAsCentralParty    10361
IsSponsorship                    10361
DonorStatus                      10361
RegulatedDoneeType               10361
CompanyRegistrationNumber        10361
Postcode                         10361
DonationType                     10361
NatureOfDonation                 10361
PurposeOfVisit                   10361
DonationAction                   10361
ReceivedDate                      7316
ReportedDate                     10351
IsReportedPrePoll                 4878
ReportingPeriodName              10361
IsBequest                        10361
IsAggregation                    10361
OriginalRegulatedEntityId        10361
AccountingUnitId                 10361
DonorId                          10361
CampaigningName                  10361
RegisterName                     10361
IsIrishSource                    10361
CleanedRegulatedEntityName       10361
CleanedRegulatedEntityId         10361
RegulatedEntityId                10361
RegulatedEntityName              10361
dtype: int64 records updated with new RegulatedEntityName
2025/03/18 08:09 DEBUG:File deduplication cleaned complete, shape: ECRef                            3697
OriginalRegulatedEntityName      3697
RegulatedEntityType              3697
Value                            3697
AcceptedDate                     3600
AccountingUnitName               3697
DonorName                        3697
AccountingUnitsAsCentralParty    3697
IsSponsorship                    3697
DonorStatus                      3697
RegulatedDoneeType               3697
CompanyRegistrationNumber        3697
Postcode                         3697
DonationType                     3697
NatureOfDonation                 3697
PurposeOfVisit                   3697
DonationAction                   3697
ReceivedDate                     3309
ReportedDate                     3697
IsReportedPrePoll                 449
ReportingPeriodName              3697
IsBequest                        3697
IsAggregation                    3697
OriginalRegulatedEntityId        3697
AccountingUnitId                 3697
DonorId                          3697
CampaigningName                  3697
RegisterName                     3697
IsIrishSource                    3697
CleanedRegulatedEntityName        639
CleanedRegulatedEntityId          639
RegulatedEntityId                3697
RegulatedEntityName              3697
dtype: int64 records updated with new RegulatedEntityId and ECRef                            13419
OriginalRegulatedEntityName      13419
RegulatedEntityType              13419
Value                            13417
AcceptedDate                     13030
AccountingUnitName               13419
DonorName                        13419
AccountingUnitsAsCentralParty    13419
IsSponsorship                    13419
DonorStatus                      13419
RegulatedDoneeType               13419
CompanyRegistrationNumber        13419
Postcode                         13419
DonationType                     13419
NatureOfDonation                 13419
PurposeOfVisit                   13419
DonationAction                   13419
ReceivedDate                     10093
ReportedDate                     13409
IsReportedPrePoll                 4904
ReportingPeriodName              13419
IsBequest                        13419
IsAggregation                    13419
OriginalRegulatedEntityId        13419
AccountingUnitId                 13419
DonorId                          13419
CampaigningName                  13419
RegisterName                     13419
IsIrishSource                    13419
CleanedRegulatedEntityName       10361
CleanedRegulatedEntityId         10361
RegulatedEntityId                13419
RegulatedEntityName              13419
dtype: int64 records updated with new RegulatedEntityName
2025/03/18 08:09 INFO:File deduplication complete, shape: (91407, 33)
2025/03/18 08:09 INFO:dedupe_entity_file executed successfully
2025/03/18 08:09 DEBUG:Calling dedupe_entity_file with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:Map file donor_map_fname exists. Proceeding with deduplication.
2025/03/18 08:09 INFO:File deduplication complete, shape: ECRef                            34715
OriginalRegulatedEntityName      34715
RegulatedEntityType              34715
Value                            34712
AcceptedDate                     34322
AccountingUnitName               34715
OriginalDonorName                34715
AccountingUnitsAsCentralParty    34715
IsSponsorship                    34715
DonorStatus                      34715
RegulatedDoneeType               34715
CompanyRegistrationNumber        34715
Postcode                         34715
DonationType                     34715
NatureOfDonation                 34715
PurposeOfVisit                   34715
DonationAction                   34715
ReceivedDate                     33051
ReportedDate                     34704
IsReportedPrePoll                22707
ReportingPeriodName              34715
IsBequest                        34715
IsAggregation                    34715
OriginalRegulatedEntityId        34715
AccountingUnitId                 34715
OriginalDonorId                  34715
CampaigningName                  34715
RegisterName                     34715
IsIrishSource                    34715
CleanedRegulatedEntityName       34715
CleanedRegulatedEntityId         34715
RegulatedEntityId                34715
RegulatedEntityName              34715
CleanedDonorName                 34715
CleanedDonorId                   34715
DonorId                          34715
DonorName                        34715
dtype: int64 records updated with new DonorId and ECRef                            19257
OriginalRegulatedEntityName      19257
RegulatedEntityType              19257
Value                            19255
AcceptedDate                     18942
AccountingUnitName               19257
OriginalDonorName                19257
AccountingUnitsAsCentralParty    19257
IsSponsorship                    19257
DonorStatus                      19257
RegulatedDoneeType               19257
CompanyRegistrationNumber        19257
Postcode                         19257
DonationType                     19257
NatureOfDonation                 19257
PurposeOfVisit                   19257
DonationAction                   19257
ReceivedDate                     18704
ReportedDate                     19248
IsReportedPrePoll                13081
ReportingPeriodName              19257
IsBequest                        19257
IsAggregation                    19257
OriginalRegulatedEntityId        19257
AccountingUnitId                 19257
OriginalDonorId                  19257
CampaigningName                  19257
RegisterName                     19257
IsIrishSource                    19257
CleanedRegulatedEntityName       19256
CleanedRegulatedEntityId         19256
RegulatedEntityId                19257
RegulatedEntityName              19257
CleanedDonorName                 19257
CleanedDonorId                   19257
DonorId                          19257
DonorName                        19257
dtype: int64 records updated with new DonorName
2025/03/18 08:09 DEBUG:File deduplication cleaned complete, shape: ECRef                            51946
OriginalRegulatedEntityName      51946
RegulatedEntityType              51946
Value                            51943
AcceptedDate                     51179
AccountingUnitName               51946
OriginalDonorName                51946
AccountingUnitsAsCentralParty    51946
IsSponsorship                    51946
DonorStatus                      51946
RegulatedDoneeType               51946
CompanyRegistrationNumber        51946
Postcode                         51946
DonationType                     51946
NatureOfDonation                 51946
PurposeOfVisit                   51946
DonationAction                   51946
ReceivedDate                     49641
ReportedDate                     51935
IsReportedPrePoll                23658
ReportingPeriodName              51946
IsBequest                        51946
IsAggregation                    51946
OriginalRegulatedEntityId        51946
AccountingUnitId                 51946
OriginalDonorId                  51946
CampaigningName                  51946
RegisterName                     51946
IsIrishSource                    51946
CleanedRegulatedEntityName       48932
CleanedRegulatedEntityId         48932
RegulatedEntityId                51946
RegulatedEntityName              51946
CleanedDonorName                 34715
CleanedDonorId                   34715
DonorId                          51946
DonorName                        51946
dtype: int64 records updated with new DonorId and ECRef                            36488
OriginalRegulatedEntityName      36488
RegulatedEntityType              36488
Value                            36486
AcceptedDate                     35799
AccountingUnitName               36488
OriginalDonorName                36488
AccountingUnitsAsCentralParty    36488
IsSponsorship                    36488
DonorStatus                      36488
RegulatedDoneeType               36488
CompanyRegistrationNumber        36488
Postcode                         36488
DonationType                     36488
NatureOfDonation                 36488
PurposeOfVisit                   36488
DonationAction                   36488
ReceivedDate                     35294
ReportedDate                     36479
IsReportedPrePoll                14032
ReportingPeriodName              36488
IsBequest                        36488
IsAggregation                    36488
OriginalRegulatedEntityId        36488
AccountingUnitId                 36488
OriginalDonorId                  36488
CampaigningName                  36488
RegisterName                     36488
IsIrishSource                    36488
CleanedRegulatedEntityName       33473
CleanedRegulatedEntityId         33473
RegulatedEntityId                36488
RegulatedEntityName              36488
CleanedDonorName                 19257
CleanedDonorId                   19257
DonorId                          36488
DonorName                        36488
dtype: int64 records updated with new DonorName
2025/03/18 08:09 INFO:File deduplication complete, shape: (91407, 37)
2025/03/18 08:09 INFO:dedupe_entity_file executed successfully
2025/03/18 08:09 INFO:Raw Data cleanup completed
2025/03/18 08:09 INFO:Data shape: (91407, 37)
2025/03/18 08:09 INFO:Data saved to output\cleaned_donations.csv
2025/03/18 08:09 INFO:Data cleanup completed, shape: (91407, 37)
2025/03/18 08:09 INFO:raw_data_cleanup executed successfully
2025/03/18 08:09 INFO:load_raw_data executed successfully
2025/03/18 08:09 INFO:get_raw_data executed successfully
2025/03/18 08:09 DEBUG:st.session_state.raw_data: 91407
2025/03/18 08:09 DEBUG:Calling get_cleaned_data with args={args}, kwargs={kwargs}
2025/03/18 08:09 DEBUG:Calling load_cleaned_data with args={args}, kwargs={kwargs}
2025/03/18 08:09 DEBUG:Rows in Raw Data: 91407
2025/03/18 08:09 DEBUG:Calling try_to_use_preprocessed_data with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:Original file path: output\cleaned_donations.csv
2025/03/18 08:09 INFO:Saved file path: output\cleaned_data.csv
2025/03/18 08:09 DEBUG:Calling is_file_updated with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:Checking if output\cleaned_donations.csv has been updated.
2025/03/18 08:09 DEBUG:Calling get_file_modification_time with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:Getting modification time for output\cleaned_donations.csv
2025/03/18 08:09 INFO:get_file_modification_time executed successfully
2025/03/18 08:09 INFO:Current modification time: 1742285362.3052466
2025/03/18 08:09 INFO:Last modification time: 1742283994.9360802
2025/03/18 08:09 INFO:is_file_updated executed successfully
2025/03/18 08:09 INFO:try_to_use_preprocessed_data executed successfully
2025/03/18 08:09 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/18 08:09 INFO:Loading and cleaning data... data.clean_and_enhance
2025/03/18 08:09 DEBUG:Clean Data Prep: streamlitdata load: 91407
2025/03/18 08:09 DEBUG:Clean Data Prep 123: streamlitdata load: 91407
2025/03/18 08:09 INFO:Map file regentity_map_fname exists. Proceeding with deduplication.
2025/03/18 08:09 DEBUG:Clean Data Prep 150: Map Party: 91407
2025/03/18 08:09 DEBUG:Group assignment: group
Conservative And Unionist Party    28887
Labour Party                       22724
Liberal Democrats                  18627
Small Medium Entity                 6430
Small Entity                        2728
Medium Large Entity                 2528
Large Entity                        1982
Uk Independence Party (Ukip)        1840
Very Small Entity                   1808
Green Party                         1656
Medium Entity                       1649
Single Donation Entity               548
Name: count, dtype: int64
2025/03/18 08:09 DEBUG:Group assignment: group
Very Small Entity                  604
Single Donation Entity             548
Small Entity                       293
Small Medium Entity                189
Medium Entity                       11
Medium Large Entity                  9
Large Entity                         3
Conservative And Unionist Party      1
Green Party                          1
Labour Party                         1
Liberal Democrats                    1
Uk Independence Party (Ukip)         1
Name: count, dtype: int64
2025/03/18 08:09 DEBUG:Clean Data Prep 235: RegEntity_Map: 91407
2025/03/18 08:09 DEBUG:Group assignment: group
Conservative And Unionist Party    32493
Labour Party                       27325
Liberal Democrat                   18969
Small Medium Entity                 2117
Large Entity                        2057
Medium Large Entity                 1964
Uk Independence Party (Ukip)        1858
Green Party                         1681
Medium Entity                       1394
Small Entity                         777
Very Small Entity                    574
Single Donation Entity               198
Name: count, dtype: int64
2025/03/18 08:09 DEBUG:Group assignment: group
Very Small Entity                  200
Single Donation Entity             198
Small Entity                        83
Small Medium Entity                 58
Medium Entity                        9
Medium Large Entity                  7
Large Entity                         3
Conservative And Unionist Party      1
Green Party                          1
Labour Party                         1
Liberal Democrat                     1
Uk Independence Party (Ukip)         1
Name: count, dtype: int64
2025/03/18 08:09 DEBUG:Clean Data Prep 235: Party_Group: 91407
2025/03/18 08:09 DEBUG:Calling load_election_dates with args={args}, kwargs={kwargs}
2025/03/18 08:09 DEBUG:st.session_state.ELECTION_DATES: reference_files\elections.csv
2025/03/18 08:09 DEBUG:try to load previous election dates from file.
2025/03/18 08:09 DEBUG:Calling try_to_use_preprocessed_data with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:Original file path: source\Donations_accepted_by_political_parties.csv
2025/03/18 08:09 INFO:Saved file path: reference_files\elections.csv
2025/03/18 08:09 DEBUG:Calling is_file_updated with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:Checking if source\Donations_accepted_by_political_parties.csv has been updated.
2025/03/18 08:09 DEBUG:Calling get_file_modification_time with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:Getting modification time for source\Donations_accepted_by_political_parties.csv
2025/03/18 08:09 INFO:get_file_modification_time executed successfully
2025/03/18 08:09 INFO:Current modification time: 1741521516.7875266
2025/03/18 08:09 INFO:Last modification time: 1741521516.7875266
2025/03/18 08:09 INFO:is_file_updated executed successfully
2025/03/18 08:09 INFO:Loading preprocessed data. Using reference_files\elections.csv dated 1741521516.7875266 instead of source\Donations_accepted_by_political_parties.csv
2025/03/18 08:09 INFO:Importing file from reference_files\elections.csv
2025/03/18 08:09 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/18 08:09 INFO:try_to_use_preprocessed_data executed successfully
2025/03/18 08:09 ERROR:Failed to load election dates from file.
2025/03/18 08:09 INFO:Election_dates_df empty - loading from pdpy.
2025/03/18 08:09 INFO:Election Dates loaded vis pdpy.
2025/03/18 08:09 DEBUG:ElectionDates_dict from pdpy: {'1929': {'dissolution': datetime.date(1929, 5, 10), 'election': datetime.date(1929, 5, 30), 'type': 'General Election'}, '1931': {'dissolution': datetime.date(1931, 10, 7), 'election': datetime.date(1931, 10, 27), 'type': 'General Election'}, '1935': {'dissolution': datetime.date(1935, 10, 25), 'election': datetime.date(1935, 11, 14), 'type': 'General Election'}, '1945': {'dissolution': datetime.date(1945, 6, 15), 'election': datetime.date(1945, 7, 5), 'type': 'General Election'}, '1950': {'dissolution': datetime.date(1950, 2, 3), 'election': datetime.date(1950, 2, 23), 'type': 'General Election'}, '1951': {'dissolution': datetime.date(1951, 10, 5), 'election': datetime.date(1951, 10, 25), 'type': 'General Election'}, '1955': {'dissolution': datetime.date(1955, 5, 6), 'election': datetime.date(1955, 5, 26), 'type': 'General Election'}, '1959': {'dissolution': datetime.date(1959, 9, 18), 'election': datetime.date(1959, 10, 8), 'type': 'General Election'}, '1964': {'dissolution': datetime.date(1964, 9, 25), 'election': datetime.date(1964, 10, 15), 'type': 'General Election'}, '1966': {'dissolution': datetime.date(1966, 3, 10), 'election': datetime.date(1966, 3, 31), 'type': 'General Election'}, '1970': {'dissolution': datetime.date(1970, 5, 29), 'election': datetime.date(1970, 6, 18), 'type': 'General Election'}, '1974 (Feb)': {'dissolution': datetime.date(1974, 2, 8), 'election': datetime.date(1974, 2, 28), 'type': 'General Election'}, '1974 (Oct)': {'dissolution': datetime.date(1974, 9, 20), 'election': datetime.date(1974, 10, 10), 'type': 'General Election'}, '1979': {'dissolution': datetime.date(1979, 4, 7), 'election': datetime.date(1979, 5, 3), 'type': 'General Election'}, '1983': {'dissolution': datetime.date(1983, 5, 13), 'election': datetime.date(1983, 6, 9), 'type': 'General Election'}, '1987': {'dissolution': datetime.date(1987, 5, 18), 'election': datetime.date(1987, 6, 11), 'type': 'General Election'}, '1992': {'dissolution': datetime.date(1992, 3, 16), 'election': datetime.date(1992, 4, 9), 'type': 'General Election'}, '1997': {'dissolution': datetime.date(1997, 4, 8), 'election': datetime.date(1997, 5, 1), 'type': 'General Election'}, '2001': {'dissolution': datetime.date(2001, 5, 14), 'election': datetime.date(2001, 6, 7), 'type': 'General Election'}, '2005': {'dissolution': datetime.date(2005, 4, 11), 'election': datetime.date(2005, 5, 5), 'type': 'General Election'}, '2010': {'dissolution': datetime.date(2010, 4, 12), 'election': datetime.date(2010, 5, 6), 'type': 'General Election'}, '2015': {'dissolution': datetime.date(2015, 3, 30), 'election': datetime.date(2015, 5, 7), 'type': 'General Election'}, '2017': {'dissolution': datetime.date(2017, 5, 3), 'election': datetime.date(2017, 6, 8), 'type': 'General Election'}, '2019': {'dissolution': datetime.date(2019, 11, 6), 'election': datetime.date(2019, 12, 12), 'type': 'General Election'}}
2025/03/18 08:09 INFO:Election Dates Loaded Successfully.
2025/03/18 08:09 DEBUG:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/18 08:09 DEBUG:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/18 08:09 INFO:load_election_dates executed successfully
2025/03/18 08:09 DEBUG:Clean Data Prep 353: Election dates: 91407
2025/03/18 08:09 DEBUG:Clean Data Prep 386: End of clean: 91407
2025/03/18 08:09 INFO:Cleaned Data completed, shape: (91407, 55)
2025/03/18 08:09 INFO:load_cleaned_data executed successfully
2025/03/18 08:09 INFO:get_cleaned_data executed successfully
2025/03/18 08:09 DEBUG:st.session_state.raw_data: 91407
2025/03/18 08:09 DEBUG:Calling get_donor_data with args={args}, kwargs={kwargs}
2025/03/18 08:09 DEBUG:Calling load_donorList_data with args={args}, kwargs={kwargs}
2025/03/18 08:09 DEBUG:Calling try_to_use_preprocessed_data with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:Original file path: output\cleaned_data.csv
2025/03/18 08:09 INFO:Saved file path: output\cleaned_donorlist.csv
2025/03/18 08:09 DEBUG:Calling is_file_updated with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:Checking if output\cleaned_data.csv has been updated.
2025/03/18 08:09 DEBUG:Calling get_file_modification_time with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:Getting modification time for output\cleaned_data.csv
2025/03/18 08:09 INFO:get_file_modification_time executed successfully
2025/03/18 08:09 INFO:Current modification time: 1742285367.685263
2025/03/18 08:09 INFO:Last modification time: 1742283999.5995557
2025/03/18 08:09 INFO:is_file_updated executed successfully
2025/03/18 08:09 INFO:try_to_use_preprocessed_data executed successfully
2025/03/18 08:09 INFO:Donor data saved to output\cleaned_donorlist.csv
2025/03/18 08:09 INFO:Donor Data summary completed
2025/03/18 08:09 INFO:Data shape: (31460, 5)
2025/03/18 08:09 INFO:load_donorList_data executed successfully
2025/03/18 08:09 INFO:get_donor_data executed successfully
2025/03/18 08:09 DEBUG:st.session_state.data_donor: 31460
2025/03/18 08:09 DEBUG:st.session_state.data_clean: 91407
2025/03/18 08:09 DEBUG:Calling get_regentity_data with args={args}, kwargs={kwargs}
2025/03/18 08:09 DEBUG:Calling load_regulated_entity_data with args={args}, kwargs={kwargs}
2025/03/18 08:09 DEBUG:Calling try_to_use_preprocessed_data with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:Original file path: output\cleaned_data.csv
2025/03/18 08:09 INFO:Saved file path: output\cleaned_regentity.csv
2025/03/18 08:09 DEBUG:Calling is_file_updated with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:Checking if output\cleaned_data.csv has been updated.
2025/03/18 08:09 DEBUG:Calling get_file_modification_time with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:Getting modification time for output\cleaned_data.csv
2025/03/18 08:09 INFO:get_file_modification_time executed successfully
2025/03/18 08:09 INFO:Current modification time: 1742285367.685263
2025/03/18 08:09 INFO:Last modification time: 1742285367.685263
2025/03/18 08:09 INFO:is_file_updated executed successfully
2025/03/18 08:09 INFO:Loading preprocessed data. Using output\cleaned_regentity.csv dated 1742285367.685263 instead of output\cleaned_data.csv
2025/03/18 08:09 INFO:Importing file from output\cleaned_regentity.csv
2025/03/18 08:09 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/18 08:09 INFO:try_to_use_preprocessed_data executed successfully
2025/03/18 08:09 INFO:Regulated entity data saved to output\cleaned_regentity.csv
2025/03/18 08:09 INFO:Raw Data cleanup completed
2025/03/18 08:09 INFO:Data shape: (1666, 6)
2025/03/18 08:09 INFO:load_regulated_entity_data executed successfully
2025/03/18 08:09 INFO:get_regentity_data executed successfully
2025/03/18 08:09 DEBUG:st.session_state.data_regentity: 1666
2025/03/18 08:09 DEBUG:st.session_state.data_donor: 31460
2025/03/18 08:09 DEBUG:st.session_state.data_clean: 91407
2025/03/18 08:09 INFO:firstload executed successfully
2025/03/18 08:09 INFO:Data first load completed successfully.
2025/03/18 08:09 INFO:initialise_data executed successfully
2025/03/18 08:09 INFO:App is fully loaded and ready!
2025/03/18 08:09 INFO:Streamlit App Starting...
2025/03/18 08:09 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:09 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:09 INFO:Running App setup...
2025/03/18 08:09 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:Setting up the package
2025/03/18 08:09 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:09 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:get_git_version executed successfully
2025/03/18 08:09 INFO:Version: v39.172
2025/03/18 08:09 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:09 DEBUG:BASE_DIR already exists in session state
2025/03/18 08:09 DEBUG:filenames already exists in session state
2025/03/18 08:09 DEBUG:PLACEHOLDER_DATE already exists in session state
2025/03/18 08:09 DEBUG:PLACEHOLDER_ID already exists in session state
2025/03/18 08:09 DEBUG:thresholds already exists in session state
2025/03/18 08:09 DEBUG:data_remappings already exists in session state
2025/03/18 08:09 DEBUG:filter_def already exists in session state
2025/03/18 08:09 DEBUG:security already exists in session state
2025/03/18 08:09 DEBUG:perc_target already exists in session state
2025/03/18 08:09 DEBUG:RERUN_MP_PARTY_MEMBERSHIP already exists in session state
2025/03/18 08:09 DEBUG:directories already exists in session state
2025/03/18 08:09 DEBUG:reference_dir already exists in session state
2025/03/18 08:09 DEBUG:data_dir already exists in session state
2025/03/18 08:09 DEBUG:output_dir already exists in session state
2025/03/18 08:09 DEBUG:logs_dir already exists in session state
2025/03/18 08:09 DEBUG:components_dir already exists in session state
2025/03/18 08:09 DEBUG:app_pages_dir already exists in session state
2025/03/18 08:09 DEBUG:utils_dir already exists in session state
2025/03/18 08:09 DEBUG:Donor_dedupe_cleaned_fname already exists in session state
2025/03/18 08:09 DEBUG:ListofPoliticalPeople_fname already exists in session state
2025/03/18 08:09 DEBUG:mppartymemb_fname already exists in session state
2025/03/18 08:09 DEBUG:donor_map_fname already exists in session state
2025/03/18 08:09 DEBUG:politician_party_fname already exists in session state
2025/03/18 08:09 DEBUG:regentity_map_fname already exists in session state
2025/03/18 08:09 DEBUG:original_data_fname already exists in session state
2025/03/18 08:09 DEBUG:CREDENTIALS_FILE already exists in session state
2025/03/18 08:09 DEBUG:TEXT_FILE already exists in session state
2025/03/18 08:09 DEBUG:ELECTION_DATES already exists in session state
2025/03/18 08:09 DEBUG:LAST_MODIFIED_DATES already exists in session state
2025/03/18 08:09 DEBUG:cleaned_data_fname already exists in session state
2025/03/18 08:09 DEBUG:cleaned_donations_fname already exists in session state
2025/03/18 08:09 DEBUG:cleaned_donorlist_fname already exists in session state
2025/03/18 08:09 DEBUG:cleaned_regentity_fname already exists in session state
2025/03/18 08:09 DEBUG:party_summary_fname already exists in session state
2025/03/18 08:09 DEBUG:imported_raw_fname already exists in session state
2025/03/18 08:09 DEBUG:source_data_fname already exists in session state
2025/03/18 08:09 INFO:Session_state variables initialized
2025/03/18 08:09 DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/18 08:09 DEBUG:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:09 DEBUG:output_dir: output
2025/03/18 08:09 DEBUG:reference_dir: reference_files
2025/03/18 08:09 DEBUG:perc_target: 0.5
2025/03/18 08:09 DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/18 08:09 DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/18 08:09 DEBUG:PLACEHOLDER_ID: 1000001
2025/03/18 08:09 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/18 08:09 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:09 DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/18 08:09 DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/18 08:09 DEBUG:party_summary_fname: output\party_summary.csv
2025/03/18 08:09 DEBUG:data_clean:            ECRef RegulatedEntityType      Value IsSponsorship                 DonorStatus  ... WksSinceLastElection QtrsTillNextElection QtrsSinceLastElection YrsTillNextElection YrsSinceLastElection
0      NC0408174     Regulated Donee    1876.56         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
1      NC0408173     Regulated Donee    2700.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
2      NC0408177     Regulated Donee    4852.58         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
3      NC0408176     Regulated Donee    2500.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
4      NC0408170     Regulated Donee    4524.05         FALSE  Registered Political Party  ...               4709.0                  2.0                 363.0                 1.0                 91.0
...          ...                 ...        ...           ...                         ...  ...                  ...                  ...                   ...                 ...                  ...
91402   C0578847     Political Party   50000.00         FALSE                  Individual  ...               4961.0                -18.0                 382.0                -4.0                 96.0
91403  NC0414471         Third Party   10000.00         FALSE                     Company  ...               4724.0                  1.0                 364.0                 1.0                 91.0
91404   C0413721     Political Party  425000.00         FALSE                 Trade Union  ...               4720.0                  1.0                 364.0                 1.0                 91.0
91405  TV0514620         Third Party   19001.00         FALSE          Unidentified Donor  ...               4751.0                 -2.0                 366.0                -0.0                 92.0
91406  TV0490945         Third Party     800.00         FALSE          Unidentified Donor  ...               4737.0                 -0.0                 365.0                -0.0                 91.0

[91407 rows x 55 columns]
2025/03/18 08:09 DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/18 08:09 DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/18 08:09 DEBUG:filter_def: ({'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}},)
2025/03/18 08:09 DEBUG:logs_dir: logs
2025/03/18 08:09 DEBUG:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/18 08:09 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:09 DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/18 08:09 DEBUG:menu_selection: {'title': 'Cash Donations', 'function': <function mod_cash_donations at 0x000001F875D0DCF0>}
2025/03/18 08:09 DEBUG:LAST_MODIFIED_DATES: reference_files\last_modified_dates.json
2025/03/18 08:09 DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/18 08:09 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:09 DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/18 08:09 DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/18 08:09 DEBUG:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/18 08:09 DEBUG:load_donorlist_data_last_modified: 1742285367.685263
2025/03/18 08:09 DEBUG:load_raw_data_last_modified: 1742285362.3052466
2025/03/18 08:09 DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/18 08:09 DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/18 08:09 DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/18 08:09 DEBUG:raw_data:            ECRef      OriginalRegulatedEntityName RegulatedEntityType      Value  ...                 CleanedDonorName CleanedDonorId    DonorId                        DonorName
0      NC0408174                   Mr Andy Street     Regulated Donee    1876.56  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street     Regulated Donee    2700.00  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street     Regulated Donee    4852.58  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street     Regulated Donee    2500.00  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street     Regulated Donee    4524.05  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
...          ...                              ...                 ...        ...  ...                              ...            ...        ...                              ...
91402   C0578847                        Reform Uk     Political Party   50000.00  ...                              NaN            NaN   100685.0              Mr Johnny Gallagher
91403  NC0414471                    Tactical.Vote         Third Party   10000.00  ...                              NaN            NaN    89129.0           Joint Digital Unit Ltd
91404   C0413721                     Labour Party     Political Party  425000.00  ...      Communication Workers Union          513.0      513.0      Communication Workers Union
91405  TV0514620         Centrum Campaign Limited         Third Party   19001.00  ...               Unidentified Donor      1000001.0  1000001.0               Unidentified Donor
91406  TV0490945  The League Against Cruel Sports         Third Party     800.00  ...               Unidentified Donor      1000001.0  1000001.0               Unidentified Donor

[91407 rows x 37 columns]
2025/03/18 08:09 DEBUG:app_pages_dir: app_pages
2025/03/18 08:09 DEBUG:data_dir: data
2025/03/18 08:09 DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/18 08:09 DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/18 08:09 DEBUG:data_donor:          DonorId                                         Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0                   Joseph Rowntree Refrom Trust Ltd         53000.00                2   26500.000000
1            2.0                   Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                               Bord Institute Trust         36893.54                4    9223.385000
3            4.0                       Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                                   Bridgwater Trust          7700.00                3    2566.666667
...          ...                                                ...              ...              ...            ...
31455   103426.0                                 Charles Max Keyner          2500.00                1    2500.000000
31456   103427.0  The Refugee Asylum And Migration Policy Projec...          6240.00                1    6240.000000
31457   103428.0                                       Bolton Agnew         20000.00                1   20000.000000
31458   103429.0                                  Opd Group Limited         15000.00                1   15000.000000
31459  1000001.0                                 Unidentified Donor       2359857.90              134   17610.879851

[31460 rows x 5 columns]
2025/03/18 08:09 DEBUG:components_dir: components
2025/03/18 08:09 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:09 DEBUG:data_regentity:       RegulatedEntityId                        Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                            English Democrats            Small Entity        118532.00               12    9877.666667
1                  19.0                   Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0  Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                   Sinn FIn     Medium Large Entity       2506699.11              359    6982.448774
4                  39.0                                    Sinn Fin     Medium Large Entity       5936716.49              358   16583.006955
...                 ...                                          ...                     ...              ...              ...            ...
1661            18013.0                                 Shivani Raja  Single Donation Entity          3245.79                1    3245.790000
1662            18014.0                             Sir Geoffrey Cox  Single Donation Entity         13302.00                1   13302.000000
1663            18038.0                             Kevin Hollinrake  Single Donation Entity          2500.00                1    2500.000000
1664            18039.0                            Laura Kyrke-Smith  Single Donation Entity          6240.00                1    6240.000000
1665            18040.0                                  Rupert Lowe  Single Donation Entity         20000.00                1   20000.000000

[1666 rows x 6 columns]
2025/03/18 08:09 DEBUG:utils_dir: utils
2025/03/18 08:09 DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/18 08:09 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:09 INFO:Session state Setup complete
2025/03/18 08:09 INFO:initialize_session_state executed successfully
2025/03/18 08:09 INFO:Package setup complete
2025/03/18 08:09 INFO:setup_package executed successfully
2025/03/18 08:09 INFO:Setup completed successfully.
2025/03/18 08:09 INFO:Running Menu setup...
2025/03/18 08:09 DEBUG:Calling pagesetup with args={args}, kwargs={kwargs}
2025/03/18 08:09 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:09 INFO:get_git_version executed successfully
2025/03/18 08:09 INFO:App Version: v39.201
2025/03/18 08:09 INFO:Switched to page: Cash Donations
2025/03/18 08:09 DEBUG:Calling display_data_page with args={args}, kwargs={kwargs}
2025/03/18 08:09 DEBUG:Calling load_and_filter_data with args={args}, kwargs={kwargs}
2025/03/18 08:09 DEBUG:filter_def in session state: ({'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}},)
2025/03/18 08:09 DEBUG:Filter key: CashDonations_ftr
2025/03/18 08:09 ERROR:Error in load_and_filter_data: 'tuple' object does not support item assignment
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 52, in load_and_filter_data
    st.session_state.filter_def[filter_key_a] = {}
TypeError: 'tuple' object does not support item assignment
2025/03/18 08:09 CRITICAL:Menu setup crashed: 'tuple' object does not support item assignment
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 179, in mod_cash_donations
    display_data_page(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page.py", line 22, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 52, in load_and_filter_data
    st.session_state.filter_def[filter_key_a] = {}
TypeError: 'tuple' object does not support item assignment
2025/03/18 08:11 INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/18 08:11 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:get_git_version executed successfully
2025/03/18 08:11 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:get_git_version executed successfully
2025/03/18 08:11 INFO:Streamlit App Starting...
2025/03/18 08:11 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:11 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:11 INFO:Running App setup...
2025/03/18 08:11 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:Setting up the package
2025/03/18 08:11 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:11 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:get_git_version executed successfully
2025/03/18 08:11 INFO:Version: v39.172
2025/03/18 08:11 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:11 DEBUG:BASE_DIR already exists in session state
2025/03/18 08:11 DEBUG:filenames already exists in session state
2025/03/18 08:11 DEBUG:PLACEHOLDER_DATE already exists in session state
2025/03/18 08:11 DEBUG:PLACEHOLDER_ID already exists in session state
2025/03/18 08:11 DEBUG:thresholds already exists in session state
2025/03/18 08:11 DEBUG:data_remappings already exists in session state
2025/03/18 08:11 DEBUG:filter_def already exists in session state
2025/03/18 08:11 DEBUG:security already exists in session state
2025/03/18 08:11 DEBUG:perc_target already exists in session state
2025/03/18 08:11 DEBUG:RERUN_MP_PARTY_MEMBERSHIP already exists in session state
2025/03/18 08:11 DEBUG:directories already exists in session state
2025/03/18 08:11 DEBUG:reference_dir already exists in session state
2025/03/18 08:11 DEBUG:data_dir already exists in session state
2025/03/18 08:11 DEBUG:output_dir already exists in session state
2025/03/18 08:11 DEBUG:logs_dir already exists in session state
2025/03/18 08:11 DEBUG:components_dir already exists in session state
2025/03/18 08:11 DEBUG:app_pages_dir already exists in session state
2025/03/18 08:11 DEBUG:utils_dir already exists in session state
2025/03/18 08:11 DEBUG:Donor_dedupe_cleaned_fname already exists in session state
2025/03/18 08:11 DEBUG:ListofPoliticalPeople_fname already exists in session state
2025/03/18 08:11 DEBUG:mppartymemb_fname already exists in session state
2025/03/18 08:11 DEBUG:donor_map_fname already exists in session state
2025/03/18 08:11 DEBUG:politician_party_fname already exists in session state
2025/03/18 08:11 DEBUG:regentity_map_fname already exists in session state
2025/03/18 08:11 DEBUG:original_data_fname already exists in session state
2025/03/18 08:11 DEBUG:CREDENTIALS_FILE already exists in session state
2025/03/18 08:11 DEBUG:TEXT_FILE already exists in session state
2025/03/18 08:11 DEBUG:ELECTION_DATES already exists in session state
2025/03/18 08:11 DEBUG:LAST_MODIFIED_DATES already exists in session state
2025/03/18 08:11 DEBUG:cleaned_data_fname already exists in session state
2025/03/18 08:11 DEBUG:cleaned_donations_fname already exists in session state
2025/03/18 08:11 DEBUG:cleaned_donorlist_fname already exists in session state
2025/03/18 08:11 DEBUG:cleaned_regentity_fname already exists in session state
2025/03/18 08:11 DEBUG:party_summary_fname already exists in session state
2025/03/18 08:11 DEBUG:imported_raw_fname already exists in session state
2025/03/18 08:11 DEBUG:source_data_fname already exists in session state
2025/03/18 08:11 INFO:Session_state variables initialized
2025/03/18 08:11 DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/18 08:11 DEBUG:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:11 DEBUG:output_dir: output
2025/03/18 08:11 DEBUG:reference_dir: reference_files
2025/03/18 08:11 DEBUG:perc_target: 0.5
2025/03/18 08:11 DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/18 08:11 DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/18 08:11 DEBUG:max_date: 2025-01-23
2025/03/18 08:11 DEBUG:PLACEHOLDER_ID: 1000001
2025/03/18 08:11 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/18 08:11 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:11 DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/18 08:11 DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/18 08:11 DEBUG:party_summary_fname: output\party_summary.csv
2025/03/18 08:11 DEBUG:data_clean:            ECRef RegulatedEntityType      Value IsSponsorship                 DonorStatus  ... WksSinceLastElection QtrsTillNextElection QtrsSinceLastElection YrsTillNextElection YrsSinceLastElection
0      NC0408174     Regulated Donee    1876.56         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
1      NC0408173     Regulated Donee    2700.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
2      NC0408177     Regulated Donee    4852.58         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
3      NC0408176     Regulated Donee    2500.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
4      NC0408170     Regulated Donee    4524.05         FALSE  Registered Political Party  ...               4709.0                  2.0                 363.0                 1.0                 91.0
...          ...                 ...        ...           ...                         ...  ...                  ...                  ...                   ...                 ...                  ...
91402   C0578847     Political Party   50000.00         FALSE                  Individual  ...               4961.0                -18.0                 382.0                -4.0                 96.0
91403  NC0414471         Third Party   10000.00         FALSE                     Company  ...               4724.0                  1.0                 364.0                 1.0                 91.0
91404   C0413721     Political Party  425000.00         FALSE                 Trade Union  ...               4720.0                  1.0                 364.0                 1.0                 91.0
91405  TV0514620         Third Party   19001.00         FALSE          Unidentified Donor  ...               4751.0                 -2.0                 366.0                -0.0                 92.0
91406  TV0490945         Third Party     800.00         FALSE          Unidentified Donor  ...               4737.0                 -0.0                 365.0                -0.0                 91.0

[91407 rows x 55 columns]
2025/03/18 08:11 DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/18 08:11 DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/18 08:11 DEBUG:min_date: 2001-01-01
2025/03/18 08:11 DEBUG:filter_def: ({'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}},)
2025/03/18 08:11 DEBUG:logs_dir: logs
2025/03/18 08:11 DEBUG:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/18 08:11 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:11 DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/18 08:11 DEBUG:menu_selection: {'title': 'Non Cash Donations', 'function': <function mod_non_cash_donations at 0x000001F875D0DD80>}
2025/03/18 08:11 DEBUG:LAST_MODIFIED_DATES: reference_files\last_modified_dates.json
2025/03/18 08:11 DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/18 08:11 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:11 DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/18 08:11 DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/18 08:11 DEBUG:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/18 08:11 DEBUG:load_donorlist_data_last_modified: 1742285367.685263
2025/03/18 08:11 DEBUG:load_raw_data_last_modified: 1742285362.3052466
2025/03/18 08:11 DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/18 08:11 DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/18 08:11 DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/18 08:11 DEBUG:raw_data:            ECRef      OriginalRegulatedEntityName RegulatedEntityType      Value  ...                 CleanedDonorName CleanedDonorId    DonorId                        DonorName
0      NC0408174                   Mr Andy Street     Regulated Donee    1876.56  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street     Regulated Donee    2700.00  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street     Regulated Donee    4852.58  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street     Regulated Donee    2500.00  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street     Regulated Donee    4524.05  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
...          ...                              ...                 ...        ...  ...                              ...            ...        ...                              ...
91402   C0578847                        Reform Uk     Political Party   50000.00  ...                              NaN            NaN   100685.0              Mr Johnny Gallagher
91403  NC0414471                    Tactical.Vote         Third Party   10000.00  ...                              NaN            NaN    89129.0           Joint Digital Unit Ltd
91404   C0413721                     Labour Party     Political Party  425000.00  ...      Communication Workers Union          513.0      513.0      Communication Workers Union
91405  TV0514620         Centrum Campaign Limited         Third Party   19001.00  ...               Unidentified Donor      1000001.0  1000001.0               Unidentified Donor
91406  TV0490945  The League Against Cruel Sports         Third Party     800.00  ...               Unidentified Donor      1000001.0  1000001.0               Unidentified Donor

[91407 rows x 37 columns]
2025/03/18 08:11 DEBUG:app_pages_dir: app_pages
2025/03/18 08:11 DEBUG:data_dir: data
2025/03/18 08:11 DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/18 08:11 DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/18 08:11 DEBUG:data_donor:          DonorId                                         Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0                   Joseph Rowntree Refrom Trust Ltd         53000.00                2   26500.000000
1            2.0                   Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                               Bord Institute Trust         36893.54                4    9223.385000
3            4.0                       Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                                   Bridgwater Trust          7700.00                3    2566.666667
...          ...                                                ...              ...              ...            ...
31455   103426.0                                 Charles Max Keyner          2500.00                1    2500.000000
31456   103427.0  The Refugee Asylum And Migration Policy Projec...          6240.00                1    6240.000000
31457   103428.0                                       Bolton Agnew         20000.00                1   20000.000000
31458   103429.0                                  Opd Group Limited         15000.00                1   15000.000000
31459  1000001.0                                 Unidentified Donor       2359857.90              134   17610.879851

[31460 rows x 5 columns]
2025/03/18 08:11 DEBUG:components_dir: components
2025/03/18 08:11 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:11 DEBUG:error_logged: True
2025/03/18 08:11 DEBUG:data_regentity:       RegulatedEntityId                        Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                            English Democrats            Small Entity        118532.00               12    9877.666667
1                  19.0                   Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0  Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                   Sinn FIn     Medium Large Entity       2506699.11              359    6982.448774
4                  39.0                                    Sinn Fin     Medium Large Entity       5936716.49              358   16583.006955
...                 ...                                          ...                     ...              ...              ...            ...
1661            18013.0                                 Shivani Raja  Single Donation Entity          3245.79                1    3245.790000
1662            18014.0                             Sir Geoffrey Cox  Single Donation Entity         13302.00                1   13302.000000
1663            18038.0                             Kevin Hollinrake  Single Donation Entity          2500.00                1    2500.000000
1664            18039.0                            Laura Kyrke-Smith  Single Donation Entity          6240.00                1    6240.000000
1665            18040.0                                  Rupert Lowe  Single Donation Entity         20000.00                1   20000.000000

[1666 rows x 6 columns]
2025/03/18 08:11 DEBUG:utils_dir: utils
2025/03/18 08:11 DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/18 08:11 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:11 INFO:Session state Setup complete
2025/03/18 08:11 INFO:initialize_session_state executed successfully
2025/03/18 08:11 INFO:Package setup complete
2025/03/18 08:11 INFO:setup_package executed successfully
2025/03/18 08:11 INFO:Setup completed successfully.
2025/03/18 08:11 INFO:Running Menu setup...
2025/03/18 08:11 DEBUG:Calling pagesetup with args={args}, kwargs={kwargs}
2025/03/18 08:11 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:get_git_version executed successfully
2025/03/18 08:11 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:get_git_version executed successfully
2025/03/18 08:11 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:get_git_version executed successfully
2025/03/18 08:11 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:get_git_version executed successfully
2025/03/18 08:11 INFO:App Version: v39.201
2025/03/18 08:11 INFO:Switched to page: Non Cash Donations
2025/03/18 08:11 DEBUG:Calling display_data_page with args={args}, kwargs={kwargs}
2025/03/18 08:11 DEBUG:Calling load_and_filter_data with args={args}, kwargs={kwargs}
2025/03/18 08:11 DEBUG:filter_def in session state: ({'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}},)
2025/03/18 08:11 DEBUG:Filter key: NonCashDonations_ftr
2025/03/18 08:11 CRITICAL:Menu setup crashed: 'tuple' object does not support item assignment
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 195, in mod_non_cash_donations
    display_data_page(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page.py", line 22, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 52, in load_and_filter_data
    #     st.session_state.filter_def[filter_key_a] = {}
TypeError: 'tuple' object does not support item assignment
2025/03/18 08:11 INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/18 08:11 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:get_git_version executed successfully
2025/03/18 08:11 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:get_git_version executed successfully
2025/03/18 08:11 INFO:Streamlit App Starting...
2025/03/18 08:11 INFO:Streamlit App Starting...
2025/03/18 08:11 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:11 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:11 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:11 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:11 INFO:Running App setup...
2025/03/18 08:11 INFO:Running App setup...
2025/03/18 08:11 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:11 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:Setting up the package
2025/03/18 08:11 INFO:Setting up the package
2025/03/18 08:11 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:11 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:11 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:11 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:get_git_version executed successfully
2025/03/18 08:11 INFO:get_git_version executed successfully
2025/03/18 08:11 INFO:Version: v39.172
2025/03/18 08:11 INFO:Version: v39.172
2025/03/18 08:11 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:11 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:11 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:11 DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo
2025/03/18 08:11 DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo
2025/03/18 08:11 DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:11 DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:11 DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/18 08:11 DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/18 08:11 DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/18 08:11 DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/18 08:11 DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:11 DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:11 DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:11 DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:11 DEBUG:Initialised filter_def with value: ({'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}},)
2025/03/18 08:11 DEBUG:Initialised filter_def with value: ({'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}},)
2025/03/18 08:11 DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:11 DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:11 DEBUG:Initialised perc_target with value: 0.5
2025/03/18 08:11 DEBUG:Initialised perc_target with value: 0.5
2025/03/18 08:11 DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/18 08:11 DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/18 08:11 DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:11 DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:11 DEBUG:Initialised reference_dir with value: reference_files
2025/03/18 08:11 DEBUG:Initialised reference_dir with value: reference_files
2025/03/18 08:11 DEBUG:Initialised data_dir with value: data
2025/03/18 08:11 DEBUG:Initialised data_dir with value: data
2025/03/18 08:11 DEBUG:Initialised output_dir with value: output
2025/03/18 08:11 DEBUG:Initialised output_dir with value: output
2025/03/18 08:11 DEBUG:Initialised logs_dir with value: logs
2025/03/18 08:11 DEBUG:Initialised logs_dir with value: logs
2025/03/18 08:11 DEBUG:Initialised components_dir with value: components
2025/03/18 08:11 DEBUG:Initialised components_dir with value: components
2025/03/18 08:11 DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/18 08:11 DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/18 08:11 DEBUG:Initialised utils_dir with value: utils
2025/03/18 08:11 DEBUG:Initialised utils_dir with value: utils
2025/03/18 08:11 DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/18 08:11 DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/18 08:11 DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/18 08:11 DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/18 08:11 DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/18 08:11 DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/18 08:11 DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/18 08:11 DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/18 08:11 DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/18 08:11 DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/18 08:11 DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/18 08:11 DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/18 08:11 DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/18 08:11 DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/18 08:11 DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/18 08:11 DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/18 08:11 DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/18 08:11 DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/18 08:11 DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/18 08:11 DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/18 08:11 DEBUG:Initialised LAST_MODIFIED_DATES with value: reference_files\last_modified_dates.json
2025/03/18 08:11 DEBUG:Initialised LAST_MODIFIED_DATES with value: reference_files\last_modified_dates.json
2025/03/18 08:11 DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/18 08:11 DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/18 08:11 DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/18 08:11 DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/18 08:11 DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/18 08:11 DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/18 08:11 DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/18 08:11 DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/18 08:11 DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/18 08:11 DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/18 08:11 DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/18 08:11 DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/18 08:11 DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/18 08:11 DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/18 08:11 INFO:Session_state variables initialized
2025/03/18 08:11 INFO:Session_state variables initialized
2025/03/18 08:11 DEBUG:PLACEHOLDER_ID: 1000001
2025/03/18 08:11 DEBUG:PLACEHOLDER_ID: 1000001
2025/03/18 08:11 DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/18 08:11 DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/18 08:11 DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/18 08:11 DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/18 08:11 DEBUG:reference_dir: reference_files
2025/03/18 08:11 DEBUG:reference_dir: reference_files
2025/03/18 08:11 DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/18 08:11 DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/18 08:11 DEBUG:LAST_MODIFIED_DATES: reference_files\last_modified_dates.json
2025/03/18 08:11 DEBUG:LAST_MODIFIED_DATES: reference_files\last_modified_dates.json
2025/03/18 08:11 DEBUG:data_dir: data
2025/03/18 08:11 DEBUG:data_dir: data
2025/03/18 08:11 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:11 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:11 DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/18 08:11 DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/18 08:11 DEBUG:party_summary_fname: output\party_summary.csv
2025/03/18 08:11 DEBUG:party_summary_fname: output\party_summary.csv
2025/03/18 08:11 DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/18 08:11 DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/18 08:11 DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/18 08:11 DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/18 08:11 DEBUG:perc_target: 0.5
2025/03/18 08:11 DEBUG:perc_target: 0.5
2025/03/18 08:11 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:11 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:11 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:11 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:11 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/18 08:11 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/18 08:11 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:11 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:11 DEBUG:output_dir: output
2025/03/18 08:11 DEBUG:output_dir: output
2025/03/18 08:11 DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/18 08:11 DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/18 08:11 DEBUG:filter_def: ({'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}},)
2025/03/18 08:11 DEBUG:filter_def: ({'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}},)
2025/03/18 08:11 DEBUG:utils_dir: utils
2025/03/18 08:11 DEBUG:utils_dir: utils
2025/03/18 08:11 DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/18 08:11 DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/18 08:11 DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/18 08:11 DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/18 08:11 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:11 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:11 DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/18 08:11 DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/18 08:11 DEBUG:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:11 DEBUG:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:11 DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/18 08:11 DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/18 08:11 DEBUG:app_pages_dir: app_pages
2025/03/18 08:11 DEBUG:app_pages_dir: app_pages
2025/03/18 08:11 DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/18 08:11 DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/18 08:11 DEBUG:components_dir: components
2025/03/18 08:11 DEBUG:components_dir: components
2025/03/18 08:11 DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/18 08:11 DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/18 08:11 DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/18 08:11 DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/18 08:11 DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/18 08:11 DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/18 08:11 DEBUG:logs_dir: logs
2025/03/18 08:11 DEBUG:logs_dir: logs
2025/03/18 08:11 DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/18 08:11 DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/18 08:11 DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/18 08:11 DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/18 08:11 INFO:Session state Setup complete
2025/03/18 08:11 INFO:Session state Setup complete
2025/03/18 08:11 INFO:initialize_session_state executed successfully
2025/03/18 08:11 INFO:initialize_session_state executed successfully
2025/03/18 08:11 INFO:Package setup complete
2025/03/18 08:11 INFO:Package setup complete
2025/03/18 08:11 INFO:setup_package executed successfully
2025/03/18 08:11 INFO:setup_package executed successfully
2025/03/18 08:11 INFO:Setup completed successfully.
2025/03/18 08:11 INFO:Setup completed successfully.
2025/03/18 08:11 INFO:Running Menu setup...
2025/03/18 08:11 INFO:Running Menu setup...
2025/03/18 08:11 DEBUG:Calling pagesetup with args={args}, kwargs={kwargs}
2025/03/18 08:11 DEBUG:Calling pagesetup with args={args}, kwargs={kwargs}
2025/03/18 08:11 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:get_git_version executed successfully
2025/03/18 08:11 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:get_git_version executed successfully
2025/03/18 08:11 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:get_git_version executed successfully
2025/03/18 08:11 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:11 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:get_git_version executed successfully
2025/03/18 08:11 INFO:get_git_version executed successfully
2025/03/18 08:11 INFO:App Version: v39.201
2025/03/18 08:11 INFO:App Version: v39.201
2025/03/18 08:11 INFO:Switched to page: Introduction
2025/03/18 08:11 INFO:Switched to page: Non Cash Donations
2025/03/18 08:11 DEBUG:Calling display_data_page with args={args}, kwargs={kwargs}
2025/03/18 08:11 DEBUG:Calling load_and_filter_data with args={args}, kwargs={kwargs}
2025/03/18 08:11 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 455, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 500, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 129, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 100, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 94, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 457, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 131, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/18 08:11 INFO:pagesetup executed successfully
2025/03/18 08:11 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 455, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 500, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 129, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 100, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 94, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 457, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 195, in mod_non_cash_donations
    display_data_page(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page.py", line 22, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 131, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/18 08:11 INFO:Menu setup completed successfully.
2025/03/18 08:11 DEBUG:Calling initialise_data with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:Running first load function.
2025/03/18 08:11 DEBUG:Calling firstload with args={args}, kwargs={kwargs}
2025/03/18 08:11 DEBUG:Calling get_raw_data with args={args}, kwargs={kwargs}
2025/03/18 08:11 DEBUG:Calling load_raw_data with args={args}, kwargs={kwargs}
2025/03/18 08:11 DEBUG:Original data file path pre raw data load: source_data_fname
2025/03/18 08:11 DEBUG:Processed data file path pre raw data load: imported_raw_fname
2025/03/18 08:11 DEBUG:Calling try_to_use_preprocessed_data with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:Original file path: source\Donations_accepted_by_political_parties.csv
2025/03/18 08:11 INFO:Saved file path: output\imported_raw.csv
2025/03/18 08:11 DEBUG:Calling is_file_updated with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:Checking if source\Donations_accepted_by_political_parties.csv has been updated.
2025/03/18 08:11 DEBUG:Calling get_file_modification_time with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:Getting modification time for source\Donations_accepted_by_political_parties.csv
2025/03/18 08:11 INFO:get_file_modification_time executed successfully
2025/03/18 08:11 INFO:Current modification time: 1741521516.7875266
2025/03/18 08:11 INFO:Last modification time: 1742285362.3052466
2025/03/18 08:11 INFO:is_file_updated executed successfully
2025/03/18 08:11 INFO:Loading preprocessed data. Using output\imported_raw.csv dated 1742285362.3052466 instead of source\Donations_accepted_by_political_parties.csv
2025/03/18 08:11 INFO:Importing file from output\imported_raw.csv
2025/03/18 08:11 INFO:try_to_use_preprocessed_data executed successfully
2025/03/18 08:11 INFO:Preprocessed data loaded successfully.
2025/03/18 08:11 DEBUG:Calling raw_data_cleanup with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:Cleaning up raw data
2025/03/18 08:11 ERROR:Session state variables not initialized!
2025/03/18 08:11 DEBUG:Calling try_to_use_preprocessed_data with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:Original file path: None
2025/03/18 08:11 INFO:Saved file path: output\cleaned_donations.csv
2025/03/18 08:11 ERROR:Error: originalfilepath is None!
2025/03/18 08:11 INFO:try_to_use_preprocessed_data executed successfully
2025/03/18 08:11 INFO:Data loaded, shape: (91407, 29)
2025/03/18 08:11 DEBUG:Calling dedupe_entity_file with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:Map file regentity_map_fname exists. Proceeding with deduplication.
2025/03/18 08:11 INFO:File deduplication complete, shape: ECRef                            639
OriginalRegulatedEntityName      639
RegulatedEntityType              639
Value                            639
AcceptedDate                     620
AccountingUnitName               639
DonorName                        639
AccountingUnitsAsCentralParty    639
IsSponsorship                    639
DonorStatus                      639
RegulatedDoneeType               639
CompanyRegistrationNumber        639
Postcode                         639
DonationType                     639
NatureOfDonation                 639
PurposeOfVisit                   639
DonationAction                   639
ReceivedDate                     532
ReportedDate                     639
IsReportedPrePoll                423
ReportingPeriodName              639
IsBequest                        639
IsAggregation                    639
OriginalRegulatedEntityId        639
AccountingUnitId                 639
DonorId                          639
CampaigningName                  639
RegisterName                     639
IsIrishSource                    639
CleanedRegulatedEntityName       639
CleanedRegulatedEntityId         639
RegulatedEntityId                639
RegulatedEntityName              639
dtype: int64 records updated with new RegulatedEntityId and ECRef                            10361
OriginalRegulatedEntityName      10361
RegulatedEntityType              10361
Value                            10359
AcceptedDate                     10050
AccountingUnitName               10361
DonorName                        10361
AccountingUnitsAsCentralParty    10361
IsSponsorship                    10361
DonorStatus                      10361
RegulatedDoneeType               10361
CompanyRegistrationNumber        10361
Postcode                         10361
DonationType                     10361
NatureOfDonation                 10361
PurposeOfVisit                   10361
DonationAction                   10361
ReceivedDate                      7316
ReportedDate                     10351
IsReportedPrePoll                 4878
ReportingPeriodName              10361
IsBequest                        10361
IsAggregation                    10361
OriginalRegulatedEntityId        10361
AccountingUnitId                 10361
DonorId                          10361
CampaigningName                  10361
RegisterName                     10361
IsIrishSource                    10361
CleanedRegulatedEntityName       10361
CleanedRegulatedEntityId         10361
RegulatedEntityId                10361
RegulatedEntityName              10361
dtype: int64 records updated with new RegulatedEntityName
2025/03/18 08:11 DEBUG:File deduplication cleaned complete, shape: ECRef                            3697
OriginalRegulatedEntityName      3697
RegulatedEntityType              3697
Value                            3697
AcceptedDate                     3600
AccountingUnitName               3697
DonorName                        3697
AccountingUnitsAsCentralParty    3697
IsSponsorship                    3697
DonorStatus                      3697
RegulatedDoneeType               3697
CompanyRegistrationNumber        3697
Postcode                         3697
DonationType                     3697
NatureOfDonation                 3697
PurposeOfVisit                   3697
DonationAction                   3697
ReceivedDate                     3309
ReportedDate                     3697
IsReportedPrePoll                 449
ReportingPeriodName              3697
IsBequest                        3697
IsAggregation                    3697
OriginalRegulatedEntityId        3697
AccountingUnitId                 3697
DonorId                          3697
CampaigningName                  3697
RegisterName                     3697
IsIrishSource                    3697
CleanedRegulatedEntityName        639
CleanedRegulatedEntityId          639
RegulatedEntityId                3697
RegulatedEntityName              3697
dtype: int64 records updated with new RegulatedEntityId and ECRef                            13419
OriginalRegulatedEntityName      13419
RegulatedEntityType              13419
Value                            13417
AcceptedDate                     13030
AccountingUnitName               13419
DonorName                        13419
AccountingUnitsAsCentralParty    13419
IsSponsorship                    13419
DonorStatus                      13419
RegulatedDoneeType               13419
CompanyRegistrationNumber        13419
Postcode                         13419
DonationType                     13419
NatureOfDonation                 13419
PurposeOfVisit                   13419
DonationAction                   13419
ReceivedDate                     10093
ReportedDate                     13409
IsReportedPrePoll                 4904
ReportingPeriodName              13419
IsBequest                        13419
IsAggregation                    13419
OriginalRegulatedEntityId        13419
AccountingUnitId                 13419
DonorId                          13419
CampaigningName                  13419
RegisterName                     13419
IsIrishSource                    13419
CleanedRegulatedEntityName       10361
CleanedRegulatedEntityId         10361
RegulatedEntityId                13419
RegulatedEntityName              13419
dtype: int64 records updated with new RegulatedEntityName
2025/03/18 08:11 INFO:File deduplication complete, shape: (91407, 33)
2025/03/18 08:11 INFO:dedupe_entity_file executed successfully
2025/03/18 08:11 DEBUG:Calling dedupe_entity_file with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:Map file donor_map_fname exists. Proceeding with deduplication.
2025/03/18 08:11 INFO:File deduplication complete, shape: ECRef                            34715
OriginalRegulatedEntityName      34715
RegulatedEntityType              34715
Value                            34712
AcceptedDate                     34322
AccountingUnitName               34715
OriginalDonorName                34715
AccountingUnitsAsCentralParty    34715
IsSponsorship                    34715
DonorStatus                      34715
RegulatedDoneeType               34715
CompanyRegistrationNumber        34715
Postcode                         34715
DonationType                     34715
NatureOfDonation                 34715
PurposeOfVisit                   34715
DonationAction                   34715
ReceivedDate                     33051
ReportedDate                     34704
IsReportedPrePoll                22707
ReportingPeriodName              34715
IsBequest                        34715
IsAggregation                    34715
OriginalRegulatedEntityId        34715
AccountingUnitId                 34715
OriginalDonorId                  34715
CampaigningName                  34715
RegisterName                     34715
IsIrishSource                    34715
CleanedRegulatedEntityName       34715
CleanedRegulatedEntityId         34715
RegulatedEntityId                34715
RegulatedEntityName              34715
CleanedDonorName                 34715
CleanedDonorId                   34715
DonorId                          34715
DonorName                        34715
dtype: int64 records updated with new DonorId and ECRef                            19257
OriginalRegulatedEntityName      19257
RegulatedEntityType              19257
Value                            19255
AcceptedDate                     18942
AccountingUnitName               19257
OriginalDonorName                19257
AccountingUnitsAsCentralParty    19257
IsSponsorship                    19257
DonorStatus                      19257
RegulatedDoneeType               19257
CompanyRegistrationNumber        19257
Postcode                         19257
DonationType                     19257
NatureOfDonation                 19257
PurposeOfVisit                   19257
DonationAction                   19257
ReceivedDate                     18704
ReportedDate                     19248
IsReportedPrePoll                13081
ReportingPeriodName              19257
IsBequest                        19257
IsAggregation                    19257
OriginalRegulatedEntityId        19257
AccountingUnitId                 19257
OriginalDonorId                  19257
CampaigningName                  19257
RegisterName                     19257
IsIrishSource                    19257
CleanedRegulatedEntityName       19256
CleanedRegulatedEntityId         19256
RegulatedEntityId                19257
RegulatedEntityName              19257
CleanedDonorName                 19257
CleanedDonorId                   19257
DonorId                          19257
DonorName                        19257
dtype: int64 records updated with new DonorName
2025/03/18 08:11 DEBUG:File deduplication cleaned complete, shape: ECRef                            51946
OriginalRegulatedEntityName      51946
RegulatedEntityType              51946
Value                            51943
AcceptedDate                     51179
AccountingUnitName               51946
OriginalDonorName                51946
AccountingUnitsAsCentralParty    51946
IsSponsorship                    51946
DonorStatus                      51946
RegulatedDoneeType               51946
CompanyRegistrationNumber        51946
Postcode                         51946
DonationType                     51946
NatureOfDonation                 51946
PurposeOfVisit                   51946
DonationAction                   51946
ReceivedDate                     49641
ReportedDate                     51935
IsReportedPrePoll                23658
ReportingPeriodName              51946
IsBequest                        51946
IsAggregation                    51946
OriginalRegulatedEntityId        51946
AccountingUnitId                 51946
OriginalDonorId                  51946
CampaigningName                  51946
RegisterName                     51946
IsIrishSource                    51946
CleanedRegulatedEntityName       48932
CleanedRegulatedEntityId         48932
RegulatedEntityId                51946
RegulatedEntityName              51946
CleanedDonorName                 34715
CleanedDonorId                   34715
DonorId                          51946
DonorName                        51946
dtype: int64 records updated with new DonorId and ECRef                            36488
OriginalRegulatedEntityName      36488
RegulatedEntityType              36488
Value                            36486
AcceptedDate                     35799
AccountingUnitName               36488
OriginalDonorName                36488
AccountingUnitsAsCentralParty    36488
IsSponsorship                    36488
DonorStatus                      36488
RegulatedDoneeType               36488
CompanyRegistrationNumber        36488
Postcode                         36488
DonationType                     36488
NatureOfDonation                 36488
PurposeOfVisit                   36488
DonationAction                   36488
ReceivedDate                     35294
ReportedDate                     36479
IsReportedPrePoll                14032
ReportingPeriodName              36488
IsBequest                        36488
IsAggregation                    36488
OriginalRegulatedEntityId        36488
AccountingUnitId                 36488
OriginalDonorId                  36488
CampaigningName                  36488
RegisterName                     36488
IsIrishSource                    36488
CleanedRegulatedEntityName       33473
CleanedRegulatedEntityId         33473
RegulatedEntityId                36488
RegulatedEntityName              36488
CleanedDonorName                 19257
CleanedDonorId                   19257
DonorId                          36488
DonorName                        36488
dtype: int64 records updated with new DonorName
2025/03/18 08:11 INFO:File deduplication complete, shape: (91407, 37)
2025/03/18 08:11 INFO:dedupe_entity_file executed successfully
2025/03/18 08:11 INFO:Raw Data cleanup completed
2025/03/18 08:11 INFO:Data shape: (91407, 37)
2025/03/18 08:11 INFO:Data saved to output\cleaned_donations.csv
2025/03/18 08:11 INFO:Data cleanup completed, shape: (91407, 37)
2025/03/18 08:11 INFO:raw_data_cleanup executed successfully
2025/03/18 08:11 INFO:load_raw_data executed successfully
2025/03/18 08:11 INFO:get_raw_data executed successfully
2025/03/18 08:11 DEBUG:st.session_state.raw_data: 91407
2025/03/18 08:11 DEBUG:Calling get_cleaned_data with args={args}, kwargs={kwargs}
2025/03/18 08:11 DEBUG:Calling load_cleaned_data with args={args}, kwargs={kwargs}
2025/03/18 08:11 DEBUG:Rows in Raw Data: 91407
2025/03/18 08:11 DEBUG:Calling try_to_use_preprocessed_data with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:Original file path: output\cleaned_donations.csv
2025/03/18 08:11 INFO:Saved file path: output\cleaned_data.csv
2025/03/18 08:11 DEBUG:Calling is_file_updated with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:Checking if output\cleaned_donations.csv has been updated.
2025/03/18 08:11 DEBUG:Calling get_file_modification_time with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:Getting modification time for output\cleaned_donations.csv
2025/03/18 08:11 INFO:get_file_modification_time executed successfully
2025/03/18 08:11 INFO:Current modification time: 1742285484.835395
2025/03/18 08:11 INFO:Last modification time: 1742285362.3052466
2025/03/18 08:11 INFO:is_file_updated executed successfully
2025/03/18 08:11 INFO:try_to_use_preprocessed_data executed successfully
2025/03/18 08:11 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/18 08:11 INFO:Loading and cleaning data... data.clean_and_enhance
2025/03/18 08:11 DEBUG:Clean Data Prep: streamlitdata load: 91407
2025/03/18 08:11 DEBUG:Clean Data Prep 123: streamlitdata load: 91407
2025/03/18 08:11 INFO:Map file regentity_map_fname exists. Proceeding with deduplication.
2025/03/18 08:11 DEBUG:Clean Data Prep 150: Map Party: 91407
2025/03/18 08:11 DEBUG:Group assignment: group
Conservative And Unionist Party    28887
Labour Party                       22724
Liberal Democrats                  18627
Small Medium Entity                 6430
Small Entity                        2728
Medium Large Entity                 2528
Large Entity                        1982
Uk Independence Party (Ukip)        1840
Very Small Entity                   1808
Green Party                         1656
Medium Entity                       1649
Single Donation Entity               548
Name: count, dtype: int64
2025/03/18 08:11 DEBUG:Group assignment: group
Very Small Entity                  604
Single Donation Entity             548
Small Entity                       293
Small Medium Entity                189
Medium Entity                       11
Medium Large Entity                  9
Large Entity                         3
Conservative And Unionist Party      1
Green Party                          1
Labour Party                         1
Liberal Democrats                    1
Uk Independence Party (Ukip)         1
Name: count, dtype: int64
2025/03/18 08:11 DEBUG:Clean Data Prep 235: RegEntity_Map: 91407
2025/03/18 08:11 DEBUG:Group assignment: group
Conservative And Unionist Party    32493
Labour Party                       27325
Liberal Democrat                   18969
Small Medium Entity                 2117
Large Entity                        2057
Medium Large Entity                 1964
Uk Independence Party (Ukip)        1858
Green Party                         1681
Medium Entity                       1394
Small Entity                         777
Very Small Entity                    574
Single Donation Entity               198
Name: count, dtype: int64
2025/03/18 08:11 DEBUG:Group assignment: group
Very Small Entity                  200
Single Donation Entity             198
Small Entity                        83
Small Medium Entity                 58
Medium Entity                        9
Medium Large Entity                  7
Large Entity                         3
Conservative And Unionist Party      1
Green Party                          1
Labour Party                         1
Liberal Democrat                     1
Uk Independence Party (Ukip)         1
Name: count, dtype: int64
2025/03/18 08:11 DEBUG:Clean Data Prep 235: Party_Group: 91407
2025/03/18 08:11 DEBUG:Calling load_election_dates with args={args}, kwargs={kwargs}
2025/03/18 08:11 DEBUG:st.session_state.ELECTION_DATES: reference_files\elections.csv
2025/03/18 08:11 DEBUG:try to load previous election dates from file.
2025/03/18 08:11 DEBUG:Calling try_to_use_preprocessed_data with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:Original file path: source\Donations_accepted_by_political_parties.csv
2025/03/18 08:11 INFO:Saved file path: reference_files\elections.csv
2025/03/18 08:11 DEBUG:Calling is_file_updated with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:Checking if source\Donations_accepted_by_political_parties.csv has been updated.
2025/03/18 08:11 DEBUG:Calling get_file_modification_time with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:Getting modification time for source\Donations_accepted_by_political_parties.csv
2025/03/18 08:11 INFO:get_file_modification_time executed successfully
2025/03/18 08:11 INFO:Current modification time: 1741521516.7875266
2025/03/18 08:11 INFO:Last modification time: 1741521516.7875266
2025/03/18 08:11 INFO:is_file_updated executed successfully
2025/03/18 08:11 INFO:Loading preprocessed data. Using reference_files\elections.csv dated 1741521516.7875266 instead of source\Donations_accepted_by_political_parties.csv
2025/03/18 08:11 INFO:Importing file from reference_files\elections.csv
2025/03/18 08:11 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/18 08:11 INFO:try_to_use_preprocessed_data executed successfully
2025/03/18 08:11 ERROR:Failed to load election dates from file.
2025/03/18 08:11 INFO:Election_dates_df empty - loading from pdpy.
2025/03/18 08:11 INFO:Election Dates loaded vis pdpy.
2025/03/18 08:11 DEBUG:ElectionDates_dict from pdpy: {'1929': {'dissolution': datetime.date(1929, 5, 10), 'election': datetime.date(1929, 5, 30), 'type': 'General Election'}, '1931': {'dissolution': datetime.date(1931, 10, 7), 'election': datetime.date(1931, 10, 27), 'type': 'General Election'}, '1935': {'dissolution': datetime.date(1935, 10, 25), 'election': datetime.date(1935, 11, 14), 'type': 'General Election'}, '1945': {'dissolution': datetime.date(1945, 6, 15), 'election': datetime.date(1945, 7, 5), 'type': 'General Election'}, '1950': {'dissolution': datetime.date(1950, 2, 3), 'election': datetime.date(1950, 2, 23), 'type': 'General Election'}, '1951': {'dissolution': datetime.date(1951, 10, 5), 'election': datetime.date(1951, 10, 25), 'type': 'General Election'}, '1955': {'dissolution': datetime.date(1955, 5, 6), 'election': datetime.date(1955, 5, 26), 'type': 'General Election'}, '1959': {'dissolution': datetime.date(1959, 9, 18), 'election': datetime.date(1959, 10, 8), 'type': 'General Election'}, '1964': {'dissolution': datetime.date(1964, 9, 25), 'election': datetime.date(1964, 10, 15), 'type': 'General Election'}, '1966': {'dissolution': datetime.date(1966, 3, 10), 'election': datetime.date(1966, 3, 31), 'type': 'General Election'}, '1970': {'dissolution': datetime.date(1970, 5, 29), 'election': datetime.date(1970, 6, 18), 'type': 'General Election'}, '1974 (Feb)': {'dissolution': datetime.date(1974, 2, 8), 'election': datetime.date(1974, 2, 28), 'type': 'General Election'}, '1974 (Oct)': {'dissolution': datetime.date(1974, 9, 20), 'election': datetime.date(1974, 10, 10), 'type': 'General Election'}, '1979': {'dissolution': datetime.date(1979, 4, 7), 'election': datetime.date(1979, 5, 3), 'type': 'General Election'}, '1983': {'dissolution': datetime.date(1983, 5, 13), 'election': datetime.date(1983, 6, 9), 'type': 'General Election'}, '1987': {'dissolution': datetime.date(1987, 5, 18), 'election': datetime.date(1987, 6, 11), 'type': 'General Election'}, '1992': {'dissolution': datetime.date(1992, 3, 16), 'election': datetime.date(1992, 4, 9), 'type': 'General Election'}, '1997': {'dissolution': datetime.date(1997, 4, 8), 'election': datetime.date(1997, 5, 1), 'type': 'General Election'}, '2001': {'dissolution': datetime.date(2001, 5, 14), 'election': datetime.date(2001, 6, 7), 'type': 'General Election'}, '2005': {'dissolution': datetime.date(2005, 4, 11), 'election': datetime.date(2005, 5, 5), 'type': 'General Election'}, '2010': {'dissolution': datetime.date(2010, 4, 12), 'election': datetime.date(2010, 5, 6), 'type': 'General Election'}, '2015': {'dissolution': datetime.date(2015, 3, 30), 'election': datetime.date(2015, 5, 7), 'type': 'General Election'}, '2017': {'dissolution': datetime.date(2017, 5, 3), 'election': datetime.date(2017, 6, 8), 'type': 'General Election'}, '2019': {'dissolution': datetime.date(2019, 11, 6), 'election': datetime.date(2019, 12, 12), 'type': 'General Election'}}
2025/03/18 08:11 INFO:Election Dates Loaded Successfully.
2025/03/18 08:11 DEBUG:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/18 08:11 DEBUG:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/18 08:11 INFO:load_election_dates executed successfully
2025/03/18 08:11 DEBUG:Clean Data Prep 353: Election dates: 91407
2025/03/18 08:11 DEBUG:Clean Data Prep 386: End of clean: 91407
2025/03/18 08:11 INFO:Cleaned Data completed, shape: (91407, 55)
2025/03/18 08:11 INFO:load_cleaned_data executed successfully
2025/03/18 08:11 INFO:get_cleaned_data executed successfully
2025/03/18 08:11 DEBUG:st.session_state.raw_data: 91407
2025/03/18 08:11 DEBUG:Calling get_donor_data with args={args}, kwargs={kwargs}
2025/03/18 08:11 DEBUG:Calling load_donorList_data with args={args}, kwargs={kwargs}
2025/03/18 08:11 DEBUG:Calling try_to_use_preprocessed_data with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:Original file path: output\cleaned_data.csv
2025/03/18 08:11 INFO:Saved file path: output\cleaned_donorlist.csv
2025/03/18 08:11 DEBUG:Calling is_file_updated with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:Checking if output\cleaned_data.csv has been updated.
2025/03/18 08:11 DEBUG:Calling get_file_modification_time with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:Getting modification time for output\cleaned_data.csv
2025/03/18 08:11 INFO:get_file_modification_time executed successfully
2025/03/18 08:11 INFO:Current modification time: 1742285489.4657118
2025/03/18 08:11 INFO:Last modification time: 1742285367.685263
2025/03/18 08:11 INFO:is_file_updated executed successfully
2025/03/18 08:11 INFO:try_to_use_preprocessed_data executed successfully
2025/03/18 08:11 INFO:Donor data saved to output\cleaned_donorlist.csv
2025/03/18 08:11 INFO:Donor Data summary completed
2025/03/18 08:11 INFO:Data shape: (31460, 5)
2025/03/18 08:11 INFO:load_donorList_data executed successfully
2025/03/18 08:11 INFO:get_donor_data executed successfully
2025/03/18 08:11 DEBUG:st.session_state.data_donor: 31460
2025/03/18 08:11 DEBUG:st.session_state.data_clean: 91407
2025/03/18 08:11 DEBUG:Calling get_regentity_data with args={args}, kwargs={kwargs}
2025/03/18 08:11 DEBUG:Calling load_regulated_entity_data with args={args}, kwargs={kwargs}
2025/03/18 08:11 DEBUG:Calling try_to_use_preprocessed_data with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:Original file path: output\cleaned_data.csv
2025/03/18 08:11 INFO:Saved file path: output\cleaned_regentity.csv
2025/03/18 08:11 DEBUG:Calling is_file_updated with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:Checking if output\cleaned_data.csv has been updated.
2025/03/18 08:11 DEBUG:Calling get_file_modification_time with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:Getting modification time for output\cleaned_data.csv
2025/03/18 08:11 INFO:get_file_modification_time executed successfully
2025/03/18 08:11 INFO:Current modification time: 1742285489.4657118
2025/03/18 08:11 INFO:Last modification time: 1742285489.4657118
2025/03/18 08:11 INFO:is_file_updated executed successfully
2025/03/18 08:11 INFO:Loading preprocessed data. Using output\cleaned_regentity.csv dated 1742285489.4657118 instead of output\cleaned_data.csv
2025/03/18 08:11 INFO:Importing file from output\cleaned_regentity.csv
2025/03/18 08:11 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/18 08:11 INFO:try_to_use_preprocessed_data executed successfully
2025/03/18 08:11 INFO:Regulated entity data saved to output\cleaned_regentity.csv
2025/03/18 08:11 INFO:Raw Data cleanup completed
2025/03/18 08:11 INFO:Data shape: (1666, 6)
2025/03/18 08:11 INFO:load_regulated_entity_data executed successfully
2025/03/18 08:11 INFO:get_regentity_data executed successfully
2025/03/18 08:11 DEBUG:st.session_state.data_regentity: 1666
2025/03/18 08:11 DEBUG:st.session_state.data_donor: 31460
2025/03/18 08:11 DEBUG:st.session_state.data_clean: 91407
2025/03/18 08:11 INFO:firstload executed successfully
2025/03/18 08:11 INFO:Data first load completed successfully.
2025/03/18 08:11 INFO:initialise_data executed successfully
2025/03/18 08:11 INFO:App is fully loaded and ready!
2025/03/18 08:11 INFO:Streamlit App Starting...
2025/03/18 08:11 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:11 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:11 INFO:Running App setup...
2025/03/18 08:11 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:Setting up the package
2025/03/18 08:11 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:11 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:get_git_version executed successfully
2025/03/18 08:11 INFO:Version: v39.172
2025/03/18 08:11 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:11 DEBUG:BASE_DIR already exists in session state
2025/03/18 08:11 DEBUG:filenames already exists in session state
2025/03/18 08:11 DEBUG:PLACEHOLDER_DATE already exists in session state
2025/03/18 08:11 DEBUG:PLACEHOLDER_ID already exists in session state
2025/03/18 08:11 DEBUG:thresholds already exists in session state
2025/03/18 08:11 DEBUG:data_remappings already exists in session state
2025/03/18 08:11 DEBUG:filter_def already exists in session state
2025/03/18 08:11 DEBUG:security already exists in session state
2025/03/18 08:11 DEBUG:perc_target already exists in session state
2025/03/18 08:11 DEBUG:RERUN_MP_PARTY_MEMBERSHIP already exists in session state
2025/03/18 08:11 DEBUG:directories already exists in session state
2025/03/18 08:11 DEBUG:reference_dir already exists in session state
2025/03/18 08:11 DEBUG:data_dir already exists in session state
2025/03/18 08:11 DEBUG:output_dir already exists in session state
2025/03/18 08:11 DEBUG:logs_dir already exists in session state
2025/03/18 08:11 DEBUG:components_dir already exists in session state
2025/03/18 08:11 DEBUG:app_pages_dir already exists in session state
2025/03/18 08:11 DEBUG:utils_dir already exists in session state
2025/03/18 08:11 DEBUG:Donor_dedupe_cleaned_fname already exists in session state
2025/03/18 08:11 DEBUG:ListofPoliticalPeople_fname already exists in session state
2025/03/18 08:11 DEBUG:mppartymemb_fname already exists in session state
2025/03/18 08:11 DEBUG:donor_map_fname already exists in session state
2025/03/18 08:11 DEBUG:politician_party_fname already exists in session state
2025/03/18 08:11 DEBUG:regentity_map_fname already exists in session state
2025/03/18 08:11 DEBUG:original_data_fname already exists in session state
2025/03/18 08:11 DEBUG:CREDENTIALS_FILE already exists in session state
2025/03/18 08:11 DEBUG:TEXT_FILE already exists in session state
2025/03/18 08:11 DEBUG:ELECTION_DATES already exists in session state
2025/03/18 08:11 DEBUG:LAST_MODIFIED_DATES already exists in session state
2025/03/18 08:11 DEBUG:cleaned_data_fname already exists in session state
2025/03/18 08:11 DEBUG:cleaned_donations_fname already exists in session state
2025/03/18 08:11 DEBUG:cleaned_donorlist_fname already exists in session state
2025/03/18 08:11 DEBUG:cleaned_regentity_fname already exists in session state
2025/03/18 08:11 DEBUG:party_summary_fname already exists in session state
2025/03/18 08:11 DEBUG:imported_raw_fname already exists in session state
2025/03/18 08:11 DEBUG:source_data_fname already exists in session state
2025/03/18 08:11 INFO:Session_state variables initialized
2025/03/18 08:11 DEBUG:PLACEHOLDER_ID: 1000001
2025/03/18 08:11 DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/18 08:11 DEBUG:menu_selection: {'title': 'Head Line Figures', 'function': <function hlf_body at 0x0000026F658D8F70>}
2025/03/18 08:11 DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/18 08:11 DEBUG:reference_dir: reference_files
2025/03/18 08:11 DEBUG:raw_data:            ECRef      OriginalRegulatedEntityName RegulatedEntityType      Value  ...                 CleanedDonorName CleanedDonorId    DonorId                        DonorName
0      NC0408174                   Mr Andy Street     Regulated Donee    1876.56  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street     Regulated Donee    2700.00  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street     Regulated Donee    4852.58  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street     Regulated Donee    2500.00  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street     Regulated Donee    4524.05  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
...          ...                              ...                 ...        ...  ...                              ...            ...        ...                              ...
91402   C0578847                        Reform Uk     Political Party   50000.00  ...                              NaN            NaN   100685.0              Mr Johnny Gallagher
91403  NC0414471                    Tactical.Vote         Third Party   10000.00  ...                              NaN            NaN    89129.0           Joint Digital Unit Ltd
91404   C0413721                     Labour Party     Political Party  425000.00  ...      Communication Workers Union          513.0      513.0      Communication Workers Union
91405  TV0514620         Centrum Campaign Limited         Third Party   19001.00  ...               Unidentified Donor      1000001.0  1000001.0               Unidentified Donor
91406  TV0490945  The League Against Cruel Sports         Third Party     800.00  ...               Unidentified Donor      1000001.0  1000001.0               Unidentified Donor

[91407 rows x 37 columns]
2025/03/18 08:11 DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/18 08:11 DEBUG:LAST_MODIFIED_DATES: reference_files\last_modified_dates.json
2025/03/18 08:11 DEBUG:data_dir: data
2025/03/18 08:11 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:11 DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/18 08:11 DEBUG:data_donor:          DonorId                                         Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0                   Joseph Rowntree Refrom Trust Ltd         53000.00                2   26500.000000
1            2.0                   Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                               Bord Institute Trust         36893.54                4    9223.385000
3            4.0                       Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                                   Bridgwater Trust          7700.00                3    2566.666667
...          ...                                                ...              ...              ...            ...
31455   103426.0                                 Charles Max Keyner          2500.00                1    2500.000000
31456   103427.0  The Refugee Asylum And Migration Policy Projec...          6240.00                1    6240.000000
31457   103428.0                                       Bolton Agnew         20000.00                1   20000.000000
31458   103429.0                                  Opd Group Limited         15000.00                1   15000.000000
31459  1000001.0                                 Unidentified Donor       2359857.90              134   17610.879851

[31460 rows x 5 columns]
2025/03/18 08:11 DEBUG:party_summary_fname: output\party_summary.csv
2025/03/18 08:11 DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/18 08:11 DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/18 08:11 DEBUG:load_raw_data_last_modified: 1742285484.835395
2025/03/18 08:11 DEBUG:perc_target: 0.5
2025/03/18 08:11 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:11 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:11 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/18 08:11 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:11 DEBUG:output_dir: output
2025/03/18 08:11 DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/18 08:11 DEBUG:filter_def: ({'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}},)
2025/03/18 08:11 DEBUG:utils_dir: utils
2025/03/18 08:11 DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/18 08:11 DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/18 08:11 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:11 DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/18 08:11 DEBUG:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:11 DEBUG:load_donorlist_data_last_modified: 1742285489.4657118
2025/03/18 08:11 DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/18 08:11 DEBUG:app_pages_dir: app_pages
2025/03/18 08:11 DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/18 08:11 DEBUG:data_clean:            ECRef RegulatedEntityType      Value IsSponsorship                 DonorStatus  ... WksSinceLastElection QtrsTillNextElection QtrsSinceLastElection YrsTillNextElection YrsSinceLastElection
0      NC0408174     Regulated Donee    1876.56         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
1      NC0408173     Regulated Donee    2700.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
2      NC0408177     Regulated Donee    4852.58         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
3      NC0408176     Regulated Donee    2500.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
4      NC0408170     Regulated Donee    4524.05         FALSE  Registered Political Party  ...               4709.0                  2.0                 363.0                 1.0                 91.0
...          ...                 ...        ...           ...                         ...  ...                  ...                  ...                   ...                 ...                  ...
91402   C0578847     Political Party   50000.00         FALSE                  Individual  ...               4961.0                -18.0                 382.0                -4.0                 96.0
91403  NC0414471         Third Party   10000.00         FALSE                     Company  ...               4724.0                  1.0                 364.0                 1.0                 91.0
91404   C0413721     Political Party  425000.00         FALSE                 Trade Union  ...               4720.0                  1.0                 364.0                 1.0                 91.0
91405  TV0514620         Third Party   19001.00         FALSE          Unidentified Donor  ...               4751.0                 -2.0                 366.0                -0.0                 92.0
91406  TV0490945         Third Party     800.00         FALSE          Unidentified Donor  ...               4737.0                 -0.0                 365.0                -0.0                 91.0

[91407 rows x 55 columns]
2025/03/18 08:11 DEBUG:components_dir: components
2025/03/18 08:11 DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/18 08:11 DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/18 08:11 DEBUG:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/18 08:11 DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/18 08:11 DEBUG:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/18 08:11 DEBUG:logs_dir: logs
2025/03/18 08:11 DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/18 08:11 DEBUG:data_regentity:       RegulatedEntityId                        Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                            English Democrats            Small Entity        118532.00               12    9877.666667
1                  19.0                   Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0  Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                   Sinn FIn     Medium Large Entity       2506699.11              359    6982.448774
4                  39.0                                    Sinn Fin     Medium Large Entity       5936716.49              358   16583.006955
...                 ...                                          ...                     ...              ...              ...            ...
1661            18013.0                                 Shivani Raja  Single Donation Entity          3245.79                1    3245.790000
1662            18014.0                             Sir Geoffrey Cox  Single Donation Entity         13302.00                1   13302.000000
1663            18038.0                             Kevin Hollinrake  Single Donation Entity          2500.00                1    2500.000000
1664            18039.0                            Laura Kyrke-Smith  Single Donation Entity          6240.00                1    6240.000000
1665            18040.0                                  Rupert Lowe  Single Donation Entity         20000.00                1   20000.000000

[1666 rows x 6 columns]
2025/03/18 08:11 DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/18 08:11 INFO:Session state Setup complete
2025/03/18 08:11 INFO:initialize_session_state executed successfully
2025/03/18 08:11 INFO:Package setup complete
2025/03/18 08:11 INFO:setup_package executed successfully
2025/03/18 08:11 INFO:Setup completed successfully.
2025/03/18 08:11 INFO:Running Menu setup...
2025/03/18 08:11 DEBUG:Calling pagesetup with args={args}, kwargs={kwargs}
2025/03/18 08:11 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:get_git_version executed successfully
2025/03/18 08:11 INFO:App Version: v39.201
2025/03/18 08:11 INFO:Switched to page: Head Line Figures
2025/03/18 08:11 DEBUG:Calling hlf_body with args={args}, kwargs={kwargs}
2025/03/18 08:11 DEBUG:Calling load_and_filter_data with args={args}, kwargs={kwargs}
2025/03/18 08:11 ERROR:Error in load_and_filter_data: load_and_filter_data() got an unexpected keyword argument 'filter_key'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
TypeError: load_and_filter_data() got an unexpected keyword argument 'filter_key'
2025/03/18 08:11 CRITICAL:Menu setup crashed: load_and_filter_data() got an unexpected keyword argument 'filter_key'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 32, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
TypeError: load_and_filter_data() got an unexpected keyword argument 'filter_key'
2025/03/18 08:11 INFO:Streamlit App Starting...
2025/03/18 08:11 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:11 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:11 INFO:Running App setup...
2025/03/18 08:11 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:Setting up the package
2025/03/18 08:11 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:11 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:get_git_version executed successfully
2025/03/18 08:11 INFO:Version: v39.172
2025/03/18 08:11 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:11 DEBUG:BASE_DIR already exists in session state
2025/03/18 08:11 DEBUG:filenames already exists in session state
2025/03/18 08:11 DEBUG:PLACEHOLDER_DATE already exists in session state
2025/03/18 08:11 DEBUG:PLACEHOLDER_ID already exists in session state
2025/03/18 08:11 DEBUG:thresholds already exists in session state
2025/03/18 08:11 DEBUG:data_remappings already exists in session state
2025/03/18 08:11 DEBUG:filter_def already exists in session state
2025/03/18 08:11 DEBUG:security already exists in session state
2025/03/18 08:11 DEBUG:perc_target already exists in session state
2025/03/18 08:11 DEBUG:RERUN_MP_PARTY_MEMBERSHIP already exists in session state
2025/03/18 08:11 DEBUG:directories already exists in session state
2025/03/18 08:11 DEBUG:reference_dir already exists in session state
2025/03/18 08:11 DEBUG:data_dir already exists in session state
2025/03/18 08:11 DEBUG:output_dir already exists in session state
2025/03/18 08:11 DEBUG:logs_dir already exists in session state
2025/03/18 08:11 DEBUG:components_dir already exists in session state
2025/03/18 08:11 DEBUG:app_pages_dir already exists in session state
2025/03/18 08:11 DEBUG:utils_dir already exists in session state
2025/03/18 08:11 DEBUG:Donor_dedupe_cleaned_fname already exists in session state
2025/03/18 08:11 DEBUG:ListofPoliticalPeople_fname already exists in session state
2025/03/18 08:11 DEBUG:mppartymemb_fname already exists in session state
2025/03/18 08:11 DEBUG:donor_map_fname already exists in session state
2025/03/18 08:11 DEBUG:politician_party_fname already exists in session state
2025/03/18 08:11 DEBUG:regentity_map_fname already exists in session state
2025/03/18 08:11 DEBUG:original_data_fname already exists in session state
2025/03/18 08:11 DEBUG:CREDENTIALS_FILE already exists in session state
2025/03/18 08:11 DEBUG:TEXT_FILE already exists in session state
2025/03/18 08:11 DEBUG:ELECTION_DATES already exists in session state
2025/03/18 08:11 DEBUG:LAST_MODIFIED_DATES already exists in session state
2025/03/18 08:11 DEBUG:cleaned_data_fname already exists in session state
2025/03/18 08:11 DEBUG:cleaned_donations_fname already exists in session state
2025/03/18 08:11 DEBUG:cleaned_donorlist_fname already exists in session state
2025/03/18 08:11 DEBUG:cleaned_regentity_fname already exists in session state
2025/03/18 08:11 DEBUG:party_summary_fname already exists in session state
2025/03/18 08:11 DEBUG:imported_raw_fname already exists in session state
2025/03/18 08:11 DEBUG:source_data_fname already exists in session state
2025/03/18 08:11 INFO:Session_state variables initialized
2025/03/18 08:11 DEBUG:PLACEHOLDER_ID: 1000001
2025/03/18 08:11 DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/18 08:11 DEBUG:menu_selection: {'title': 'Cash Donations', 'function': <function mod_cash_donations at 0x0000026F658DA320>}
2025/03/18 08:11 DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/18 08:11 DEBUG:reference_dir: reference_files
2025/03/18 08:11 DEBUG:raw_data:            ECRef      OriginalRegulatedEntityName RegulatedEntityType      Value  ...                 CleanedDonorName CleanedDonorId    DonorId                        DonorName
0      NC0408174                   Mr Andy Street     Regulated Donee    1876.56  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street     Regulated Donee    2700.00  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street     Regulated Donee    4852.58  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street     Regulated Donee    2500.00  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street     Regulated Donee    4524.05  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
...          ...                              ...                 ...        ...  ...                              ...            ...        ...                              ...
91402   C0578847                        Reform Uk     Political Party   50000.00  ...                              NaN            NaN   100685.0              Mr Johnny Gallagher
91403  NC0414471                    Tactical.Vote         Third Party   10000.00  ...                              NaN            NaN    89129.0           Joint Digital Unit Ltd
91404   C0413721                     Labour Party     Political Party  425000.00  ...      Communication Workers Union          513.0      513.0      Communication Workers Union
91405  TV0514620         Centrum Campaign Limited         Third Party   19001.00  ...               Unidentified Donor      1000001.0  1000001.0               Unidentified Donor
91406  TV0490945  The League Against Cruel Sports         Third Party     800.00  ...               Unidentified Donor      1000001.0  1000001.0               Unidentified Donor

[91407 rows x 37 columns]
2025/03/18 08:11 DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/18 08:11 DEBUG:LAST_MODIFIED_DATES: reference_files\last_modified_dates.json
2025/03/18 08:11 DEBUG:data_dir: data
2025/03/18 08:11 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:11 DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/18 08:11 DEBUG:data_donor:          DonorId                                         Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0                   Joseph Rowntree Refrom Trust Ltd         53000.00                2   26500.000000
1            2.0                   Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                               Bord Institute Trust         36893.54                4    9223.385000
3            4.0                       Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                                   Bridgwater Trust          7700.00                3    2566.666667
...          ...                                                ...              ...              ...            ...
31455   103426.0                                 Charles Max Keyner          2500.00                1    2500.000000
31456   103427.0  The Refugee Asylum And Migration Policy Projec...          6240.00                1    6240.000000
31457   103428.0                                       Bolton Agnew         20000.00                1   20000.000000
31458   103429.0                                  Opd Group Limited         15000.00                1   15000.000000
31459  1000001.0                                 Unidentified Donor       2359857.90              134   17610.879851

[31460 rows x 5 columns]
2025/03/18 08:11 DEBUG:party_summary_fname: output\party_summary.csv
2025/03/18 08:11 DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/18 08:11 DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/18 08:11 DEBUG:load_raw_data_last_modified: 1742285484.835395
2025/03/18 08:11 DEBUG:perc_target: 0.5
2025/03/18 08:11 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:11 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:11 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/18 08:11 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:11 DEBUG:output_dir: output
2025/03/18 08:11 DEBUG:error_logged: True
2025/03/18 08:11 DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/18 08:11 DEBUG:filter_def: ({'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}},)
2025/03/18 08:11 DEBUG:utils_dir: utils
2025/03/18 08:11 DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/18 08:11 DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/18 08:11 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:11 DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/18 08:11 DEBUG:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:11 DEBUG:load_donorlist_data_last_modified: 1742285489.4657118
2025/03/18 08:11 DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/18 08:11 DEBUG:app_pages_dir: app_pages
2025/03/18 08:11 DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/18 08:11 DEBUG:data_clean:            ECRef RegulatedEntityType      Value IsSponsorship                 DonorStatus  ... WksSinceLastElection QtrsTillNextElection QtrsSinceLastElection YrsTillNextElection YrsSinceLastElection
0      NC0408174     Regulated Donee    1876.56         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
1      NC0408173     Regulated Donee    2700.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
2      NC0408177     Regulated Donee    4852.58         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
3      NC0408176     Regulated Donee    2500.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
4      NC0408170     Regulated Donee    4524.05         FALSE  Registered Political Party  ...               4709.0                  2.0                 363.0                 1.0                 91.0
...          ...                 ...        ...           ...                         ...  ...                  ...                  ...                   ...                 ...                  ...
91402   C0578847     Political Party   50000.00         FALSE                  Individual  ...               4961.0                -18.0                 382.0                -4.0                 96.0
91403  NC0414471         Third Party   10000.00         FALSE                     Company  ...               4724.0                  1.0                 364.0                 1.0                 91.0
91404   C0413721     Political Party  425000.00         FALSE                 Trade Union  ...               4720.0                  1.0                 364.0                 1.0                 91.0
91405  TV0514620         Third Party   19001.00         FALSE          Unidentified Donor  ...               4751.0                 -2.0                 366.0                -0.0                 92.0
91406  TV0490945         Third Party     800.00         FALSE          Unidentified Donor  ...               4737.0                 -0.0                 365.0                -0.0                 91.0

[91407 rows x 55 columns]
2025/03/18 08:11 DEBUG:components_dir: components
2025/03/18 08:11 DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/18 08:11 DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/18 08:11 DEBUG:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/18 08:11 DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/18 08:11 DEBUG:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/18 08:11 DEBUG:logs_dir: logs
2025/03/18 08:11 DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/18 08:11 DEBUG:data_regentity:       RegulatedEntityId                        Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                            English Democrats            Small Entity        118532.00               12    9877.666667
1                  19.0                   Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0  Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                   Sinn FIn     Medium Large Entity       2506699.11              359    6982.448774
4                  39.0                                    Sinn Fin     Medium Large Entity       5936716.49              358   16583.006955
...                 ...                                          ...                     ...              ...              ...            ...
1661            18013.0                                 Shivani Raja  Single Donation Entity          3245.79                1    3245.790000
1662            18014.0                             Sir Geoffrey Cox  Single Donation Entity         13302.00                1   13302.000000
1663            18038.0                             Kevin Hollinrake  Single Donation Entity          2500.00                1    2500.000000
1664            18039.0                            Laura Kyrke-Smith  Single Donation Entity          6240.00                1    6240.000000
1665            18040.0                                  Rupert Lowe  Single Donation Entity         20000.00                1   20000.000000

[1666 rows x 6 columns]
2025/03/18 08:11 DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/18 08:11 INFO:Session state Setup complete
2025/03/18 08:11 INFO:initialize_session_state executed successfully
2025/03/18 08:11 INFO:Package setup complete
2025/03/18 08:11 INFO:setup_package executed successfully
2025/03/18 08:11 INFO:Setup completed successfully.
2025/03/18 08:11 INFO:Running Menu setup...
2025/03/18 08:11 DEBUG:Calling pagesetup with args={args}, kwargs={kwargs}
2025/03/18 08:11 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:11 INFO:get_git_version executed successfully
2025/03/18 08:11 INFO:App Version: v39.201
2025/03/18 08:11 INFO:Switched to page: Cash Donations
2025/03/18 08:11 DEBUG:Calling display_data_page with args={args}, kwargs={kwargs}
2025/03/18 08:11 DEBUG:Calling load_and_filter_data with args={args}, kwargs={kwargs}
2025/03/18 08:11 DEBUG:filter_def in session state: ({'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}},)
2025/03/18 08:11 DEBUG:Filter key: CashDonations_ftr
2025/03/18 08:11 CRITICAL:Menu setup crashed: tuple indices must be integers or slices, not str
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 179, in mod_cash_donations
    display_data_page(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page.py", line 22, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 54, in load_and_filter_data
    filter_list = st.session_state.filter_def[filter_key_a]
TypeError: tuple indices must be integers or slices, not str
2025/03/18 08:12 INFO:Streamlit App Starting...
2025/03/18 08:12 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:12 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:12 INFO:Running App setup...
2025/03/18 08:12 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:12 INFO:Setting up the package
2025/03/18 08:12 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:12 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:12 INFO:get_git_version executed successfully
2025/03/18 08:12 INFO:Version: v39.172
2025/03/18 08:12 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:12 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:12 DEBUG:BASE_DIR already exists in session state
2025/03/18 08:12 DEBUG:filenames already exists in session state
2025/03/18 08:12 DEBUG:PLACEHOLDER_DATE already exists in session state
2025/03/18 08:12 DEBUG:PLACEHOLDER_ID already exists in session state
2025/03/18 08:12 DEBUG:thresholds already exists in session state
2025/03/18 08:12 DEBUG:data_remappings already exists in session state
2025/03/18 08:12 DEBUG:filter_def already exists in session state
2025/03/18 08:12 DEBUG:security already exists in session state
2025/03/18 08:12 DEBUG:perc_target already exists in session state
2025/03/18 08:12 DEBUG:RERUN_MP_PARTY_MEMBERSHIP already exists in session state
2025/03/18 08:12 DEBUG:directories already exists in session state
2025/03/18 08:12 DEBUG:reference_dir already exists in session state
2025/03/18 08:12 DEBUG:data_dir already exists in session state
2025/03/18 08:12 DEBUG:output_dir already exists in session state
2025/03/18 08:12 DEBUG:logs_dir already exists in session state
2025/03/18 08:12 DEBUG:components_dir already exists in session state
2025/03/18 08:12 DEBUG:app_pages_dir already exists in session state
2025/03/18 08:12 DEBUG:utils_dir already exists in session state
2025/03/18 08:12 DEBUG:Donor_dedupe_cleaned_fname already exists in session state
2025/03/18 08:12 DEBUG:ListofPoliticalPeople_fname already exists in session state
2025/03/18 08:12 DEBUG:mppartymemb_fname already exists in session state
2025/03/18 08:12 DEBUG:donor_map_fname already exists in session state
2025/03/18 08:12 DEBUG:politician_party_fname already exists in session state
2025/03/18 08:12 DEBUG:regentity_map_fname already exists in session state
2025/03/18 08:12 DEBUG:original_data_fname already exists in session state
2025/03/18 08:12 DEBUG:CREDENTIALS_FILE already exists in session state
2025/03/18 08:12 DEBUG:TEXT_FILE already exists in session state
2025/03/18 08:12 DEBUG:ELECTION_DATES already exists in session state
2025/03/18 08:12 DEBUG:LAST_MODIFIED_DATES already exists in session state
2025/03/18 08:12 DEBUG:cleaned_data_fname already exists in session state
2025/03/18 08:12 DEBUG:cleaned_donations_fname already exists in session state
2025/03/18 08:12 DEBUG:cleaned_donorlist_fname already exists in session state
2025/03/18 08:12 DEBUG:cleaned_regentity_fname already exists in session state
2025/03/18 08:12 DEBUG:party_summary_fname already exists in session state
2025/03/18 08:12 DEBUG:imported_raw_fname already exists in session state
2025/03/18 08:12 DEBUG:source_data_fname already exists in session state
2025/03/18 08:12 INFO:Session_state variables initialized
2025/03/18 08:12 DEBUG:PLACEHOLDER_ID: 1000001
2025/03/18 08:12 DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/18 08:12 DEBUG:menu_selection: {'title': 'Head Line Figures', 'function': <function hlf_body at 0x0000026F658D8F70>}
2025/03/18 08:12 DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/18 08:12 DEBUG:reference_dir: reference_files
2025/03/18 08:12 DEBUG:raw_data:            ECRef      OriginalRegulatedEntityName RegulatedEntityType      Value  ...                 CleanedDonorName CleanedDonorId    DonorId                        DonorName
0      NC0408174                   Mr Andy Street     Regulated Donee    1876.56  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street     Regulated Donee    2700.00  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street     Regulated Donee    4852.58  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street     Regulated Donee    2500.00  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street     Regulated Donee    4524.05  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
...          ...                              ...                 ...        ...  ...                              ...            ...        ...                              ...
91402   C0578847                        Reform Uk     Political Party   50000.00  ...                              NaN            NaN   100685.0              Mr Johnny Gallagher
91403  NC0414471                    Tactical.Vote         Third Party   10000.00  ...                              NaN            NaN    89129.0           Joint Digital Unit Ltd
91404   C0413721                     Labour Party     Political Party  425000.00  ...      Communication Workers Union          513.0      513.0      Communication Workers Union
91405  TV0514620         Centrum Campaign Limited         Third Party   19001.00  ...               Unidentified Donor      1000001.0  1000001.0               Unidentified Donor
91406  TV0490945  The League Against Cruel Sports         Third Party     800.00  ...               Unidentified Donor      1000001.0  1000001.0               Unidentified Donor

[91407 rows x 37 columns]
2025/03/18 08:12 DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/18 08:12 DEBUG:max_date: 2025-01-23
2025/03/18 08:12 DEBUG:LAST_MODIFIED_DATES: reference_files\last_modified_dates.json
2025/03/18 08:12 DEBUG:data_dir: data
2025/03/18 08:12 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:12 DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/18 08:12 DEBUG:data_donor:          DonorId                                         Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0                   Joseph Rowntree Refrom Trust Ltd         53000.00                2   26500.000000
1            2.0                   Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                               Bord Institute Trust         36893.54                4    9223.385000
3            4.0                       Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                                   Bridgwater Trust          7700.00                3    2566.666667
...          ...                                                ...              ...              ...            ...
31455   103426.0                                 Charles Max Keyner          2500.00                1    2500.000000
31456   103427.0  The Refugee Asylum And Migration Policy Projec...          6240.00                1    6240.000000
31457   103428.0                                       Bolton Agnew         20000.00                1   20000.000000
31458   103429.0                                  Opd Group Limited         15000.00                1   15000.000000
31459  1000001.0                                 Unidentified Donor       2359857.90              134   17610.879851

[31460 rows x 5 columns]
2025/03/18 08:12 DEBUG:party_summary_fname: output\party_summary.csv
2025/03/18 08:12 DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/18 08:12 DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/18 08:12 DEBUG:load_raw_data_last_modified: 1742285484.835395
2025/03/18 08:12 DEBUG:perc_target: 0.5
2025/03/18 08:12 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:12 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:12 DEBUG:min_date: 2001-01-01
2025/03/18 08:12 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/18 08:12 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:12 DEBUG:output_dir: output
2025/03/18 08:12 DEBUG:error_logged: True
2025/03/18 08:12 DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/18 08:12 DEBUG:filter_def: ({'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}},)
2025/03/18 08:12 DEBUG:utils_dir: utils
2025/03/18 08:12 DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/18 08:12 DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/18 08:12 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:12 DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/18 08:12 DEBUG:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:12 DEBUG:load_donorlist_data_last_modified: 1742285489.4657118
2025/03/18 08:12 DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/18 08:12 DEBUG:app_pages_dir: app_pages
2025/03/18 08:12 DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/18 08:12 DEBUG:data_clean:            ECRef RegulatedEntityType      Value IsSponsorship                 DonorStatus  ... WksSinceLastElection QtrsTillNextElection QtrsSinceLastElection YrsTillNextElection YrsSinceLastElection
0      NC0408174     Regulated Donee    1876.56         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
1      NC0408173     Regulated Donee    2700.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
2      NC0408177     Regulated Donee    4852.58         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
3      NC0408176     Regulated Donee    2500.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
4      NC0408170     Regulated Donee    4524.05         FALSE  Registered Political Party  ...               4709.0                  2.0                 363.0                 1.0                 91.0
...          ...                 ...        ...           ...                         ...  ...                  ...                  ...                   ...                 ...                  ...
91402   C0578847     Political Party   50000.00         FALSE                  Individual  ...               4961.0                -18.0                 382.0                -4.0                 96.0
91403  NC0414471         Third Party   10000.00         FALSE                     Company  ...               4724.0                  1.0                 364.0                 1.0                 91.0
91404   C0413721     Political Party  425000.00         FALSE                 Trade Union  ...               4720.0                  1.0                 364.0                 1.0                 91.0
91405  TV0514620         Third Party   19001.00         FALSE          Unidentified Donor  ...               4751.0                 -2.0                 366.0                -0.0                 92.0
91406  TV0490945         Third Party     800.00         FALSE          Unidentified Donor  ...               4737.0                 -0.0                 365.0                -0.0                 91.0

[91407 rows x 55 columns]
2025/03/18 08:12 DEBUG:components_dir: components
2025/03/18 08:12 DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/18 08:12 DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/18 08:12 DEBUG:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/18 08:12 DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/18 08:12 DEBUG:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/18 08:12 DEBUG:logs_dir: logs
2025/03/18 08:12 DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/18 08:12 DEBUG:data_regentity:       RegulatedEntityId                        Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                            English Democrats            Small Entity        118532.00               12    9877.666667
1                  19.0                   Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0  Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                   Sinn FIn     Medium Large Entity       2506699.11              359    6982.448774
4                  39.0                                    Sinn Fin     Medium Large Entity       5936716.49              358   16583.006955
...                 ...                                          ...                     ...              ...              ...            ...
1661            18013.0                                 Shivani Raja  Single Donation Entity          3245.79                1    3245.790000
1662            18014.0                             Sir Geoffrey Cox  Single Donation Entity         13302.00                1   13302.000000
1663            18038.0                             Kevin Hollinrake  Single Donation Entity          2500.00                1    2500.000000
1664            18039.0                            Laura Kyrke-Smith  Single Donation Entity          6240.00                1    6240.000000
1665            18040.0                                  Rupert Lowe  Single Donation Entity         20000.00                1   20000.000000

[1666 rows x 6 columns]
2025/03/18 08:12 DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/18 08:12 INFO:Session state Setup complete
2025/03/18 08:12 INFO:initialize_session_state executed successfully
2025/03/18 08:12 INFO:Package setup complete
2025/03/18 08:12 INFO:setup_package executed successfully
2025/03/18 08:12 INFO:Setup completed successfully.
2025/03/18 08:12 INFO:Running Menu setup...
2025/03/18 08:12 DEBUG:Calling pagesetup with args={args}, kwargs={kwargs}
2025/03/18 08:12 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:12 INFO:get_git_version executed successfully
2025/03/18 08:12 INFO:App Version: v39.201
2025/03/18 08:12 INFO:Switched to page: Head Line Figures
2025/03/18 08:12 DEBUG:Calling hlf_body with args={args}, kwargs={kwargs}
2025/03/18 08:12 DEBUG:Calling load_and_filter_data with args={args}, kwargs={kwargs}
2025/03/18 08:12 CRITICAL:Menu setup crashed: load_and_filter_data() got an unexpected keyword argument 'filter_key'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 32, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
TypeError: load_and_filter_data() got an unexpected keyword argument 'filter_key'
2025/03/18 08:12 INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/18 08:12 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:12 INFO:get_git_version executed successfully
2025/03/18 08:12 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:12 INFO:get_git_version executed successfully
2025/03/18 08:12 INFO:Streamlit App Starting...
2025/03/18 08:12 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:12 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:12 INFO:Running App setup...
2025/03/18 08:12 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:12 INFO:Setting up the package
2025/03/18 08:12 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:12 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:12 INFO:get_git_version executed successfully
2025/03/18 08:12 INFO:Version: v39.172
2025/03/18 08:12 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:12 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:12 DEBUG:BASE_DIR already exists in session state
2025/03/18 08:12 DEBUG:filenames already exists in session state
2025/03/18 08:12 DEBUG:PLACEHOLDER_DATE already exists in session state
2025/03/18 08:12 DEBUG:PLACEHOLDER_ID already exists in session state
2025/03/18 08:12 DEBUG:thresholds already exists in session state
2025/03/18 08:12 DEBUG:data_remappings already exists in session state
2025/03/18 08:12 DEBUG:filter_def already exists in session state
2025/03/18 08:12 DEBUG:security already exists in session state
2025/03/18 08:12 DEBUG:perc_target already exists in session state
2025/03/18 08:12 DEBUG:RERUN_MP_PARTY_MEMBERSHIP already exists in session state
2025/03/18 08:12 DEBUG:directories already exists in session state
2025/03/18 08:12 DEBUG:reference_dir already exists in session state
2025/03/18 08:12 DEBUG:data_dir already exists in session state
2025/03/18 08:12 DEBUG:output_dir already exists in session state
2025/03/18 08:12 DEBUG:logs_dir already exists in session state
2025/03/18 08:12 DEBUG:components_dir already exists in session state
2025/03/18 08:12 DEBUG:app_pages_dir already exists in session state
2025/03/18 08:12 DEBUG:utils_dir already exists in session state
2025/03/18 08:12 DEBUG:Donor_dedupe_cleaned_fname already exists in session state
2025/03/18 08:12 DEBUG:ListofPoliticalPeople_fname already exists in session state
2025/03/18 08:12 DEBUG:mppartymemb_fname already exists in session state
2025/03/18 08:12 DEBUG:donor_map_fname already exists in session state
2025/03/18 08:12 DEBUG:politician_party_fname already exists in session state
2025/03/18 08:12 DEBUG:regentity_map_fname already exists in session state
2025/03/18 08:12 DEBUG:original_data_fname already exists in session state
2025/03/18 08:12 DEBUG:CREDENTIALS_FILE already exists in session state
2025/03/18 08:12 DEBUG:TEXT_FILE already exists in session state
2025/03/18 08:12 DEBUG:ELECTION_DATES already exists in session state
2025/03/18 08:12 DEBUG:LAST_MODIFIED_DATES already exists in session state
2025/03/18 08:12 DEBUG:cleaned_data_fname already exists in session state
2025/03/18 08:12 DEBUG:cleaned_donations_fname already exists in session state
2025/03/18 08:12 DEBUG:cleaned_donorlist_fname already exists in session state
2025/03/18 08:12 DEBUG:cleaned_regentity_fname already exists in session state
2025/03/18 08:12 DEBUG:party_summary_fname already exists in session state
2025/03/18 08:12 DEBUG:imported_raw_fname already exists in session state
2025/03/18 08:12 DEBUG:source_data_fname already exists in session state
2025/03/18 08:12 INFO:Session_state variables initialized
2025/03/18 08:12 DEBUG:PLACEHOLDER_ID: 1000001
2025/03/18 08:12 DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/18 08:12 DEBUG:menu_selection: {'title': 'Cash Donations', 'function': <function mod_cash_donations at 0x0000026F658DA320>}
2025/03/18 08:12 DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/18 08:12 DEBUG:reference_dir: reference_files
2025/03/18 08:12 DEBUG:raw_data:            ECRef      OriginalRegulatedEntityName RegulatedEntityType      Value  ...                 CleanedDonorName CleanedDonorId    DonorId                        DonorName
0      NC0408174                   Mr Andy Street     Regulated Donee    1876.56  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street     Regulated Donee    2700.00  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street     Regulated Donee    4852.58  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street     Regulated Donee    2500.00  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street     Regulated Donee    4524.05  ...  Conservative And Unionist Party        86310.0    86310.0  Conservative And Unionist Party
...          ...                              ...                 ...        ...  ...                              ...            ...        ...                              ...
91402   C0578847                        Reform Uk     Political Party   50000.00  ...                              NaN            NaN   100685.0              Mr Johnny Gallagher
91403  NC0414471                    Tactical.Vote         Third Party   10000.00  ...                              NaN            NaN    89129.0           Joint Digital Unit Ltd
91404   C0413721                     Labour Party     Political Party  425000.00  ...      Communication Workers Union          513.0      513.0      Communication Workers Union
91405  TV0514620         Centrum Campaign Limited         Third Party   19001.00  ...               Unidentified Donor      1000001.0  1000001.0               Unidentified Donor
91406  TV0490945  The League Against Cruel Sports         Third Party     800.00  ...               Unidentified Donor      1000001.0  1000001.0               Unidentified Donor

[91407 rows x 37 columns]
2025/03/18 08:12 DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/18 08:12 DEBUG:max_date: 2025-01-23
2025/03/18 08:12 DEBUG:LAST_MODIFIED_DATES: reference_files\last_modified_dates.json
2025/03/18 08:12 DEBUG:data_dir: data
2025/03/18 08:12 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:12 DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/18 08:12 DEBUG:data_donor:          DonorId                                         Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0                   Joseph Rowntree Refrom Trust Ltd         53000.00                2   26500.000000
1            2.0                   Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                               Bord Institute Trust         36893.54                4    9223.385000
3            4.0                       Branksome Liberal Club Trust         74495.89               14    5321.135000
4            5.0                                   Bridgwater Trust          7700.00                3    2566.666667
...          ...                                                ...              ...              ...            ...
31455   103426.0                                 Charles Max Keyner          2500.00                1    2500.000000
31456   103427.0  The Refugee Asylum And Migration Policy Projec...          6240.00                1    6240.000000
31457   103428.0                                       Bolton Agnew         20000.00                1   20000.000000
31458   103429.0                                  Opd Group Limited         15000.00                1   15000.000000
31459  1000001.0                                 Unidentified Donor       2359857.90              134   17610.879851

[31460 rows x 5 columns]
2025/03/18 08:12 DEBUG:party_summary_fname: output\party_summary.csv
2025/03/18 08:12 DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/18 08:12 DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/18 08:12 DEBUG:load_raw_data_last_modified: 1742285484.835395
2025/03/18 08:12 DEBUG:perc_target: 0.5
2025/03/18 08:12 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:12 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:12 DEBUG:min_date: 2001-01-01
2025/03/18 08:12 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/18 08:12 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:12 DEBUG:output_dir: output
2025/03/18 08:12 DEBUG:error_logged: True
2025/03/18 08:12 DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/18 08:12 DEBUG:filter_def: ({'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}},)
2025/03/18 08:12 DEBUG:utils_dir: utils
2025/03/18 08:12 DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/18 08:12 DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/18 08:12 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:12 DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/18 08:12 DEBUG:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:12 DEBUG:load_donorlist_data_last_modified: 1742285489.4657118
2025/03/18 08:12 DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/18 08:12 DEBUG:app_pages_dir: app_pages
2025/03/18 08:12 DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/18 08:12 DEBUG:data_clean:            ECRef RegulatedEntityType      Value IsSponsorship                 DonorStatus  ... WksSinceLastElection QtrsTillNextElection QtrsSinceLastElection YrsTillNextElection YrsSinceLastElection
0      NC0408174     Regulated Donee    1876.56         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
1      NC0408173     Regulated Donee    2700.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
2      NC0408177     Regulated Donee    4852.58         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
3      NC0408176     Regulated Donee    2500.00         FALSE  Registered Political Party  ...               4710.0                  2.0                 363.0                 1.0                 91.0
4      NC0408170     Regulated Donee    4524.05         FALSE  Registered Political Party  ...               4709.0                  2.0                 363.0                 1.0                 91.0
...          ...                 ...        ...           ...                         ...  ...                  ...                  ...                   ...                 ...                  ...
91402   C0578847     Political Party   50000.00         FALSE                  Individual  ...               4961.0                -18.0                 382.0                -4.0                 96.0
91403  NC0414471         Third Party   10000.00         FALSE                     Company  ...               4724.0                  1.0                 364.0                 1.0                 91.0
91404   C0413721     Political Party  425000.00         FALSE                 Trade Union  ...               4720.0                  1.0                 364.0                 1.0                 91.0
91405  TV0514620         Third Party   19001.00         FALSE          Unidentified Donor  ...               4751.0                 -2.0                 366.0                -0.0                 92.0
91406  TV0490945         Third Party     800.00         FALSE          Unidentified Donor  ...               4737.0                 -0.0                 365.0                -0.0                 91.0

[91407 rows x 55 columns]
2025/03/18 08:12 DEBUG:components_dir: components
2025/03/18 08:12 DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/18 08:12 DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/18 08:12 DEBUG:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/18 08:12 DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/18 08:12 DEBUG:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/18 08:12 DEBUG:logs_dir: logs
2025/03/18 08:12 DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/18 08:12 DEBUG:data_regentity:       RegulatedEntityId                        Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                            English Democrats            Small Entity        118532.00               12    9877.666667
1                  19.0                   Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0  Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                   Sinn FIn     Medium Large Entity       2506699.11              359    6982.448774
4                  39.0                                    Sinn Fin     Medium Large Entity       5936716.49              358   16583.006955
...                 ...                                          ...                     ...              ...              ...            ...
1661            18013.0                                 Shivani Raja  Single Donation Entity          3245.79                1    3245.790000
1662            18014.0                             Sir Geoffrey Cox  Single Donation Entity         13302.00                1   13302.000000
1663            18038.0                             Kevin Hollinrake  Single Donation Entity          2500.00                1    2500.000000
1664            18039.0                            Laura Kyrke-Smith  Single Donation Entity          6240.00                1    6240.000000
1665            18040.0                                  Rupert Lowe  Single Donation Entity         20000.00                1   20000.000000

[1666 rows x 6 columns]
2025/03/18 08:12 DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/18 08:12 INFO:Session state Setup complete
2025/03/18 08:12 INFO:initialize_session_state executed successfully
2025/03/18 08:12 INFO:Package setup complete
2025/03/18 08:12 INFO:setup_package executed successfully
2025/03/18 08:12 INFO:Setup completed successfully.
2025/03/18 08:12 INFO:Running Menu setup...
2025/03/18 08:12 DEBUG:Calling pagesetup with args={args}, kwargs={kwargs}
2025/03/18 08:12 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:12 INFO:get_git_version executed successfully
2025/03/18 08:12 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:12 INFO:get_git_version executed successfully
2025/03/18 08:12 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:12 INFO:get_git_version executed successfully
2025/03/18 08:12 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:12 INFO:get_git_version executed successfully
2025/03/18 08:12 INFO:App Version: v39.201
2025/03/18 08:12 INFO:Switched to page: Cash Donations
2025/03/18 08:12 DEBUG:Calling display_data_page with args={args}, kwargs={kwargs}
2025/03/18 08:12 DEBUG:Calling load_and_filter_data with args={args}, kwargs={kwargs}
2025/03/18 08:12 DEBUG:filter_def in session state: ({'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}},)
2025/03/18 08:12 DEBUG:Filter key: CashDonations_ftr
2025/03/18 08:12 CRITICAL:Menu setup crashed: tuple indices must be integers or slices, not str
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 179, in mod_cash_donations
    display_data_page(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page.py", line 22, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 54, in load_and_filter_data
    filter_list = st.session_state.filter_def[filter_key]
TypeError: tuple indices must be integers or slices, not str
2025/03/18 08:19 INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/18 08:19 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:19 INFO:get_git_version executed successfully
2025/03/18 08:19 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:19 INFO:get_git_version executed successfully
2025/03/18 08:19 INFO:Streamlit App Starting...
2025/03/18 08:19 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:19 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:19 INFO:Running App setup...
2025/03/18 08:19 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:19 INFO:Setting up the package
2025/03/18 08:19 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:19 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:19 INFO:get_git_version executed successfully
2025/03/18 08:19 INFO:Version: v39.172
2025/03/18 08:19 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:19 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:19 DEBUG:BASE_DIR already exists in session state
2025/03/18 08:19 DEBUG:filenames already exists in session state
2025/03/18 08:19 DEBUG:PLACEHOLDER_DATE already exists in session state
2025/03/18 08:19 DEBUG:PLACEHOLDER_ID already exists in session state
2025/03/18 08:19 DEBUG:thresholds already exists in session state
2025/03/18 08:19 DEBUG:data_remappings already exists in session state
2025/03/18 08:19 DEBUG:filter_def already exists in session state
2025/03/18 08:19 CRITICAL:App setup crashed: 'tuple' object has no attribute 'copy'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\setup.py", line 69, in setup_package
    initialize_session_state()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\utils\global_variables.py", line 38, in initialize_session_state
    st.session_state["filter_def"] = config.FILTER_DEF.copy()
AttributeError: 'tuple' object has no attribute 'copy'
2025/03/18 08:19 INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/18 08:19 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:19 INFO:get_git_version executed successfully
2025/03/18 08:19 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:19 INFO:get_git_version executed successfully
2025/03/18 08:19 INFO:Streamlit App Starting...
2025/03/18 08:19 INFO:Streamlit App Starting...
2025/03/18 08:19 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:19 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:19 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:19 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:19 INFO:Running App setup...
2025/03/18 08:19 INFO:Running App setup...
2025/03/18 08:19 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:19 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:19 INFO:Setting up the package
2025/03/18 08:19 INFO:Setting up the package
2025/03/18 08:19 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:19 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:19 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:19 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:19 INFO:get_git_version executed successfully
2025/03/18 08:19 INFO:get_git_version executed successfully
2025/03/18 08:19 INFO:Version: v39.172
2025/03/18 08:19 INFO:Version: v39.172
2025/03/18 08:19 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:19 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:19 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:19 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:19 DEBUG:Initialised BASE_DIR with value: {}
2025/03/18 08:19 DEBUG:Initialised BASE_DIR with value: {}
2025/03/18 08:19 DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:19 DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:19 DEBUG:Initialised PLACEHOLDER_DATE with value: {}
2025/03/18 08:19 DEBUG:Initialised PLACEHOLDER_DATE with value: {}
2025/03/18 08:19 DEBUG:Initialised PLACEHOLDER_ID with value: {}
2025/03/18 08:19 DEBUG:Initialised PLACEHOLDER_ID with value: {}
2025/03/18 08:19 DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:19 DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:19 DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:19 DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:19 DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:19 DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:19 ERROR:Error in initialize_session_state: 'tuple' object has no attribute 'copy'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\utils\global_variables.py", line 38, in initialize_session_state
    st.session_state["filter_def"] = config.FILTER_DEF.copy()
AttributeError: 'tuple' object has no attribute 'copy'
2025/03/18 08:19 ERROR:Error in initialize_session_state: 'tuple' object has no attribute 'copy'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\utils\global_variables.py", line 38, in initialize_session_state
    st.session_state["filter_def"] = config.FILTER_DEF.copy()
AttributeError: 'tuple' object has no attribute 'copy'
2025/03/18 08:19 CRITICAL:App setup crashed: 'tuple' object has no attribute 'copy'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\setup.py", line 69, in setup_package
    initialize_session_state()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\utils\global_variables.py", line 38, in initialize_session_state
    st.session_state["filter_def"] = config.FILTER_DEF.copy()
AttributeError: 'tuple' object has no attribute 'copy'
2025/03/18 08:19 CRITICAL:App setup crashed: 'tuple' object has no attribute 'copy'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\setup.py", line 69, in setup_package
    initialize_session_state()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\utils\global_variables.py", line 38, in initialize_session_state
    st.session_state["filter_def"] = config.FILTER_DEF.copy()
AttributeError: 'tuple' object has no attribute 'copy'
2025/03/18 08:20 INFO:Streamlit App Starting...
2025/03/18 08:20 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:20 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:20 INFO:Running App setup...
2025/03/18 08:20 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:20 INFO:Setting up the package
2025/03/18 08:20 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:20 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:20 INFO:get_git_version executed successfully
2025/03/18 08:20 INFO:Version: v39.172
2025/03/18 08:20 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:20 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:20 DEBUG:Initialised BASE_DIR with value: {}
2025/03/18 08:20 DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:20 DEBUG:Initialised PLACEHOLDER_DATE with value: {}
2025/03/18 08:20 DEBUG:Initialised PLACEHOLDER_ID with value: {}
2025/03/18 08:20 DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:20 DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:20 DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:20 ERROR:Error in initialize_session_state: 'tuple' object has no attribute 'copy'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\utils\global_variables.py", line 38, in initialize_session_state
    st.session_state["filter_def"] = config.FILTER_DEF.copy()
AttributeError: 'tuple' object has no attribute 'copy'
2025/03/18 08:20 CRITICAL:App setup crashed: 'tuple' object has no attribute 'copy'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\setup.py", line 69, in setup_package
    initialize_session_state()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\utils\global_variables.py", line 38, in initialize_session_state
    st.session_state["filter_def"] = config.FILTER_DEF.copy()
AttributeError: 'tuple' object has no attribute 'copy'
2025/03/18 08:20 INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/18 08:20 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:20 INFO:get_git_version executed successfully
2025/03/18 08:20 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:20 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:20 INFO:get_git_version executed successfully
2025/03/18 08:20 INFO:Streamlit App Starting...
2025/03/18 08:20 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:20 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:20 INFO:Running App setup...
2025/03/18 08:20 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:20 INFO:Setting up the package
2025/03/18 08:20 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:20 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:20 INFO:get_git_version executed successfully
2025/03/18 08:20 INFO:Version: v39.172
2025/03/18 08:20 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:20 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:20 DEBUG:Initialised BASE_DIR with value: {}
2025/03/18 08:20 DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:20 DEBUG:Initialised PLACEHOLDER_DATE with value: {}
2025/03/18 08:20 DEBUG:Initialised PLACEHOLDER_ID with value: {}
2025/03/18 08:20 DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:20 DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:20 ERROR:Error in initialize_session_state: 'tuple' object has no attribute 'copy'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\utils\global_variables.py", line 38, in initialize_session_state
    st.session_state["filter_def"] = config.FILTER_DEF.copy()
AttributeError: 'tuple' object has no attribute 'copy'
2025/03/18 08:20 CRITICAL:App setup crashed: 'tuple' object has no attribute 'copy'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\setup.py", line 69, in setup_package
    initialize_session_state()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\utils\global_variables.py", line 38, in initialize_session_state
    st.session_state["filter_def"] = config.FILTER_DEF.copy()
AttributeError: 'tuple' object has no attribute 'copy'
2025/03/18 08:20 INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/18 08:20 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:20 INFO:get_git_version executed successfully
2025/03/18 08:20 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:20 INFO:get_git_version executed successfully
2025/03/18 08:20 INFO:Streamlit App Starting...
2025/03/18 08:20 INFO:Streamlit App Starting...
2025/03/18 08:20 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:20 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:20 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:20 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:20 INFO:Running App setup...
2025/03/18 08:20 INFO:Running App setup...
2025/03/18 08:20 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:20 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:20 INFO:Setting up the package
2025/03/18 08:20 INFO:Setting up the package
2025/03/18 08:20 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:20 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:20 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:20 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:20 INFO:get_git_version executed successfully
2025/03/18 08:20 INFO:get_git_version executed successfully
2025/03/18 08:20 INFO:Version: v39.172
2025/03/18 08:20 INFO:Version: v39.172
2025/03/18 08:20 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:20 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:20 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:20 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:20 DEBUG:Initialised BASE_DIR with value: {}
2025/03/18 08:20 DEBUG:Initialised BASE_DIR with value: {}
2025/03/18 08:20 DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:20 DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:20 DEBUG:Initialised PLACEHOLDER_DATE with value: {}
2025/03/18 08:20 DEBUG:Initialised PLACEHOLDER_DATE with value: {}
2025/03/18 08:20 DEBUG:Initialised PLACEHOLDER_ID with value: {}
2025/03/18 08:20 DEBUG:Initialised PLACEHOLDER_ID with value: {}
2025/03/18 08:20 DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:20 DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:20 DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:20 DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:20 DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:20 DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:20 DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:20 DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:20 DEBUG:Initialised perc_target with value: {}
2025/03/18 08:20 DEBUG:Initialised perc_target with value: {}
2025/03/18 08:20 DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: {}
2025/03/18 08:20 DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: {}
2025/03/18 08:20 DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:20 DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:20 DEBUG:Initialised reference_dir with value: {}
2025/03/18 08:20 DEBUG:Initialised data_dir with value: {}
2025/03/18 08:20 DEBUG:Initialised reference_dir with value: {}
2025/03/18 08:20 DEBUG:Initialised output_dir with value: {}
2025/03/18 08:20 DEBUG:Initialised data_dir with value: {}
2025/03/18 08:20 DEBUG:Initialised logs_dir with value: {}
2025/03/18 08:20 DEBUG:Initialised output_dir with value: {}
2025/03/18 08:20 DEBUG:Initialised components_dir with value: {}
2025/03/18 08:20 DEBUG:Initialised logs_dir with value: {}
2025/03/18 08:20 DEBUG:Initialised app_pages_dir with value: {}
2025/03/18 08:20 DEBUG:Initialised components_dir with value: {}
2025/03/18 08:20 DEBUG:Initialised utils_dir with value: {}
2025/03/18 08:20 DEBUG:Initialised app_pages_dir with value: {}
2025/03/18 08:20 DEBUG:Initialised Donor_dedupe_cleaned_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised utils_dir with value: {}
2025/03/18 08:20 DEBUG:Initialised ListofPoliticalPeople_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised Donor_dedupe_cleaned_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised mppartymemb_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised ListofPoliticalPeople_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised donor_map_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised mppartymemb_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised politician_party_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised donor_map_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised regentity_map_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised politician_party_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised original_data_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised regentity_map_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised CREDENTIALS_FILE with value: {}
2025/03/18 08:20 DEBUG:Initialised original_data_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised TEXT_FILE with value: {}
2025/03/18 08:20 DEBUG:Initialised CREDENTIALS_FILE with value: {}
2025/03/18 08:20 DEBUG:Initialised ELECTION_DATES with value: {}
2025/03/18 08:20 DEBUG:Initialised TEXT_FILE with value: {}
2025/03/18 08:20 DEBUG:Initialised LAST_MODIFIED_DATES with value: {}
2025/03/18 08:20 DEBUG:Initialised ELECTION_DATES with value: {}
2025/03/18 08:20 DEBUG:Initialised cleaned_data_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised LAST_MODIFIED_DATES with value: {}
2025/03/18 08:20 DEBUG:Initialised cleaned_donations_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised cleaned_data_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised cleaned_donorlist_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised cleaned_donations_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised cleaned_regentity_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised cleaned_donorlist_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised party_summary_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised cleaned_regentity_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised imported_raw_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised party_summary_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised source_data_fname with value: {}
2025/03/18 08:20 DEBUG:Initialised imported_raw_fname with value: {}
2025/03/18 08:20 INFO:Session_state variables initialized
2025/03/18 08:20 DEBUG:Initialised source_data_fname with value: {}
2025/03/18 08:20 DEBUG:data_dir: {}
2025/03/18 08:20 INFO:Session_state variables initialized
2025/03/18 08:20 DEBUG:cleaned_donorlist_fname: {}
2025/03/18 08:20 DEBUG:data_dir: {}
2025/03/18 08:20 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:20 DEBUG:cleaned_donorlist_fname: {}
2025/03/18 08:20 DEBUG:mppartymemb_fname: {}
2025/03/18 08:20 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:20 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:20 DEBUG:mppartymemb_fname: {}
2025/03/18 08:20 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:20 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:20 DEBUG:reference_dir: {}
2025/03/18 08:20 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:20 DEBUG:components_dir: {}
2025/03/18 08:20 DEBUG:reference_dir: {}
2025/03/18 08:20 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:20 DEBUG:components_dir: {}
2025/03/18 08:20 DEBUG:logs_dir: {}
2025/03/18 08:20 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:20 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:20 DEBUG:logs_dir: {}
2025/03/18 08:20 DEBUG:cleaned_donations_fname: {}
2025/03/18 08:20 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:20 DEBUG:ListofPoliticalPeople_fname: {}
2025/03/18 08:20 DEBUG:cleaned_donations_fname: {}
2025/03/18 08:20 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: {}
2025/03/18 08:20 DEBUG:ListofPoliticalPeople_fname: {}
2025/03/18 08:20 DEBUG:output_dir: {}
2025/03/18 08:20 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: {}
2025/03/18 08:20 DEBUG:utils_dir: {}
2025/03/18 08:20 DEBUG:output_dir: {}
2025/03/18 08:20 DEBUG:party_summary_fname: {}
2025/03/18 08:20 DEBUG:utils_dir: {}
2025/03/18 08:20 DEBUG:LAST_MODIFIED_DATES: {}
2025/03/18 08:20 DEBUG:party_summary_fname: {}
2025/03/18 08:20 DEBUG:PLACEHOLDER_ID: {}
2025/03/18 08:20 DEBUG:LAST_MODIFIED_DATES: {}
2025/03/18 08:20 DEBUG:original_data_fname: {}
2025/03/18 08:20 DEBUG:PLACEHOLDER_ID: {}
2025/03/18 08:20 DEBUG:PLACEHOLDER_DATE: {}
2025/03/18 08:20 DEBUG:original_data_fname: {}
2025/03/18 08:20 DEBUG:Donor_dedupe_cleaned_fname: {}
2025/03/18 08:20 DEBUG:PLACEHOLDER_DATE: {}
2025/03/18 08:20 DEBUG:regentity_map_fname: {}
2025/03/18 08:20 DEBUG:Donor_dedupe_cleaned_fname: {}
2025/03/18 08:20 DEBUG:imported_raw_fname: {}
2025/03/18 08:20 DEBUG:regentity_map_fname: {}
2025/03/18 08:20 DEBUG:donor_map_fname: {}
2025/03/18 08:20 DEBUG:imported_raw_fname: {}
2025/03/18 08:20 DEBUG:BASE_DIR: {}
2025/03/18 08:20 DEBUG:donor_map_fname: {}
2025/03/18 08:20 DEBUG:cleaned_regentity_fname: {}
2025/03/18 08:20 DEBUG:BASE_DIR: {}
2025/03/18 08:20 DEBUG:TEXT_FILE: {}
2025/03/18 08:20 DEBUG:cleaned_regentity_fname: {}
2025/03/18 08:20 DEBUG:CREDENTIALS_FILE: {}
2025/03/18 08:20 DEBUG:TEXT_FILE: {}
2025/03/18 08:20 DEBUG:perc_target: {}
2025/03/18 08:20 DEBUG:CREDENTIALS_FILE: {}
2025/03/18 08:20 DEBUG:app_pages_dir: {}
2025/03/18 08:20 DEBUG:perc_target: {}
2025/03/18 08:20 DEBUG:ELECTION_DATES: {}
2025/03/18 08:20 DEBUG:app_pages_dir: {}
2025/03/18 08:20 DEBUG:politician_party_fname: {}
2025/03/18 08:20 DEBUG:ELECTION_DATES: {}
2025/03/18 08:20 DEBUG:source_data_fname: {}
2025/03/18 08:20 DEBUG:politician_party_fname: {}
2025/03/18 08:20 DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:20 DEBUG:source_data_fname: {}
2025/03/18 08:20 DEBUG:cleaned_data_fname: {}
2025/03/18 08:20 DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:20 INFO:Session state Setup complete
2025/03/18 08:20 DEBUG:cleaned_data_fname: {}
2025/03/18 08:20 INFO:initialize_session_state executed successfully
2025/03/18 08:20 INFO:Session state Setup complete
2025/03/18 08:20 INFO:Package setup complete
2025/03/18 08:20 INFO:initialize_session_state executed successfully
2025/03/18 08:20 INFO:setup_package executed successfully
2025/03/18 08:20 INFO:Package setup complete
2025/03/18 08:20 INFO:Setup completed successfully.
2025/03/18 08:20 INFO:setup_package executed successfully
2025/03/18 08:20 INFO:Running Menu setup...
2025/03/18 08:20 INFO:Setup completed successfully.
2025/03/18 08:20 DEBUG:Calling pagesetup with args={args}, kwargs={kwargs}
2025/03/18 08:20 INFO:Running Menu setup...
2025/03/18 08:20 DEBUG:Calling pagesetup with args={args}, kwargs={kwargs}
2025/03/18 08:20 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:20 INFO:get_git_version executed successfully
2025/03/18 08:20 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:20 INFO:get_git_version executed successfully
2025/03/18 08:20 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:20 INFO:get_git_version executed successfully
2025/03/18 08:20 ERROR:Error in pagesetup: invalid syntax (modular_page_blocks.py, line 55)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 10, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 16, in <module>
    from components.modular_page_blocks import (
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 55
    set filter_list to a dictionary
        ^^^^^^^^^^^
SyntaxError: invalid syntax
2025/03/18 08:20 ERROR:Error in pagesetup: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo\app_pages\headlinefigures.py)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 10, in pagesetup
    from app_pages.headlinefigures import hlf_body
ImportError: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo\app_pages\headlinefigures.py)
2025/03/18 08:20 CRITICAL:Menu setup crashed: invalid syntax (modular_page_blocks.py, line 55)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 10, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 16, in <module>
    from components.modular_page_blocks import (
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 55
    set filter_list to a dictionary
        ^^^^^^^^^^^
SyntaxError: invalid syntax
2025/03/18 08:20 CRITICAL:Menu setup crashed: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo\app_pages\headlinefigures.py)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 10, in pagesetup
    from app_pages.headlinefigures import hlf_body
ImportError: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo\app_pages\headlinefigures.py)
2025/03/18 08:21 INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/18 08:21 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:21 INFO:get_git_version executed successfully
2025/03/18 08:22 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:22 INFO:get_git_version executed successfully
2025/03/18 08:22 INFO:Streamlit App Starting...
2025/03/18 08:22 INFO:Streamlit App Starting...
2025/03/18 08:22 INFO:Streamlit App Starting...
2025/03/18 08:22 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:22 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:22 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:22 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:22 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:22 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:22 INFO:Running App setup...
2025/03/18 08:22 INFO:Running App setup...
2025/03/18 08:22 INFO:Running App setup...
2025/03/18 08:22 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:22 INFO:Setting up the package
2025/03/18 08:22 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:22 INFO:Setting up the package
2025/03/18 08:22 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:22 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:22 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:22 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:22 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:22 INFO:Setting up the package
2025/03/18 08:22 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:22 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:22 INFO:get_git_version executed successfully
2025/03/18 08:22 INFO:get_git_version executed successfully
2025/03/18 08:22 INFO:Version: v39.172
2025/03/18 08:22 INFO:Version: v39.172
2025/03/18 08:22 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:22 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:22 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:22 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:22 DEBUG:Initialised BASE_DIR with value: {}
2025/03/18 08:22 DEBUG:Initialised BASE_DIR with value: {}
2025/03/18 08:22 DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:22 DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:22 DEBUG:Initialised PLACEHOLDER_DATE with value: {}
2025/03/18 08:22 DEBUG:Initialised PLACEHOLDER_DATE with value: {}
2025/03/18 08:22 DEBUG:Initialised PLACEHOLDER_ID with value: {}
2025/03/18 08:22 DEBUG:Initialised PLACEHOLDER_ID with value: {}
2025/03/18 08:22 DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:22 DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:22 DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:22 DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:22 DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:22 DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:22 DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:22 DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:22 DEBUG:Initialised perc_target with value: {}
2025/03/18 08:22 DEBUG:Initialised perc_target with value: {}
2025/03/18 08:22 DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: {}
2025/03/18 08:22 DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: {}
2025/03/18 08:22 DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:22 DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:22 DEBUG:Initialised reference_dir with value: {}
2025/03/18 08:22 DEBUG:Initialised data_dir with value: {}
2025/03/18 08:22 DEBUG:Initialised reference_dir with value: {}
2025/03/18 08:22 DEBUG:Initialised output_dir with value: {}
2025/03/18 08:22 DEBUG:Initialised data_dir with value: {}
2025/03/18 08:22 DEBUG:Initialised logs_dir with value: {}
2025/03/18 08:22 DEBUG:Initialised output_dir with value: {}
2025/03/18 08:22 DEBUG:Initialised components_dir with value: {}
2025/03/18 08:22 DEBUG:Initialised logs_dir with value: {}
2025/03/18 08:22 DEBUG:Initialised app_pages_dir with value: {}
2025/03/18 08:22 DEBUG:Initialised components_dir with value: {}
2025/03/18 08:22 DEBUG:Initialised utils_dir with value: {}
2025/03/18 08:22 DEBUG:Initialised app_pages_dir with value: {}
2025/03/18 08:22 DEBUG:Initialised Donor_dedupe_cleaned_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised utils_dir with value: {}
2025/03/18 08:22 DEBUG:Initialised ListofPoliticalPeople_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised Donor_dedupe_cleaned_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised mppartymemb_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised ListofPoliticalPeople_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised donor_map_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised mppartymemb_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised politician_party_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised donor_map_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised regentity_map_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised politician_party_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised original_data_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised regentity_map_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised CREDENTIALS_FILE with value: {}
2025/03/18 08:22 DEBUG:Initialised original_data_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised TEXT_FILE with value: {}
2025/03/18 08:22 DEBUG:Initialised CREDENTIALS_FILE with value: {}
2025/03/18 08:22 DEBUG:Initialised ELECTION_DATES with value: {}
2025/03/18 08:22 DEBUG:Initialised TEXT_FILE with value: {}
2025/03/18 08:22 DEBUG:Initialised LAST_MODIFIED_DATES with value: {}
2025/03/18 08:22 DEBUG:Initialised ELECTION_DATES with value: {}
2025/03/18 08:22 DEBUG:Initialised cleaned_data_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised LAST_MODIFIED_DATES with value: {}
2025/03/18 08:22 DEBUG:Initialised cleaned_donations_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised cleaned_data_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised cleaned_donorlist_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised cleaned_donations_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised cleaned_regentity_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised cleaned_donorlist_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised party_summary_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised cleaned_regentity_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised imported_raw_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised party_summary_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised source_data_fname with value: {}
2025/03/18 08:22 DEBUG:Initialised imported_raw_fname with value: {}
2025/03/18 08:22 INFO:Session_state variables initialized
2025/03/18 08:22 DEBUG:Initialised source_data_fname with value: {}
2025/03/18 08:22 DEBUG:logs_dir: {}
2025/03/18 08:22 INFO:Session_state variables initialized
2025/03/18 08:22 DEBUG:cleaned_data_fname: {}
2025/03/18 08:22 DEBUG:logs_dir: {}
2025/03/18 08:22 DEBUG:donor_map_fname: {}
2025/03/18 08:22 DEBUG:cleaned_data_fname: {}
2025/03/18 08:22 DEBUG:Donor_dedupe_cleaned_fname: {}
2025/03/18 08:22 DEBUG:donor_map_fname: {}
2025/03/18 08:22 DEBUG:PLACEHOLDER_ID: {}
2025/03/18 08:22 DEBUG:Donor_dedupe_cleaned_fname: {}
2025/03/18 08:22 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:22 DEBUG:PLACEHOLDER_ID: {}
2025/03/18 08:22 DEBUG:components_dir: {}
2025/03/18 08:22 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:22 DEBUG:party_summary_fname: {}
2025/03/18 08:22 DEBUG:components_dir: {}
2025/03/18 08:22 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:22 DEBUG:party_summary_fname: {}
2025/03/18 08:22 DEBUG:cleaned_donorlist_fname: {}
2025/03/18 08:22 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:22 DEBUG:politician_party_fname: {}
2025/03/18 08:22 DEBUG:cleaned_donorlist_fname: {}
2025/03/18 08:22 DEBUG:imported_raw_fname: {}
2025/03/18 08:22 DEBUG:politician_party_fname: {}
2025/03/18 08:22 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: {}
2025/03/18 08:22 DEBUG:imported_raw_fname: {}
2025/03/18 08:22 DEBUG:TEXT_FILE: {}
2025/03/18 08:22 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: {}
2025/03/18 08:22 DEBUG:utils_dir: {}
2025/03/18 08:22 DEBUG:TEXT_FILE: {}
2025/03/18 08:22 DEBUG:CREDENTIALS_FILE: {}
2025/03/18 08:22 DEBUG:utils_dir: {}
2025/03/18 08:22 DEBUG:BASE_DIR: {}
2025/03/18 08:22 DEBUG:CREDENTIALS_FILE: {}
2025/03/18 08:22 DEBUG:LAST_MODIFIED_DATES: {}
2025/03/18 08:22 DEBUG:BASE_DIR: {}
2025/03/18 08:22 DEBUG:original_data_fname: {}
2025/03/18 08:22 DEBUG:LAST_MODIFIED_DATES: {}
2025/03/18 08:22 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:22 DEBUG:original_data_fname: {}
2025/03/18 08:22 DEBUG:regentity_map_fname: {}
2025/03/18 08:22 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:22 DEBUG:ELECTION_DATES: {}
2025/03/18 08:22 DEBUG:regentity_map_fname: {}
2025/03/18 08:22 DEBUG:cleaned_donations_fname: {}
2025/03/18 08:22 DEBUG:ELECTION_DATES: {}
2025/03/18 08:22 DEBUG:reference_dir: {}
2025/03/18 08:22 DEBUG:cleaned_donations_fname: {}
2025/03/18 08:22 DEBUG:source_data_fname: {}
2025/03/18 08:22 DEBUG:reference_dir: {}
2025/03/18 08:22 DEBUG:perc_target: {}
2025/03/18 08:22 DEBUG:source_data_fname: {}
2025/03/18 08:22 DEBUG:app_pages_dir: {}
2025/03/18 08:22 DEBUG:perc_target: {}
2025/03/18 08:22 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:22 DEBUG:app_pages_dir: {}
2025/03/18 08:22 DEBUG:PLACEHOLDER_DATE: {}
2025/03/18 08:22 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:22 DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:22 DEBUG:PLACEHOLDER_DATE: {}
2025/03/18 08:22 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:22 DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:22 DEBUG:data_dir: {}
2025/03/18 08:22 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:22 DEBUG:ListofPoliticalPeople_fname: {}
2025/03/18 08:22 DEBUG:data_dir: {}
2025/03/18 08:22 DEBUG:cleaned_regentity_fname: {}
2025/03/18 08:22 DEBUG:ListofPoliticalPeople_fname: {}
2025/03/18 08:22 DEBUG:mppartymemb_fname: {}
2025/03/18 08:22 DEBUG:cleaned_regentity_fname: {}
2025/03/18 08:22 DEBUG:output_dir: {}
2025/03/18 08:22 DEBUG:mppartymemb_fname: {}
2025/03/18 08:22 INFO:Session state Setup complete
2025/03/18 08:22 DEBUG:output_dir: {}
2025/03/18 08:22 INFO:initialize_session_state executed successfully
2025/03/18 08:22 INFO:Session state Setup complete
2025/03/18 08:22 INFO:Package setup complete
2025/03/18 08:22 INFO:initialize_session_state executed successfully
2025/03/18 08:22 INFO:setup_package executed successfully
2025/03/18 08:22 INFO:Package setup complete
2025/03/18 08:22 INFO:Setup completed successfully.
2025/03/18 08:22 INFO:setup_package executed successfully
2025/03/18 08:22 INFO:Running Menu setup...
2025/03/18 08:22 INFO:Setup completed successfully.
2025/03/18 08:22 DEBUG:Calling pagesetup with args={args}, kwargs={kwargs}
2025/03/18 08:22 INFO:Running Menu setup...
2025/03/18 08:22 DEBUG:Calling pagesetup with args={args}, kwargs={kwargs}
2025/03/18 08:22 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:22 INFO:get_git_version executed successfully
2025/03/18 08:22 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:22 ERROR:Error in pagesetup: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo\app_pages\headlinefigures.py)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 10, in pagesetup
    from app_pages.headlinefigures import hlf_body
ImportError: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo\app_pages\headlinefigures.py)
2025/03/18 08:22 CRITICAL:Menu setup crashed: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo\app_pages\headlinefigures.py)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 10, in pagesetup
    from app_pages.headlinefigures import hlf_body
ImportError: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo\app_pages\headlinefigures.py)
2025/03/18 08:26 INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/18 08:26 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:get_git_version executed successfully
2025/03/18 08:26 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:get_git_version executed successfully
2025/03/18 08:26 INFO:Streamlit App Starting...
2025/03/18 08:26 INFO:Streamlit App Starting...
2025/03/18 08:26 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:26 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:26 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:26 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:26 INFO:Running App setup...
2025/03/18 08:26 INFO:Running App setup...
2025/03/18 08:26 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:26 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:Setting up the package
2025/03/18 08:26 INFO:Setting up the package
2025/03/18 08:26 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:26 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:26 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:26 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:get_git_version executed successfully
2025/03/18 08:26 INFO:get_git_version executed successfully
2025/03/18 08:26 INFO:Version: v39.172
2025/03/18 08:26 INFO:Version: v39.172
2025/03/18 08:26 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:26 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:26 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:26 DEBUG:Initialised BASE_DIR with value: {}
2025/03/18 08:26 DEBUG:Initialised BASE_DIR with value: {}
2025/03/18 08:26 DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:26 DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:26 DEBUG:Initialised PLACEHOLDER_DATE with value: {}
2025/03/18 08:26 DEBUG:Initialised PLACEHOLDER_DATE with value: {}
2025/03/18 08:26 DEBUG:Initialised PLACEHOLDER_ID with value: {}
2025/03/18 08:26 DEBUG:Initialised PLACEHOLDER_ID with value: {}
2025/03/18 08:26 DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:26 DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:26 DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:26 DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:26 DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:26 DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:26 DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:26 DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:26 DEBUG:Initialised perc_target with value: {}
2025/03/18 08:26 DEBUG:Initialised perc_target with value: {}
2025/03/18 08:26 DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: {}
2025/03/18 08:26 DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: {}
2025/03/18 08:26 DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:26 DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:26 DEBUG:Initialised reference_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised data_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised reference_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised output_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised data_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised logs_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised output_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised components_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised logs_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised app_pages_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised components_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised utils_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised app_pages_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised Donor_dedupe_cleaned_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised utils_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised ListofPoliticalPeople_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised Donor_dedupe_cleaned_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised mppartymemb_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised ListofPoliticalPeople_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised donor_map_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised mppartymemb_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised politician_party_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised donor_map_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised regentity_map_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised politician_party_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised original_data_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised regentity_map_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised CREDENTIALS_FILE with value: {}
2025/03/18 08:26 DEBUG:Initialised original_data_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised TEXT_FILE with value: {}
2025/03/18 08:26 DEBUG:Initialised CREDENTIALS_FILE with value: {}
2025/03/18 08:26 DEBUG:Initialised ELECTION_DATES with value: {}
2025/03/18 08:26 DEBUG:Initialised TEXT_FILE with value: {}
2025/03/18 08:26 DEBUG:Initialised LAST_MODIFIED_DATES with value: {}
2025/03/18 08:26 DEBUG:Initialised ELECTION_DATES with value: {}
2025/03/18 08:26 DEBUG:Initialised cleaned_data_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised LAST_MODIFIED_DATES with value: {}
2025/03/18 08:26 DEBUG:Initialised cleaned_donations_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised cleaned_data_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised cleaned_donorlist_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised cleaned_donations_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised cleaned_regentity_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised cleaned_donorlist_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised party_summary_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised cleaned_regentity_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised imported_raw_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised party_summary_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised source_data_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised imported_raw_fname with value: {}
2025/03/18 08:26 INFO:Session_state variables initialized
2025/03/18 08:26 DEBUG:Initialised source_data_fname with value: {}
2025/03/18 08:26 DEBUG:cleaned_regentity_fname: {}
2025/03/18 08:26 INFO:Session_state variables initialized
2025/03/18 08:26 DEBUG:TEXT_FILE: {}
2025/03/18 08:26 DEBUG:cleaned_regentity_fname: {}
2025/03/18 08:26 DEBUG:components_dir: {}
2025/03/18 08:26 DEBUG:TEXT_FILE: {}
2025/03/18 08:26 DEBUG:donor_map_fname: {}
2025/03/18 08:26 DEBUG:components_dir: {}
2025/03/18 08:26 DEBUG:cleaned_donations_fname: {}
2025/03/18 08:26 DEBUG:donor_map_fname: {}
2025/03/18 08:26 DEBUG:original_data_fname: {}
2025/03/18 08:26 DEBUG:cleaned_donations_fname: {}
2025/03/18 08:26 DEBUG:cleaned_data_fname: {}
2025/03/18 08:26 DEBUG:original_data_fname: {}
2025/03/18 08:26 DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:26 DEBUG:cleaned_data_fname: {}
2025/03/18 08:26 DEBUG:reference_dir: {}
2025/03/18 08:26 DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:26 DEBUG:utils_dir: {}
2025/03/18 08:26 DEBUG:reference_dir: {}
2025/03/18 08:26 DEBUG:LAST_MODIFIED_DATES: {}
2025/03/18 08:26 DEBUG:utils_dir: {}
2025/03/18 08:26 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:26 DEBUG:LAST_MODIFIED_DATES: {}
2025/03/18 08:26 DEBUG:source_data_fname: {}
2025/03/18 08:26 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:26 DEBUG:PLACEHOLDER_ID: {}
2025/03/18 08:26 DEBUG:source_data_fname: {}
2025/03/18 08:26 DEBUG:output_dir: {}
2025/03/18 08:26 DEBUG:PLACEHOLDER_ID: {}
2025/03/18 08:26 DEBUG:cleaned_donorlist_fname: {}
2025/03/18 08:26 DEBUG:output_dir: {}
2025/03/18 08:26 DEBUG:CREDENTIALS_FILE: {}
2025/03/18 08:26 DEBUG:cleaned_donorlist_fname: {}
2025/03/18 08:26 DEBUG:regentity_map_fname: {}
2025/03/18 08:26 DEBUG:CREDENTIALS_FILE: {}
2025/03/18 08:26 DEBUG:logs_dir: {}
2025/03/18 08:26 DEBUG:regentity_map_fname: {}
2025/03/18 08:26 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: {}
2025/03/18 08:26 DEBUG:logs_dir: {}
2025/03/18 08:26 DEBUG:BASE_DIR: {}
2025/03/18 08:26 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: {}
2025/03/18 08:26 DEBUG:ELECTION_DATES: {}
2025/03/18 08:26 DEBUG:BASE_DIR: {}
2025/03/18 08:26 DEBUG:imported_raw_fname: {}
2025/03/18 08:26 DEBUG:ELECTION_DATES: {}
2025/03/18 08:26 DEBUG:party_summary_fname: {}
2025/03/18 08:26 DEBUG:imported_raw_fname: {}
2025/03/18 08:26 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:26 DEBUG:party_summary_fname: {}
2025/03/18 08:26 DEBUG:data_dir: {}
2025/03/18 08:26 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:26 DEBUG:app_pages_dir: {}
2025/03/18 08:26 DEBUG:data_dir: {}
2025/03/18 08:26 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:26 DEBUG:app_pages_dir: {}
2025/03/18 08:26 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:26 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:26 DEBUG:Donor_dedupe_cleaned_fname: {}
2025/03/18 08:26 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:26 DEBUG:perc_target: {}
2025/03/18 08:26 DEBUG:Donor_dedupe_cleaned_fname: {}
2025/03/18 08:26 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:26 DEBUG:perc_target: {}
2025/03/18 08:26 DEBUG:politician_party_fname: {}
2025/03/18 08:26 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:26 DEBUG:ListofPoliticalPeople_fname: {}
2025/03/18 08:26 DEBUG:politician_party_fname: {}
2025/03/18 08:26 DEBUG:mppartymemb_fname: {}
2025/03/18 08:26 DEBUG:ListofPoliticalPeople_fname: {}
2025/03/18 08:26 DEBUG:PLACEHOLDER_DATE: {}
2025/03/18 08:26 DEBUG:mppartymemb_fname: {}
2025/03/18 08:26 INFO:Session state Setup complete
2025/03/18 08:26 DEBUG:PLACEHOLDER_DATE: {}
2025/03/18 08:26 INFO:initialize_session_state executed successfully
2025/03/18 08:26 INFO:Session state Setup complete
2025/03/18 08:26 INFO:Package setup complete
2025/03/18 08:26 INFO:initialize_session_state executed successfully
2025/03/18 08:26 INFO:setup_package executed successfully
2025/03/18 08:26 INFO:Package setup complete
2025/03/18 08:26 INFO:Setup completed successfully.
2025/03/18 08:26 INFO:setup_package executed successfully
2025/03/18 08:26 INFO:Running Menu setup...
2025/03/18 08:26 INFO:Setup completed successfully.
2025/03/18 08:26 DEBUG:Calling pagesetup with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:Running Menu setup...
2025/03/18 08:26 DEBUG:Calling pagesetup with args={args}, kwargs={kwargs}
2025/03/18 08:26 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:get_git_version executed successfully
2025/03/18 08:26 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:get_git_version executed successfully
2025/03/18 08:26 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:get_git_version executed successfully
2025/03/18 08:26 ERROR:Error in pagesetup: expected an indented block after 'if' statement on line 234 (modular_page_blocks.py, line 235)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 10, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 16, in <module>
    from components.modular_page_blocks import (
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 235
    st.session_state["filter_def"] = st.session_state["filter_def"][0] 
    ^^
IndentationError: expected an indented block after 'if' statement on line 234
2025/03/18 08:26 ERROR:Error in pagesetup: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo\app_pages\headlinefigures.py)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 10, in pagesetup
    from app_pages.headlinefigures import hlf_body
ImportError: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo\app_pages\headlinefigures.py)
2025/03/18 08:26 CRITICAL:Menu setup crashed: expected an indented block after 'if' statement on line 234 (modular_page_blocks.py, line 235)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 10, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo\app_pages\headlinefigures.py", line 16, in <module>
    from components.modular_page_blocks import (
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 235
    st.session_state["filter_def"] = st.session_state["filter_def"][0] 
    ^^
IndentationError: expected an indented block after 'if' statement on line 234
2025/03/18 08:26 CRITICAL:Menu setup crashed: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo\app_pages\headlinefigures.py)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 10, in pagesetup
    from app_pages.headlinefigures import hlf_body
ImportError: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo\app_pages\headlinefigures.py)
2025/03/18 08:26 INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/18 08:26 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:get_git_version executed successfully
2025/03/18 08:26 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:get_git_version executed successfully
2025/03/18 08:26 INFO:Streamlit App Starting...
2025/03/18 08:26 INFO:Streamlit App Starting...
2025/03/18 08:26 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:26 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:26 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:26 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:26 INFO:Running App setup...
2025/03/18 08:26 INFO:Running App setup...
2025/03/18 08:26 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:26 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:Setting up the package
2025/03/18 08:26 INFO:Setting up the package
2025/03/18 08:26 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:26 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:26 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:26 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:get_git_version executed successfully
2025/03/18 08:26 INFO:get_git_version executed successfully
2025/03/18 08:26 INFO:Version: v39.172
2025/03/18 08:26 INFO:Version: v39.172
2025/03/18 08:26 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:26 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:26 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:26 DEBUG:Initialised BASE_DIR with value: {}
2025/03/18 08:26 DEBUG:Initialised BASE_DIR with value: {}
2025/03/18 08:26 DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:26 DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:26 DEBUG:Initialised PLACEHOLDER_DATE with value: {}
2025/03/18 08:26 DEBUG:Initialised PLACEHOLDER_DATE with value: {}
2025/03/18 08:26 DEBUG:Initialised PLACEHOLDER_ID with value: {}
2025/03/18 08:26 DEBUG:Initialised PLACEHOLDER_ID with value: {}
2025/03/18 08:26 DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:26 DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:26 DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:26 DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:26 DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:26 DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:26 DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:26 DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:26 DEBUG:Initialised perc_target with value: {}
2025/03/18 08:26 DEBUG:Initialised perc_target with value: {}
2025/03/18 08:26 DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: {}
2025/03/18 08:26 DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: {}
2025/03/18 08:26 DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:26 DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:26 DEBUG:Initialised reference_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised data_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised output_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised reference_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised logs_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised data_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised components_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised output_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised app_pages_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised logs_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised utils_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised components_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised Donor_dedupe_cleaned_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised app_pages_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised ListofPoliticalPeople_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised utils_dir with value: {}
2025/03/18 08:26 DEBUG:Initialised mppartymemb_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised Donor_dedupe_cleaned_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised donor_map_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised ListofPoliticalPeople_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised politician_party_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised mppartymemb_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised regentity_map_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised donor_map_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised original_data_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised politician_party_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised CREDENTIALS_FILE with value: {}
2025/03/18 08:26 DEBUG:Initialised regentity_map_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised TEXT_FILE with value: {}
2025/03/18 08:26 DEBUG:Initialised original_data_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised ELECTION_DATES with value: {}
2025/03/18 08:26 DEBUG:Initialised CREDENTIALS_FILE with value: {}
2025/03/18 08:26 DEBUG:Initialised LAST_MODIFIED_DATES with value: {}
2025/03/18 08:26 DEBUG:Initialised TEXT_FILE with value: {}
2025/03/18 08:26 DEBUG:Initialised cleaned_data_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised ELECTION_DATES with value: {}
2025/03/18 08:26 DEBUG:Initialised cleaned_donations_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised LAST_MODIFIED_DATES with value: {}
2025/03/18 08:26 DEBUG:Initialised cleaned_donorlist_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised cleaned_data_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised cleaned_regentity_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised cleaned_donations_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised party_summary_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised cleaned_donorlist_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised imported_raw_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised cleaned_regentity_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised source_data_fname with value: {}
2025/03/18 08:26 DEBUG:Initialised party_summary_fname with value: {}
2025/03/18 08:26 INFO:Session_state variables initialized
2025/03/18 08:26 DEBUG:Initialised imported_raw_fname with value: {}
2025/03/18 08:26 DEBUG:perc_target: {}
2025/03/18 08:26 DEBUG:Initialised source_data_fname with value: {}
2025/03/18 08:26 DEBUG:source_data_fname: {}
2025/03/18 08:26 INFO:Session_state variables initialized
2025/03/18 08:26 DEBUG:ELECTION_DATES: {}
2025/03/18 08:26 DEBUG:perc_target: {}
2025/03/18 08:26 DEBUG:utils_dir: {}
2025/03/18 08:26 DEBUG:source_data_fname: {}
2025/03/18 08:26 DEBUG:TEXT_FILE: {}
2025/03/18 08:26 DEBUG:ELECTION_DATES: {}
2025/03/18 08:26 DEBUG:imported_raw_fname: {}
2025/03/18 08:26 DEBUG:utils_dir: {}
2025/03/18 08:26 DEBUG:party_summary_fname: {}
2025/03/18 08:26 DEBUG:TEXT_FILE: {}
2025/03/18 08:26 DEBUG:regentity_map_fname: {}
2025/03/18 08:26 DEBUG:imported_raw_fname: {}
2025/03/18 08:26 DEBUG:output_dir: {}
2025/03/18 08:26 DEBUG:party_summary_fname: {}
2025/03/18 08:26 DEBUG:CREDENTIALS_FILE: {}
2025/03/18 08:26 DEBUG:regentity_map_fname: {}
2025/03/18 08:26 DEBUG:logs_dir: {}
2025/03/18 08:26 DEBUG:output_dir: {}
2025/03/18 08:26 DEBUG:data_dir: {}
2025/03/18 08:26 DEBUG:CREDENTIALS_FILE: {}
2025/03/18 08:26 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:26 DEBUG:logs_dir: {}
2025/03/18 08:26 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:26 DEBUG:data_dir: {}
2025/03/18 08:26 DEBUG:components_dir: {}
2025/03/18 08:26 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:26 DEBUG:BASE_DIR: {}
2025/03/18 08:26 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:26 DEBUG:Donor_dedupe_cleaned_fname: {}
2025/03/18 08:26 DEBUG:components_dir: {}
2025/03/18 08:26 DEBUG:reference_dir: {}
2025/03/18 08:26 DEBUG:BASE_DIR: {}
2025/03/18 08:26 DEBUG:cleaned_regentity_fname: {}
2025/03/18 08:26 DEBUG:Donor_dedupe_cleaned_fname: {}
2025/03/18 08:26 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:26 DEBUG:reference_dir: {}
2025/03/18 08:26 DEBUG:cleaned_donorlist_fname: {}
2025/03/18 08:26 DEBUG:cleaned_regentity_fname: {}
2025/03/18 08:26 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: {}
2025/03/18 08:26 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:26 DEBUG:PLACEHOLDER_ID: {}
2025/03/18 08:26 DEBUG:cleaned_donorlist_fname: {}
2025/03/18 08:26 DEBUG:politician_party_fname: {}
2025/03/18 08:26 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: {}
2025/03/18 08:26 DEBUG:mppartymemb_fname: {}
2025/03/18 08:26 DEBUG:PLACEHOLDER_ID: {}
2025/03/18 08:26 DEBUG:LAST_MODIFIED_DATES: {}
2025/03/18 08:26 DEBUG:politician_party_fname: {}
2025/03/18 08:26 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:26 DEBUG:mppartymemb_fname: {}
2025/03/18 08:26 DEBUG:donor_map_fname: {}
2025/03/18 08:26 DEBUG:LAST_MODIFIED_DATES: {}
2025/03/18 08:26 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:26 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:26 DEBUG:cleaned_data_fname: {}
2025/03/18 08:26 DEBUG:donor_map_fname: {}
2025/03/18 08:26 DEBUG:cleaned_donations_fname: {}
2025/03/18 08:26 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:26 DEBUG:ListofPoliticalPeople_fname: {}
2025/03/18 08:26 DEBUG:cleaned_data_fname: {}
2025/03/18 08:26 DEBUG:app_pages_dir: {}
2025/03/18 08:26 DEBUG:cleaned_donations_fname: {}
2025/03/18 08:26 DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:26 DEBUG:ListofPoliticalPeople_fname: {}
2025/03/18 08:26 DEBUG:PLACEHOLDER_DATE: {}
2025/03/18 08:26 DEBUG:app_pages_dir: {}
2025/03/18 08:26 DEBUG:original_data_fname: {}
2025/03/18 08:26 DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:26 INFO:Session state Setup complete
2025/03/18 08:26 DEBUG:PLACEHOLDER_DATE: {}
2025/03/18 08:26 INFO:initialize_session_state executed successfully
2025/03/18 08:26 DEBUG:original_data_fname: {}
2025/03/18 08:26 INFO:Package setup complete
2025/03/18 08:26 INFO:Session state Setup complete
2025/03/18 08:26 INFO:setup_package executed successfully
2025/03/18 08:26 INFO:initialize_session_state executed successfully
2025/03/18 08:26 INFO:Setup completed successfully.
2025/03/18 08:26 INFO:Package setup complete
2025/03/18 08:26 INFO:Running Menu setup...
2025/03/18 08:26 INFO:setup_package executed successfully
2025/03/18 08:26 DEBUG:Calling pagesetup with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:Setup completed successfully.
2025/03/18 08:26 INFO:Running Menu setup...
2025/03/18 08:26 DEBUG:Calling pagesetup with args={args}, kwargs={kwargs}
2025/03/18 08:26 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:get_git_version executed successfully
2025/03/18 08:26 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:get_git_version executed successfully
2025/03/18 08:26 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:get_git_version executed successfully
2025/03/18 08:26 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:26 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:get_git_version executed successfully
2025/03/18 08:26 INFO:get_git_version executed successfully
2025/03/18 08:26 INFO:App Version: v39.201
2025/03/18 08:26 INFO:App Version: v39.201
2025/03/18 08:26 INFO:Switched to page: Introduction
2025/03/18 08:26 INFO:Switched to page: Introduction
2025/03/18 08:26 INFO:pagesetup executed successfully
2025/03/18 08:26 INFO:Menu setup completed successfully.
2025/03/18 08:26 INFO:pagesetup executed successfully
2025/03/18 08:26 DEBUG:Calling initialise_data with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:Menu setup completed successfully.
2025/03/18 08:26 INFO:Running first load function.
2025/03/18 08:26 DEBUG:Calling firstload with args={args}, kwargs={kwargs}
2025/03/18 08:26 DEBUG:Calling get_raw_data with args={args}, kwargs={kwargs}
2025/03/18 08:26 DEBUG:Calling load_raw_data with args={args}, kwargs={kwargs}
2025/03/18 08:26 DEBUG:Original data file path pre raw data load: source_data_fname
2025/03/18 08:26 DEBUG:Processed data file path pre raw data load: imported_raw_fname
2025/03/18 08:26 DEBUG:Calling try_to_use_preprocessed_data with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:Original file path: {}
2025/03/18 08:26 INFO:Saved file path: {}
2025/03/18 08:26 DEBUG:Calling is_file_updated with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:Checking if {} has been updated.
2025/03/18 08:26 DEBUG:Calling get_file_modification_time with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:Getting modification time for {}
2025/03/18 08:26 ERROR:Error in get_file_modification_time: stat: path should be string, bytes, os.PathLike or integer, not dict
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 83, in get_file_modification_time
    if os.path.exists(filepath):
  File "H:\python310\lib\genericpath.py", line 19, in exists
    os.stat(path)
TypeError: stat: path should be string, bytes, os.PathLike or integer, not dict
2025/03/18 08:26 CRITICAL:First load crashed: stat: path should be string, bytes, os.PathLike or integer, not dict
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 242, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 299, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 242, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 299, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 72, in firstload
    load_data_to_session("raw_data", get_raw_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 242, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 299, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 13, in get_raw_data
    return load_raw_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 242, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 299, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\datasetupandclean.py", line 50, in load_raw_data
    loaddata_df = try_to_use_preprocessed_data(
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 242, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 299, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 28, in try_to_use_preprocessed_data
    if not is_file_updated(originalfilepath,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 100, in is_file_updated
    current_mod_time = get_file_modification_time(main_file)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 83, in get_file_modification_time
    if os.path.exists(filepath):
  File "H:\python310\lib\genericpath.py", line 19, in exists
    os.stat(path)
TypeError: stat: path should be string, bytes, os.PathLike or integer, not dict
2025/03/18 08:26 DEBUG:Calling initialise_data with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:Running first load function.
2025/03/18 08:26 DEBUG:Calling firstload with args={args}, kwargs={kwargs}
2025/03/18 08:26 DEBUG:Calling get_raw_data with args={args}, kwargs={kwargs}
2025/03/18 08:26 DEBUG:Calling load_raw_data with args={args}, kwargs={kwargs}
2025/03/18 08:26 DEBUG:Original data file path pre raw data load: source_data_fname
2025/03/18 08:26 DEBUG:Processed data file path pre raw data load: imported_raw_fname
2025/03/18 08:26 DEBUG:Calling try_to_use_preprocessed_data with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:Original file path: {}
2025/03/18 08:26 INFO:Saved file path: {}
2025/03/18 08:26 DEBUG:Calling is_file_updated with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:Checking if {} has been updated.
2025/03/18 08:26 DEBUG:Calling get_file_modification_time with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:Getting modification time for {}
2025/03/18 08:26 ERROR:Error in get_file_modification_time: stat: path should be string, bytes, os.PathLike or integer, not dict
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 83, in get_file_modification_time
    if os.path.exists(filepath):
  File "H:\python310\lib\genericpath.py", line 19, in exists
    os.stat(path)
TypeError: stat: path should be string, bytes, os.PathLike or integer, not dict
2025/03/18 08:26 CRITICAL:First load crashed: stat: path should be string, bytes, os.PathLike or integer, not dict
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 64, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 242, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 299, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 242, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 299, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 72, in firstload
    load_data_to_session("raw_data", get_raw_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 242, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 299, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 13, in get_raw_data
    return load_raw_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 242, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 299, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\datasetupandclean.py", line 50, in load_raw_data
    loaddata_df = try_to_use_preprocessed_data(
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 242, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 299, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 28, in try_to_use_preprocessed_data
    if not is_file_updated(originalfilepath,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 100, in is_file_updated
    current_mod_time = get_file_modification_time(main_file)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 83, in get_file_modification_time
    if os.path.exists(filepath):
  File "H:\python310\lib\genericpath.py", line 19, in exists
    os.stat(path)
TypeError: stat: path should be string, bytes, os.PathLike or integer, not dict
2025/03/18 08:26 INFO:Streamlit App Starting...
2025/03/18 08:26 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:26 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:26 INFO:Running App setup...
2025/03/18 08:26 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:Setting up the package
2025/03/18 08:26 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:26 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:get_git_version executed successfully
2025/03/18 08:26 INFO:Version: v39.172
2025/03/18 08:26 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:26 DEBUG:BASE_DIR already exists in session state
2025/03/18 08:26 DEBUG:filenames already exists in session state
2025/03/18 08:26 DEBUG:PLACEHOLDER_DATE already exists in session state
2025/03/18 08:26 DEBUG:PLACEHOLDER_ID already exists in session state
2025/03/18 08:26 DEBUG:thresholds already exists in session state
2025/03/18 08:26 DEBUG:data_remappings already exists in session state
2025/03/18 08:26 DEBUG:filter_def already exists in session state
2025/03/18 08:26 DEBUG:security already exists in session state
2025/03/18 08:26 DEBUG:perc_target already exists in session state
2025/03/18 08:26 DEBUG:RERUN_MP_PARTY_MEMBERSHIP already exists in session state
2025/03/18 08:26 DEBUG:directories already exists in session state
2025/03/18 08:26 DEBUG:reference_dir already exists in session state
2025/03/18 08:26 DEBUG:data_dir already exists in session state
2025/03/18 08:26 DEBUG:output_dir already exists in session state
2025/03/18 08:26 DEBUG:logs_dir already exists in session state
2025/03/18 08:26 DEBUG:components_dir already exists in session state
2025/03/18 08:26 DEBUG:app_pages_dir already exists in session state
2025/03/18 08:26 DEBUG:utils_dir already exists in session state
2025/03/18 08:26 DEBUG:Donor_dedupe_cleaned_fname already exists in session state
2025/03/18 08:26 DEBUG:ListofPoliticalPeople_fname already exists in session state
2025/03/18 08:26 DEBUG:mppartymemb_fname already exists in session state
2025/03/18 08:26 DEBUG:donor_map_fname already exists in session state
2025/03/18 08:26 DEBUG:politician_party_fname already exists in session state
2025/03/18 08:26 DEBUG:regentity_map_fname already exists in session state
2025/03/18 08:26 DEBUG:original_data_fname already exists in session state
2025/03/18 08:26 DEBUG:CREDENTIALS_FILE already exists in session state
2025/03/18 08:26 DEBUG:TEXT_FILE already exists in session state
2025/03/18 08:26 DEBUG:ELECTION_DATES already exists in session state
2025/03/18 08:26 DEBUG:LAST_MODIFIED_DATES already exists in session state
2025/03/18 08:26 DEBUG:cleaned_data_fname already exists in session state
2025/03/18 08:26 DEBUG:cleaned_donations_fname already exists in session state
2025/03/18 08:26 DEBUG:cleaned_donorlist_fname already exists in session state
2025/03/18 08:26 DEBUG:cleaned_regentity_fname already exists in session state
2025/03/18 08:26 DEBUG:party_summary_fname already exists in session state
2025/03/18 08:26 DEBUG:imported_raw_fname already exists in session state
2025/03/18 08:26 DEBUG:source_data_fname already exists in session state
2025/03/18 08:26 INFO:Session_state variables initialized
2025/03/18 08:26 DEBUG:perc_target: {}
2025/03/18 08:26 DEBUG:source_data_fname: {}
2025/03/18 08:26 DEBUG:ELECTION_DATES: {}
2025/03/18 08:26 DEBUG:utils_dir: {}
2025/03/18 08:26 DEBUG:TEXT_FILE: {}
2025/03/18 08:26 DEBUG:imported_raw_fname: {}
2025/03/18 08:26 DEBUG:party_summary_fname: {}
2025/03/18 08:26 DEBUG:regentity_map_fname: {}
2025/03/18 08:26 DEBUG:output_dir: {}
2025/03/18 08:26 DEBUG:CREDENTIALS_FILE: {}
2025/03/18 08:26 DEBUG:logs_dir: {}
2025/03/18 08:26 DEBUG:data_dir: {}
2025/03/18 08:26 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:26 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:26 DEBUG:components_dir: {}
2025/03/18 08:26 DEBUG:BASE_DIR: {}
2025/03/18 08:26 DEBUG:Donor_dedupe_cleaned_fname: {}
2025/03/18 08:26 DEBUG:reference_dir: {}
2025/03/18 08:26 DEBUG:cleaned_regentity_fname: {}
2025/03/18 08:26 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:26 DEBUG:cleaned_donorlist_fname: {}
2025/03/18 08:26 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: {}
2025/03/18 08:26 DEBUG:PLACEHOLDER_ID: {}
2025/03/18 08:26 DEBUG:politician_party_fname: {}
2025/03/18 08:26 DEBUG:mppartymemb_fname: {}
2025/03/18 08:26 DEBUG:LAST_MODIFIED_DATES: {}
2025/03/18 08:26 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:26 DEBUG:donor_map_fname: {}
2025/03/18 08:26 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:26 DEBUG:cleaned_data_fname: {}
2025/03/18 08:26 DEBUG:cleaned_donations_fname: {}
2025/03/18 08:26 DEBUG:ListofPoliticalPeople_fname: {}
2025/03/18 08:26 DEBUG:menu_selection: {'title': 'Cash Donations', 'function': <function mod_cash_donations at 0x000001B6BEEFA560>}
2025/03/18 08:26 DEBUG:app_pages_dir: {}
2025/03/18 08:26 DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:26 DEBUG:error_logged: True
2025/03/18 08:26 DEBUG:PLACEHOLDER_DATE: {}
2025/03/18 08:26 DEBUG:original_data_fname: {}
2025/03/18 08:26 INFO:Session state Setup complete
2025/03/18 08:26 INFO:initialize_session_state executed successfully
2025/03/18 08:26 INFO:Package setup complete
2025/03/18 08:26 INFO:setup_package executed successfully
2025/03/18 08:26 INFO:Setup completed successfully.
2025/03/18 08:26 INFO:Running Menu setup...
2025/03/18 08:26 DEBUG:Calling pagesetup with args={args}, kwargs={kwargs}
2025/03/18 08:26 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:26 INFO:get_git_version executed successfully
2025/03/18 08:26 INFO:App Version: v39.201
2025/03/18 08:26 INFO:Switched to page: Cash Donations
2025/03/18 08:26 DEBUG:Calling display_data_page with args={args}, kwargs={kwargs}
2025/03/18 08:26 DEBUG:Calling load_and_filter_data with args={args}, kwargs={kwargs}
2025/03/18 08:26 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 455, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 500, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 129, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 100, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 94, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 457, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 179, in mod_cash_donations
    display_data_page(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page.py", line 22, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 131, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/18 08:28 INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/18 08:28 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:28 INFO:get_git_version executed successfully
2025/03/18 08:28 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:28 INFO:get_git_version executed successfully
2025/03/18 08:28 INFO:Streamlit App Starting...
2025/03/18 08:28 INFO:Streamlit App Starting...
2025/03/18 08:28 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:28 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:28 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:28 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:28 INFO:Running App setup...
2025/03/18 08:28 INFO:Running App setup...
2025/03/18 08:28 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:28 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:28 INFO:Setting up the package
2025/03/18 08:28 INFO:Setting up the package
2025/03/18 08:28 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:28 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:28 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:28 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:28 INFO:get_git_version executed successfully
2025/03/18 08:28 INFO:get_git_version executed successfully
2025/03/18 08:28 INFO:Version: v39.172
2025/03/18 08:28 INFO:Version: v39.172
2025/03/18 08:28 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:28 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:28 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:28 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:28 DEBUG:Initialised BASE_DIR with value: {}
2025/03/18 08:28 DEBUG:Initialised BASE_DIR with value: {}
2025/03/18 08:28 DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:28 DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:28 DEBUG:Initialised PLACEHOLDER_DATE with value: {}
2025/03/18 08:28 DEBUG:Initialised PLACEHOLDER_DATE with value: {}
2025/03/18 08:28 DEBUG:Initialised PLACEHOLDER_ID with value: {}
2025/03/18 08:28 DEBUG:Initialised PLACEHOLDER_ID with value: {}
2025/03/18 08:28 DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:28 DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:28 DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:28 DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:28 DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:28 DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:28 DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:28 DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:28 DEBUG:Initialised perc_target with value: {}
2025/03/18 08:28 DEBUG:Initialised perc_target with value: {}
2025/03/18 08:28 DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: {}
2025/03/18 08:28 DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: {}
2025/03/18 08:28 DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:28 DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:28 DEBUG:Initialised reference_dir with value: {}
2025/03/18 08:28 DEBUG:Initialised data_dir with value: {}
2025/03/18 08:28 DEBUG:Initialised reference_dir with value: {}
2025/03/18 08:28 DEBUG:Initialised output_dir with value: {}
2025/03/18 08:28 DEBUG:Initialised data_dir with value: {}
2025/03/18 08:28 DEBUG:Initialised logs_dir with value: {}
2025/03/18 08:28 DEBUG:Initialised output_dir with value: {}
2025/03/18 08:28 DEBUG:Initialised components_dir with value: {}
2025/03/18 08:28 DEBUG:Initialised logs_dir with value: {}
2025/03/18 08:28 DEBUG:Initialised app_pages_dir with value: {}
2025/03/18 08:28 DEBUG:Initialised components_dir with value: {}
2025/03/18 08:28 DEBUG:Initialised utils_dir with value: {}
2025/03/18 08:28 DEBUG:Initialised app_pages_dir with value: {}
2025/03/18 08:28 DEBUG:Initialised Donor_dedupe_cleaned_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised utils_dir with value: {}
2025/03/18 08:28 DEBUG:Initialised ListofPoliticalPeople_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised Donor_dedupe_cleaned_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised mppartymemb_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised ListofPoliticalPeople_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised donor_map_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised mppartymemb_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised politician_party_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised donor_map_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised regentity_map_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised politician_party_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised original_data_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised regentity_map_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised CREDENTIALS_FILE with value: {}
2025/03/18 08:28 DEBUG:Initialised original_data_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised TEXT_FILE with value: {}
2025/03/18 08:28 DEBUG:Initialised CREDENTIALS_FILE with value: {}
2025/03/18 08:28 DEBUG:Initialised ELECTION_DATES with value: {}
2025/03/18 08:28 DEBUG:Initialised TEXT_FILE with value: {}
2025/03/18 08:28 DEBUG:Initialised LAST_MODIFIED_DATES with value: {}
2025/03/18 08:28 DEBUG:Initialised ELECTION_DATES with value: {}
2025/03/18 08:28 DEBUG:Initialised cleaned_data_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised LAST_MODIFIED_DATES with value: {}
2025/03/18 08:28 DEBUG:Initialised cleaned_donations_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised cleaned_data_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised cleaned_donorlist_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised cleaned_donations_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised cleaned_regentity_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised cleaned_donorlist_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised party_summary_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised cleaned_regentity_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised imported_raw_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised party_summary_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised source_data_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised imported_raw_fname with value: {}
2025/03/18 08:28 INFO:Session_state variables initialized
2025/03/18 08:28 DEBUG:Initialised source_data_fname with value: {}
2025/03/18 08:28 DEBUG:output_dir: {}
2025/03/18 08:28 INFO:Session_state variables initialized
2025/03/18 08:28 DEBUG:ListofPoliticalPeople_fname: {}
2025/03/18 08:28 DEBUG:output_dir: {}
2025/03/18 08:28 DEBUG:original_data_fname: {}
2025/03/18 08:28 DEBUG:ListofPoliticalPeople_fname: {}
2025/03/18 08:28 DEBUG:mppartymemb_fname: {}
2025/03/18 08:28 DEBUG:original_data_fname: {}
2025/03/18 08:28 DEBUG:politician_party_fname: {}
2025/03/18 08:28 DEBUG:mppartymemb_fname: {}
2025/03/18 08:28 DEBUG:cleaned_data_fname: {}
2025/03/18 08:28 DEBUG:politician_party_fname: {}
2025/03/18 08:28 DEBUG:BASE_DIR: {}
2025/03/18 08:28 DEBUG:cleaned_data_fname: {}
2025/03/18 08:28 DEBUG:perc_target: {}
2025/03/18 08:28 DEBUG:BASE_DIR: {}
2025/03/18 08:28 DEBUG:Donor_dedupe_cleaned_fname: {}
2025/03/18 08:28 DEBUG:data_dir: {}
2025/03/18 08:28 DEBUG:app_pages_dir: {}
2025/03/18 08:28 DEBUG:perc_target: {}
2025/03/18 08:28 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:28 DEBUG:Donor_dedupe_cleaned_fname: {}
2025/03/18 08:28 DEBUG:CREDENTIALS_FILE: {}
2025/03/18 08:28 DEBUG:app_pages_dir: {}
2025/03/18 08:28 DEBUG:imported_raw_fname: {}
2025/03/18 08:28 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:28 DEBUG:cleaned_regentity_fname: {}
2025/03/18 08:28 DEBUG:CREDENTIALS_FILE: {}
2025/03/18 08:28 DEBUG:PLACEHOLDER_DATE: {}
2025/03/18 08:28 DEBUG:imported_raw_fname: {}
2025/03/18 08:28 DEBUG:TEXT_FILE: {}
2025/03/18 08:28 DEBUG:cleaned_regentity_fname: {}
2025/03/18 08:28 DEBUG:ELECTION_DATES: {}
2025/03/18 08:28 DEBUG:PLACEHOLDER_DATE: {}
2025/03/18 08:28 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:28 DEBUG:TEXT_FILE: {}
2025/03/18 08:28 DEBUG:logs_dir: {}
2025/03/18 08:28 DEBUG:ELECTION_DATES: {}
2025/03/18 08:28 DEBUG:components_dir: {}
2025/03/18 08:28 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:28 DEBUG:cleaned_donorlist_fname: {}
2025/03/18 08:28 DEBUG:logs_dir: {}
2025/03/18 08:28 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: {}
2025/03/18 08:28 DEBUG:components_dir: {}
2025/03/18 08:28 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:28 DEBUG:cleaned_donorlist_fname: {}
2025/03/18 08:28 DEBUG:regentity_map_fname: {}
2025/03/18 08:28 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: {}
2025/03/18 08:28 DEBUG:source_data_fname: {}
2025/03/18 08:28 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:28 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:28 DEBUG:source_data_fname: {}
2025/03/18 08:28 DEBUG:utils_dir: {}
2025/03/18 08:28 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:28 DEBUG:LAST_MODIFIED_DATES: {}
2025/03/18 08:28 DEBUG:utils_dir: {}
2025/03/18 08:28 DEBUG:party_summary_fname: {}
2025/03/18 08:28 DEBUG:LAST_MODIFIED_DATES: {}
2025/03/18 08:28 DEBUG:donor_map_fname: {}
2025/03/18 08:28 DEBUG:party_summary_fname: {}
2025/03/18 08:28 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:28 DEBUG:donor_map_fname: {}
2025/03/18 08:28 DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:28 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:28 DEBUG:reference_dir: {}
2025/03/18 08:28 DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:28 DEBUG:data_dir: {}
2025/03/18 08:28 DEBUG:reference_dir: {}
2025/03/18 08:28 DEBUG:cleaned_donations_fname: {}
2025/03/18 08:28 DEBUG:regentity_map_fname: {}
2025/03/18 08:28 DEBUG:PLACEHOLDER_ID: {}
2025/03/18 08:28 DEBUG:cleaned_donations_fname: {}
2025/03/18 08:28 INFO:Session state Setup complete
2025/03/18 08:28 DEBUG:PLACEHOLDER_ID: {}
2025/03/18 08:28 INFO:initialize_session_state executed successfully
2025/03/18 08:28 INFO:Session state Setup complete
2025/03/18 08:28 INFO:Package setup complete
2025/03/18 08:28 INFO:initialize_session_state executed successfully
2025/03/18 08:28 INFO:setup_package executed successfully
2025/03/18 08:28 INFO:Package setup complete
2025/03/18 08:28 INFO:Setup completed successfully.
2025/03/18 08:28 INFO:setup_package executed successfully
2025/03/18 08:28 INFO:Setup completed successfully.
2025/03/18 08:28 INFO:Running Menu setup...
2025/03/18 08:28 INFO:Running Menu setup...
2025/03/18 08:28 DEBUG:Calling pagesetup with args={args}, kwargs={kwargs}
2025/03/18 08:28 DEBUG:Calling pagesetup with args={args}, kwargs={kwargs}
2025/03/18 08:28 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:28 INFO:get_git_version executed successfully
2025/03/18 08:28 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:28 INFO:get_git_version executed successfully
2025/03/18 08:28 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:28 ERROR:Error in pagesetup: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo\app_pages\headlinefigures.py)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 10, in pagesetup
    from app_pages.headlinefigures import hlf_body
ImportError: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo\app_pages\headlinefigures.py)
2025/03/18 08:28 CRITICAL:Menu setup crashed: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo\app_pages\headlinefigures.py)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 10, in pagesetup
    from app_pages.headlinefigures import hlf_body
ImportError: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo\app_pages\headlinefigures.py)
2025/03/18 08:28 INFO:Streamlit App Starting...
2025/03/18 08:28 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:28 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:28 INFO:Running App setup...
2025/03/18 08:28 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:28 INFO:Setting up the package
2025/03/18 08:28 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:28 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:28 INFO:get_git_version executed successfully
2025/03/18 08:28 INFO:Version: v39.172
2025/03/18 08:28 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:28 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:28 DEBUG:Initialised BASE_DIR with value: {}
2025/03/18 08:28 DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:28 DEBUG:Initialised PLACEHOLDER_DATE with value: {}
2025/03/18 08:28 DEBUG:Initialised PLACEHOLDER_ID with value: {}
2025/03/18 08:28 DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:28 DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:28 DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:28 DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:28 DEBUG:Initialised perc_target with value: {}
2025/03/18 08:28 DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: {}
2025/03/18 08:28 DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:28 DEBUG:Initialised reference_dir with value: {}
2025/03/18 08:28 DEBUG:Initialised data_dir with value: {}
2025/03/18 08:28 DEBUG:Initialised output_dir with value: {}
2025/03/18 08:28 DEBUG:Initialised logs_dir with value: {}
2025/03/18 08:28 DEBUG:Initialised components_dir with value: {}
2025/03/18 08:28 DEBUG:Initialised app_pages_dir with value: {}
2025/03/18 08:28 DEBUG:Initialised utils_dir with value: {}
2025/03/18 08:28 DEBUG:Initialised Donor_dedupe_cleaned_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised ListofPoliticalPeople_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised mppartymemb_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised donor_map_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised politician_party_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised regentity_map_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised original_data_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised CREDENTIALS_FILE with value: {}
2025/03/18 08:28 DEBUG:Initialised TEXT_FILE with value: {}
2025/03/18 08:28 DEBUG:Initialised ELECTION_DATES with value: {}
2025/03/18 08:28 DEBUG:Initialised LAST_MODIFIED_DATES with value: {}
2025/03/18 08:28 DEBUG:Initialised cleaned_data_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised cleaned_donations_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised cleaned_donorlist_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised cleaned_regentity_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised party_summary_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised imported_raw_fname with value: {}
2025/03/18 08:28 DEBUG:Initialised source_data_fname with value: {}
2025/03/18 08:28 INFO:Session_state variables initialized
2025/03/18 08:28 DEBUG:output_dir: {}
2025/03/18 08:28 DEBUG:ListofPoliticalPeople_fname: {}
2025/03/18 08:28 DEBUG:original_data_fname: {}
2025/03/18 08:28 DEBUG:mppartymemb_fname: {}
2025/03/18 08:28 DEBUG:politician_party_fname: {}
2025/03/18 08:28 DEBUG:cleaned_data_fname: {}
2025/03/18 08:28 DEBUG:BASE_DIR: {}
2025/03/18 08:28 DEBUG:data_dir: {}
2025/03/18 08:28 DEBUG:perc_target: {}
2025/03/18 08:28 DEBUG:Donor_dedupe_cleaned_fname: {}
2025/03/18 08:28 DEBUG:app_pages_dir: {}
2025/03/18 08:28 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:28 DEBUG:CREDENTIALS_FILE: {}
2025/03/18 08:28 DEBUG:imported_raw_fname: {}
2025/03/18 08:28 DEBUG:cleaned_regentity_fname: {}
2025/03/18 08:28 DEBUG:PLACEHOLDER_DATE: {}
2025/03/18 08:28 DEBUG:TEXT_FILE: {}
2025/03/18 08:28 DEBUG:ELECTION_DATES: {}
2025/03/18 08:28 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:28 DEBUG:logs_dir: {}
2025/03/18 08:28 DEBUG:components_dir: {}
2025/03/18 08:28 DEBUG:cleaned_donorlist_fname: {}
2025/03/18 08:28 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: {}
2025/03/18 08:28 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:28 DEBUG:source_data_fname: {}
2025/03/18 08:28 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:28 DEBUG:utils_dir: {}
2025/03/18 08:28 DEBUG:LAST_MODIFIED_DATES: {}
2025/03/18 08:28 DEBUG:party_summary_fname: {}
2025/03/18 08:28 DEBUG:donor_map_fname: {}
2025/03/18 08:28 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:28 DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:28 DEBUG:reference_dir: {}
2025/03/18 08:28 DEBUG:regentity_map_fname: {}
2025/03/18 08:28 DEBUG:cleaned_donations_fname: {}
2025/03/18 08:28 DEBUG:PLACEHOLDER_ID: {}
2025/03/18 08:28 INFO:Session state Setup complete
2025/03/18 08:28 INFO:initialize_session_state executed successfully
2025/03/18 08:28 INFO:Package setup complete
2025/03/18 08:28 INFO:setup_package executed successfully
2025/03/18 08:28 INFO:Setup completed successfully.
2025/03/18 08:28 INFO:Running Menu setup...
2025/03/18 08:28 DEBUG:Calling pagesetup with args={args}, kwargs={kwargs}
2025/03/18 08:28 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:28 INFO:get_git_version executed successfully
2025/03/18 08:28 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:28 INFO:get_git_version executed successfully
2025/03/18 08:28 INFO:App Version: v39.201
2025/03/18 08:28 INFO:Switched to page: Cash Donations
2025/03/18 08:28 DEBUG:Calling display_data_page with args={args}, kwargs={kwargs}
2025/03/18 08:28 DEBUG:Calling load_and_filter_data with args={args}, kwargs={kwargs}
2025/03/18 08:28 ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 455, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 500, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 129, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 100, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 94, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 457, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 131, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/18 08:28 CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 455, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 500, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 129, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 100, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 94, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 457, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 179, in mod_cash_donations
    display_data_page(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page.py", line 22, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 27, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 131, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/18 08:30 INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/18 08:30 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:30 INFO:get_git_version executed successfully
2025/03/18 08:30 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:30 INFO:get_git_version executed successfully
2025/03/18 08:30 INFO:Streamlit App Starting...
2025/03/18 08:30 INFO:Streamlit App Starting...
2025/03/18 08:30 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:30 INFO:Current Working Directory: H:\VScode\dashboard_demo
2025/03/18 08:30 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:30 INFO:running H:\VScode\dashboard_demo, H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py
2025/03/18 08:30 INFO:Running App setup...
2025/03/18 08:30 INFO:Running App setup...
2025/03/18 08:30 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:30 DEBUG:Calling setup_package with args={args}, kwargs={kwargs}
2025/03/18 08:30 INFO:Setting up the package
2025/03/18 08:30 INFO:Setting up the package
2025/03/18 08:30 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:30 INFO:Module directory: H:\VScode\dashboard_demo
2025/03/18 08:30 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:30 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:30 INFO:get_git_version executed successfully
2025/03/18 08:30 INFO:get_git_version executed successfully
2025/03/18 08:30 INFO:Version: v39.172
2025/03/18 08:30 INFO:Version: v39.172
2025/03/18 08:30 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:30 DEBUG:Calling initialize_session_state with args={args}, kwargs={kwargs}
2025/03/18 08:30 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:30 INFO:BASE_DIR: H:\VScode\dashboard_demo
2025/03/18 08:30 DEBUG:Initialised BASE_DIR with value: {}
2025/03/18 08:30 DEBUG:Initialised BASE_DIR with value: {}
2025/03/18 08:30 DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:30 DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:30 DEBUG:Initialised PLACEHOLDER_DATE with value: {}
2025/03/18 08:30 DEBUG:Initialised PLACEHOLDER_DATE with value: {}
2025/03/18 08:30 DEBUG:Initialised PLACEHOLDER_ID with value: {}
2025/03/18 08:30 DEBUG:Initialised PLACEHOLDER_ID with value: {}
2025/03/18 08:30 DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:30 DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:30 DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:30 DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:30 DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:30 DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:30 DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:30 DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:30 DEBUG:Initialised perc_target with value: {}
2025/03/18 08:30 DEBUG:Initialised perc_target with value: {}
2025/03/18 08:30 DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: {}
2025/03/18 08:30 DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: {}
2025/03/18 08:30 DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:30 DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:30 DEBUG:Initialised reference_dir with value: {}
2025/03/18 08:30 DEBUG:Initialised reference_dir with value: {}
2025/03/18 08:30 DEBUG:Initialised data_dir with value: {}
2025/03/18 08:30 DEBUG:Initialised data_dir with value: {}
2025/03/18 08:30 DEBUG:Initialised output_dir with value: {}
2025/03/18 08:30 DEBUG:Initialised output_dir with value: {}
2025/03/18 08:30 DEBUG:Initialised logs_dir with value: {}
2025/03/18 08:30 DEBUG:Initialised logs_dir with value: {}
2025/03/18 08:30 DEBUG:Initialised components_dir with value: {}
2025/03/18 08:30 DEBUG:Initialised components_dir with value: {}
2025/03/18 08:30 DEBUG:Initialised app_pages_dir with value: {}
2025/03/18 08:30 DEBUG:Initialised app_pages_dir with value: {}
2025/03/18 08:30 DEBUG:Initialised utils_dir with value: {}
2025/03/18 08:30 DEBUG:Initialised utils_dir with value: {}
2025/03/18 08:30 DEBUG:Initialised Donor_dedupe_cleaned_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised Donor_dedupe_cleaned_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised ListofPoliticalPeople_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised ListofPoliticalPeople_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised mppartymemb_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised mppartymemb_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised donor_map_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised donor_map_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised politician_party_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised politician_party_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised regentity_map_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised regentity_map_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised original_data_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised original_data_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised CREDENTIALS_FILE with value: {}
2025/03/18 08:30 DEBUG:Initialised CREDENTIALS_FILE with value: {}
2025/03/18 08:30 DEBUG:Initialised TEXT_FILE with value: {}
2025/03/18 08:30 DEBUG:Initialised TEXT_FILE with value: {}
2025/03/18 08:30 DEBUG:Initialised ELECTION_DATES with value: {}
2025/03/18 08:30 DEBUG:Initialised ELECTION_DATES with value: {}
2025/03/18 08:30 DEBUG:Initialised LAST_MODIFIED_DATES with value: {}
2025/03/18 08:30 DEBUG:Initialised LAST_MODIFIED_DATES with value: {}
2025/03/18 08:30 DEBUG:Initialised cleaned_data_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised cleaned_data_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised cleaned_donations_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised cleaned_donations_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised cleaned_donorlist_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised cleaned_donorlist_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised cleaned_regentity_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised cleaned_regentity_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised party_summary_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised party_summary_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised imported_raw_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised imported_raw_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised source_data_fname with value: {}
2025/03/18 08:30 DEBUG:Initialised source_data_fname with value: {}
2025/03/18 08:30 INFO:Session_state variables initialized
2025/03/18 08:30 INFO:Session_state variables initialized
2025/03/18 08:30 DEBUG:source_data_fname: {}
2025/03/18 08:30 DEBUG:source_data_fname: {}
2025/03/18 08:30 DEBUG:donor_map_fname: {}
2025/03/18 08:30 DEBUG:donor_map_fname: {}
2025/03/18 08:30 DEBUG:TEXT_FILE: {}
2025/03/18 08:30 DEBUG:TEXT_FILE: {}
2025/03/18 08:30 DEBUG:Donor_dedupe_cleaned_fname: {}
2025/03/18 08:30 DEBUG:Donor_dedupe_cleaned_fname: {}
2025/03/18 08:30 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:30 DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/18 08:30 DEBUG:ListofPoliticalPeople_fname: {}
2025/03/18 08:30 DEBUG:ListofPoliticalPeople_fname: {}
2025/03/18 08:30 DEBUG:components_dir: {}
2025/03/18 08:30 DEBUG:components_dir: {}
2025/03/18 08:30 DEBUG:perc_target: {}
2025/03/18 08:30 DEBUG:perc_target: {}
2025/03/18 08:30 DEBUG:cleaned_donorlist_fname: {}
2025/03/18 08:30 DEBUG:cleaned_donorlist_fname: {}
2025/03/18 08:30 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:30 DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/18 08:30 DEBUG:utils_dir: {}
2025/03/18 08:30 DEBUG:utils_dir: {}
2025/03/18 08:30 DEBUG:LAST_MODIFIED_DATES: {}
2025/03/18 08:30 DEBUG:LAST_MODIFIED_DATES: {}
2025/03/18 08:30 DEBUG:cleaned_donations_fname: {}
2025/03/18 08:30 DEBUG:cleaned_donations_fname: {}
2025/03/18 08:30 DEBUG:BASE_DIR: {}
2025/03/18 08:30 DEBUG:BASE_DIR: {}
2025/03/18 08:30 DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:30 DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'CashDonations_ftr': {'DonationType': ['Cash', 'Aggregate Donation'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'PublicFundsDonations_ftr': {'DonationType': 'Public Funds'}, 'NonCashDonations_ftr': {'DonationType': ['Non Cash', 'Visit', 'Bequest', 'Sponsorship'], 'DonorStatus': ['Company', 'Limited Liability Partnership', 'Partnership', 'Trade Union', 'Friendly Society', 'Individual', 'Unincorporated Association', 'Other', 'Unknown', 'Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}}
2025/03/18 08:30 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: {}
2025/03/18 08:30 DEBUG:RERUN_MP_PARTY_MEMBERSHIP: {}
2025/03/18 08:30 DEBUG:regentity_map_fname: {}
2025/03/18 08:30 DEBUG:regentity_map_fname: {}
2025/03/18 08:30 DEBUG:reference_dir: {}
2025/03/18 08:30 DEBUG:reference_dir: {}
2025/03/18 08:30 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:30 DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/18 08:30 DEBUG:data_dir: {}
2025/03/18 08:30 DEBUG:data_dir: {}
2025/03/18 08:30 DEBUG:PLACEHOLDER_ID: {}
2025/03/18 08:30 DEBUG:PLACEHOLDER_ID: {}
2025/03/18 08:30 DEBUG:output_dir: {}
2025/03/18 08:30 DEBUG:output_dir: {}
2025/03/18 08:30 DEBUG:logs_dir: {}
2025/03/18 08:30 DEBUG:logs_dir: {}
2025/03/18 08:30 DEBUG:CREDENTIALS_FILE: {}
2025/03/18 08:30 DEBUG:CREDENTIALS_FILE: {}
2025/03/18 08:30 DEBUG:cleaned_data_fname: {}
2025/03/18 08:30 DEBUG:cleaned_data_fname: {}
2025/03/18 08:30 DEBUG:mppartymemb_fname: {}
2025/03/18 08:30 DEBUG:mppartymemb_fname: {}
2025/03/18 08:30 DEBUG:original_data_fname: {}
2025/03/18 08:30 DEBUG:original_data_fname: {}
2025/03/18 08:30 DEBUG:app_pages_dir: {}
2025/03/18 08:30 DEBUG:app_pages_dir: {}
2025/03/18 08:30 DEBUG:ELECTION_DATES: {}
2025/03/18 08:30 DEBUG:ELECTION_DATES: {}
2025/03/18 08:30 DEBUG:imported_raw_fname: {}
2025/03/18 08:30 DEBUG:imported_raw_fname: {}
2025/03/18 08:30 DEBUG:cleaned_regentity_fname: {}
2025/03/18 08:30 DEBUG:cleaned_regentity_fname: {}
2025/03/18 08:30 DEBUG:PLACEHOLDER_DATE: {}
2025/03/18 08:30 DEBUG:PLACEHOLDER_DATE: {}
2025/03/18 08:30 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:30 DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv', 'LAST_MODIFIED_DATES': 'last_modified_dates.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/18 08:30 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:30 DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/18 08:30 DEBUG:party_summary_fname: {}
2025/03/18 08:30 DEBUG:party_summary_fname: {}
2025/03/18 08:30 DEBUG:politician_party_fname: {}
2025/03/18 08:30 DEBUG:politician_party_fname: {}
2025/03/18 08:30 INFO:Session state Setup complete
2025/03/18 08:30 INFO:Session state Setup complete
2025/03/18 08:30 INFO:initialize_session_state executed successfully
2025/03/18 08:30 INFO:initialize_session_state executed successfully
2025/03/18 08:30 INFO:Package setup complete
2025/03/18 08:30 INFO:Package setup complete
2025/03/18 08:30 INFO:setup_package executed successfully
2025/03/18 08:30 INFO:setup_package executed successfully
2025/03/18 08:30 INFO:Setup completed successfully.
2025/03/18 08:30 INFO:Setup completed successfully.
2025/03/18 08:30 DEBUG:Calling initialise_data with args={args}, kwargs={kwargs}
2025/03/18 08:30 DEBUG:Calling get_git_version with args={args}, kwargs={kwargs}
2025/03/18 08:30 INFO:get_git_version executed successfully
2025/03/18 08:30 INFO:Running first load function.
2025/03/18 08:30 DEBUG:Calling firstload with args={args}, kwargs={kwargs}
2025/03/18 08:30 DEBUG:Calling get_raw_data with args={args}, kwargs={kwargs}
2025/03/18 08:30 DEBUG:Calling load_raw_data with args={args}, kwargs={kwargs}
2025/03/18 08:30 DEBUG:Original data file path pre raw data load: source_data_fname
2025/03/18 08:30 DEBUG:Processed data file path pre raw data load: imported_raw_fname
2025/03/18 08:30 DEBUG:Calling try_to_use_preprocessed_data with args={args}, kwargs={kwargs}
2025/03/18 08:30 INFO:Original file path: {}
2025/03/18 08:30 INFO:Saved file path: {}
2025/03/18 08:30 DEBUG:Calling is_file_updated with args={args}, kwargs={kwargs}
2025/03/18 08:30 INFO:Checking if {} has been updated.
2025/03/18 08:30 DEBUG:Calling get_file_modification_time with args={args}, kwargs={kwargs}
2025/03/18 08:30 INFO:Getting modification time for {}
2025/03/18 08:30 ERROR:Error in get_file_modification_time: stat: path should be string, bytes, os.PathLike or integer, not dict
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 83, in get_file_modification_time
    if os.path.exists(filepath):
  File "H:\python310\lib\genericpath.py", line 19, in exists
    os.stat(path)
TypeError: stat: path should be string, bytes, os.PathLike or integer, not dict
2025/03/18 08:30 CRITICAL:First load crashed: stat: path should be string, bytes, os.PathLike or integer, not dict
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 53, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 242, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 299, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 242, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 299, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 72, in firstload
    load_data_to_session("raw_data", get_raw_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 242, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 299, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 13, in get_raw_data
    return load_raw_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 242, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 299, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\datasetupandclean.py", line 50, in load_raw_data
    loaddata_df = try_to_use_preprocessed_data(
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 242, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 299, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 28, in try_to_use_preprocessed_data
    if not is_file_updated(originalfilepath,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 100, in is_file_updated
    current_mod_time = get_file_modification_time(main_file)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 83, in get_file_modification_time
    if os.path.exists(filepath):
  File "H:\python310\lib\genericpath.py", line 19, in exists
    os.stat(path)
TypeError: stat: path should be string, bytes, os.PathLike or integer, not dict
2025/03/18 08:30 DEBUG:Calling initialise_data with args={args}, kwargs={kwargs}
2025/03/18 08:30 INFO:Running first load function.
2025/03/18 08:30 DEBUG:Calling firstload with args={args}, kwargs={kwargs}
2025/03/18 08:30 DEBUG:Calling get_raw_data with args={args}, kwargs={kwargs}
2025/03/18 08:30 DEBUG:Calling load_raw_data with args={args}, kwargs={kwargs}
2025/03/18 08:30 DEBUG:Original data file path pre raw data load: source_data_fname
2025/03/18 08:30 DEBUG:Processed data file path pre raw data load: imported_raw_fname
2025/03/18 08:30 DEBUG:Calling try_to_use_preprocessed_data with args={args}, kwargs={kwargs}
2025/03/18 08:30 INFO:Original file path: {}
2025/03/18 08:30 INFO:Saved file path: {}
2025/03/18 08:30 DEBUG:Calling is_file_updated with args={args}, kwargs={kwargs}
2025/03/18 08:30 INFO:Checking if {} has been updated.
2025/03/18 08:30 DEBUG:Calling get_file_modification_time with args={args}, kwargs={kwargs}
2025/03/18 08:30 INFO:Getting modification time for {}
2025/03/18 08:30 ERROR:Error in get_file_modification_time: stat: path should be string, bytes, os.PathLike or integer, not dict
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 83, in get_file_modification_time
    if os.path.exists(filepath):
  File "H:\python310\lib\genericpath.py", line 19, in exists
    os.stat(path)
TypeError: stat: path should be string, bytes, os.PathLike or integer, not dict
2025/03/18 08:30 CRITICAL:First load crashed: stat: path should be string, bytes, os.PathLike or integer, not dict
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 53, in <module>
    initialise_data()  # Load the data
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 242, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 299, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 50, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 242, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 299, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 72, in firstload
    load_data_to_session("raw_data", get_raw_data)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 66, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 242, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 299, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\data_loader.py", line 13, in get_raw_data
    return load_raw_data(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 242, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 299, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\data\datasetupandclean.py", line 50, in load_raw_data
    loaddata_df = try_to_use_preprocessed_data(
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 242, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 299, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 28, in try_to_use_preprocessed_data
    if not is_file_updated(originalfilepath,
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 100, in is_file_updated
    current_mod_time = get_file_modification_time(main_file)
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\data\data_utils.py", line 83, in get_file_modification_time
    if os.path.exists(filepath):
  File "H:\python310\lib\genericpath.py", line 19, in exists
    os.stat(path)
TypeError: stat: path should be string, bytes, os.PathLike or integer, not dict
2025/03/18 08:36 ERROR:Session state variables not initialized!
2025/03/18 08:36 ERROR:Error: originalfilepath is None!
2025/03/18 08:36 ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/18 08:36 ERROR:Timestamp key election_dates_last_modified not recognised.
2025/03/18 08:36 ERROR:Failed to load election dates from file.
2025/03/18 08:36 ERROR:Timestamp key load_donorlist_data_last_modified not recognised.
2025/03/18 08:37 ERROR:Error in display_visualizations: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 113, in display_visualizations
    plot_bar_line.plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_line.py", line 168, in plot_bar_line_by_year
    st.plotly_chart(fig, use_container_width=use_container_width)
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 409, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\plotly_chart.py", line 506, in plotly_chart
    plotly_chart_proto.id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 226, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 132, in _register_element_id
    raise StreamlitDuplicateElementId(element_type)
streamlit.errors.StreamlitDuplicateElementId: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
2025/03/18 08:37 CRITICAL:Menu setup crashed: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 53, in mod_bequeths
    display_per_group_data_page(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page_per_donor.py", line 70, in display_per_group_data_page
    display_visualizations(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 113, in display_visualizations
    plot_bar_line.plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_line.py", line 168, in plot_bar_line_by_year
    st.plotly_chart(fig, use_container_width=use_container_width)
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 409, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\plotly_chart.py", line 506, in plotly_chart
    plotly_chart_proto.id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 226, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 132, in _register_element_id
    raise StreamlitDuplicateElementId(element_type)
streamlit.errors.StreamlitDuplicateElementId: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
2025/03/18 08:37 CRITICAL:Menu setup crashed: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 53, in mod_bequeths
    display_per_group_data_page(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page_per_donor.py", line 70, in display_per_group_data_page
    display_visualizations(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 113, in display_visualizations
    plot_bar_line.plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo\Visualisations\plot_bar_line.py", line 168, in plot_bar_line_by_year
    st.plotly_chart(fig, use_container_width=use_container_width)
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 409, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\plotly_chart.py", line 506, in plotly_chart
    plotly_chart_proto.id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 226, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 132, in _register_element_id
    raise StreamlitDuplicateElementId(element_type)
streamlit.errors.StreamlitDuplicateElementId: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
2025/03/18 08:37 CRITICAL:Menu setup crashed: There are multiple `slider` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `slider` element.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo\PoliticalPartyAnalysisDashboard.py", line 45, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\politicalpartyanalysis.py", line 50, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo\app_pages\mod_page_calls.py", line 103, in mod_donations_per_political_party
    display_per_group_data_page(
  File "H:\VScode\dashboard_demo\utils\logger.py", line 41, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo\app_pages\modular_page_per_donor.py", line 34, in display_per_group_data_page
    ) = load_and_filter_pergroup(
  File "H:\VScode\dashboard_demo\components\modular_page_blocks.py", line 218, in load_and_filter_pergroup
    date_range2 = st.slider(
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 409, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\slider.py", line 502, in slider
    return self._slider(
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\slider.py", line 547, in _slider
    element_id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 226, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 132, in _register_element_id
    raise StreamlitDuplicateElementId(element_type)
streamlit.errors.StreamlitDuplicateElementId: There are multiple `slider` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `slider` element.
