2025/03/04 08:32:22 AM INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/04 08:32:22 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\utils',), kwargs={}
2025/03/04 08:32:23 AM INFO:get_git_version executed successfully
2025/03/04 08:32:23 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\data',), kwargs={}
2025/03/04 08:32:23 AM INFO:get_git_version executed successfully
2025/03/04 08:32:23 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:32:23 AM INFO:Running App setup...
2025/03/04 08:32:23 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:32:23 AM INFO:Setting up the package
2025/03/04 08:32:23 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:32:23 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:32:23 AM INFO:get_git_version executed successfully
2025/03/04 08:32:23 AM INFO:Version: v20.140
2025/03/04 08:32:23 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:32:23 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:32:23 AM DEBUG:Initialised LOG_LEVEL with value: DEBUG
2025/03/04 08:32:23 AM DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo-1
2025/03/04 08:32:23 AM DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:32:23 AM DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/04 08:32:23 AM DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/04 08:32:23 AM DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:32:23 AM DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:32:23 AM DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:32:23 AM DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:32:23 AM DEBUG:Initialised perc_target with value: 0.5
2025/03/04 08:32:23 AM DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/04 08:32:23 AM DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:32:23 AM DEBUG:Initialised reference_dir with value: reference_files
2025/03/04 08:32:24 AM DEBUG:Initialised data_dir with value: data
2025/03/04 08:32:24 AM DEBUG:Initialised output_dir with value: output
2025/03/04 08:32:24 AM DEBUG:Initialised logs_dir with value: logs
2025/03/04 08:32:24 AM DEBUG:Initialised components_dir with value: components
2025/03/04 08:32:24 AM DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/04 08:32:24 AM DEBUG:Initialised utils_dir with value: utils
2025/03/04 08:32:24 AM DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:32:24 AM DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:32:24 AM DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/04 08:32:24 AM DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:32:24 AM DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:32:24 AM DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:32:24 AM DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/04 08:32:24 AM DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/04 08:32:24 AM DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/04 08:32:24 AM DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/04 08:32:24 AM DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/04 08:32:24 AM DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/04 08:32:24 AM DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/04 08:32:24 AM DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/04 08:32:24 AM DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/04 08:32:24 AM DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/04 08:32:24 AM DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:32:24 AM DEBUG:Initialised Cash_ftr with value: {'DonationType': 'Cash'}
2025/03/04 08:32:24 AM INFO:Session_state variables initialized
2025/03/04 08:32:24 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:32:24 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:32:24 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:32:24 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:32:24 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:32:24 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:32:24 AM DEBUG:components_dir: components
2025/03/04 08:32:24 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:32:24 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:32:24 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:32:24 AM DEBUG:logs_dir: logs
2025/03/04 08:32:24 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:32:24 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:32:24 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:32:24 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:32:24 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:32:24 AM DEBUG:data_dir: data
2025/03/04 08:32:24 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:32:24 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:32:24 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:32:24 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:32:24 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:32:24 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:32:24 AM DEBUG:reference_dir: reference_files
2025/03/04 08:32:24 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:32:24 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:32:24 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:32:24 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:32:24 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:32:24 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:32:24 AM DEBUG:perc_target: 0.5
2025/03/04 08:32:24 AM DEBUG:output_dir: output
2025/03/04 08:32:24 AM DEBUG:utils_dir: utils
2025/03/04 08:32:24 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:32:24 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:32:24 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:32:24 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:32:24 AM INFO:Session state Setup complete
2025/03/04 08:32:24 AM INFO:initialize_session_state executed successfully
2025/03/04 08:32:24 AM INFO:Package setup complete
2025/03/04 08:32:24 AM INFO:setup_package executed successfully
2025/03/04 08:32:24 AM INFO:Running Menu setup...
2025/03/04 08:32:24 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:32:24 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\app_pages',), kwargs={}
2025/03/04 08:32:24 AM INFO:get_git_version executed successfully
2025/03/04 08:32:24 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\components',), kwargs={}
2025/03/04 08:32:24 AM INFO:get_git_version executed successfully
2025/03/04 08:32:24 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:32:24 AM INFO:get_git_version executed successfully
2025/03/04 08:32:24 AM INFO:App Version: v20.161
2025/03/04 08:32:24 AM INFO:Switched to page: Introduction
2025/03/04 08:32:24 AM INFO:pagesetup executed successfully
2025/03/04 08:32:24 AM INFO:No data found in session state, running firstload()
2025/03/04 08:32:24 AM DEBUG:Calling initialise_data with args=(), kwargs={}
2025/03/04 08:32:24 AM INFO:Running first load function.
2025/03/04 08:32:24 AM DEBUG:Calling firstload with args=(), kwargs={}
2025/03/04 08:32:24 AM DEBUG:Calling load_data_to_session with args=('raw_data', <function get_raw_data at 0x0000021FACFCC670>), kwargs={}
2025/03/04 08:32:24 AM DEBUG:Calling get_raw_data with args=(), kwargs={}
2025/03/04 08:32:24 AM DEBUG:Calling load_raw_data with args=(), kwargs={'main_file': 'raw_data', 'cleaned_file': 'raw_data_clean', 'output_csv': True, 'dedupe_donors': True, 'dedupe_regentity': True, 'originaldatafilepath': 'source_data_fname', 'processeddatafilepath': 'imported_raw_fname'}
2025/03/04 08:32:24 AM DEBUG:Original data file path pre raw data load: {originaldatafilepath}
2025/03/04 08:32:24 AM DEBUG:Processed data file path pre raw data load: {processeddatafilepath}
2025/03/04 08:32:24 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': 'source\\Donations_accepted_by_political_parties.csv', 'savedfilepath': 'output\\imported_raw.csv', 'timestamp_key': 'load_raw_data_last_modified'}
2025/03/04 08:32:24 AM INFO:Original file path: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:32:24 AM INFO:Saved file path: output\imported_raw.csv
2025/03/04 08:32:24 AM DEBUG:Calling is_file_updated with args=('source\\Donations_accepted_by_political_parties.csv', 'load_raw_data_last_modified'), kwargs={}
2025/03/04 08:32:24 AM INFO:Checking if source\Donations_accepted_by_political_parties.csv has been updated.
2025/03/04 08:32:24 AM DEBUG:Calling get_file_modification_time with args=('source\\Donations_accepted_by_political_parties.csv',), kwargs={}
2025/03/04 08:32:24 AM INFO:Getting modification time for source\Donations_accepted_by_political_parties.csv
2025/03/04 08:32:24 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:32:24 AM INFO:Current modification time: 1740757862.6744745
2025/03/04 08:32:24 AM INFO:Last modification time: None
2025/03/04 08:32:24 AM INFO:is_file_updated executed successfully
2025/03/04 08:32:24 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:32:24 AM INFO:Loading raw data...
2025/03/04 08:32:24 AM DEBUG:Original data file path post raw data load: {originaldatafilepath}
2025/03/04 08:32:24 AM DEBUG:Processed data file path post raw data load: {processeddatafilepath}
2025/03/04 08:32:25 AM INFO:Data loaded successfully. Data has 65278 rows and 29 columns
2025/03/04 08:32:25 AM INFO:Data saved to output\imported_raw.csv
2025/03/04 08:32:25 AM DEBUG:Calling raw_data_cleanup with args=(), kwargs={'loaddata_df':            ECRef              RegulatedEntityName    RegulatedEntityType        Value AcceptedDate  ... AccountingUnitId  DonorId CampaigningName   RegisterName IsIrishSource
index                                                                                               ...                                                                       
0      NC0408174                   Mr Andy Street        Regulated Donee    £1,876.56   02/09/2019  ...              NaN  86310.0             NaN  Great Britain         False
1      NC0408173                   Mr Andy Street        Regulated Donee    £2,700.00   02/09/2019  ...              NaN  86310.0             NaN  Great Britain         False
2      NC0408177                   Mr Andy Street        Regulated Donee    £4,852.58   30/08/2019  ...              NaN  86310.0             NaN  Great Britain         False
3      NC0408176                   Mr Andy Street        Regulated Donee    £2,500.00   30/08/2019  ...              NaN  86310.0             NaN  Great Britain         False
4      NC0408170                   Mr Andy Street        Regulated Donee    £4,524.05   29/08/2019  ...              NaN  86310.0             NaN  Great Britain         False
...          ...                              ...                    ...          ...          ...  ...              ...      ...             ...            ...           ...
65273   C0242478               Vote Leave Limited  Permitted Participant   £10,000.00          NaN  ...              NaN  74198.0             NaN            NaN         False
65274   C0242461               Vote Leave Limited  Permitted Participant  £100,000.00          NaN  ...              NaN  74184.0             NaN            NaN         False
65275   C0243560               Vote Leave Limited  Permitted Participant   £40,000.00          NaN  ...              NaN  74576.0             NaN            NaN         False
65276   C0319710  Conservative and Unionist Party        Political Party   £50,000.00          NaN  ...              NaN  34241.0             NaN  Great Britain         False
65277   C0319727  Conservative and Unionist Party        Political Party   £15,000.00          NaN  ...              NaN  74743.0             NaN  Great Britain         False

[65278 rows x 29 columns], 'dedupe_donors': True, 'dedupe_regentity': True, 'output_csv': True, 'originaldatafilepath': 'output\\imported_raw.csv', 'processeddatafilepath': 'cleaned_donations_fname'}
2025/03/04 08:32:25 AM INFO:Cleaning up raw data
2025/03/04 08:32:25 AM ERROR:Session state variables not initialized!
2025/03/04 08:32:25 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': None, 'savedfilepath': 'output\\cleaned_donations.csv', 'timestamp_key': 'cleaned_raw_data_last_modified'}
2025/03/04 08:32:25 AM INFO:Original file path: None
2025/03/04 08:32:25 AM INFO:Saved file path: output\cleaned_donations.csv
2025/03/04 08:32:25 AM ERROR:Error: originalfilepath is None!
2025/03/04 08:32:25 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:32:25 AM INFO:Data loaded, shape: (65278, 29)
2025/03/04 08:32:27 AM DEBUG:Calling dedupe_entity_file with args=(), kwargs={'loaddata_dd_df':            ECRef              RegulatedEntityName    RegulatedEntityType      Value AcceptedDate  ... AccountingUnitId  DonorId CampaigningName   RegisterName IsIrishSource
index                                                                                             ...                                                                       
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56   02/09/2019  ...                   86310.0                  Great Britain         False
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00   02/09/2019  ...                   86310.0                  Great Britain         False
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58   30/08/2019  ...                   86310.0                  Great Britain         False
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00   30/08/2019  ...                   86310.0                  Great Britain         False
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05   29/08/2019  ...                   86310.0                  Great Britain         False
...          ...                              ...                    ...        ...          ...  ...              ...      ...             ...            ...           ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00          NaN  ...                   74198.0                          Other         False
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00          NaN  ...                   74184.0                          Other         False
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00          NaN  ...                   74576.0                          Other         False
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00          NaN  ...                   34241.0                  Great Britain         False
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00          NaN  ...                   74743.0                  Great Britain         False

[65278 rows x 29 columns], 'entity': 'RegulatedEntity', 'map_filename': 'regentity_map_fname', 'output_csv': True}
2025/03/04 08:32:27 AM DEBUG:Calling is_file_updated with args=('reference_files\\PoliticalEntityDeDuped.csv', 'regentity_map_fname_last_modified'), kwargs={}
2025/03/04 08:32:27 AM INFO:Checking if reference_files\PoliticalEntityDeDuped.csv has been updated.
2025/03/04 08:32:27 AM DEBUG:Calling get_file_modification_time with args=('reference_files\\PoliticalEntityDeDuped.csv',), kwargs={}
2025/03/04 08:32:27 AM INFO:Getting modification time for reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:32:27 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:32:27 AM INFO:Current modification time: 1740841102.2638545
2025/03/04 08:32:27 AM INFO:Last modification time: None
2025/03/04 08:32:27 AM INFO:is_file_updated executed successfully
2025/03/04 08:32:27 AM INFO:Map file regentity_map_fname has been updated. Proceeding with deduplication.
2025/03/04 08:32:27 AM INFO:File deduplication complete, shape: (65278, 34)
2025/03/04 08:32:27 AM INFO:dedupe_entity_file executed successfully
2025/03/04 08:32:27 AM DEBUG:Calling dedupe_entity_file with args=(), kwargs={'loaddata_dd_df':            ECRef      OriginalRegulatedEntityName    RegulatedEntityType  ...      OriginalRegulatedEntityName RegulatedEntityId              RegulatedEntityName
0      NC0408174                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
1      NC0408173                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
2      NC0408177                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
3      NC0408176                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
4      NC0408170                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
...          ...                              ...                    ...  ...                              ...               ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant  ...               Vote Leave Limited            3945.0               Vote Leave Limited
65274   C0242461               Vote Leave Limited  Permitted Participant  ...               Vote Leave Limited            3945.0               Vote Leave Limited
65275   C0243560               Vote Leave Limited  Permitted Participant  ...               Vote Leave Limited            3945.0               Vote Leave Limited
65276   C0319710  Conservative And Unionist Party        Political Party  ...  Conservative And Unionist Party              52.0  Conservative And Unionist Party
65277   C0319727  Conservative And Unionist Party        Political Party  ...  Conservative And Unionist Party              52.0  Conservative And Unionist Party

[65278 rows x 34 columns], 'entity': 'Donor', 'map_filename': 'donor_map_fname', 'output_csv': True}
2025/03/04 08:32:27 AM DEBUG:Calling is_file_updated with args=('reference_files\\PoliticalDonorsDeduped.csv', 'donor_map_fname_last_modified'), kwargs={}
2025/03/04 08:32:27 AM INFO:Checking if reference_files\PoliticalDonorsDeduped.csv has been updated.
2025/03/04 08:32:27 AM DEBUG:Calling get_file_modification_time with args=('reference_files\\PoliticalDonorsDeduped.csv',), kwargs={}
2025/03/04 08:32:27 AM INFO:Getting modification time for reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:32:27 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:32:27 AM INFO:Current modification time: 1740757863.2545311
2025/03/04 08:32:27 AM INFO:Last modification time: None
2025/03/04 08:32:27 AM INFO:is_file_updated executed successfully
2025/03/04 08:32:27 AM INFO:Map file donor_map_fname has been updated. Proceeding with deduplication.
2025/03/04 08:32:27 AM INFO:File deduplication complete, shape: (65278, 40)
2025/03/04 08:32:27 AM INFO:dedupe_entity_file executed successfully
2025/03/04 08:32:27 AM INFO:Raw Data cleanup completed
2025/03/04 08:32:27 AM INFO:Data shape: (65278, 40)
2025/03/04 08:32:28 AM INFO:Data saved to output\cleaned_donations.csv
2025/03/04 08:32:28 AM INFO:Data cleanup completed, shape: (65278, 40)
2025/03/04 08:32:28 AM INFO:raw_data_cleanup executed successfully
2025/03/04 08:32:29 AM INFO:load_raw_data executed successfully
2025/03/04 08:32:29 AM INFO:get_raw_data executed successfully
2025/03/04 08:32:29 AM INFO:load_data_to_session executed successfully
2025/03/04 08:32:29 AM DEBUG:Calling load_data_to_session with args=('data_clean', <function get_cleaned_data at 0x0000021FACFCC700>), kwargs={}
2025/03/04 08:32:29 AM DEBUG:Calling get_cleaned_data with args=(), kwargs={}
2025/03/04 08:32:29 AM DEBUG:Calling load_cleaned_data with args=(), kwargs={'originaldatafilepath': 'cleaned_donations_fname', 'processeddatafilepath': 'cleaned_data_fname', 'datafile': 'raw_data', 'streamlitrun': True, 'output_csv': True, 'main_file': 'raw_data', 'cleaned_file': 'data_clean'}
2025/03/04 08:32:29 AM DEBUG:Rows in Raw Data: 65278
2025/03/04 08:32:29 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': 'output\\cleaned_donations.csv', 'savedfilepath': 'output\\cleaned_data.csv', 'timestamp_key': 'load_raw_data_last_modified'}
2025/03/04 08:32:29 AM INFO:Original file path: output\cleaned_donations.csv
2025/03/04 08:32:29 AM INFO:Saved file path: output\cleaned_data.csv
2025/03/04 08:32:29 AM DEBUG:Calling is_file_updated with args=('output\\cleaned_donations.csv', 'load_raw_data_last_modified'), kwargs={}
2025/03/04 08:32:29 AM INFO:Checking if output\cleaned_donations.csv has been updated.
2025/03/04 08:32:29 AM DEBUG:Calling get_file_modification_time with args=('output\\cleaned_donations.csv',), kwargs={}
2025/03/04 08:32:29 AM INFO:Getting modification time for output\cleaned_donations.csv
2025/03/04 08:32:29 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:32:29 AM INFO:Current modification time: 1741077148.9387336
2025/03/04 08:32:29 AM INFO:Last modification time: 1740757862.6744745
2025/03/04 08:32:29 AM INFO:is_file_updated executed successfully
2025/03/04 08:32:29 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:32:29 AM ERROR:Error in load_cleaned_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 42, in load_cleaned_data
    logger.debug(f"Clean Data Prep: loaddata_df records: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:32:29 AM ERROR:Error in get_cleaned_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 42, in load_cleaned_data
    logger.debug(f"Clean Data Prep: loaddata_df records: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:32:29 AM ERROR:Error in load_data_to_session: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 42, in load_cleaned_data
    logger.debug(f"Clean Data Prep: loaddata_df records: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:32:29 AM ERROR:Error in firstload: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 80, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 42, in load_cleaned_data
    logger.debug(f"Clean Data Prep: loaddata_df records: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:32:29 AM ERROR:Error in initialise_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_utils.py", line 42, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 80, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 42, in load_cleaned_data
    logger.debug(f"Clean Data Prep: loaddata_df records: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:33:32 AM INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/04 08:33:32 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\utils',), kwargs={}
2025/03/04 08:33:33 AM INFO:get_git_version executed successfully
2025/03/04 08:33:33 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\data',), kwargs={}
2025/03/04 08:33:33 AM INFO:get_git_version executed successfully
2025/03/04 08:33:33 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:33:33 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:33:33 AM INFO:Running App setup...
2025/03/04 08:33:33 AM INFO:Running App setup...
2025/03/04 08:33:33 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:33:33 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:33:33 AM INFO:Setting up the package
2025/03/04 08:33:33 AM INFO:Setting up the package
2025/03/04 08:33:33 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:33:33 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:33:33 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:33:33 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:33:33 AM INFO:get_git_version executed successfully
2025/03/04 08:33:33 AM INFO:get_git_version executed successfully
2025/03/04 08:33:33 AM INFO:Version: v20.140
2025/03/04 08:33:33 AM INFO:Version: v20.140
2025/03/04 08:33:33 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:33:33 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:33:33 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:33:33 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:33:33 AM DEBUG:Initialised LOG_LEVEL with value: DEBUG
2025/03/04 08:33:33 AM DEBUG:Initialised LOG_LEVEL with value: DEBUG
2025/03/04 08:33:33 AM DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo-1
2025/03/04 08:33:33 AM DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo-1
2025/03/04 08:33:33 AM DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:33:33 AM DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:33:33 AM DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/04 08:33:33 AM DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/04 08:33:33 AM DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/04 08:33:33 AM DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/04 08:33:33 AM DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:33:33 AM DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:33:33 AM DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:33:33 AM DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:33:33 AM DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:33:33 AM DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:33:33 AM DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:33:33 AM DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:33:33 AM DEBUG:Initialised perc_target with value: 0.5
2025/03/04 08:33:33 AM DEBUG:Initialised perc_target with value: 0.5
2025/03/04 08:33:33 AM DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/04 08:33:33 AM DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/04 08:33:33 AM DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:33:33 AM DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:33:33 AM DEBUG:Initialised reference_dir with value: reference_files
2025/03/04 08:33:33 AM DEBUG:Initialised reference_dir with value: reference_files
2025/03/04 08:33:33 AM DEBUG:Initialised data_dir with value: data
2025/03/04 08:33:33 AM DEBUG:Initialised data_dir with value: data
2025/03/04 08:33:33 AM DEBUG:Initialised output_dir with value: output
2025/03/04 08:33:33 AM DEBUG:Initialised output_dir with value: output
2025/03/04 08:33:33 AM DEBUG:Initialised logs_dir with value: logs
2025/03/04 08:33:33 AM DEBUG:Initialised logs_dir with value: logs
2025/03/04 08:33:33 AM DEBUG:Initialised components_dir with value: components
2025/03/04 08:33:33 AM DEBUG:Initialised components_dir with value: components
2025/03/04 08:33:33 AM DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/04 08:33:33 AM DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/04 08:33:33 AM DEBUG:Initialised utils_dir with value: utils
2025/03/04 08:33:33 AM DEBUG:Initialised utils_dir with value: utils
2025/03/04 08:33:33 AM DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:33:33 AM DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:33:33 AM DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:33:33 AM DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:33:33 AM DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/04 08:33:33 AM DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/04 08:33:33 AM DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:33:34 AM DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:33:34 AM DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:33:34 AM DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:33:34 AM DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:33:34 AM DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:33:34 AM DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/04 08:33:34 AM DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/04 08:33:34 AM DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/04 08:33:34 AM DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/04 08:33:34 AM DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/04 08:33:34 AM DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/04 08:33:34 AM DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/04 08:33:34 AM DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/04 08:33:34 AM DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/04 08:33:34 AM DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/04 08:33:34 AM DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/04 08:33:34 AM DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/04 08:33:34 AM DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/04 08:33:34 AM DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/04 08:33:34 AM DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/04 08:33:34 AM DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/04 08:33:34 AM DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/04 08:33:34 AM DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/04 08:33:34 AM DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/04 08:33:34 AM DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:33:34 AM DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/04 08:33:34 AM DEBUG:Initialised Cash_ftr with value: {'DonationType': 'Cash'}
2025/03/04 08:33:34 AM DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:33:34 AM INFO:Session_state variables initialized
2025/03/04 08:33:34 AM DEBUG:Initialised Cash_ftr with value: {'DonationType': 'Cash'}
2025/03/04 08:33:34 AM DEBUG:output_dir: output
2025/03/04 08:33:34 AM INFO:Session_state variables initialized
2025/03/04 08:33:34 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:33:34 AM DEBUG:output_dir: output
2025/03/04 08:33:34 AM DEBUG:utils_dir: utils
2025/03/04 08:33:34 AM DEBUG:data_dir: data
2025/03/04 08:33:34 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:33:34 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:33:34 AM DEBUG:utils_dir: utils
2025/03/04 08:33:34 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:33:34 AM DEBUG:data_dir: data
2025/03/04 08:33:34 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:33:34 AM DEBUG:components_dir: components
2025/03/04 08:33:34 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:33:34 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:33:34 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:33:34 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:33:34 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:33:34 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:33:34 AM DEBUG:components_dir: components
2025/03/04 08:33:34 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:33:34 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:33:34 AM DEBUG:reference_dir: reference_files
2025/03/04 08:33:34 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:33:34 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:33:34 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:33:34 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:33:34 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:33:34 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:33:34 AM DEBUG:reference_dir: reference_files
2025/03/04 08:33:34 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:33:34 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:33:34 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:33:34 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:33:34 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:33:34 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:33:34 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:33:34 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:33:34 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:33:34 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:33:34 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:33:34 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:33:34 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:33:34 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:33:34 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:33:34 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:33:34 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:33:34 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:33:34 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:33:34 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:33:34 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:33:34 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:33:34 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:33:34 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:33:34 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:33:34 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:33:34 AM DEBUG:perc_target: 0.5
2025/03/04 08:33:34 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:33:34 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:33:34 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:33:34 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:33:34 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:33:34 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:33:34 AM DEBUG:perc_target: 0.5
2025/03/04 08:33:34 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:33:34 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:33:34 AM DEBUG:logs_dir: logs
2025/03/04 08:33:34 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:33:34 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:33:34 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:33:34 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:33:34 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:33:34 AM INFO:Session state Setup complete
2025/03/04 08:33:34 AM DEBUG:logs_dir: logs
2025/03/04 08:33:34 AM INFO:initialize_session_state executed successfully
2025/03/04 08:33:34 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:33:34 AM INFO:Package setup complete
2025/03/04 08:33:34 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:33:34 AM INFO:setup_package executed successfully
2025/03/04 08:33:34 AM INFO:Session state Setup complete
2025/03/04 08:33:34 AM INFO:initialize_session_state executed successfully
2025/03/04 08:33:34 AM INFO:Running Menu setup...
2025/03/04 08:33:34 AM INFO:Package setup complete
2025/03/04 08:33:34 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:33:34 AM INFO:setup_package executed successfully
2025/03/04 08:33:34 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\app_pages',), kwargs={}
2025/03/04 08:33:34 AM INFO:Running Menu setup...
2025/03/04 08:33:34 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:33:34 AM INFO:get_git_version executed successfully
2025/03/04 08:33:34 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\components',), kwargs={}
2025/03/04 08:33:34 AM INFO:get_git_version executed successfully
2025/03/04 08:33:34 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:33:34 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:33:34 AM INFO:get_git_version executed successfully
2025/03/04 08:33:34 AM INFO:get_git_version executed successfully
2025/03/04 08:33:34 AM INFO:App Version: v20.161
2025/03/04 08:33:34 AM INFO:App Version: v20.161
2025/03/04 08:33:34 AM INFO:Switched to page: Introduction
2025/03/04 08:33:34 AM INFO:Switched to page: Introduction
2025/03/04 08:33:34 AM INFO:pagesetup executed successfully
2025/03/04 08:33:34 AM INFO:pagesetup executed successfully
2025/03/04 08:33:34 AM INFO:No data found in session state, running firstload()
2025/03/04 08:33:34 AM INFO:No data found in session state, running firstload()
2025/03/04 08:33:34 AM DEBUG:Calling initialise_data with args=(), kwargs={}
2025/03/04 08:33:34 AM INFO:Running first load function.
2025/03/04 08:33:34 AM DEBUG:Calling firstload with args=(), kwargs={}
2025/03/04 08:33:34 AM DEBUG:Calling load_data_to_session with args=('raw_data', <function get_raw_data at 0x000001D946EB1510>), kwargs={}
2025/03/04 08:33:34 AM DEBUG:Calling get_raw_data with args=(), kwargs={}
2025/03/04 08:33:34 AM DEBUG:Calling load_raw_data with args=(), kwargs={'main_file': 'raw_data', 'cleaned_file': 'raw_data_clean', 'output_csv': True, 'dedupe_donors': True, 'dedupe_regentity': True, 'originaldatafilepath': 'source_data_fname', 'processeddatafilepath': 'imported_raw_fname'}
2025/03/04 08:33:34 AM DEBUG:Original data file path pre raw data load: {originaldatafilepath}
2025/03/04 08:33:34 AM DEBUG:Processed data file path pre raw data load: {processeddatafilepath}
2025/03/04 08:33:34 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': 'source\\Donations_accepted_by_political_parties.csv', 'savedfilepath': 'output\\imported_raw.csv', 'timestamp_key': 'load_raw_data_last_modified'}
2025/03/04 08:33:34 AM INFO:Original file path: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:33:34 AM INFO:Saved file path: output\imported_raw.csv
2025/03/04 08:33:34 AM DEBUG:Calling is_file_updated with args=('source\\Donations_accepted_by_political_parties.csv', 'load_raw_data_last_modified'), kwargs={}
2025/03/04 08:33:34 AM INFO:Checking if source\Donations_accepted_by_political_parties.csv has been updated.
2025/03/04 08:33:34 AM DEBUG:Calling get_file_modification_time with args=('source\\Donations_accepted_by_political_parties.csv',), kwargs={}
2025/03/04 08:33:34 AM INFO:Getting modification time for source\Donations_accepted_by_political_parties.csv
2025/03/04 08:33:34 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:33:34 AM INFO:Current modification time: 1740757862.6744745
2025/03/04 08:33:34 AM INFO:Last modification time: None
2025/03/04 08:33:34 AM INFO:is_file_updated executed successfully
2025/03/04 08:33:34 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:33:34 AM INFO:Loading raw data...
2025/03/04 08:33:34 AM DEBUG:Original data file path post raw data load: {originaldatafilepath}
2025/03/04 08:33:34 AM DEBUG:Processed data file path post raw data load: {processeddatafilepath}
2025/03/04 08:33:35 AM INFO:Data loaded successfully. Data has 65278 rows and 29 columns
2025/03/04 08:33:35 AM INFO:Data saved to output\imported_raw.csv
2025/03/04 08:33:35 AM DEBUG:Calling raw_data_cleanup with args=(), kwargs={'loaddata_df':            ECRef              RegulatedEntityName    RegulatedEntityType        Value AcceptedDate  ... AccountingUnitId  DonorId CampaigningName   RegisterName IsIrishSource
index                                                                                               ...                                                                       
0      NC0408174                   Mr Andy Street        Regulated Donee    £1,876.56   02/09/2019  ...              NaN  86310.0             NaN  Great Britain         False
1      NC0408173                   Mr Andy Street        Regulated Donee    £2,700.00   02/09/2019  ...              NaN  86310.0             NaN  Great Britain         False
2      NC0408177                   Mr Andy Street        Regulated Donee    £4,852.58   30/08/2019  ...              NaN  86310.0             NaN  Great Britain         False
3      NC0408176                   Mr Andy Street        Regulated Donee    £2,500.00   30/08/2019  ...              NaN  86310.0             NaN  Great Britain         False
4      NC0408170                   Mr Andy Street        Regulated Donee    £4,524.05   29/08/2019  ...              NaN  86310.0             NaN  Great Britain         False
...          ...                              ...                    ...          ...          ...  ...              ...      ...             ...            ...           ...
65273   C0242478               Vote Leave Limited  Permitted Participant   £10,000.00          NaN  ...              NaN  74198.0             NaN            NaN         False
65274   C0242461               Vote Leave Limited  Permitted Participant  £100,000.00          NaN  ...              NaN  74184.0             NaN            NaN         False
65275   C0243560               Vote Leave Limited  Permitted Participant   £40,000.00          NaN  ...              NaN  74576.0             NaN            NaN         False
65276   C0319710  Conservative and Unionist Party        Political Party   £50,000.00          NaN  ...              NaN  34241.0             NaN  Great Britain         False
65277   C0319727  Conservative and Unionist Party        Political Party   £15,000.00          NaN  ...              NaN  74743.0             NaN  Great Britain         False

[65278 rows x 29 columns], 'dedupe_donors': True, 'dedupe_regentity': True, 'output_csv': True, 'originaldatafilepath': 'output\\imported_raw.csv', 'processeddatafilepath': 'cleaned_donations_fname'}
2025/03/04 08:33:35 AM INFO:Cleaning up raw data
2025/03/04 08:33:35 AM ERROR:Session state variables not initialized!
2025/03/04 08:33:35 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': None, 'savedfilepath': 'output\\cleaned_donations.csv', 'timestamp_key': 'cleaned_raw_data_last_modified'}
2025/03/04 08:33:35 AM INFO:Original file path: None
2025/03/04 08:33:35 AM INFO:Saved file path: output\cleaned_donations.csv
2025/03/04 08:33:35 AM ERROR:Error: originalfilepath is None!
2025/03/04 08:33:35 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:33:35 AM INFO:Data loaded, shape: (65278, 29)
2025/03/04 08:33:37 AM DEBUG:Calling dedupe_entity_file with args=(), kwargs={'loaddata_dd_df':            ECRef              RegulatedEntityName    RegulatedEntityType      Value AcceptedDate  ... AccountingUnitId  DonorId CampaigningName   RegisterName IsIrishSource
index                                                                                             ...                                                                       
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56   02/09/2019  ...                   86310.0                  Great Britain         False
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00   02/09/2019  ...                   86310.0                  Great Britain         False
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58   30/08/2019  ...                   86310.0                  Great Britain         False
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00   30/08/2019  ...                   86310.0                  Great Britain         False
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05   29/08/2019  ...                   86310.0                  Great Britain         False
...          ...                              ...                    ...        ...          ...  ...              ...      ...             ...            ...           ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00          NaN  ...                   74198.0                          Other         False
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00          NaN  ...                   74184.0                          Other         False
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00          NaN  ...                   74576.0                          Other         False
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00          NaN  ...                   34241.0                  Great Britain         False
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00          NaN  ...                   74743.0                  Great Britain         False

[65278 rows x 29 columns], 'entity': 'RegulatedEntity', 'map_filename': 'regentity_map_fname', 'output_csv': True}
2025/03/04 08:33:37 AM DEBUG:Calling is_file_updated with args=('reference_files\\PoliticalEntityDeDuped.csv', 'regentity_map_fname_last_modified'), kwargs={}
2025/03/04 08:33:37 AM INFO:Checking if reference_files\PoliticalEntityDeDuped.csv has been updated.
2025/03/04 08:33:37 AM DEBUG:Calling get_file_modification_time with args=('reference_files\\PoliticalEntityDeDuped.csv',), kwargs={}
2025/03/04 08:33:37 AM INFO:Getting modification time for reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:33:37 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:33:37 AM INFO:Current modification time: 1740841102.2638545
2025/03/04 08:33:37 AM INFO:Last modification time: None
2025/03/04 08:33:37 AM INFO:is_file_updated executed successfully
2025/03/04 08:33:37 AM INFO:Map file regentity_map_fname has been updated. Proceeding with deduplication.
2025/03/04 08:33:37 AM INFO:File deduplication complete, shape: (65278, 34)
2025/03/04 08:33:37 AM INFO:dedupe_entity_file executed successfully
2025/03/04 08:33:37 AM DEBUG:Calling dedupe_entity_file with args=(), kwargs={'loaddata_dd_df':            ECRef      OriginalRegulatedEntityName    RegulatedEntityType  ...      OriginalRegulatedEntityName RegulatedEntityId              RegulatedEntityName
0      NC0408174                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
1      NC0408173                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
2      NC0408177                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
3      NC0408176                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
4      NC0408170                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
...          ...                              ...                    ...  ...                              ...               ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant  ...               Vote Leave Limited            3945.0               Vote Leave Limited
65274   C0242461               Vote Leave Limited  Permitted Participant  ...               Vote Leave Limited            3945.0               Vote Leave Limited
65275   C0243560               Vote Leave Limited  Permitted Participant  ...               Vote Leave Limited            3945.0               Vote Leave Limited
65276   C0319710  Conservative And Unionist Party        Political Party  ...  Conservative And Unionist Party              52.0  Conservative And Unionist Party
65277   C0319727  Conservative And Unionist Party        Political Party  ...  Conservative And Unionist Party              52.0  Conservative And Unionist Party

[65278 rows x 34 columns], 'entity': 'Donor', 'map_filename': 'donor_map_fname', 'output_csv': True}
2025/03/04 08:33:37 AM DEBUG:Calling is_file_updated with args=('reference_files\\PoliticalDonorsDeduped.csv', 'donor_map_fname_last_modified'), kwargs={}
2025/03/04 08:33:37 AM INFO:Checking if reference_files\PoliticalDonorsDeduped.csv has been updated.
2025/03/04 08:33:37 AM DEBUG:Calling get_file_modification_time with args=('reference_files\\PoliticalDonorsDeduped.csv',), kwargs={}
2025/03/04 08:33:37 AM INFO:Getting modification time for reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:33:37 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:33:37 AM INFO:Current modification time: 1740757863.2545311
2025/03/04 08:33:37 AM INFO:Last modification time: None
2025/03/04 08:33:37 AM INFO:is_file_updated executed successfully
2025/03/04 08:33:37 AM INFO:Map file donor_map_fname has been updated. Proceeding with deduplication.
2025/03/04 08:33:37 AM INFO:File deduplication complete, shape: (65278, 40)
2025/03/04 08:33:37 AM INFO:dedupe_entity_file executed successfully
2025/03/04 08:33:37 AM INFO:Raw Data cleanup completed
2025/03/04 08:33:37 AM INFO:Data shape: (65278, 40)
2025/03/04 08:33:38 AM INFO:Data saved to output\cleaned_donations.csv
2025/03/04 08:33:38 AM INFO:Data cleanup completed, shape: (65278, 40)
2025/03/04 08:33:38 AM INFO:raw_data_cleanup executed successfully
2025/03/04 08:33:39 AM INFO:load_raw_data executed successfully
2025/03/04 08:33:39 AM INFO:get_raw_data executed successfully
2025/03/04 08:33:39 AM INFO:load_data_to_session executed successfully
2025/03/04 08:33:39 AM DEBUG:Calling load_data_to_session with args=('data_clean', <function get_cleaned_data at 0x000001D946EB15A0>), kwargs={}
2025/03/04 08:33:39 AM DEBUG:Calling get_cleaned_data with args=(), kwargs={}
2025/03/04 08:33:39 AM DEBUG:Calling load_cleaned_data with args=(), kwargs={'originaldatafilepath': 'cleaned_donations_fname', 'processeddatafilepath': 'cleaned_data_fname', 'datafile': 'raw_data', 'streamlitrun': True, 'output_csv': True, 'main_file': 'raw_data', 'cleaned_file': 'data_clean'}
2025/03/04 08:33:39 AM DEBUG:Rows in Raw Data: 65278
2025/03/04 08:33:39 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': 'output\\cleaned_donations.csv', 'savedfilepath': 'output\\cleaned_data.csv', 'timestamp_key': 'load_raw_data_last_modified'}
2025/03/04 08:33:39 AM INFO:Original file path: output\cleaned_donations.csv
2025/03/04 08:33:39 AM INFO:Saved file path: output\cleaned_data.csv
2025/03/04 08:33:39 AM DEBUG:Calling is_file_updated with args=('output\\cleaned_donations.csv', 'load_raw_data_last_modified'), kwargs={}
2025/03/04 08:33:39 AM INFO:Checking if output\cleaned_donations.csv has been updated.
2025/03/04 08:33:39 AM DEBUG:Calling get_file_modification_time with args=('output\\cleaned_donations.csv',), kwargs={}
2025/03/04 08:33:39 AM INFO:Getting modification time for output\cleaned_donations.csv
2025/03/04 08:33:39 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:33:39 AM INFO:Current modification time: 1741077218.9491327
2025/03/04 08:33:39 AM INFO:Last modification time: 1740757862.6744745
2025/03/04 08:33:39 AM INFO:is_file_updated executed successfully
2025/03/04 08:33:39 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:33:39 AM ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/04 08:33:39 AM ERROR:Error in load_cleaned_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 44, in load_cleaned_data
    logger.debug(f"Clean Data Prep: loaddata_df records: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:33:39 AM ERROR:Error in get_cleaned_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 44, in load_cleaned_data
    logger.debug(f"Clean Data Prep: loaddata_df records: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:33:39 AM ERROR:Error in load_data_to_session: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 44, in load_cleaned_data
    logger.debug(f"Clean Data Prep: loaddata_df records: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:33:39 AM ERROR:Error in firstload: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 80, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 44, in load_cleaned_data
    logger.debug(f"Clean Data Prep: loaddata_df records: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:33:39 AM ERROR:Error in initialise_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_utils.py", line 42, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 80, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 44, in load_cleaned_data
    logger.debug(f"Clean Data Prep: loaddata_df records: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:33:39 AM DEBUG:Calling initialise_data with args=(), kwargs={}
2025/03/04 08:33:39 AM INFO:Running first load function.
2025/03/04 08:33:39 AM DEBUG:Calling firstload with args=(), kwargs={}
2025/03/04 08:33:39 AM DEBUG:Calling load_data_to_session with args=('raw_data', <function get_raw_data at 0x000001D946EB1510>), kwargs={}
2025/03/04 08:33:39 AM DEBUG:Calling get_raw_data with args=(), kwargs={}
2025/03/04 08:33:39 AM INFO:get_raw_data executed successfully
2025/03/04 08:33:39 AM INFO:load_data_to_session executed successfully
2025/03/04 08:33:39 AM DEBUG:Calling load_data_to_session with args=('data_clean', <function get_cleaned_data at 0x000001D946EB15A0>), kwargs={}
2025/03/04 08:33:39 AM DEBUG:Calling get_cleaned_data with args=(), kwargs={}
2025/03/04 08:33:39 AM DEBUG:Calling load_cleaned_data with args=(), kwargs={'originaldatafilepath': 'cleaned_donations_fname', 'processeddatafilepath': 'cleaned_data_fname', 'datafile': 'raw_data', 'streamlitrun': True, 'output_csv': True, 'main_file': 'raw_data', 'cleaned_file': 'data_clean'}
2025/03/04 08:33:39 AM DEBUG:Rows in Raw Data: 65278
2025/03/04 08:33:39 AM ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/04 08:33:39 AM ERROR:Error in load_cleaned_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 44, in load_cleaned_data
    logger.debug(f"Clean Data Prep: loaddata_df records: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:33:39 AM ERROR:Error in get_cleaned_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 44, in load_cleaned_data
    logger.debug(f"Clean Data Prep: loaddata_df records: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:33:39 AM ERROR:Error in load_data_to_session: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 44, in load_cleaned_data
    logger.debug(f"Clean Data Prep: loaddata_df records: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:33:39 AM ERROR:Error in firstload: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 80, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 44, in load_cleaned_data
    logger.debug(f"Clean Data Prep: loaddata_df records: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:33:39 AM ERROR:Error in initialise_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_utils.py", line 42, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 80, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 44, in load_cleaned_data
    logger.debug(f"Clean Data Prep: loaddata_df records: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:34:41 AM INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/04 08:34:41 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\utils',), kwargs={}
2025/03/04 08:34:42 AM INFO:get_git_version executed successfully
2025/03/04 08:34:43 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\data',), kwargs={}
2025/03/04 08:34:43 AM INFO:get_git_version executed successfully
2025/03/04 08:34:43 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:34:43 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:34:43 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:34:43 AM INFO:Running App setup...
2025/03/04 08:34:43 AM INFO:Running App setup...
2025/03/04 08:34:43 AM INFO:Running App setup...
2025/03/04 08:34:43 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:34:43 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:34:43 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:34:43 AM INFO:Setting up the package
2025/03/04 08:34:43 AM INFO:Setting up the package
2025/03/04 08:34:43 AM INFO:Setting up the package
2025/03/04 08:34:43 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:34:43 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:34:43 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:34:43 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:34:43 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:34:43 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:34:43 AM INFO:get_git_version executed successfully
2025/03/04 08:34:43 AM INFO:get_git_version executed successfully
2025/03/04 08:34:43 AM INFO:get_git_version executed successfully
2025/03/04 08:34:43 AM INFO:Version: v20.140
2025/03/04 08:34:43 AM INFO:Version: v20.140
2025/03/04 08:34:43 AM INFO:Version: v20.140
2025/03/04 08:34:43 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:34:43 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:34:43 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:34:43 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:34:43 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:34:43 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:34:43 AM DEBUG:Initialised LOG_LEVEL with value: DEBUG
2025/03/04 08:34:43 AM DEBUG:Initialised LOG_LEVEL with value: DEBUG
2025/03/04 08:34:43 AM DEBUG:Initialised LOG_LEVEL with value: DEBUG
2025/03/04 08:34:43 AM DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo-1
2025/03/04 08:34:43 AM DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo-1
2025/03/04 08:34:43 AM DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo-1
2025/03/04 08:34:43 AM DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:34:43 AM DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:34:43 AM DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:34:43 AM DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/04 08:34:43 AM DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/04 08:34:43 AM DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/04 08:34:43 AM DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/04 08:34:43 AM DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/04 08:34:43 AM DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/04 08:34:43 AM DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:34:43 AM DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:34:43 AM DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:34:43 AM DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:34:43 AM DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:34:43 AM DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:34:43 AM DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:34:43 AM DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:34:43 AM DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:34:43 AM DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:34:43 AM DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:34:43 AM DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:34:43 AM DEBUG:Initialised perc_target with value: 0.5
2025/03/04 08:34:43 AM DEBUG:Initialised perc_target with value: 0.5
2025/03/04 08:34:43 AM DEBUG:Initialised perc_target with value: 0.5
2025/03/04 08:34:43 AM DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/04 08:34:43 AM DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/04 08:34:43 AM DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/04 08:34:43 AM DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:34:43 AM DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:34:43 AM DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:34:43 AM DEBUG:Initialised reference_dir with value: reference_files
2025/03/04 08:34:43 AM DEBUG:Initialised reference_dir with value: reference_files
2025/03/04 08:34:43 AM DEBUG:Initialised data_dir with value: data
2025/03/04 08:34:43 AM DEBUG:Initialised reference_dir with value: reference_files
2025/03/04 08:34:43 AM DEBUG:Initialised data_dir with value: data
2025/03/04 08:34:43 AM DEBUG:Initialised output_dir with value: output
2025/03/04 08:34:43 AM DEBUG:Initialised data_dir with value: data
2025/03/04 08:34:43 AM DEBUG:Initialised output_dir with value: output
2025/03/04 08:34:43 AM DEBUG:Initialised logs_dir with value: logs
2025/03/04 08:34:43 AM DEBUG:Initialised output_dir with value: output
2025/03/04 08:34:43 AM DEBUG:Initialised logs_dir with value: logs
2025/03/04 08:34:43 AM DEBUG:Initialised components_dir with value: components
2025/03/04 08:34:43 AM DEBUG:Initialised logs_dir with value: logs
2025/03/04 08:34:43 AM DEBUG:Initialised components_dir with value: components
2025/03/04 08:34:43 AM DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/04 08:34:43 AM DEBUG:Initialised components_dir with value: components
2025/03/04 08:34:43 AM DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/04 08:34:43 AM DEBUG:Initialised utils_dir with value: utils
2025/03/04 08:34:43 AM DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/04 08:34:43 AM DEBUG:Initialised utils_dir with value: utils
2025/03/04 08:34:43 AM DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:34:43 AM DEBUG:Initialised utils_dir with value: utils
2025/03/04 08:34:43 AM DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:34:43 AM DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:34:43 AM DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:34:43 AM DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:34:43 AM DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/04 08:34:43 AM DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:34:43 AM DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/04 08:34:43 AM DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:34:43 AM DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/04 08:34:43 AM DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:34:43 AM DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:34:43 AM DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:34:43 AM DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:34:43 AM DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:34:43 AM DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:34:43 AM DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:34:43 AM DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/04 08:34:43 AM DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:34:43 AM DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/04 08:34:43 AM DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/04 08:34:43 AM DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/04 08:34:43 AM DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/04 08:34:43 AM DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/04 08:34:43 AM DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/04 08:34:43 AM DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/04 08:34:43 AM DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/04 08:34:43 AM DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/04 08:34:43 AM DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/04 08:34:43 AM DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/04 08:34:43 AM DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/04 08:34:43 AM DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/04 08:34:43 AM DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/04 08:34:43 AM DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/04 08:34:43 AM DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/04 08:34:43 AM DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/04 08:34:43 AM DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/04 08:34:43 AM DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/04 08:34:43 AM DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/04 08:34:43 AM DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/04 08:34:43 AM DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/04 08:34:43 AM DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/04 08:34:43 AM DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/04 08:34:43 AM DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/04 08:34:43 AM DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/04 08:34:43 AM DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/04 08:34:43 AM DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/04 08:34:43 AM DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:34:43 AM DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/04 08:34:43 AM DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:34:43 AM DEBUG:Initialised Cash_ftr with value: {'DonationType': 'Cash'}
2025/03/04 08:34:43 AM DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:34:43 AM DEBUG:Initialised Cash_ftr with value: {'DonationType': 'Cash'}
2025/03/04 08:34:43 AM INFO:Session_state variables initialized
2025/03/04 08:34:43 AM DEBUG:Initialised Cash_ftr with value: {'DonationType': 'Cash'}
2025/03/04 08:34:43 AM INFO:Session_state variables initialized
2025/03/04 08:34:43 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:34:43 AM INFO:Session_state variables initialized
2025/03/04 08:34:43 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:34:43 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:34:43 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:34:43 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:34:43 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:34:43 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:34:43 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:34:43 AM DEBUG:output_dir: output
2025/03/04 08:34:43 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:34:43 AM DEBUG:output_dir: output
2025/03/04 08:34:43 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:34:43 AM DEBUG:output_dir: output
2025/03/04 08:34:43 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:34:43 AM DEBUG:logs_dir: logs
2025/03/04 08:34:43 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:34:43 AM DEBUG:logs_dir: logs
2025/03/04 08:34:43 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:34:43 AM DEBUG:logs_dir: logs
2025/03/04 08:34:43 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:34:43 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:34:43 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:34:43 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:34:43 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:34:43 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:34:43 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:34:43 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:34:43 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:34:43 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:34:43 AM DEBUG:data_dir: data
2025/03/04 08:34:43 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:34:43 AM DEBUG:data_dir: data
2025/03/04 08:34:43 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:34:43 AM DEBUG:data_dir: data
2025/03/04 08:34:43 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:34:43 AM DEBUG:utils_dir: utils
2025/03/04 08:34:43 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:34:43 AM DEBUG:utils_dir: utils
2025/03/04 08:34:43 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:34:43 AM DEBUG:utils_dir: utils
2025/03/04 08:34:43 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:34:43 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:34:43 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:34:43 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:34:43 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:34:43 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:34:43 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:34:43 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:34:43 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:34:43 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:34:43 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:34:43 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:34:43 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:34:43 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:34:43 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:34:43 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:34:43 AM DEBUG:perc_target: 0.5
2025/03/04 08:34:43 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:34:43 AM DEBUG:perc_target: 0.5
2025/03/04 08:34:43 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:34:43 AM DEBUG:perc_target: 0.5
2025/03/04 08:34:43 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:34:43 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:34:43 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:34:43 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:34:43 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:34:43 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:34:43 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:34:43 AM DEBUG:reference_dir: reference_files
2025/03/04 08:34:43 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:34:43 AM DEBUG:reference_dir: reference_files
2025/03/04 08:34:43 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:34:43 AM DEBUG:reference_dir: reference_files
2025/03/04 08:34:43 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:34:43 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:34:43 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:34:43 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:34:43 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:34:43 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:34:43 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:34:43 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:34:43 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:34:43 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:34:43 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:34:43 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:34:43 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:34:43 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:34:43 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:34:43 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:34:43 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:34:43 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:34:43 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:34:43 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:34:43 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:34:43 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:34:43 AM DEBUG:components_dir: components
2025/03/04 08:34:43 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:34:43 AM DEBUG:components_dir: components
2025/03/04 08:34:43 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:34:43 AM DEBUG:components_dir: components
2025/03/04 08:34:43 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:34:43 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:34:43 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:34:43 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:34:43 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:34:43 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:34:43 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:34:43 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:34:43 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:34:43 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:34:43 AM INFO:Session state Setup complete
2025/03/04 08:34:43 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:34:43 AM INFO:Session state Setup complete
2025/03/04 08:34:43 AM INFO:initialize_session_state executed successfully
2025/03/04 08:34:43 AM INFO:Session state Setup complete
2025/03/04 08:34:43 AM INFO:initialize_session_state executed successfully
2025/03/04 08:34:43 AM INFO:Package setup complete
2025/03/04 08:34:43 AM INFO:initialize_session_state executed successfully
2025/03/04 08:34:43 AM INFO:Package setup complete
2025/03/04 08:34:43 AM INFO:setup_package executed successfully
2025/03/04 08:34:43 AM INFO:Package setup complete
2025/03/04 08:34:43 AM INFO:setup_package executed successfully
2025/03/04 08:34:43 AM INFO:setup_package executed successfully
2025/03/04 08:34:43 AM INFO:Running Menu setup...
2025/03/04 08:34:43 AM INFO:Running Menu setup...
2025/03/04 08:34:43 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:34:43 AM INFO:Running Menu setup...
2025/03/04 08:34:43 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:34:43 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:34:43 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\app_pages',), kwargs={}
2025/03/04 08:34:43 AM INFO:get_git_version executed successfully
2025/03/04 08:34:43 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\components',), kwargs={}
2025/03/04 08:34:43 AM INFO:get_git_version executed successfully
2025/03/04 08:34:43 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:34:43 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:34:43 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:34:43 AM INFO:get_git_version executed successfully
2025/03/04 08:34:43 AM INFO:get_git_version executed successfully
2025/03/04 08:34:43 AM INFO:get_git_version executed successfully
2025/03/04 08:34:43 AM INFO:App Version: v20.161
2025/03/04 08:34:43 AM INFO:App Version: v20.161
2025/03/04 08:34:43 AM INFO:App Version: v20.161
2025/03/04 08:34:43 AM INFO:Switched to page: Introduction
2025/03/04 08:34:43 AM INFO:Switched to page: Introduction
2025/03/04 08:34:43 AM INFO:Switched to page: Introduction
2025/03/04 08:34:43 AM INFO:pagesetup executed successfully
2025/03/04 08:34:43 AM INFO:pagesetup executed successfully
2025/03/04 08:34:43 AM INFO:pagesetup executed successfully
2025/03/04 08:34:43 AM INFO:No data found in session state, running firstload()
2025/03/04 08:34:43 AM DEBUG:Calling initialise_data with args=(), kwargs={}
2025/03/04 08:34:43 AM INFO:No data found in session state, running firstload()
2025/03/04 08:34:43 AM INFO:No data found in session state, running firstload()
2025/03/04 08:34:44 AM INFO:Running first load function.
2025/03/04 08:34:44 AM DEBUG:Calling firstload with args=(), kwargs={}
2025/03/04 08:34:44 AM DEBUG:Calling load_data_to_session with args=('raw_data', <function get_raw_data at 0x0000021EEE6CDFC0>), kwargs={}
2025/03/04 08:34:44 AM DEBUG:Calling get_raw_data with args=(), kwargs={}
2025/03/04 08:34:44 AM DEBUG:Calling load_raw_data with args=(), kwargs={'main_file': 'raw_data', 'cleaned_file': 'raw_data_clean', 'output_csv': True, 'dedupe_donors': True, 'dedupe_regentity': True, 'originaldatafilepath': 'source_data_fname', 'processeddatafilepath': 'imported_raw_fname'}
2025/03/04 08:34:44 AM DEBUG:Original data file path pre raw data load: {originaldatafilepath}
2025/03/04 08:34:44 AM DEBUG:Processed data file path pre raw data load: {processeddatafilepath}
2025/03/04 08:34:44 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': 'source\\Donations_accepted_by_political_parties.csv', 'savedfilepath': 'output\\imported_raw.csv', 'timestamp_key': 'load_raw_data_last_modified'}
2025/03/04 08:34:44 AM INFO:Original file path: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:34:44 AM INFO:Saved file path: output\imported_raw.csv
2025/03/04 08:34:44 AM DEBUG:Calling is_file_updated with args=('source\\Donations_accepted_by_political_parties.csv', 'load_raw_data_last_modified'), kwargs={}
2025/03/04 08:34:44 AM INFO:Checking if source\Donations_accepted_by_political_parties.csv has been updated.
2025/03/04 08:34:44 AM DEBUG:Calling get_file_modification_time with args=('source\\Donations_accepted_by_political_parties.csv',), kwargs={}
2025/03/04 08:34:44 AM INFO:Getting modification time for source\Donations_accepted_by_political_parties.csv
2025/03/04 08:34:44 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:34:44 AM INFO:Current modification time: 1740757862.6744745
2025/03/04 08:34:44 AM INFO:Last modification time: None
2025/03/04 08:34:44 AM INFO:is_file_updated executed successfully
2025/03/04 08:34:44 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:34:44 AM INFO:Loading raw data...
2025/03/04 08:34:44 AM DEBUG:Original data file path post raw data load: {originaldatafilepath}
2025/03/04 08:34:44 AM DEBUG:Processed data file path post raw data load: {processeddatafilepath}
2025/03/04 08:34:44 AM INFO:Data loaded successfully. Data has 65278 rows and 29 columns
2025/03/04 08:34:45 AM INFO:Data saved to output\imported_raw.csv
2025/03/04 08:34:45 AM DEBUG:Calling raw_data_cleanup with args=(), kwargs={'loaddata_df':            ECRef              RegulatedEntityName    RegulatedEntityType        Value AcceptedDate  ... AccountingUnitId  DonorId CampaigningName   RegisterName IsIrishSource
index                                                                                               ...                                                                       
0      NC0408174                   Mr Andy Street        Regulated Donee    £1,876.56   02/09/2019  ...              NaN  86310.0             NaN  Great Britain         False
1      NC0408173                   Mr Andy Street        Regulated Donee    £2,700.00   02/09/2019  ...              NaN  86310.0             NaN  Great Britain         False
2      NC0408177                   Mr Andy Street        Regulated Donee    £4,852.58   30/08/2019  ...              NaN  86310.0             NaN  Great Britain         False
3      NC0408176                   Mr Andy Street        Regulated Donee    £2,500.00   30/08/2019  ...              NaN  86310.0             NaN  Great Britain         False
4      NC0408170                   Mr Andy Street        Regulated Donee    £4,524.05   29/08/2019  ...              NaN  86310.0             NaN  Great Britain         False
...          ...                              ...                    ...          ...          ...  ...              ...      ...             ...            ...           ...
65273   C0242478               Vote Leave Limited  Permitted Participant   £10,000.00          NaN  ...              NaN  74198.0             NaN            NaN         False
65274   C0242461               Vote Leave Limited  Permitted Participant  £100,000.00          NaN  ...              NaN  74184.0             NaN            NaN         False
65275   C0243560               Vote Leave Limited  Permitted Participant   £40,000.00          NaN  ...              NaN  74576.0             NaN            NaN         False
65276   C0319710  Conservative and Unionist Party        Political Party   £50,000.00          NaN  ...              NaN  34241.0             NaN  Great Britain         False
65277   C0319727  Conservative and Unionist Party        Political Party   £15,000.00          NaN  ...              NaN  74743.0             NaN  Great Britain         False

[65278 rows x 29 columns], 'dedupe_donors': True, 'dedupe_regentity': True, 'output_csv': True, 'originaldatafilepath': 'output\\imported_raw.csv', 'processeddatafilepath': 'cleaned_donations_fname'}
2025/03/04 08:34:45 AM INFO:Cleaning up raw data
2025/03/04 08:34:45 AM ERROR:Session state variables not initialized!
2025/03/04 08:34:45 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': None, 'savedfilepath': 'output\\cleaned_donations.csv', 'timestamp_key': 'cleaned_raw_data_last_modified'}
2025/03/04 08:34:45 AM INFO:Original file path: None
2025/03/04 08:34:45 AM INFO:Saved file path: output\cleaned_donations.csv
2025/03/04 08:34:45 AM ERROR:Error: originalfilepath is None!
2025/03/04 08:34:45 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:34:45 AM INFO:Data loaded, shape: (65278, 29)
2025/03/04 08:34:46 AM DEBUG:Calling dedupe_entity_file with args=(), kwargs={'loaddata_dd_df':            ECRef              RegulatedEntityName    RegulatedEntityType      Value AcceptedDate  ... AccountingUnitId  DonorId CampaigningName   RegisterName IsIrishSource
index                                                                                             ...                                                                       
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56   02/09/2019  ...                   86310.0                  Great Britain         False
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00   02/09/2019  ...                   86310.0                  Great Britain         False
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58   30/08/2019  ...                   86310.0                  Great Britain         False
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00   30/08/2019  ...                   86310.0                  Great Britain         False
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05   29/08/2019  ...                   86310.0                  Great Britain         False
...          ...                              ...                    ...        ...          ...  ...              ...      ...             ...            ...           ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00          NaN  ...                   74198.0                          Other         False
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00          NaN  ...                   74184.0                          Other         False
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00          NaN  ...                   74576.0                          Other         False
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00          NaN  ...                   34241.0                  Great Britain         False
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00          NaN  ...                   74743.0                  Great Britain         False

[65278 rows x 29 columns], 'entity': 'RegulatedEntity', 'map_filename': 'regentity_map_fname', 'output_csv': True}
2025/03/04 08:34:46 AM DEBUG:Calling is_file_updated with args=('reference_files\\PoliticalEntityDeDuped.csv', 'regentity_map_fname_last_modified'), kwargs={}
2025/03/04 08:34:46 AM INFO:Checking if reference_files\PoliticalEntityDeDuped.csv has been updated.
2025/03/04 08:34:46 AM DEBUG:Calling get_file_modification_time with args=('reference_files\\PoliticalEntityDeDuped.csv',), kwargs={}
2025/03/04 08:34:46 AM INFO:Getting modification time for reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:34:46 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:34:46 AM INFO:Current modification time: 1740841102.2638545
2025/03/04 08:34:46 AM INFO:Last modification time: None
2025/03/04 08:34:46 AM INFO:is_file_updated executed successfully
2025/03/04 08:34:46 AM INFO:Map file regentity_map_fname has been updated. Proceeding with deduplication.
2025/03/04 08:34:46 AM INFO:File deduplication complete, shape: (65278, 34)
2025/03/04 08:34:46 AM INFO:dedupe_entity_file executed successfully
2025/03/04 08:34:46 AM DEBUG:Calling dedupe_entity_file with args=(), kwargs={'loaddata_dd_df':            ECRef      OriginalRegulatedEntityName    RegulatedEntityType  ...      OriginalRegulatedEntityName RegulatedEntityId              RegulatedEntityName
0      NC0408174                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
1      NC0408173                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
2      NC0408177                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
3      NC0408176                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
4      NC0408170                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
...          ...                              ...                    ...  ...                              ...               ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant  ...               Vote Leave Limited            3945.0               Vote Leave Limited
65274   C0242461               Vote Leave Limited  Permitted Participant  ...               Vote Leave Limited            3945.0               Vote Leave Limited
65275   C0243560               Vote Leave Limited  Permitted Participant  ...               Vote Leave Limited            3945.0               Vote Leave Limited
65276   C0319710  Conservative And Unionist Party        Political Party  ...  Conservative And Unionist Party              52.0  Conservative And Unionist Party
65277   C0319727  Conservative And Unionist Party        Political Party  ...  Conservative And Unionist Party              52.0  Conservative And Unionist Party

[65278 rows x 34 columns], 'entity': 'Donor', 'map_filename': 'donor_map_fname', 'output_csv': True}
2025/03/04 08:34:46 AM DEBUG:Calling is_file_updated with args=('reference_files\\PoliticalDonorsDeduped.csv', 'donor_map_fname_last_modified'), kwargs={}
2025/03/04 08:34:46 AM INFO:Checking if reference_files\PoliticalDonorsDeduped.csv has been updated.
2025/03/04 08:34:46 AM DEBUG:Calling get_file_modification_time with args=('reference_files\\PoliticalDonorsDeduped.csv',), kwargs={}
2025/03/04 08:34:46 AM INFO:Getting modification time for reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:34:46 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:34:46 AM INFO:Current modification time: 1740757863.2545311
2025/03/04 08:34:46 AM INFO:Last modification time: None
2025/03/04 08:34:46 AM INFO:is_file_updated executed successfully
2025/03/04 08:34:46 AM INFO:Map file donor_map_fname has been updated. Proceeding with deduplication.
2025/03/04 08:34:46 AM INFO:File deduplication complete, shape: (65278, 40)
2025/03/04 08:34:46 AM INFO:dedupe_entity_file executed successfully
2025/03/04 08:34:46 AM INFO:Raw Data cleanup completed
2025/03/04 08:34:46 AM INFO:Data shape: (65278, 40)
2025/03/04 08:34:48 AM INFO:Data saved to output\cleaned_donations.csv
2025/03/04 08:34:48 AM INFO:Data cleanup completed, shape: (65278, 40)
2025/03/04 08:34:48 AM INFO:raw_data_cleanup executed successfully
2025/03/04 08:34:48 AM INFO:load_raw_data executed successfully
2025/03/04 08:34:48 AM INFO:get_raw_data executed successfully
2025/03/04 08:34:48 AM INFO:load_data_to_session executed successfully
2025/03/04 08:34:48 AM DEBUG:Calling load_data_to_session with args=('data_clean', <function get_cleaned_data at 0x0000021EEE6CE050>), kwargs={}
2025/03/04 08:34:48 AM DEBUG:Calling get_cleaned_data with args=(), kwargs={}
2025/03/04 08:34:48 AM DEBUG:Calling load_cleaned_data with args=(), kwargs={'originaldatafilepath': 'cleaned_donations_fname', 'processeddatafilepath': 'cleaned_data_fname', 'datafile': 'raw_data', 'streamlitrun': True, 'output_csv': True, 'main_file': 'raw_data', 'cleaned_file': 'data_clean'}
2025/03/04 08:34:48 AM DEBUG:Rows in Raw Data: 65278
2025/03/04 08:34:48 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': 'output\\cleaned_donations.csv', 'savedfilepath': 'output\\cleaned_data.csv', 'timestamp_key': 'load_raw_data_last_modified'}
2025/03/04 08:34:48 AM INFO:Original file path: output\cleaned_donations.csv
2025/03/04 08:34:48 AM INFO:Saved file path: output\cleaned_data.csv
2025/03/04 08:34:48 AM DEBUG:Calling is_file_updated with args=('output\\cleaned_donations.csv', 'load_raw_data_last_modified'), kwargs={}
2025/03/04 08:34:48 AM INFO:Checking if output\cleaned_donations.csv has been updated.
2025/03/04 08:34:48 AM DEBUG:Calling get_file_modification_time with args=('output\\cleaned_donations.csv',), kwargs={}
2025/03/04 08:34:48 AM INFO:Getting modification time for output\cleaned_donations.csv
2025/03/04 08:34:48 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:34:48 AM INFO:Current modification time: 1741077288.2520096
2025/03/04 08:34:48 AM INFO:Last modification time: 1740757862.6744745
2025/03/04 08:34:48 AM INFO:is_file_updated executed successfully
2025/03/04 08:34:48 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:34:48 AM ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/04 08:34:48 AM INFO:Loading and cleaning data... data.clean_and_enhance
2025/03/04 08:34:48 AM ERROR:Error in load_cleaned_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 77, in load_cleaned_data
    logger.debug(f"Clean Data Prep: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:34:48 AM ERROR:Error in get_cleaned_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 77, in load_cleaned_data
    logger.debug(f"Clean Data Prep: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:34:48 AM ERROR:Error in load_data_to_session: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 77, in load_cleaned_data
    logger.debug(f"Clean Data Prep: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:34:48 AM ERROR:Error in firstload: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 80, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 77, in load_cleaned_data
    logger.debug(f"Clean Data Prep: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:34:48 AM ERROR:Error in initialise_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_utils.py", line 42, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 80, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 77, in load_cleaned_data
    logger.debug(f"Clean Data Prep: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:34:48 AM DEBUG:Calling initialise_data with args=(), kwargs={}
2025/03/04 08:34:48 AM INFO:Running first load function.
2025/03/04 08:34:48 AM DEBUG:Calling firstload with args=(), kwargs={}
2025/03/04 08:34:48 AM DEBUG:Calling load_data_to_session with args=('raw_data', <function get_raw_data at 0x0000021EEE6CDFC0>), kwargs={}
2025/03/04 08:34:48 AM DEBUG:Calling get_raw_data with args=(), kwargs={}
2025/03/04 08:34:48 AM INFO:get_raw_data executed successfully
2025/03/04 08:34:48 AM INFO:load_data_to_session executed successfully
2025/03/04 08:34:48 AM DEBUG:Calling load_data_to_session with args=('data_clean', <function get_cleaned_data at 0x0000021EEE6CE050>), kwargs={}
2025/03/04 08:34:48 AM DEBUG:Calling get_cleaned_data with args=(), kwargs={}
2025/03/04 08:34:48 AM DEBUG:Calling load_cleaned_data with args=(), kwargs={'originaldatafilepath': 'cleaned_donations_fname', 'processeddatafilepath': 'cleaned_data_fname', 'datafile': 'raw_data', 'streamlitrun': True, 'output_csv': True, 'main_file': 'raw_data', 'cleaned_file': 'data_clean'}
2025/03/04 08:34:48 AM DEBUG:Rows in Raw Data: 65278
2025/03/04 08:34:48 AM ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/04 08:34:48 AM INFO:Loading and cleaning data... data.clean_and_enhance
2025/03/04 08:34:48 AM ERROR:Error in load_cleaned_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 77, in load_cleaned_data
    logger.debug(f"Clean Data Prep: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:34:48 AM ERROR:Error in get_cleaned_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 77, in load_cleaned_data
    logger.debug(f"Clean Data Prep: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:34:48 AM ERROR:Error in load_data_to_session: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 77, in load_cleaned_data
    logger.debug(f"Clean Data Prep: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:34:48 AM ERROR:Error in firstload: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 80, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 77, in load_cleaned_data
    logger.debug(f"Clean Data Prep: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:34:48 AM ERROR:Error in initialise_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_utils.py", line 42, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 80, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 77, in load_cleaned_data
    logger.debug(f"Clean Data Prep: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:34:48 AM DEBUG:Calling initialise_data with args=(), kwargs={}
2025/03/04 08:34:48 AM INFO:Running first load function.
2025/03/04 08:34:48 AM DEBUG:Calling firstload with args=(), kwargs={}
2025/03/04 08:34:48 AM DEBUG:Calling load_data_to_session with args=('raw_data', <function get_raw_data at 0x0000021EEE6CDFC0>), kwargs={}
2025/03/04 08:34:48 AM DEBUG:Calling get_raw_data with args=(), kwargs={}
2025/03/04 08:34:48 AM INFO:get_raw_data executed successfully
2025/03/04 08:34:48 AM INFO:load_data_to_session executed successfully
2025/03/04 08:34:48 AM DEBUG:Calling load_data_to_session with args=('data_clean', <function get_cleaned_data at 0x0000021EEE6CE050>), kwargs={}
2025/03/04 08:34:48 AM DEBUG:Calling get_cleaned_data with args=(), kwargs={}
2025/03/04 08:34:48 AM DEBUG:Calling load_cleaned_data with args=(), kwargs={'originaldatafilepath': 'cleaned_donations_fname', 'processeddatafilepath': 'cleaned_data_fname', 'datafile': 'raw_data', 'streamlitrun': True, 'output_csv': True, 'main_file': 'raw_data', 'cleaned_file': 'data_clean'}
2025/03/04 08:34:48 AM DEBUG:Rows in Raw Data: 65278
2025/03/04 08:34:48 AM ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/04 08:34:48 AM INFO:Loading and cleaning data... data.clean_and_enhance
2025/03/04 08:34:48 AM ERROR:Error in load_cleaned_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 77, in load_cleaned_data
    logger.debug(f"Clean Data Prep: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:34:48 AM ERROR:Error in get_cleaned_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 77, in load_cleaned_data
    logger.debug(f"Clean Data Prep: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:34:48 AM ERROR:Error in load_data_to_session: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 77, in load_cleaned_data
    logger.debug(f"Clean Data Prep: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:34:48 AM ERROR:Error in firstload: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 80, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 77, in load_cleaned_data
    logger.debug(f"Clean Data Prep: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:34:48 AM ERROR:Error in initialise_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_utils.py", line 42, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 80, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 77, in load_cleaned_data
    logger.debug(f"Clean Data Prep: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:37:55 AM INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/04 08:37:55 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\utils',), kwargs={}
2025/03/04 08:37:56 AM INFO:get_git_version executed successfully
2025/03/04 08:37:56 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\data',), kwargs={}
2025/03/04 08:37:57 AM INFO:get_git_version executed successfully
2025/03/04 08:37:57 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:37:57 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:37:57 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:37:57 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:37:57 AM INFO:Running App setup...
2025/03/04 08:37:57 AM INFO:Running App setup...
2025/03/04 08:37:57 AM INFO:Running App setup...
2025/03/04 08:37:57 AM INFO:Running App setup...
2025/03/04 08:37:57 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:37:57 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:37:57 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:37:57 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:37:57 AM INFO:Setting up the package
2025/03/04 08:37:57 AM INFO:Setting up the package
2025/03/04 08:37:57 AM INFO:Setting up the package
2025/03/04 08:37:57 AM INFO:Setting up the package
2025/03/04 08:37:57 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:37:57 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:37:57 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:37:57 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:37:57 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:37:57 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:37:57 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:37:57 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:37:57 AM INFO:get_git_version executed successfully
2025/03/04 08:37:57 AM INFO:get_git_version executed successfully
2025/03/04 08:37:57 AM INFO:get_git_version executed successfully
2025/03/04 08:37:57 AM INFO:get_git_version executed successfully
2025/03/04 08:37:57 AM INFO:Version: v20.140
2025/03/04 08:37:57 AM INFO:Version: v20.140
2025/03/04 08:37:57 AM INFO:Version: v20.140
2025/03/04 08:37:57 AM INFO:Version: v20.140
2025/03/04 08:37:57 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:37:57 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:37:57 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:37:57 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:37:57 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:37:57 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:37:57 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:37:57 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:37:57 AM DEBUG:Initialised LOG_LEVEL with value: DEBUG
2025/03/04 08:37:57 AM DEBUG:Initialised LOG_LEVEL with value: DEBUG
2025/03/04 08:37:57 AM DEBUG:Initialised LOG_LEVEL with value: DEBUG
2025/03/04 08:37:57 AM DEBUG:Initialised LOG_LEVEL with value: DEBUG
2025/03/04 08:37:57 AM DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo-1
2025/03/04 08:37:57 AM DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo-1
2025/03/04 08:37:57 AM DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo-1
2025/03/04 08:37:57 AM DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo-1
2025/03/04 08:37:57 AM DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:37:57 AM DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:37:57 AM DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:37:57 AM DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:37:57 AM DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/04 08:37:57 AM DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/04 08:37:57 AM DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/04 08:37:57 AM DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/04 08:37:57 AM DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/04 08:37:57 AM DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/04 08:37:57 AM DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/04 08:37:57 AM DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/04 08:37:57 AM DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:37:57 AM DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:37:57 AM DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:37:57 AM DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:37:57 AM DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:37:57 AM DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:37:57 AM DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:37:57 AM DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:37:57 AM DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:37:57 AM DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:37:57 AM DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:37:57 AM DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:37:57 AM DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:37:57 AM DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:37:57 AM DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:37:57 AM DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:37:57 AM DEBUG:Initialised perc_target with value: 0.5
2025/03/04 08:37:57 AM DEBUG:Initialised perc_target with value: 0.5
2025/03/04 08:37:57 AM DEBUG:Initialised perc_target with value: 0.5
2025/03/04 08:37:57 AM DEBUG:Initialised perc_target with value: 0.5
2025/03/04 08:37:57 AM DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/04 08:37:57 AM DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/04 08:37:57 AM DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/04 08:37:57 AM DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/04 08:37:57 AM DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:37:57 AM DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:37:57 AM DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:37:57 AM DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:37:57 AM DEBUG:Initialised reference_dir with value: reference_files
2025/03/04 08:37:57 AM DEBUG:Initialised data_dir with value: data
2025/03/04 08:37:57 AM DEBUG:Initialised reference_dir with value: reference_files
2025/03/04 08:37:57 AM DEBUG:Initialised reference_dir with value: reference_files
2025/03/04 08:37:57 AM DEBUG:Initialised output_dir with value: output
2025/03/04 08:37:57 AM DEBUG:Initialised reference_dir with value: reference_files
2025/03/04 08:37:57 AM DEBUG:Initialised data_dir with value: data
2025/03/04 08:37:57 AM DEBUG:Initialised data_dir with value: data
2025/03/04 08:37:57 AM DEBUG:Initialised logs_dir with value: logs
2025/03/04 08:37:57 AM DEBUG:Initialised data_dir with value: data
2025/03/04 08:37:57 AM DEBUG:Initialised output_dir with value: output
2025/03/04 08:37:57 AM DEBUG:Initialised output_dir with value: output
2025/03/04 08:37:57 AM DEBUG:Initialised components_dir with value: components
2025/03/04 08:37:57 AM DEBUG:Initialised output_dir with value: output
2025/03/04 08:37:57 AM DEBUG:Initialised logs_dir with value: logs
2025/03/04 08:37:57 AM DEBUG:Initialised logs_dir with value: logs
2025/03/04 08:37:57 AM DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/04 08:37:57 AM DEBUG:Initialised logs_dir with value: logs
2025/03/04 08:37:57 AM DEBUG:Initialised components_dir with value: components
2025/03/04 08:37:57 AM DEBUG:Initialised components_dir with value: components
2025/03/04 08:37:57 AM DEBUG:Initialised utils_dir with value: utils
2025/03/04 08:37:57 AM DEBUG:Initialised components_dir with value: components
2025/03/04 08:37:57 AM DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/04 08:37:57 AM DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/04 08:37:57 AM DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:37:57 AM DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/04 08:37:57 AM DEBUG:Initialised utils_dir with value: utils
2025/03/04 08:37:57 AM DEBUG:Initialised utils_dir with value: utils
2025/03/04 08:37:57 AM DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:37:57 AM DEBUG:Initialised utils_dir with value: utils
2025/03/04 08:37:57 AM DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:37:57 AM DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:37:57 AM DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/04 08:37:57 AM DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:37:57 AM DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:37:57 AM DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:37:57 AM DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:37:57 AM DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:37:57 AM DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/04 08:37:57 AM DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/04 08:37:57 AM DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:37:57 AM DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/04 08:37:57 AM DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:37:57 AM DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:37:57 AM DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:37:57 AM DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:37:57 AM DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:37:57 AM DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:37:57 AM DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/04 08:37:57 AM DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:37:57 AM DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:37:57 AM DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:37:57 AM DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/04 08:37:57 AM DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:37:57 AM DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/04 08:37:57 AM DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/04 08:37:57 AM DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/04 08:37:57 AM DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/04 08:37:57 AM DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/04 08:37:57 AM DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/04 08:37:57 AM DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/04 08:37:57 AM DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/04 08:37:57 AM DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/04 08:37:57 AM DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/04 08:37:57 AM DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/04 08:37:57 AM DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/04 08:37:57 AM DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/04 08:37:57 AM DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/04 08:37:57 AM DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/04 08:37:57 AM DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/04 08:37:57 AM DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/04 08:37:57 AM DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/04 08:37:57 AM DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/04 08:37:57 AM DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/04 08:37:57 AM DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/04 08:37:57 AM DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/04 08:37:57 AM DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/04 08:37:57 AM DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/04 08:37:57 AM DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/04 08:37:57 AM DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/04 08:37:57 AM DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/04 08:37:57 AM DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/04 08:37:57 AM DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/04 08:37:57 AM DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/04 08:37:57 AM DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/04 08:37:57 AM DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/04 08:37:57 AM DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/04 08:37:57 AM DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/04 08:37:57 AM DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:37:57 AM DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/04 08:37:57 AM DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/04 08:37:57 AM DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/04 08:37:57 AM DEBUG:Initialised Cash_ftr with value: {'DonationType': 'Cash'}
2025/03/04 08:37:57 AM DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/04 08:37:57 AM DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:37:57 AM DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:37:57 AM INFO:Session_state variables initialized
2025/03/04 08:37:57 AM DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:37:57 AM DEBUG:Initialised Cash_ftr with value: {'DonationType': 'Cash'}
2025/03/04 08:37:57 AM DEBUG:Initialised Cash_ftr with value: {'DonationType': 'Cash'}
2025/03/04 08:37:57 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:37:57 AM DEBUG:Initialised Cash_ftr with value: {'DonationType': 'Cash'}
2025/03/04 08:37:57 AM INFO:Session_state variables initialized
2025/03/04 08:37:57 AM INFO:Session_state variables initialized
2025/03/04 08:37:57 AM DEBUG:components_dir: components
2025/03/04 08:37:57 AM INFO:Session_state variables initialized
2025/03/04 08:37:57 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:37:57 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:37:57 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:37:57 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:37:57 AM DEBUG:components_dir: components
2025/03/04 08:37:57 AM DEBUG:components_dir: components
2025/03/04 08:37:57 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:37:57 AM DEBUG:components_dir: components
2025/03/04 08:37:57 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:37:57 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:37:57 AM DEBUG:utils_dir: utils
2025/03/04 08:37:57 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:37:57 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:37:57 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:37:57 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:37:57 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:37:57 AM DEBUG:utils_dir: utils
2025/03/04 08:37:57 AM DEBUG:utils_dir: utils
2025/03/04 08:37:57 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:37:57 AM DEBUG:utils_dir: utils
2025/03/04 08:37:57 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:37:57 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:37:57 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:37:57 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:37:57 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:37:57 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:37:57 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:37:57 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:37:57 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:37:57 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:37:57 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:37:57 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:37:57 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:37:57 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:37:57 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:37:57 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:37:57 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:37:57 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:37:57 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:37:57 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:37:57 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:37:57 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:37:57 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:37:57 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:37:57 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:37:57 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:37:57 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:37:57 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:37:57 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:37:57 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:37:57 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:37:57 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:37:57 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:37:57 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:37:57 AM DEBUG:data_dir: data
2025/03/04 08:37:57 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:37:57 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:37:57 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:37:57 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:37:57 AM DEBUG:output_dir: output
2025/03/04 08:37:57 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:37:57 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:37:57 AM DEBUG:data_dir: data
2025/03/04 08:37:57 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:37:57 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:37:57 AM DEBUG:data_dir: data
2025/03/04 08:37:57 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:37:57 AM DEBUG:data_dir: data
2025/03/04 08:37:57 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:37:57 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:37:57 AM DEBUG:output_dir: output
2025/03/04 08:37:57 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:37:57 AM DEBUG:logs_dir: logs
2025/03/04 08:37:57 AM DEBUG:output_dir: output
2025/03/04 08:37:57 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:37:57 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:37:57 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:37:57 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:37:57 AM DEBUG:output_dir: output
2025/03/04 08:37:57 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:37:57 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:37:57 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:37:57 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:37:57 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:37:57 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:37:57 AM DEBUG:logs_dir: logs
2025/03/04 08:37:57 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:37:57 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:37:57 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:37:57 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:37:57 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:37:57 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:37:57 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:37:57 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:37:57 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:37:57 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:37:57 AM DEBUG:logs_dir: logs
2025/03/04 08:37:57 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:37:57 AM DEBUG:logs_dir: logs
2025/03/04 08:37:57 AM DEBUG:perc_target: 0.5
2025/03/04 08:37:57 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:37:57 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:37:57 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:37:57 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:37:57 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:37:57 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:37:57 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:37:57 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:37:57 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:37:57 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:37:57 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:37:57 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:37:57 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:37:57 AM DEBUG:perc_target: 0.5
2025/03/04 08:37:57 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:37:57 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:37:57 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:37:57 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:37:57 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:37:57 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:37:57 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:37:57 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:37:57 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:37:57 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:37:57 AM DEBUG:perc_target: 0.5
2025/03/04 08:37:57 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:37:57 AM DEBUG:perc_target: 0.5
2025/03/04 08:37:57 AM DEBUG:reference_dir: reference_files
2025/03/04 08:37:57 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:37:57 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:37:57 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:37:57 AM INFO:Session state Setup complete
2025/03/04 08:37:57 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:37:57 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:37:57 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:37:57 AM INFO:initialize_session_state executed successfully
2025/03/04 08:37:57 AM INFO:Package setup complete
2025/03/04 08:37:57 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:37:57 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:37:57 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:37:57 AM INFO:setup_package executed successfully
2025/03/04 08:37:57 AM DEBUG:reference_dir: reference_files
2025/03/04 08:37:57 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:37:57 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:37:57 AM INFO:Session state Setup complete
2025/03/04 08:37:57 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:37:57 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:37:57 AM INFO:Running Menu setup...
2025/03/04 08:37:57 AM INFO:initialize_session_state executed successfully
2025/03/04 08:37:57 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:37:57 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:37:57 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:37:57 AM INFO:Package setup complete
2025/03/04 08:37:57 AM DEBUG:reference_dir: reference_files
2025/03/04 08:37:57 AM DEBUG:reference_dir: reference_files
2025/03/04 08:37:57 AM INFO:setup_package executed successfully
2025/03/04 08:37:57 AM INFO:Session state Setup complete
2025/03/04 08:37:57 AM INFO:Session state Setup complete
2025/03/04 08:37:57 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\app_pages',), kwargs={}
2025/03/04 08:37:57 AM INFO:initialize_session_state executed successfully
2025/03/04 08:37:57 AM INFO:initialize_session_state executed successfully
2025/03/04 08:37:57 AM INFO:Running Menu setup...
2025/03/04 08:37:57 AM INFO:Package setup complete
2025/03/04 08:37:57 AM INFO:Package setup complete
2025/03/04 08:37:57 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:37:57 AM INFO:setup_package executed successfully
2025/03/04 08:37:57 AM INFO:setup_package executed successfully
2025/03/04 08:37:57 AM INFO:Running Menu setup...
2025/03/04 08:37:57 AM INFO:Running Menu setup...
2025/03/04 08:37:57 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:37:57 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:37:57 AM INFO:get_git_version executed successfully
2025/03/04 08:37:57 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\components',), kwargs={}
2025/03/04 08:37:57 AM INFO:get_git_version executed successfully
2025/03/04 08:37:57 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:37:57 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:37:57 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:37:57 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:37:57 AM INFO:get_git_version executed successfully
2025/03/04 08:37:57 AM INFO:get_git_version executed successfully
2025/03/04 08:37:57 AM INFO:get_git_version executed successfully
2025/03/04 08:37:57 AM INFO:App Version: v20.161
2025/03/04 08:37:57 AM INFO:get_git_version executed successfully
2025/03/04 08:37:57 AM INFO:App Version: v20.161
2025/03/04 08:37:57 AM INFO:App Version: v20.161
2025/03/04 08:37:57 AM INFO:App Version: v20.161
2025/03/04 08:37:57 AM INFO:Switched to page: Introduction
2025/03/04 08:37:57 AM INFO:Switched to page: Introduction
2025/03/04 08:37:57 AM INFO:Switched to page: Introduction
2025/03/04 08:37:57 AM INFO:Switched to page: Introduction
2025/03/04 08:37:57 AM INFO:pagesetup executed successfully
2025/03/04 08:37:57 AM INFO:pagesetup executed successfully
2025/03/04 08:37:57 AM INFO:pagesetup executed successfully
2025/03/04 08:37:57 AM INFO:pagesetup executed successfully
2025/03/04 08:37:57 AM INFO:No data found in session state, running firstload()
2025/03/04 08:37:57 AM DEBUG:Calling initialise_data with args=(), kwargs={}
2025/03/04 08:37:57 AM INFO:No data found in session state, running firstload()
2025/03/04 08:37:57 AM INFO:No data found in session state, running firstload()
2025/03/04 08:37:57 AM INFO:No data found in session state, running firstload()
2025/03/04 08:37:58 AM INFO:Running first load function.
2025/03/04 08:37:58 AM DEBUG:Calling firstload with args=(), kwargs={}
2025/03/04 08:37:58 AM DEBUG:Calling load_data_to_session with args=('raw_data', <function get_raw_data at 0x000001AFC7352C20>), kwargs={}
2025/03/04 08:37:58 AM DEBUG:Calling get_raw_data with args=(), kwargs={}
2025/03/04 08:37:58 AM DEBUG:Calling load_raw_data with args=(), kwargs={'main_file': 'raw_data', 'cleaned_file': 'raw_data_clean', 'output_csv': True, 'dedupe_donors': True, 'dedupe_regentity': True, 'originaldatafilepath': 'source_data_fname', 'processeddatafilepath': 'imported_raw_fname'}
2025/03/04 08:37:58 AM DEBUG:Original data file path pre raw data load: {originaldatafilepath}
2025/03/04 08:37:58 AM DEBUG:Processed data file path pre raw data load: {processeddatafilepath}
2025/03/04 08:37:58 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': 'source\\Donations_accepted_by_political_parties.csv', 'savedfilepath': 'output\\imported_raw.csv', 'timestamp_key': 'load_raw_data_last_modified'}
2025/03/04 08:37:58 AM INFO:Original file path: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:37:58 AM INFO:Saved file path: output\imported_raw.csv
2025/03/04 08:37:58 AM DEBUG:Calling is_file_updated with args=('source\\Donations_accepted_by_political_parties.csv', 'load_raw_data_last_modified'), kwargs={}
2025/03/04 08:37:58 AM INFO:Checking if source\Donations_accepted_by_political_parties.csv has been updated.
2025/03/04 08:37:58 AM DEBUG:Calling get_file_modification_time with args=('source\\Donations_accepted_by_political_parties.csv',), kwargs={}
2025/03/04 08:37:58 AM INFO:Getting modification time for source\Donations_accepted_by_political_parties.csv
2025/03/04 08:37:58 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:37:58 AM INFO:Current modification time: 1740757862.6744745
2025/03/04 08:37:58 AM INFO:Last modification time: None
2025/03/04 08:37:58 AM INFO:is_file_updated executed successfully
2025/03/04 08:37:58 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:37:58 AM INFO:Loading raw data...
2025/03/04 08:37:58 AM DEBUG:Original data file path post raw data load: {originaldatafilepath}
2025/03/04 08:37:58 AM DEBUG:Processed data file path post raw data load: {processeddatafilepath}
2025/03/04 08:37:58 AM INFO:Data loaded successfully. Data has 65278 rows and 29 columns
2025/03/04 08:37:59 AM INFO:Data saved to output\imported_raw.csv
2025/03/04 08:37:59 AM DEBUG:Calling raw_data_cleanup with args=(), kwargs={'loaddata_df':            ECRef              RegulatedEntityName    RegulatedEntityType        Value AcceptedDate  ... AccountingUnitId  DonorId CampaigningName   RegisterName IsIrishSource
index                                                                                               ...                                                                       
0      NC0408174                   Mr Andy Street        Regulated Donee    £1,876.56   02/09/2019  ...              NaN  86310.0             NaN  Great Britain         False
1      NC0408173                   Mr Andy Street        Regulated Donee    £2,700.00   02/09/2019  ...              NaN  86310.0             NaN  Great Britain         False
2      NC0408177                   Mr Andy Street        Regulated Donee    £4,852.58   30/08/2019  ...              NaN  86310.0             NaN  Great Britain         False
3      NC0408176                   Mr Andy Street        Regulated Donee    £2,500.00   30/08/2019  ...              NaN  86310.0             NaN  Great Britain         False
4      NC0408170                   Mr Andy Street        Regulated Donee    £4,524.05   29/08/2019  ...              NaN  86310.0             NaN  Great Britain         False
...          ...                              ...                    ...          ...          ...  ...              ...      ...             ...            ...           ...
65273   C0242478               Vote Leave Limited  Permitted Participant   £10,000.00          NaN  ...              NaN  74198.0             NaN            NaN         False
65274   C0242461               Vote Leave Limited  Permitted Participant  £100,000.00          NaN  ...              NaN  74184.0             NaN            NaN         False
65275   C0243560               Vote Leave Limited  Permitted Participant   £40,000.00          NaN  ...              NaN  74576.0             NaN            NaN         False
65276   C0319710  Conservative and Unionist Party        Political Party   £50,000.00          NaN  ...              NaN  34241.0             NaN  Great Britain         False
65277   C0319727  Conservative and Unionist Party        Political Party   £15,000.00          NaN  ...              NaN  74743.0             NaN  Great Britain         False

[65278 rows x 29 columns], 'dedupe_donors': True, 'dedupe_regentity': True, 'output_csv': True, 'originaldatafilepath': 'output\\imported_raw.csv', 'processeddatafilepath': 'cleaned_donations_fname'}
2025/03/04 08:37:59 AM INFO:Cleaning up raw data
2025/03/04 08:37:59 AM ERROR:Session state variables not initialized!
2025/03/04 08:37:59 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': None, 'savedfilepath': 'output\\cleaned_donations.csv', 'timestamp_key': 'cleaned_raw_data_last_modified'}
2025/03/04 08:37:59 AM INFO:Original file path: None
2025/03/04 08:37:59 AM INFO:Saved file path: output\cleaned_donations.csv
2025/03/04 08:37:59 AM ERROR:Error: originalfilepath is None!
2025/03/04 08:37:59 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:37:59 AM INFO:Data loaded, shape: (65278, 29)
2025/03/04 08:38:00 AM DEBUG:Calling dedupe_entity_file with args=(), kwargs={'loaddata_dd_df':            ECRef              RegulatedEntityName    RegulatedEntityType      Value AcceptedDate  ... AccountingUnitId  DonorId CampaigningName   RegisterName IsIrishSource
index                                                                                             ...                                                                       
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56   02/09/2019  ...                   86310.0                  Great Britain         False
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00   02/09/2019  ...                   86310.0                  Great Britain         False
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58   30/08/2019  ...                   86310.0                  Great Britain         False
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00   30/08/2019  ...                   86310.0                  Great Britain         False
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05   29/08/2019  ...                   86310.0                  Great Britain         False
...          ...                              ...                    ...        ...          ...  ...              ...      ...             ...            ...           ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00          NaN  ...                   74198.0                          Other         False
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00          NaN  ...                   74184.0                          Other         False
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00          NaN  ...                   74576.0                          Other         False
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00          NaN  ...                   34241.0                  Great Britain         False
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00          NaN  ...                   74743.0                  Great Britain         False

[65278 rows x 29 columns], 'entity': 'RegulatedEntity', 'map_filename': 'regentity_map_fname', 'output_csv': True}
2025/03/04 08:38:00 AM DEBUG:Calling is_file_updated with args=('reference_files\\PoliticalEntityDeDuped.csv', 'regentity_map_fname_last_modified'), kwargs={}
2025/03/04 08:38:00 AM INFO:Checking if reference_files\PoliticalEntityDeDuped.csv has been updated.
2025/03/04 08:38:00 AM DEBUG:Calling get_file_modification_time with args=('reference_files\\PoliticalEntityDeDuped.csv',), kwargs={}
2025/03/04 08:38:00 AM INFO:Getting modification time for reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:38:00 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:38:00 AM INFO:Current modification time: 1740841102.2638545
2025/03/04 08:38:00 AM INFO:Last modification time: None
2025/03/04 08:38:00 AM INFO:is_file_updated executed successfully
2025/03/04 08:38:00 AM INFO:Map file regentity_map_fname has been updated. Proceeding with deduplication.
2025/03/04 08:38:00 AM INFO:File deduplication complete, shape: (65278, 34)
2025/03/04 08:38:00 AM INFO:dedupe_entity_file executed successfully
2025/03/04 08:38:00 AM DEBUG:Calling dedupe_entity_file with args=(), kwargs={'loaddata_dd_df':            ECRef      OriginalRegulatedEntityName    RegulatedEntityType  ...      OriginalRegulatedEntityName RegulatedEntityId              RegulatedEntityName
0      NC0408174                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
1      NC0408173                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
2      NC0408177                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
3      NC0408176                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
4      NC0408170                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
...          ...                              ...                    ...  ...                              ...               ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant  ...               Vote Leave Limited            3945.0               Vote Leave Limited
65274   C0242461               Vote Leave Limited  Permitted Participant  ...               Vote Leave Limited            3945.0               Vote Leave Limited
65275   C0243560               Vote Leave Limited  Permitted Participant  ...               Vote Leave Limited            3945.0               Vote Leave Limited
65276   C0319710  Conservative And Unionist Party        Political Party  ...  Conservative And Unionist Party              52.0  Conservative And Unionist Party
65277   C0319727  Conservative And Unionist Party        Political Party  ...  Conservative And Unionist Party              52.0  Conservative And Unionist Party

[65278 rows x 34 columns], 'entity': 'Donor', 'map_filename': 'donor_map_fname', 'output_csv': True}
2025/03/04 08:38:00 AM DEBUG:Calling is_file_updated with args=('reference_files\\PoliticalDonorsDeduped.csv', 'donor_map_fname_last_modified'), kwargs={}
2025/03/04 08:38:00 AM INFO:Checking if reference_files\PoliticalDonorsDeduped.csv has been updated.
2025/03/04 08:38:00 AM DEBUG:Calling get_file_modification_time with args=('reference_files\\PoliticalDonorsDeduped.csv',), kwargs={}
2025/03/04 08:38:00 AM INFO:Getting modification time for reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:38:00 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:38:00 AM INFO:Current modification time: 1740757863.2545311
2025/03/04 08:38:00 AM INFO:Last modification time: None
2025/03/04 08:38:00 AM INFO:is_file_updated executed successfully
2025/03/04 08:38:00 AM INFO:Map file donor_map_fname has been updated. Proceeding with deduplication.
2025/03/04 08:38:00 AM INFO:File deduplication complete, shape: (65278, 40)
2025/03/04 08:38:00 AM INFO:dedupe_entity_file executed successfully
2025/03/04 08:38:00 AM INFO:Raw Data cleanup completed
2025/03/04 08:38:00 AM INFO:Data shape: (65278, 40)
2025/03/04 08:38:02 AM INFO:Data saved to output\cleaned_donations.csv
2025/03/04 08:38:02 AM INFO:Data cleanup completed, shape: (65278, 40)
2025/03/04 08:38:02 AM INFO:raw_data_cleanup executed successfully
2025/03/04 08:38:03 AM INFO:load_raw_data executed successfully
2025/03/04 08:38:03 AM INFO:get_raw_data executed successfully
2025/03/04 08:38:03 AM INFO:load_data_to_session executed successfully
2025/03/04 08:38:03 AM DEBUG:Calling load_data_to_session with args=('data_clean', <function get_cleaned_data at 0x000001AFC7352CB0>), kwargs={}
2025/03/04 08:38:03 AM DEBUG:Calling get_cleaned_data with args=(), kwargs={}
2025/03/04 08:38:03 AM DEBUG:Calling load_cleaned_data with args=(), kwargs={'originaldatafilepath': 'cleaned_donations_fname', 'processeddatafilepath': 'cleaned_data_fname', 'datafile': 'raw_data', 'streamlitrun': True, 'output_csv': True, 'main_file': 'raw_data', 'cleaned_file': 'data_clean'}
2025/03/04 08:38:03 AM DEBUG:Rows in Raw Data: 65278
2025/03/04 08:38:03 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': 'output\\cleaned_donations.csv', 'savedfilepath': 'output\\cleaned_data.csv', 'timestamp_key': 'load_raw_data_last_modified'}
2025/03/04 08:38:03 AM INFO:Original file path: output\cleaned_donations.csv
2025/03/04 08:38:03 AM INFO:Saved file path: output\cleaned_data.csv
2025/03/04 08:38:03 AM DEBUG:Calling is_file_updated with args=('output\\cleaned_donations.csv', 'load_raw_data_last_modified'), kwargs={}
2025/03/04 08:38:03 AM INFO:Checking if output\cleaned_donations.csv has been updated.
2025/03/04 08:38:03 AM DEBUG:Calling get_file_modification_time with args=('output\\cleaned_donations.csv',), kwargs={}
2025/03/04 08:38:03 AM INFO:Getting modification time for output\cleaned_donations.csv
2025/03/04 08:38:03 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:38:03 AM INFO:Current modification time: 1741077482.880819
2025/03/04 08:38:03 AM INFO:Last modification time: 1740757862.6744745
2025/03/04 08:38:03 AM INFO:is_file_updated executed successfully
2025/03/04 08:38:03 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:38:03 AM ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/04 08:38:03 AM INFO:Loading and cleaning data... data.clean_and_enhance
2025/03/04 08:38:03 AM DEBUG:Clean Data Prep: streamlitdata load: 65278
2025/03/04 08:38:03 AM ERROR:Error in load_cleaned_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 124, in load_cleaned_data
    logger.debug(f"Clean Data Prep 123: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:38:03 AM ERROR:Error in get_cleaned_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 124, in load_cleaned_data
    logger.debug(f"Clean Data Prep 123: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:38:03 AM ERROR:Error in load_data_to_session: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 124, in load_cleaned_data
    logger.debug(f"Clean Data Prep 123: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:38:03 AM ERROR:Error in firstload: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 80, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 124, in load_cleaned_data
    logger.debug(f"Clean Data Prep 123: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:38:03 AM ERROR:Error in initialise_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_utils.py", line 42, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 80, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 124, in load_cleaned_data
    logger.debug(f"Clean Data Prep 123: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:38:03 AM DEBUG:Calling initialise_data with args=(), kwargs={}
2025/03/04 08:38:03 AM INFO:Running first load function.
2025/03/04 08:38:03 AM DEBUG:Calling firstload with args=(), kwargs={}
2025/03/04 08:38:03 AM DEBUG:Calling load_data_to_session with args=('raw_data', <function get_raw_data at 0x000001AFC7352C20>), kwargs={}
2025/03/04 08:38:03 AM DEBUG:Calling get_raw_data with args=(), kwargs={}
2025/03/04 08:38:03 AM INFO:get_raw_data executed successfully
2025/03/04 08:38:03 AM INFO:load_data_to_session executed successfully
2025/03/04 08:38:03 AM DEBUG:Calling load_data_to_session with args=('data_clean', <function get_cleaned_data at 0x000001AFC7352CB0>), kwargs={}
2025/03/04 08:38:03 AM DEBUG:Calling get_cleaned_data with args=(), kwargs={}
2025/03/04 08:38:03 AM DEBUG:Calling load_cleaned_data with args=(), kwargs={'originaldatafilepath': 'cleaned_donations_fname', 'processeddatafilepath': 'cleaned_data_fname', 'datafile': 'raw_data', 'streamlitrun': True, 'output_csv': True, 'main_file': 'raw_data', 'cleaned_file': 'data_clean'}
2025/03/04 08:38:03 AM DEBUG:Rows in Raw Data: 65278
2025/03/04 08:38:03 AM ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/04 08:38:03 AM INFO:Loading and cleaning data... data.clean_and_enhance
2025/03/04 08:38:03 AM DEBUG:Clean Data Prep: streamlitdata load: 65278
2025/03/04 08:38:03 AM ERROR:Error in load_cleaned_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 124, in load_cleaned_data
    logger.debug(f"Clean Data Prep 123: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:38:03 AM ERROR:Error in get_cleaned_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 124, in load_cleaned_data
    logger.debug(f"Clean Data Prep 123: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:38:03 AM ERROR:Error in load_data_to_session: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 124, in load_cleaned_data
    logger.debug(f"Clean Data Prep 123: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:38:03 AM ERROR:Error in firstload: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 80, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 124, in load_cleaned_data
    logger.debug(f"Clean Data Prep 123: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:38:03 AM ERROR:Error in initialise_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_utils.py", line 42, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 80, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 124, in load_cleaned_data
    logger.debug(f"Clean Data Prep 123: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:38:03 AM DEBUG:Calling initialise_data with args=(), kwargs={}
2025/03/04 08:38:03 AM INFO:Running first load function.
2025/03/04 08:38:03 AM DEBUG:Calling firstload with args=(), kwargs={}
2025/03/04 08:38:03 AM DEBUG:Calling load_data_to_session with args=('raw_data', <function get_raw_data at 0x000001AFC7352C20>), kwargs={}
2025/03/04 08:38:03 AM DEBUG:Calling get_raw_data with args=(), kwargs={}
2025/03/04 08:38:04 AM INFO:get_raw_data executed successfully
2025/03/04 08:38:04 AM INFO:load_data_to_session executed successfully
2025/03/04 08:38:04 AM DEBUG:Calling load_data_to_session with args=('data_clean', <function get_cleaned_data at 0x000001AFC7352CB0>), kwargs={}
2025/03/04 08:38:04 AM DEBUG:Calling get_cleaned_data with args=(), kwargs={}
2025/03/04 08:38:04 AM DEBUG:Calling load_cleaned_data with args=(), kwargs={'originaldatafilepath': 'cleaned_donations_fname', 'processeddatafilepath': 'cleaned_data_fname', 'datafile': 'raw_data', 'streamlitrun': True, 'output_csv': True, 'main_file': 'raw_data', 'cleaned_file': 'data_clean'}
2025/03/04 08:38:04 AM DEBUG:Rows in Raw Data: 65278
2025/03/04 08:38:04 AM ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/04 08:38:04 AM INFO:Loading and cleaning data... data.clean_and_enhance
2025/03/04 08:38:04 AM DEBUG:Clean Data Prep: streamlitdata load: 65278
2025/03/04 08:38:04 AM ERROR:Error in load_cleaned_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 124, in load_cleaned_data
    logger.debug(f"Clean Data Prep 123: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:38:04 AM ERROR:Error in get_cleaned_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 124, in load_cleaned_data
    logger.debug(f"Clean Data Prep 123: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:38:04 AM ERROR:Error in load_data_to_session: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 124, in load_cleaned_data
    logger.debug(f"Clean Data Prep 123: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:38:04 AM ERROR:Error in firstload: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 80, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 124, in load_cleaned_data
    logger.debug(f"Clean Data Prep 123: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:38:04 AM ERROR:Error in initialise_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_utils.py", line 42, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 80, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 124, in load_cleaned_data
    logger.debug(f"Clean Data Prep 123: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:38:04 AM DEBUG:Calling initialise_data with args=(), kwargs={}
2025/03/04 08:38:04 AM INFO:Running first load function.
2025/03/04 08:38:04 AM DEBUG:Calling firstload with args=(), kwargs={}
2025/03/04 08:38:04 AM DEBUG:Calling load_data_to_session with args=('raw_data', <function get_raw_data at 0x000001AFC7352C20>), kwargs={}
2025/03/04 08:38:04 AM DEBUG:Calling get_raw_data with args=(), kwargs={}
2025/03/04 08:38:04 AM INFO:get_raw_data executed successfully
2025/03/04 08:38:04 AM INFO:load_data_to_session executed successfully
2025/03/04 08:38:04 AM DEBUG:Calling load_data_to_session with args=('data_clean', <function get_cleaned_data at 0x000001AFC7352CB0>), kwargs={}
2025/03/04 08:38:04 AM DEBUG:Calling get_cleaned_data with args=(), kwargs={}
2025/03/04 08:38:04 AM DEBUG:Calling load_cleaned_data with args=(), kwargs={'originaldatafilepath': 'cleaned_donations_fname', 'processeddatafilepath': 'cleaned_data_fname', 'datafile': 'raw_data', 'streamlitrun': True, 'output_csv': True, 'main_file': 'raw_data', 'cleaned_file': 'data_clean'}
2025/03/04 08:38:04 AM DEBUG:Rows in Raw Data: 65278
2025/03/04 08:38:04 AM ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/04 08:38:04 AM INFO:Loading and cleaning data... data.clean_and_enhance
2025/03/04 08:38:04 AM DEBUG:Clean Data Prep: streamlitdata load: 65278
2025/03/04 08:38:04 AM ERROR:Error in load_cleaned_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 124, in load_cleaned_data
    logger.debug(f"Clean Data Prep 123: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:38:04 AM ERROR:Error in get_cleaned_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 124, in load_cleaned_data
    logger.debug(f"Clean Data Prep 123: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:38:04 AM ERROR:Error in load_data_to_session: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 124, in load_cleaned_data
    logger.debug(f"Clean Data Prep 123: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:38:04 AM ERROR:Error in firstload: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 80, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 124, in load_cleaned_data
    logger.debug(f"Clean Data Prep 123: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:38:04 AM ERROR:Error in initialise_data: object of type 'NoneType' has no len()
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_utils.py", line 42, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 80, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 124, in load_cleaned_data
    logger.debug(f"Clean Data Prep 123: streamlitdata load: {len(loaddata_df)}")
TypeError: object of type 'NoneType' has no len()
2025/03/04 08:39:19 AM INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/04 08:39:19 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\utils',), kwargs={}
2025/03/04 08:39:19 AM INFO:get_git_version executed successfully
2025/03/04 08:39:20 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\data',), kwargs={}
2025/03/04 08:39:20 AM INFO:get_git_version executed successfully
2025/03/04 08:39:20 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:39:20 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:39:20 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:39:20 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:39:20 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:39:20 AM INFO:Running App setup...
2025/03/04 08:39:20 AM INFO:Running App setup...
2025/03/04 08:39:20 AM INFO:Running App setup...
2025/03/04 08:39:20 AM INFO:Running App setup...
2025/03/04 08:39:20 AM INFO:Running App setup...
2025/03/04 08:39:20 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:39:20 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:39:20 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:39:20 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:39:20 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:39:20 AM INFO:Setting up the package
2025/03/04 08:39:20 AM INFO:Setting up the package
2025/03/04 08:39:20 AM INFO:Setting up the package
2025/03/04 08:39:20 AM INFO:Setting up the package
2025/03/04 08:39:20 AM INFO:Setting up the package
2025/03/04 08:39:20 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:39:20 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:39:20 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:39:20 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:39:20 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:39:20 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:39:20 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:39:20 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:39:20 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:39:20 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:39:20 AM INFO:get_git_version executed successfully
2025/03/04 08:39:20 AM INFO:get_git_version executed successfully
2025/03/04 08:39:20 AM INFO:get_git_version executed successfully
2025/03/04 08:39:20 AM INFO:Version: v20.140
2025/03/04 08:39:20 AM INFO:get_git_version executed successfully
2025/03/04 08:39:20 AM INFO:get_git_version executed successfully
2025/03/04 08:39:20 AM INFO:Version: v20.140
2025/03/04 08:39:20 AM INFO:Version: v20.140
2025/03/04 08:39:20 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:39:20 AM INFO:Version: v20.140
2025/03/04 08:39:20 AM INFO:Version: v20.140
2025/03/04 08:39:20 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:39:20 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:39:20 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:39:20 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:39:20 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:39:20 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:39:20 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:39:20 AM DEBUG:Initialised LOG_LEVEL with value: DEBUG
2025/03/04 08:39:20 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:39:20 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:39:20 AM DEBUG:Initialised LOG_LEVEL with value: DEBUG
2025/03/04 08:39:20 AM DEBUG:Initialised LOG_LEVEL with value: DEBUG
2025/03/04 08:39:20 AM DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo-1
2025/03/04 08:39:20 AM DEBUG:Initialised LOG_LEVEL with value: DEBUG
2025/03/04 08:39:20 AM DEBUG:Initialised LOG_LEVEL with value: DEBUG
2025/03/04 08:39:20 AM DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo-1
2025/03/04 08:39:20 AM DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo-1
2025/03/04 08:39:20 AM DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:39:20 AM DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo-1
2025/03/04 08:39:20 AM DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo-1
2025/03/04 08:39:20 AM DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:39:20 AM DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:39:20 AM DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/04 08:39:20 AM DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:39:20 AM DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:39:20 AM DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/04 08:39:20 AM DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/04 08:39:20 AM DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/04 08:39:20 AM DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/04 08:39:20 AM DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/04 08:39:20 AM DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/04 08:39:20 AM DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/04 08:39:20 AM DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:39:20 AM DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/04 08:39:20 AM DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/04 08:39:20 AM DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:39:20 AM DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:39:20 AM DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:39:20 AM DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:39:20 AM DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:39:20 AM DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:39:20 AM DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:39:20 AM DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:39:20 AM DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:39:20 AM DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:39:20 AM DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:39:20 AM DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:39:20 AM DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:39:20 AM DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:39:20 AM DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:39:20 AM DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:39:20 AM DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:39:20 AM DEBUG:Initialised perc_target with value: 0.5
2025/03/04 08:39:20 AM DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:39:20 AM DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:39:20 AM DEBUG:Initialised perc_target with value: 0.5
2025/03/04 08:39:20 AM DEBUG:Initialised perc_target with value: 0.5
2025/03/04 08:39:20 AM DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/04 08:39:20 AM DEBUG:Initialised perc_target with value: 0.5
2025/03/04 08:39:20 AM DEBUG:Initialised perc_target with value: 0.5
2025/03/04 08:39:20 AM DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/04 08:39:20 AM DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/04 08:39:20 AM DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:39:20 AM DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/04 08:39:20 AM DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/04 08:39:20 AM DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:39:20 AM DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:39:20 AM DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:39:20 AM DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:39:20 AM DEBUG:Initialised reference_dir with value: reference_files
2025/03/04 08:39:20 AM DEBUG:Initialised data_dir with value: data
2025/03/04 08:39:20 AM DEBUG:Initialised output_dir with value: output
2025/03/04 08:39:20 AM DEBUG:Initialised logs_dir with value: logs
2025/03/04 08:39:20 AM DEBUG:Initialised reference_dir with value: reference_files
2025/03/04 08:39:20 AM DEBUG:Initialised components_dir with value: components
2025/03/04 08:39:20 AM DEBUG:Initialised data_dir with value: data
2025/03/04 08:39:20 AM DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/04 08:39:20 AM DEBUG:Initialised reference_dir with value: reference_files
2025/03/04 08:39:20 AM DEBUG:Initialised output_dir with value: output
2025/03/04 08:39:20 AM DEBUG:Initialised reference_dir with value: reference_files
2025/03/04 08:39:20 AM DEBUG:Initialised utils_dir with value: utils
2025/03/04 08:39:20 AM DEBUG:Initialised reference_dir with value: reference_files
2025/03/04 08:39:20 AM DEBUG:Initialised data_dir with value: data
2025/03/04 08:39:20 AM DEBUG:Initialised logs_dir with value: logs
2025/03/04 08:39:20 AM DEBUG:Initialised data_dir with value: data
2025/03/04 08:39:20 AM DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:39:20 AM DEBUG:Initialised data_dir with value: data
2025/03/04 08:39:20 AM DEBUG:Initialised output_dir with value: output
2025/03/04 08:39:20 AM DEBUG:Initialised components_dir with value: components
2025/03/04 08:39:20 AM DEBUG:Initialised output_dir with value: output
2025/03/04 08:39:20 AM DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:39:20 AM DEBUG:Initialised output_dir with value: output
2025/03/04 08:39:20 AM DEBUG:Initialised logs_dir with value: logs
2025/03/04 08:39:20 AM DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/04 08:39:20 AM DEBUG:Initialised logs_dir with value: logs
2025/03/04 08:39:20 AM DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/04 08:39:20 AM DEBUG:Initialised logs_dir with value: logs
2025/03/04 08:39:20 AM DEBUG:Initialised components_dir with value: components
2025/03/04 08:39:20 AM DEBUG:Initialised utils_dir with value: utils
2025/03/04 08:39:20 AM DEBUG:Initialised components_dir with value: components
2025/03/04 08:39:20 AM DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:39:20 AM DEBUG:Initialised components_dir with value: components
2025/03/04 08:39:20 AM DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/04 08:39:20 AM DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:39:20 AM DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/04 08:39:20 AM DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:39:20 AM DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/04 08:39:20 AM DEBUG:Initialised utils_dir with value: utils
2025/03/04 08:39:20 AM DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:39:20 AM DEBUG:Initialised utils_dir with value: utils
2025/03/04 08:39:20 AM DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:39:20 AM DEBUG:Initialised utils_dir with value: utils
2025/03/04 08:39:20 AM DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:39:20 AM DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/04 08:39:20 AM DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:39:20 AM DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/04 08:39:20 AM DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:39:20 AM DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:39:20 AM DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:39:20 AM DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:39:20 AM DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/04 08:39:20 AM DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:39:20 AM DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/04 08:39:20 AM DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:39:20 AM DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/04 08:39:20 AM DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/04 08:39:20 AM DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/04 08:39:20 AM DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:39:20 AM DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:39:20 AM DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:39:20 AM DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/04 08:39:20 AM DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:39:20 AM DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:39:20 AM DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/04 08:39:20 AM DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:39:20 AM DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/04 08:39:20 AM DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:39:20 AM DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:39:20 AM DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/04 08:39:20 AM DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:39:20 AM DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/04 08:39:20 AM DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:39:20 AM DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/04 08:39:20 AM DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/04 08:39:20 AM DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/04 08:39:20 AM DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/04 08:39:20 AM DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/04 08:39:20 AM DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/04 08:39:20 AM DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/04 08:39:20 AM DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/04 08:39:20 AM DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/04 08:39:20 AM DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/04 08:39:20 AM DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/04 08:39:20 AM DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/04 08:39:20 AM DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/04 08:39:20 AM DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/04 08:39:20 AM DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/04 08:39:20 AM DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/04 08:39:20 AM DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/04 08:39:20 AM DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/04 08:39:20 AM DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/04 08:39:20 AM DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/04 08:39:20 AM DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/04 08:39:20 AM DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/04 08:39:20 AM DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/04 08:39:20 AM DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:39:20 AM DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/04 08:39:20 AM DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/04 08:39:20 AM DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/04 08:39:20 AM DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/04 08:39:20 AM DEBUG:Initialised Cash_ftr with value: {'DonationType': 'Cash'}
2025/03/04 08:39:20 AM DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/04 08:39:20 AM DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/04 08:39:20 AM DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/04 08:39:20 AM DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/04 08:39:20 AM INFO:Session_state variables initialized
2025/03/04 08:39:20 AM DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/04 08:39:20 AM DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/04 08:39:20 AM DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/04 08:39:20 AM DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/04 08:39:20 AM DEBUG:reference_dir: reference_files
2025/03/04 08:39:20 AM DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/04 08:39:20 AM DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/04 08:39:20 AM DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:39:20 AM DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/04 08:39:20 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:39:20 AM DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/04 08:39:20 AM DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/04 08:39:20 AM DEBUG:Initialised Cash_ftr with value: {'DonationType': 'Cash'}
2025/03/04 08:39:20 AM DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/04 08:39:20 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:39:20 AM DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/04 08:39:20 AM DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:39:20 AM INFO:Session_state variables initialized
2025/03/04 08:39:20 AM DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:39:20 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:39:20 AM DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:39:20 AM DEBUG:Initialised Cash_ftr with value: {'DonationType': 'Cash'}
2025/03/04 08:39:20 AM DEBUG:reference_dir: reference_files
2025/03/04 08:39:20 AM DEBUG:Initialised Cash_ftr with value: {'DonationType': 'Cash'}
2025/03/04 08:39:20 AM DEBUG:data_dir: data
2025/03/04 08:39:20 AM DEBUG:Initialised Cash_ftr with value: {'DonationType': 'Cash'}
2025/03/04 08:39:20 AM INFO:Session_state variables initialized
2025/03/04 08:39:20 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:39:20 AM INFO:Session_state variables initialized
2025/03/04 08:39:20 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:39:20 AM INFO:Session_state variables initialized
2025/03/04 08:39:20 AM DEBUG:reference_dir: reference_files
2025/03/04 08:39:20 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:39:20 AM DEBUG:reference_dir: reference_files
2025/03/04 08:39:20 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:39:20 AM DEBUG:reference_dir: reference_files
2025/03/04 08:39:20 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:39:20 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:39:20 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:39:20 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:39:20 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:39:20 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:39:20 AM DEBUG:data_dir: data
2025/03/04 08:39:20 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:39:20 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:39:20 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:39:20 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:39:20 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:39:20 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:39:20 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:39:20 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:39:20 AM DEBUG:data_dir: data
2025/03/04 08:39:20 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:39:20 AM DEBUG:data_dir: data
2025/03/04 08:39:20 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:39:20 AM DEBUG:data_dir: data
2025/03/04 08:39:20 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:39:20 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:39:20 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:39:20 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:39:20 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:39:20 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:39:20 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:39:20 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:39:20 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:39:20 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:39:20 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:39:20 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:39:20 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:39:20 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:39:20 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:39:20 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:39:20 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:39:20 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:39:20 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:39:20 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:39:20 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:39:20 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:39:20 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:39:20 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:39:20 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:39:20 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:39:20 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:39:20 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:39:20 AM DEBUG:components_dir: components
2025/03/04 08:39:20 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:39:20 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:39:20 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:39:20 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:39:20 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:39:20 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:39:20 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:39:20 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:39:20 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:39:20 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:39:20 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:39:20 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:39:20 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:39:20 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:39:20 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:39:20 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:39:20 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:39:20 AM DEBUG:components_dir: components
2025/03/04 08:39:20 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:39:20 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:39:20 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:39:20 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:39:20 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:39:20 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:39:20 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:39:20 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:39:20 AM DEBUG:components_dir: components
2025/03/04 08:39:20 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:39:20 AM DEBUG:components_dir: components
2025/03/04 08:39:20 AM DEBUG:output_dir: output
2025/03/04 08:39:20 AM DEBUG:components_dir: components
2025/03/04 08:39:20 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:39:20 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:39:20 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:39:20 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:39:20 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:39:20 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:39:20 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:39:20 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:39:20 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:39:20 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:39:20 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:39:20 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:39:20 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:39:20 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:39:20 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:39:20 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:39:20 AM DEBUG:output_dir: output
2025/03/04 08:39:20 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:39:20 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:39:20 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:39:20 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:39:20 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:39:20 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:39:20 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:39:20 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:39:20 AM DEBUG:output_dir: output
2025/03/04 08:39:20 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:39:20 AM DEBUG:output_dir: output
2025/03/04 08:39:20 AM DEBUG:perc_target: 0.5
2025/03/04 08:39:20 AM DEBUG:output_dir: output
2025/03/04 08:39:20 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:39:20 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:39:20 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:39:20 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:39:20 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:39:20 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:39:20 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:39:20 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:39:20 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:39:20 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:39:20 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:39:20 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:39:20 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:39:20 AM DEBUG:logs_dir: logs
2025/03/04 08:39:20 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:39:20 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:39:20 AM DEBUG:perc_target: 0.5
2025/03/04 08:39:20 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:39:20 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:39:20 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:39:20 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:39:20 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:39:20 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:39:20 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:39:20 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:39:20 AM DEBUG:perc_target: 0.5
2025/03/04 08:39:20 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:39:20 AM DEBUG:perc_target: 0.5
2025/03/04 08:39:20 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:39:20 AM DEBUG:perc_target: 0.5
2025/03/04 08:39:20 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:39:20 AM DEBUG:logs_dir: logs
2025/03/04 08:39:20 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:39:20 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:39:20 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:39:20 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:39:20 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:39:20 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:39:20 AM DEBUG:utils_dir: utils
2025/03/04 08:39:20 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:39:20 AM DEBUG:logs_dir: logs
2025/03/04 08:39:20 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:39:20 AM DEBUG:logs_dir: logs
2025/03/04 08:39:20 AM INFO:Session state Setup complete
2025/03/04 08:39:20 AM DEBUG:logs_dir: logs
2025/03/04 08:39:20 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:39:20 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:39:20 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:39:20 AM INFO:initialize_session_state executed successfully
2025/03/04 08:39:20 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:39:20 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:39:20 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:39:20 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:39:20 AM INFO:Package setup complete
2025/03/04 08:39:20 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:39:20 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:39:20 AM DEBUG:utils_dir: utils
2025/03/04 08:39:20 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:39:20 AM INFO:setup_package executed successfully
2025/03/04 08:39:20 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:39:20 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:39:20 AM INFO:Session state Setup complete
2025/03/04 08:39:20 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:39:20 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:39:20 AM DEBUG:utils_dir: utils
2025/03/04 08:39:20 AM INFO:initialize_session_state executed successfully
2025/03/04 08:39:20 AM DEBUG:utils_dir: utils
2025/03/04 08:39:20 AM INFO:Running Menu setup...
2025/03/04 08:39:20 AM DEBUG:utils_dir: utils
2025/03/04 08:39:20 AM INFO:Session state Setup complete
2025/03/04 08:39:20 AM INFO:Package setup complete
2025/03/04 08:39:20 AM INFO:Session state Setup complete
2025/03/04 08:39:20 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:39:20 AM INFO:Session state Setup complete
2025/03/04 08:39:20 AM INFO:initialize_session_state executed successfully
2025/03/04 08:39:20 AM INFO:setup_package executed successfully
2025/03/04 08:39:20 AM INFO:initialize_session_state executed successfully
2025/03/04 08:39:20 AM INFO:initialize_session_state executed successfully
2025/03/04 08:39:20 AM INFO:Package setup complete
2025/03/04 08:39:20 AM INFO:Package setup complete
2025/03/04 08:39:20 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\app_pages',), kwargs={}
2025/03/04 08:39:20 AM INFO:Package setup complete
2025/03/04 08:39:20 AM INFO:setup_package executed successfully
2025/03/04 08:39:20 AM INFO:Running Menu setup...
2025/03/04 08:39:20 AM INFO:setup_package executed successfully
2025/03/04 08:39:20 AM INFO:setup_package executed successfully
2025/03/04 08:39:20 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:39:20 AM INFO:Running Menu setup...
2025/03/04 08:39:20 AM INFO:Running Menu setup...
2025/03/04 08:39:20 AM INFO:Running Menu setup...
2025/03/04 08:39:20 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:39:20 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:39:20 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:39:21 AM INFO:get_git_version executed successfully
2025/03/04 08:39:21 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\components',), kwargs={}
2025/03/04 08:39:21 AM INFO:get_git_version executed successfully
2025/03/04 08:39:21 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:39:21 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:39:21 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:39:21 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:39:21 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:39:21 AM INFO:get_git_version executed successfully
2025/03/04 08:39:21 AM INFO:get_git_version executed successfully
2025/03/04 08:39:21 AM INFO:get_git_version executed successfully
2025/03/04 08:39:21 AM INFO:get_git_version executed successfully
2025/03/04 08:39:21 AM INFO:App Version: v20.161
2025/03/04 08:39:21 AM INFO:get_git_version executed successfully
2025/03/04 08:39:21 AM INFO:App Version: v20.161
2025/03/04 08:39:21 AM INFO:App Version: v20.161
2025/03/04 08:39:21 AM INFO:App Version: v20.161
2025/03/04 08:39:21 AM INFO:App Version: v20.161
2025/03/04 08:39:21 AM INFO:Switched to page: Introduction
2025/03/04 08:39:21 AM INFO:Switched to page: Introduction
2025/03/04 08:39:21 AM INFO:Switched to page: Introduction
2025/03/04 08:39:21 AM INFO:Switched to page: Introduction
2025/03/04 08:39:21 AM INFO:Switched to page: Introduction
2025/03/04 08:39:21 AM INFO:pagesetup executed successfully
2025/03/04 08:39:21 AM INFO:pagesetup executed successfully
2025/03/04 08:39:21 AM INFO:pagesetup executed successfully
2025/03/04 08:39:21 AM INFO:pagesetup executed successfully
2025/03/04 08:39:21 AM INFO:pagesetup executed successfully
2025/03/04 08:39:21 AM INFO:No data found in session state, running firstload()
2025/03/04 08:39:21 AM DEBUG:Calling initialise_data with args=(), kwargs={}
2025/03/04 08:39:21 AM INFO:No data found in session state, running firstload()
2025/03/04 08:39:21 AM INFO:No data found in session state, running firstload()
2025/03/04 08:39:21 AM INFO:No data found in session state, running firstload()
2025/03/04 08:39:21 AM INFO:No data found in session state, running firstload()
2025/03/04 08:39:21 AM INFO:Running first load function.
2025/03/04 08:39:21 AM DEBUG:Calling firstload with args=(), kwargs={}
2025/03/04 08:39:21 AM DEBUG:Calling load_data_to_session with args=('raw_data', <function get_raw_data at 0x00000219E53675B0>), kwargs={}
2025/03/04 08:39:21 AM DEBUG:Calling get_raw_data with args=(), kwargs={}
2025/03/04 08:39:21 AM DEBUG:Calling load_raw_data with args=(), kwargs={'main_file': 'raw_data', 'cleaned_file': 'raw_data_clean', 'output_csv': True, 'dedupe_donors': True, 'dedupe_regentity': True, 'originaldatafilepath': 'source_data_fname', 'processeddatafilepath': 'imported_raw_fname'}
2025/03/04 08:39:21 AM DEBUG:Original data file path pre raw data load: {originaldatafilepath}
2025/03/04 08:39:21 AM DEBUG:Processed data file path pre raw data load: {processeddatafilepath}
2025/03/04 08:39:21 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': 'source\\Donations_accepted_by_political_parties.csv', 'savedfilepath': 'output\\imported_raw.csv', 'timestamp_key': 'load_raw_data_last_modified'}
2025/03/04 08:39:21 AM INFO:Original file path: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:39:21 AM INFO:Saved file path: output\imported_raw.csv
2025/03/04 08:39:21 AM DEBUG:Calling is_file_updated with args=('source\\Donations_accepted_by_political_parties.csv', 'load_raw_data_last_modified'), kwargs={}
2025/03/04 08:39:21 AM INFO:Checking if source\Donations_accepted_by_political_parties.csv has been updated.
2025/03/04 08:39:21 AM DEBUG:Calling get_file_modification_time with args=('source\\Donations_accepted_by_political_parties.csv',), kwargs={}
2025/03/04 08:39:21 AM INFO:Getting modification time for source\Donations_accepted_by_political_parties.csv
2025/03/04 08:39:21 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:39:21 AM INFO:Current modification time: 1740757862.6744745
2025/03/04 08:39:21 AM INFO:Last modification time: None
2025/03/04 08:39:21 AM INFO:is_file_updated executed successfully
2025/03/04 08:39:21 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:39:21 AM INFO:Loading raw data...
2025/03/04 08:39:21 AM DEBUG:Original data file path post raw data load: {originaldatafilepath}
2025/03/04 08:39:21 AM DEBUG:Processed data file path post raw data load: {processeddatafilepath}
2025/03/04 08:39:22 AM INFO:Data loaded successfully. Data has 65278 rows and 29 columns
2025/03/04 08:39:22 AM INFO:Data saved to output\imported_raw.csv
2025/03/04 08:39:22 AM DEBUG:Calling raw_data_cleanup with args=(), kwargs={'loaddata_df':            ECRef              RegulatedEntityName    RegulatedEntityType        Value AcceptedDate  ... AccountingUnitId  DonorId CampaigningName   RegisterName IsIrishSource
index                                                                                               ...                                                                       
0      NC0408174                   Mr Andy Street        Regulated Donee    £1,876.56   02/09/2019  ...              NaN  86310.0             NaN  Great Britain         False
1      NC0408173                   Mr Andy Street        Regulated Donee    £2,700.00   02/09/2019  ...              NaN  86310.0             NaN  Great Britain         False
2      NC0408177                   Mr Andy Street        Regulated Donee    £4,852.58   30/08/2019  ...              NaN  86310.0             NaN  Great Britain         False
3      NC0408176                   Mr Andy Street        Regulated Donee    £2,500.00   30/08/2019  ...              NaN  86310.0             NaN  Great Britain         False
4      NC0408170                   Mr Andy Street        Regulated Donee    £4,524.05   29/08/2019  ...              NaN  86310.0             NaN  Great Britain         False
...          ...                              ...                    ...          ...          ...  ...              ...      ...             ...            ...           ...
65273   C0242478               Vote Leave Limited  Permitted Participant   £10,000.00          NaN  ...              NaN  74198.0             NaN            NaN         False
65274   C0242461               Vote Leave Limited  Permitted Participant  £100,000.00          NaN  ...              NaN  74184.0             NaN            NaN         False
65275   C0243560               Vote Leave Limited  Permitted Participant   £40,000.00          NaN  ...              NaN  74576.0             NaN            NaN         False
65276   C0319710  Conservative and Unionist Party        Political Party   £50,000.00          NaN  ...              NaN  34241.0             NaN  Great Britain         False
65277   C0319727  Conservative and Unionist Party        Political Party   £15,000.00          NaN  ...              NaN  74743.0             NaN  Great Britain         False

[65278 rows x 29 columns], 'dedupe_donors': True, 'dedupe_regentity': True, 'output_csv': True, 'originaldatafilepath': 'output\\imported_raw.csv', 'processeddatafilepath': 'cleaned_donations_fname'}
2025/03/04 08:39:22 AM INFO:Cleaning up raw data
2025/03/04 08:39:22 AM ERROR:Session state variables not initialized!
2025/03/04 08:39:22 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': None, 'savedfilepath': 'output\\cleaned_donations.csv', 'timestamp_key': 'cleaned_raw_data_last_modified'}
2025/03/04 08:39:22 AM INFO:Original file path: None
2025/03/04 08:39:22 AM INFO:Saved file path: output\cleaned_donations.csv
2025/03/04 08:39:22 AM ERROR:Error: originalfilepath is None!
2025/03/04 08:39:22 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:39:22 AM INFO:Data loaded, shape: (65278, 29)
2025/03/04 08:39:24 AM DEBUG:Calling dedupe_entity_file with args=(), kwargs={'loaddata_dd_df':            ECRef              RegulatedEntityName    RegulatedEntityType      Value AcceptedDate  ... AccountingUnitId  DonorId CampaigningName   RegisterName IsIrishSource
index                                                                                             ...                                                                       
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56   02/09/2019  ...                   86310.0                  Great Britain         False
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00   02/09/2019  ...                   86310.0                  Great Britain         False
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58   30/08/2019  ...                   86310.0                  Great Britain         False
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00   30/08/2019  ...                   86310.0                  Great Britain         False
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05   29/08/2019  ...                   86310.0                  Great Britain         False
...          ...                              ...                    ...        ...          ...  ...              ...      ...             ...            ...           ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00          NaN  ...                   74198.0                          Other         False
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00          NaN  ...                   74184.0                          Other         False
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00          NaN  ...                   74576.0                          Other         False
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00          NaN  ...                   34241.0                  Great Britain         False
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00          NaN  ...                   74743.0                  Great Britain         False

[65278 rows x 29 columns], 'entity': 'RegulatedEntity', 'map_filename': 'regentity_map_fname', 'output_csv': True}
2025/03/04 08:39:24 AM DEBUG:Calling is_file_updated with args=('reference_files\\PoliticalEntityDeDuped.csv', 'regentity_map_fname_last_modified'), kwargs={}
2025/03/04 08:39:24 AM INFO:Checking if reference_files\PoliticalEntityDeDuped.csv has been updated.
2025/03/04 08:39:24 AM DEBUG:Calling get_file_modification_time with args=('reference_files\\PoliticalEntityDeDuped.csv',), kwargs={}
2025/03/04 08:39:24 AM INFO:Getting modification time for reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:39:24 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:39:24 AM INFO:Current modification time: 1740841102.2638545
2025/03/04 08:39:24 AM INFO:Last modification time: None
2025/03/04 08:39:24 AM INFO:is_file_updated executed successfully
2025/03/04 08:39:24 AM INFO:Map file regentity_map_fname has been updated. Proceeding with deduplication.
2025/03/04 08:39:24 AM INFO:File deduplication complete, shape: (65278, 34)
2025/03/04 08:39:24 AM INFO:dedupe_entity_file executed successfully
2025/03/04 08:39:24 AM DEBUG:Calling dedupe_entity_file with args=(), kwargs={'loaddata_dd_df':            ECRef      OriginalRegulatedEntityName    RegulatedEntityType  ...      OriginalRegulatedEntityName RegulatedEntityId              RegulatedEntityName
0      NC0408174                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
1      NC0408173                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
2      NC0408177                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
3      NC0408176                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
4      NC0408170                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
...          ...                              ...                    ...  ...                              ...               ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant  ...               Vote Leave Limited            3945.0               Vote Leave Limited
65274   C0242461               Vote Leave Limited  Permitted Participant  ...               Vote Leave Limited            3945.0               Vote Leave Limited
65275   C0243560               Vote Leave Limited  Permitted Participant  ...               Vote Leave Limited            3945.0               Vote Leave Limited
65276   C0319710  Conservative And Unionist Party        Political Party  ...  Conservative And Unionist Party              52.0  Conservative And Unionist Party
65277   C0319727  Conservative And Unionist Party        Political Party  ...  Conservative And Unionist Party              52.0  Conservative And Unionist Party

[65278 rows x 34 columns], 'entity': 'Donor', 'map_filename': 'donor_map_fname', 'output_csv': True}
2025/03/04 08:39:24 AM DEBUG:Calling is_file_updated with args=('reference_files\\PoliticalDonorsDeduped.csv', 'donor_map_fname_last_modified'), kwargs={}
2025/03/04 08:39:24 AM INFO:Checking if reference_files\PoliticalDonorsDeduped.csv has been updated.
2025/03/04 08:39:24 AM DEBUG:Calling get_file_modification_time with args=('reference_files\\PoliticalDonorsDeduped.csv',), kwargs={}
2025/03/04 08:39:24 AM INFO:Getting modification time for reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:39:24 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:39:24 AM INFO:Current modification time: 1740757863.2545311
2025/03/04 08:39:24 AM INFO:Last modification time: None
2025/03/04 08:39:24 AM INFO:is_file_updated executed successfully
2025/03/04 08:39:24 AM INFO:Map file donor_map_fname has been updated. Proceeding with deduplication.
2025/03/04 08:39:24 AM INFO:File deduplication complete, shape: (65278, 40)
2025/03/04 08:39:24 AM INFO:dedupe_entity_file executed successfully
2025/03/04 08:39:24 AM INFO:Raw Data cleanup completed
2025/03/04 08:39:24 AM INFO:Data shape: (65278, 40)
2025/03/04 08:39:26 AM INFO:Data saved to output\cleaned_donations.csv
2025/03/04 08:39:26 AM INFO:Data cleanup completed, shape: (65278, 40)
2025/03/04 08:39:26 AM INFO:raw_data_cleanup executed successfully
2025/03/04 08:39:26 AM INFO:load_raw_data executed successfully
2025/03/04 08:39:26 AM INFO:get_raw_data executed successfully
2025/03/04 08:39:26 AM INFO:load_data_to_session executed successfully
2025/03/04 08:39:26 AM DEBUG:Calling load_data_to_session with args=('data_clean', <function get_cleaned_data at 0x00000219E5367640>), kwargs={}
2025/03/04 08:39:26 AM DEBUG:Calling get_cleaned_data with args=(), kwargs={}
2025/03/04 08:39:26 AM DEBUG:Calling load_cleaned_data with args=(), kwargs={'originaldatafilepath': 'cleaned_donations_fname', 'processeddatafilepath': 'cleaned_data_fname', 'datafile': 'raw_data', 'streamlitrun': True, 'output_csv': True, 'main_file': 'raw_data', 'cleaned_file': 'data_clean'}
2025/03/04 08:39:26 AM DEBUG:Rows in Raw Data: 65278
2025/03/04 08:39:26 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': 'output\\cleaned_donations.csv', 'savedfilepath': 'output\\cleaned_data.csv', 'timestamp_key': 'load_raw_data_last_modified'}
2025/03/04 08:39:26 AM INFO:Original file path: output\cleaned_donations.csv
2025/03/04 08:39:26 AM INFO:Saved file path: output\cleaned_data.csv
2025/03/04 08:39:26 AM DEBUG:Calling is_file_updated with args=('output\\cleaned_donations.csv', 'load_raw_data_last_modified'), kwargs={}
2025/03/04 08:39:26 AM INFO:Checking if output\cleaned_donations.csv has been updated.
2025/03/04 08:39:26 AM DEBUG:Calling get_file_modification_time with args=('output\\cleaned_donations.csv',), kwargs={}
2025/03/04 08:39:26 AM INFO:Getting modification time for output\cleaned_donations.csv
2025/03/04 08:39:26 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:39:26 AM INFO:Current modification time: 1741077566.12045
2025/03/04 08:39:26 AM INFO:Last modification time: 1740757862.6744745
2025/03/04 08:39:26 AM INFO:is_file_updated executed successfully
2025/03/04 08:39:26 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:39:26 AM ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/04 08:39:26 AM INFO:Loading and cleaning data... data.clean_and_enhance
2025/03/04 08:39:26 AM DEBUG:Clean Data Prep: streamlitdata load: 65278
2025/03/04 08:39:26 AM DEBUG:Clean Data Prep 123: streamlitdata load: 65278
2025/03/04 08:39:29 AM DEBUG:Calling map_mp_to_party with args=(           ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value AcceptedDate  ...                        DonorName EventCount YearReceived MonthReceived YearMonthReceived
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56   02/09/2019  ...  Conservative And Unionist Party          1         2019             9            201909
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00   02/09/2019  ...  Conservative And Unionist Party          1         2019             9            201909
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58   30/08/2019  ...  Conservative And Unionist Party          1         2019             8            201908
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00   30/08/2019  ...  Conservative And Unionist Party          1         2019             8            201908
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05   29/08/2019  ...  Conservative And Unionist Party          1         2019             8            201908
...          ...                              ...                    ...        ...          ...  ...                              ...        ...          ...           ...               ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00          NaN  ...          Shaftesbury Investments          1         2016             4            201604
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00          NaN  ...                Mr Jeremy Hosking          1         2016             2            201602
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00          NaN  ...                   Anthony Clarke          1         2016             6            201606
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00          NaN  ...                Mr Peter A Dubens          1         2017             5            201705
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00          NaN  ...                 Mr Ravi S Kailas          1         2017             5            201705

[65278 rows x 44 columns],), kwargs={}
2025/03/04 08:39:29 AM DEBUG:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/04 08:39:29 AM DEBUG:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/04 08:39:29 AM DEBUG:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/04 08:39:29 AM DEBUG:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/04 08:39:29 AM DEBUG:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/04 08:39:29 AM ERROR:Number of rows in loaddata_df and raw_data do not match 78745 != 65278
2025/03/04 08:39:29 AM ERROR:Attempting to remove duplicates
2025/03/04 08:39:30 AM DEBUG:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/04 08:39:30 AM DEBUG:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/04 08:39:30 AM INFO:Data Updated with PartyName and PartyId successfully
2025/03/04 08:39:30 AM INFO:map_mp_to_party executed successfully
2025/03/04 08:39:30 AM DEBUG:Clean Data Prep 150: Map Mps: 65278
2025/03/04 08:39:30 AM DEBUG:Clean Data Prep 235: RegEntity_Map: 65278
2025/03/04 08:39:30 AM DEBUG:Calling load_election_dates with args=(), kwargs={}
2025/03/04 08:39:30 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': 'source\\Donations_accepted_by_political_parties.csv', 'savedfilepath': 'reference_files\\elections.csv', 'timestamp_key': 'election_dates_last_modified'}
2025/03/04 08:39:30 AM INFO:Original file path: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:39:30 AM INFO:Saved file path: reference_files\elections.csv
2025/03/04 08:39:30 AM DEBUG:Calling is_file_updated with args=('source\\Donations_accepted_by_political_parties.csv', 'election_dates_last_modified'), kwargs={}
2025/03/04 08:39:30 AM INFO:Checking if source\Donations_accepted_by_political_parties.csv has been updated.
2025/03/04 08:39:30 AM DEBUG:Calling get_file_modification_time with args=('source\\Donations_accepted_by_political_parties.csv',), kwargs={}
2025/03/04 08:39:30 AM INFO:Getting modification time for source\Donations_accepted_by_political_parties.csv
2025/03/04 08:39:30 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:39:30 AM INFO:Current modification time: 1740757862.6744745
2025/03/04 08:39:30 AM INFO:Last modification time: None
2025/03/04 08:39:30 AM INFO:is_file_updated executed successfully
2025/03/04 08:39:30 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:39:30 AM INFO:Election dates loaded from file.
2025/03/04 08:39:30 AM INFO:Election_dates_df empty - loading from pdpy.
2025/03/04 08:39:30 AM INFO:Election Dates loaded vis pdpy.
2025/03/04 08:39:30 AM DEBUG:ElectionDates_dict from pdpy: {'1929': {'dissolution': datetime.date(1929, 5, 10), 'election': datetime.date(1929, 5, 30), 'type': 'General Election'}, '1931': {'dissolution': datetime.date(1931, 10, 7), 'election': datetime.date(1931, 10, 27), 'type': 'General Election'}, '1935': {'dissolution': datetime.date(1935, 10, 25), 'election': datetime.date(1935, 11, 14), 'type': 'General Election'}, '1945': {'dissolution': datetime.date(1945, 6, 15), 'election': datetime.date(1945, 7, 5), 'type': 'General Election'}, '1950': {'dissolution': datetime.date(1950, 2, 3), 'election': datetime.date(1950, 2, 23), 'type': 'General Election'}, '1951': {'dissolution': datetime.date(1951, 10, 5), 'election': datetime.date(1951, 10, 25), 'type': 'General Election'}, '1955': {'dissolution': datetime.date(1955, 5, 6), 'election': datetime.date(1955, 5, 26), 'type': 'General Election'}, '1959': {'dissolution': datetime.date(1959, 9, 18), 'election': datetime.date(1959, 10, 8), 'type': 'General Election'}, '1964': {'dissolution': datetime.date(1964, 9, 25), 'election': datetime.date(1964, 10, 15), 'type': 'General Election'}, '1966': {'dissolution': datetime.date(1966, 3, 10), 'election': datetime.date(1966, 3, 31), 'type': 'General Election'}, '1970': {'dissolution': datetime.date(1970, 5, 29), 'election': datetime.date(1970, 6, 18), 'type': 'General Election'}, '1974 (Feb)': {'dissolution': datetime.date(1974, 2, 8), 'election': datetime.date(1974, 2, 28), 'type': 'General Election'}, '1974 (Oct)': {'dissolution': datetime.date(1974, 9, 20), 'election': datetime.date(1974, 10, 10), 'type': 'General Election'}, '1979': {'dissolution': datetime.date(1979, 4, 7), 'election': datetime.date(1979, 5, 3), 'type': 'General Election'}, '1983': {'dissolution': datetime.date(1983, 5, 13), 'election': datetime.date(1983, 6, 9), 'type': 'General Election'}, '1987': {'dissolution': datetime.date(1987, 5, 18), 'election': datetime.date(1987, 6, 11), 'type': 'General Election'}, '1992': {'dissolution': datetime.date(1992, 3, 16), 'election': datetime.date(1992, 4, 9), 'type': 'General Election'}, '1997': {'dissolution': datetime.date(1997, 4, 8), 'election': datetime.date(1997, 5, 1), 'type': 'General Election'}, '2001': {'dissolution': datetime.date(2001, 5, 14), 'election': datetime.date(2001, 6, 7), 'type': 'General Election'}, '2005': {'dissolution': datetime.date(2005, 4, 11), 'election': datetime.date(2005, 5, 5), 'type': 'General Election'}, '2010': {'dissolution': datetime.date(2010, 4, 12), 'election': datetime.date(2010, 5, 6), 'type': 'General Election'}, '2015': {'dissolution': datetime.date(2015, 3, 30), 'election': datetime.date(2015, 5, 7), 'type': 'General Election'}, '2017': {'dissolution': datetime.date(2017, 5, 3), 'election': datetime.date(2017, 6, 8), 'type': 'General Election'}, '2019': {'dissolution': datetime.date(2019, 11, 6), 'election': datetime.date(2019, 12, 12), 'type': 'General Election'}}
2025/03/04 08:39:30 AM INFO:Election Dates Loaded Successfully.
2025/03/04 08:39:30 AM DEBUG:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/04 08:39:30 AM DEBUG:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/04 08:39:30 AM INFO:load_election_dates executed successfully
2025/03/04 08:39:50 AM DEBUG:Clean Data Prep 353: Election dates: 65278
2025/03/04 08:39:50 AM DEBUG:Clean Data Prep 386: End of clean: 65278
2025/03/04 08:40:15 AM INFO:Cleaned Data completed, shape: (65278, 58)
2025/03/04 08:40:15 AM DEBUG:Calling initialise_data with args=(), kwargs={}
2025/03/04 08:40:15 AM INFO:Running first load function.
2025/03/04 08:40:15 AM DEBUG:Calling firstload with args=(), kwargs={}
2025/03/04 08:40:15 AM DEBUG:Calling load_data_to_session with args=('raw_data', <function get_raw_data at 0x00000219E53675B0>), kwargs={}
2025/03/04 08:40:15 AM DEBUG:Calling initialise_data with args=(), kwargs={}
2025/03/04 08:40:15 AM INFO:Running first load function.
2025/03/04 08:40:15 AM DEBUG:Calling firstload with args=(), kwargs={}
2025/03/04 08:40:15 AM DEBUG:Calling load_data_to_session with args=('raw_data', <function get_raw_data at 0x00000219E53675B0>), kwargs={}
2025/03/04 08:40:15 AM DEBUG:Calling get_raw_data with args=(), kwargs={}
2025/03/04 08:40:16 AM INFO:get_raw_data executed successfully
2025/03/04 08:40:16 AM INFO:load_data_to_session executed successfully
2025/03/04 08:40:16 AM DEBUG:Calling load_data_to_session with args=('data_clean', <function get_cleaned_data at 0x00000219E5367640>), kwargs={}
2025/03/04 08:40:16 AM DEBUG:Calling get_cleaned_data with args=(), kwargs={}
2025/03/04 08:40:16 AM DEBUG:Calling load_cleaned_data with args=(), kwargs={'originaldatafilepath': 'cleaned_donations_fname', 'processeddatafilepath': 'cleaned_data_fname', 'datafile': 'raw_data', 'streamlitrun': True, 'output_csv': True, 'main_file': 'raw_data', 'cleaned_file': 'data_clean'}
2025/03/04 08:40:16 AM DEBUG:Rows in Raw Data: 65278
2025/03/04 08:40:16 AM ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/04 08:40:16 AM INFO:Loading and cleaning data... data.clean_and_enhance
2025/03/04 08:40:16 AM DEBUG:Clean Data Prep: streamlitdata load: 65278
2025/03/04 08:40:16 AM DEBUG:Clean Data Prep 123: streamlitdata load: 65278
2025/03/04 08:40:18 AM DEBUG:Calling map_mp_to_party with args=(           ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value AcceptedDate  ...                        DonorName EventCount YearReceived MonthReceived YearMonthReceived
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56   02/09/2019  ...  Conservative And Unionist Party          1         2019             9            201909
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00   02/09/2019  ...  Conservative And Unionist Party          1         2019             9            201909
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58   30/08/2019  ...  Conservative And Unionist Party          1         2019             8            201908
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00   30/08/2019  ...  Conservative And Unionist Party          1         2019             8            201908
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05   29/08/2019  ...  Conservative And Unionist Party          1         2019             8            201908
...          ...                              ...                    ...        ...          ...  ...                              ...        ...          ...           ...               ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00          NaN  ...          Shaftesbury Investments          1         2016             4            201604
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00          NaN  ...                Mr Jeremy Hosking          1         2016             2            201602
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00          NaN  ...                   Anthony Clarke          1         2016             6            201606
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00          NaN  ...                Mr Peter A Dubens          1         2017             5            201705
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00          NaN  ...                 Mr Ravi S Kailas          1         2017             5            201705

[65278 rows x 44 columns],), kwargs={}
2025/03/04 08:40:18 AM DEBUG:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/04 08:40:18 AM DEBUG:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/04 08:40:19 AM DEBUG:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/04 08:40:19 AM DEBUG:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/04 08:40:19 AM DEBUG:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/04 08:40:19 AM ERROR:Number of rows in loaddata_df and raw_data do not match 78745 != 65278
2025/03/04 08:40:19 AM ERROR:Attempting to remove duplicates
2025/03/04 08:40:19 AM DEBUG:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/04 08:40:19 AM DEBUG:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/04 08:40:19 AM INFO:Data Updated with PartyName and PartyId successfully
2025/03/04 08:40:19 AM INFO:map_mp_to_party executed successfully
2025/03/04 08:40:19 AM DEBUG:Clean Data Prep 150: Map Mps: 65278
2025/03/04 08:40:19 AM DEBUG:Clean Data Prep 235: RegEntity_Map: 65278
2025/03/04 08:40:19 AM DEBUG:Calling load_election_dates with args=(), kwargs={}
2025/03/04 08:40:19 AM INFO:load_election_dates executed successfully
2025/03/04 08:40:19 AM ERROR:Error in load_cleaned_data: st.session_state has no attribute "ElectionDatesAscend". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "ElectionDatesAscend". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 309, in load_cleaned_data
    if not st.session_state.ElectionDatesAscend:
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "ElectionDatesAscend". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/04 08:40:19 AM ERROR:Error in get_cleaned_data: st.session_state has no attribute "ElectionDatesAscend". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "ElectionDatesAscend". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 309, in load_cleaned_data
    if not st.session_state.ElectionDatesAscend:
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "ElectionDatesAscend". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/04 08:40:19 AM ERROR:Error in load_data_to_session: st.session_state has no attribute "ElectionDatesAscend". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "ElectionDatesAscend". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 309, in load_cleaned_data
    if not st.session_state.ElectionDatesAscend:
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "ElectionDatesAscend". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/04 08:40:19 AM ERROR:Error in firstload: st.session_state has no attribute "ElectionDatesAscend". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "ElectionDatesAscend". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 80, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 309, in load_cleaned_data
    if not st.session_state.ElectionDatesAscend:
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "ElectionDatesAscend". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/04 08:40:19 AM ERROR:Error in initialise_data: st.session_state has no attribute "ElectionDatesAscend". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "ElectionDatesAscend". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_utils.py", line 42, in initialise_data
    firstload()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 80, in firstload
    load_data_to_session("data_clean", get_cleaned_data)
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 89, in load_data_to_session
    st.session_state[key] = loader_function()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 37, in get_cleaned_data
    return load_cleaned_data(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 217, in __call__
    return self._get_or_create_cached_value(args, kwargs, spinner_message)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 259, in _get_or_create_cached_value
    return self._handle_cache_miss(cache, value_key, func_args, func_kwargs)
  File "H:\python310\lib\site-packages\streamlit\runtime\caching\cache_utils.py", line 317, in _handle_cache_miss
    computed_value = self._info.func(*func_args, **func_kwargs)
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 309, in load_cleaned_data
    if not st.session_state.ElectionDatesAscend:
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "ElectionDatesAscend". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/04 08:40:19 AM DEBUG:Calling initialise_data with args=(), kwargs={}
2025/03/04 08:40:19 AM INFO:Running first load function.
2025/03/04 08:40:19 AM DEBUG:Calling firstload with args=(), kwargs={}
2025/03/04 08:40:19 AM DEBUG:Calling load_data_to_session with args=('raw_data', <function get_raw_data at 0x00000219E53675B0>), kwargs={}
2025/03/04 08:40:19 AM DEBUG:Calling initialise_data with args=(), kwargs={}
2025/03/04 08:40:19 AM INFO:Running first load function.
2025/03/04 08:40:19 AM DEBUG:Calling firstload with args=(), kwargs={}
2025/03/04 08:40:19 AM DEBUG:Calling load_data_to_session with args=('raw_data', <function get_raw_data at 0x00000219E53675B0>), kwargs={}
2025/03/04 08:45:14 AM INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/04 08:45:14 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\utils',), kwargs={}
2025/03/04 08:45:14 AM INFO:get_git_version executed successfully
2025/03/04 08:45:15 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\data',), kwargs={}
2025/03/04 08:45:15 AM INFO:get_git_version executed successfully
2025/03/04 08:45:15 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:45:15 AM INFO:Running App setup...
2025/03/04 08:45:15 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:45:15 AM INFO:Setting up the package
2025/03/04 08:45:15 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:45:15 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:45:15 AM INFO:get_git_version executed successfully
2025/03/04 08:45:15 AM INFO:Version: v20.140
2025/03/04 08:45:15 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:45:15 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:45:15 AM DEBUG:Initialised LOG_LEVEL with value: DEBUG
2025/03/04 08:45:15 AM DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo-1
2025/03/04 08:45:15 AM DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:45:15 AM DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/04 08:45:15 AM DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/04 08:45:15 AM DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:45:15 AM DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:45:15 AM DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:45:15 AM DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:45:15 AM DEBUG:Initialised perc_target with value: 0.5
2025/03/04 08:45:15 AM DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/04 08:45:15 AM DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:45:15 AM DEBUG:Initialised reference_dir with value: reference_files
2025/03/04 08:45:15 AM DEBUG:Initialised data_dir with value: data
2025/03/04 08:45:15 AM DEBUG:Initialised output_dir with value: output
2025/03/04 08:45:15 AM DEBUG:Initialised logs_dir with value: logs
2025/03/04 08:45:15 AM DEBUG:Initialised components_dir with value: components
2025/03/04 08:45:15 AM DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/04 08:45:15 AM DEBUG:Initialised utils_dir with value: utils
2025/03/04 08:45:15 AM DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:45:15 AM DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:45:15 AM DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/04 08:45:15 AM DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:45:15 AM DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:45:15 AM DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:45:15 AM DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/04 08:45:15 AM DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/04 08:45:15 AM DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/04 08:45:15 AM DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/04 08:45:15 AM DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/04 08:45:15 AM DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/04 08:45:15 AM DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/04 08:45:15 AM DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/04 08:45:15 AM DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/04 08:45:15 AM DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/04 08:45:15 AM DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:45:15 AM DEBUG:Initialised Cash_ftr with value: {'DonationType': 'Cash'}
2025/03/04 08:45:15 AM INFO:Session_state variables initialized
2025/03/04 08:45:15 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:45:15 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:45:15 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:45:15 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:45:15 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:45:15 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:45:15 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:45:15 AM DEBUG:components_dir: components
2025/03/04 08:45:15 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:45:15 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:45:15 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:45:15 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:45:15 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:45:15 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:45:15 AM DEBUG:output_dir: output
2025/03/04 08:45:15 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:45:15 AM DEBUG:perc_target: 0.5
2025/03/04 08:45:15 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:45:15 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:45:15 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:45:15 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:45:15 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:45:15 AM DEBUG:data_dir: data
2025/03/04 08:45:15 AM DEBUG:reference_dir: reference_files
2025/03/04 08:45:15 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:45:15 AM DEBUG:logs_dir: logs
2025/03/04 08:45:15 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:45:15 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:45:15 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:45:15 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:45:15 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:45:15 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:45:15 AM DEBUG:utils_dir: utils
2025/03/04 08:45:15 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:45:15 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:45:15 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:45:15 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:45:15 AM INFO:Session state Setup complete
2025/03/04 08:45:15 AM INFO:initialize_session_state executed successfully
2025/03/04 08:45:15 AM INFO:Package setup complete
2025/03/04 08:45:15 AM INFO:setup_package executed successfully
2025/03/04 08:45:15 AM INFO:Running Menu setup...
2025/03/04 08:45:15 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:45:15 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\app_pages',), kwargs={}
2025/03/04 08:45:15 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:45:15 AM INFO:Running App setup...
2025/03/04 08:45:15 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:45:15 AM INFO:Setting up the package
2025/03/04 08:45:15 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:45:15 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:45:15 AM INFO:get_git_version executed successfully
2025/03/04 08:45:15 AM INFO:Version: v20.140
2025/03/04 08:45:15 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:45:15 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:45:15 AM DEBUG:Initialised LOG_LEVEL with value: DEBUG
2025/03/04 08:45:15 AM DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo-1
2025/03/04 08:45:15 AM DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:45:15 AM DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/04 08:45:15 AM DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/04 08:45:15 AM DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:45:15 AM DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:45:15 AM DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:45:15 AM DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:45:15 AM DEBUG:Initialised perc_target with value: 0.5
2025/03/04 08:45:15 AM DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/04 08:45:15 AM DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:45:15 AM DEBUG:Initialised reference_dir with value: reference_files
2025/03/04 08:45:15 AM DEBUG:Initialised data_dir with value: data
2025/03/04 08:45:15 AM DEBUG:Initialised output_dir with value: output
2025/03/04 08:45:15 AM DEBUG:Initialised logs_dir with value: logs
2025/03/04 08:45:15 AM DEBUG:Initialised components_dir with value: components
2025/03/04 08:45:15 AM DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/04 08:45:15 AM DEBUG:Initialised utils_dir with value: utils
2025/03/04 08:45:15 AM DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:45:15 AM DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:45:15 AM DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/04 08:45:15 AM DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:45:15 AM DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:45:15 AM DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:45:15 AM DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/04 08:45:15 AM DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/04 08:45:15 AM DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/04 08:45:15 AM DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/04 08:45:15 AM DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/04 08:45:15 AM DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/04 08:45:15 AM DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/04 08:45:15 AM DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/04 08:45:15 AM DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/04 08:45:15 AM DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/04 08:45:15 AM DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:45:15 AM DEBUG:Initialised Cash_ftr with value: {'DonationType': 'Cash'}
2025/03/04 08:45:15 AM INFO:Session_state variables initialized
2025/03/04 08:45:15 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:45:15 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:45:15 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:45:15 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:45:15 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:45:15 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:45:15 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:45:15 AM DEBUG:components_dir: components
2025/03/04 08:45:15 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:45:15 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:45:15 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:45:15 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:45:15 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:45:15 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:45:15 AM DEBUG:output_dir: output
2025/03/04 08:45:15 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:45:15 AM DEBUG:perc_target: 0.5
2025/03/04 08:45:15 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:45:15 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:45:15 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:45:15 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:45:15 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:45:15 AM DEBUG:data_dir: data
2025/03/04 08:45:15 AM DEBUG:reference_dir: reference_files
2025/03/04 08:45:15 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:45:15 AM DEBUG:logs_dir: logs
2025/03/04 08:45:15 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:45:15 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:45:15 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:45:15 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:45:15 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:45:15 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:45:15 AM DEBUG:utils_dir: utils
2025/03/04 08:45:15 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:45:15 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:45:15 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:45:15 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:45:15 AM INFO:Session state Setup complete
2025/03/04 08:45:15 AM INFO:initialize_session_state executed successfully
2025/03/04 08:45:15 AM INFO:Package setup complete
2025/03/04 08:45:15 AM INFO:setup_package executed successfully
2025/03/04 08:45:15 AM INFO:Running Menu setup...
2025/03/04 08:45:15 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:45:15 AM INFO:get_git_version executed successfully
2025/03/04 08:45:15 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\components',), kwargs={}
2025/03/04 08:45:15 AM INFO:get_git_version executed successfully
2025/03/04 08:45:15 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:45:15 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:45:16 AM INFO:get_git_version executed successfully
2025/03/04 08:45:16 AM INFO:get_git_version executed successfully
2025/03/04 08:45:16 AM INFO:App Version: v20.161
2025/03/04 08:45:16 AM INFO:App Version: v20.161
2025/03/04 08:45:16 AM INFO:Switched to page: Introduction
2025/03/04 08:45:16 AM INFO:Switched to page: Introduction
2025/03/04 08:45:16 AM INFO:pagesetup executed successfully
2025/03/04 08:45:16 AM INFO:pagesetup executed successfully
2025/03/04 08:45:16 AM INFO:No data found in session state, running firstload()
2025/03/04 08:45:16 AM INFO:No data found in session state, running firstload()
2025/03/04 08:45:16 AM DEBUG:Calling initialise_data with args=(), kwargs={}
2025/03/04 08:45:16 AM ERROR:Error in initialise_data: cannot assign to attribute here. Maybe you meant '==' instead of '='? (clean_and_enhance.py, line 309)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_utils.py", line 39, in initialise_data
    from data.data_loader import firstload
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 3, in <module>
    from data.clean_and_enhance import load_cleaned_data
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 309
    if st.session_state.ElectionDatesAscend = None:
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
SyntaxError: cannot assign to attribute here. Maybe you meant '==' instead of '='?
2025/03/04 08:45:16 AM DEBUG:Calling initialise_data with args=(), kwargs={}
2025/03/04 08:45:16 AM ERROR:Error in initialise_data: cannot assign to attribute here. Maybe you meant '==' instead of '='? (clean_and_enhance.py, line 309)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\data\data_utils.py", line 39, in initialise_data
    from data.data_loader import firstload
  File "H:\VScode\dashboard_demo-1\data\data_loader.py", line 3, in <module>
    from data.clean_and_enhance import load_cleaned_data
  File "H:\VScode\dashboard_demo-1\data\clean_and_enhance.py", line 309
    if st.session_state.ElectionDatesAscend = None:
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
SyntaxError: cannot assign to attribute here. Maybe you meant '==' instead of '='?
2025/03/04 08:45:40 AM INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/04 08:45:40 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\utils',), kwargs={}
2025/03/04 08:45:41 AM INFO:get_git_version executed successfully
2025/03/04 08:45:42 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\data',), kwargs={}
2025/03/04 08:45:42 AM INFO:get_git_version executed successfully
2025/03/04 08:45:42 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:45:42 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:45:42 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:45:42 AM INFO:Running App setup...
2025/03/04 08:45:42 AM INFO:Running App setup...
2025/03/04 08:45:42 AM INFO:Running App setup...
2025/03/04 08:45:42 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:45:42 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:45:42 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:45:42 AM INFO:Setting up the package
2025/03/04 08:45:42 AM INFO:Setting up the package
2025/03/04 08:45:42 AM INFO:Setting up the package
2025/03/04 08:45:42 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:45:42 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:45:42 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:45:42 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:45:42 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:45:42 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:45:42 AM INFO:get_git_version executed successfully
2025/03/04 08:45:42 AM INFO:get_git_version executed successfully
2025/03/04 08:45:42 AM INFO:get_git_version executed successfully
2025/03/04 08:45:42 AM INFO:Version: v20.140
2025/03/04 08:45:42 AM INFO:Version: v20.140
2025/03/04 08:45:42 AM INFO:Version: v20.140
2025/03/04 08:45:42 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:45:42 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:45:42 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:45:42 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:45:42 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:45:42 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:45:42 AM DEBUG:Initialised LOG_LEVEL with value: DEBUG
2025/03/04 08:45:42 AM DEBUG:Initialised LOG_LEVEL with value: DEBUG
2025/03/04 08:45:42 AM DEBUG:Initialised LOG_LEVEL with value: DEBUG
2025/03/04 08:45:42 AM DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo-1
2025/03/04 08:45:42 AM DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo-1
2025/03/04 08:45:42 AM DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo-1
2025/03/04 08:45:42 AM DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:45:42 AM DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:45:42 AM DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:45:42 AM DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/04 08:45:42 AM DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/04 08:45:42 AM DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/04 08:45:42 AM DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/04 08:45:42 AM DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/04 08:45:42 AM DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/04 08:45:42 AM DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:45:42 AM DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:45:42 AM DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:45:42 AM DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:45:42 AM DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:45:42 AM DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:45:42 AM DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:45:42 AM DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:45:42 AM DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:45:42 AM DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:45:42 AM DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:45:42 AM DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:45:42 AM DEBUG:Initialised perc_target with value: 0.5
2025/03/04 08:45:42 AM DEBUG:Initialised perc_target with value: 0.5
2025/03/04 08:45:42 AM DEBUG:Initialised perc_target with value: 0.5
2025/03/04 08:45:42 AM DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/04 08:45:42 AM DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/04 08:45:42 AM DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/04 08:45:42 AM DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:45:42 AM DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:45:42 AM DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:45:42 AM DEBUG:Initialised reference_dir with value: reference_files
2025/03/04 08:45:42 AM DEBUG:Initialised data_dir with value: data
2025/03/04 08:45:42 AM DEBUG:Initialised output_dir with value: output
2025/03/04 08:45:42 AM DEBUG:Initialised reference_dir with value: reference_files
2025/03/04 08:45:42 AM DEBUG:Initialised reference_dir with value: reference_files
2025/03/04 08:45:42 AM DEBUG:Initialised logs_dir with value: logs
2025/03/04 08:45:42 AM DEBUG:Initialised data_dir with value: data
2025/03/04 08:45:42 AM DEBUG:Initialised data_dir with value: data
2025/03/04 08:45:42 AM DEBUG:Initialised components_dir with value: components
2025/03/04 08:45:42 AM DEBUG:Initialised output_dir with value: output
2025/03/04 08:45:42 AM DEBUG:Initialised output_dir with value: output
2025/03/04 08:45:42 AM DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/04 08:45:42 AM DEBUG:Initialised logs_dir with value: logs
2025/03/04 08:45:42 AM DEBUG:Initialised logs_dir with value: logs
2025/03/04 08:45:42 AM DEBUG:Initialised utils_dir with value: utils
2025/03/04 08:45:42 AM DEBUG:Initialised components_dir with value: components
2025/03/04 08:45:42 AM DEBUG:Initialised components_dir with value: components
2025/03/04 08:45:42 AM DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:45:42 AM DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/04 08:45:42 AM DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/04 08:45:42 AM DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:45:42 AM DEBUG:Initialised utils_dir with value: utils
2025/03/04 08:45:42 AM DEBUG:Initialised utils_dir with value: utils
2025/03/04 08:45:42 AM DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/04 08:45:42 AM DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:45:42 AM DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:45:42 AM DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:45:42 AM DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:45:42 AM DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:45:42 AM DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:45:42 AM DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/04 08:45:42 AM DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/04 08:45:42 AM DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:45:42 AM DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:45:42 AM DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:45:42 AM DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/04 08:45:42 AM DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:45:42 AM DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:45:42 AM DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/04 08:45:42 AM DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:45:42 AM DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:45:42 AM DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/04 08:45:42 AM DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/04 08:45:42 AM DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/04 08:45:42 AM DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/04 08:45:42 AM DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/04 08:45:42 AM DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/04 08:45:42 AM DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/04 08:45:42 AM DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/04 08:45:42 AM DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/04 08:45:42 AM DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/04 08:45:42 AM DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/04 08:45:42 AM DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/04 08:45:42 AM DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/04 08:45:42 AM DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/04 08:45:42 AM DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/04 08:45:42 AM DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/04 08:45:42 AM DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/04 08:45:42 AM DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/04 08:45:42 AM DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/04 08:45:42 AM DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/04 08:45:42 AM DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/04 08:45:42 AM DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/04 08:45:42 AM DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/04 08:45:42 AM DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/04 08:45:42 AM DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:45:42 AM DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/04 08:45:42 AM DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/04 08:45:42 AM DEBUG:Initialised Cash_ftr with value: {'DonationType': 'Cash'}
2025/03/04 08:45:42 AM DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/04 08:45:42 AM DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/04 08:45:42 AM INFO:Session_state variables initialized
2025/03/04 08:45:42 AM DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:45:42 AM DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:45:42 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:45:42 AM DEBUG:Initialised Cash_ftr with value: {'DonationType': 'Cash'}
2025/03/04 08:45:42 AM DEBUG:Initialised Cash_ftr with value: {'DonationType': 'Cash'}
2025/03/04 08:45:42 AM DEBUG:output_dir: output
2025/03/04 08:45:42 AM INFO:Session_state variables initialized
2025/03/04 08:45:42 AM INFO:Session_state variables initialized
2025/03/04 08:45:42 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:45:42 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:45:42 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:45:42 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:45:42 AM DEBUG:output_dir: output
2025/03/04 08:45:42 AM DEBUG:output_dir: output
2025/03/04 08:45:42 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:45:42 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:45:42 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:45:42 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:45:42 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:45:42 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:45:42 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:45:42 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:45:42 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:45:42 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:45:42 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:45:42 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:45:42 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:45:42 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:45:42 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:45:42 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:45:42 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:45:42 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:45:42 AM DEBUG:components_dir: components
2025/03/04 08:45:42 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:45:42 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:45:42 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:45:42 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:45:42 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:45:42 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:45:42 AM DEBUG:components_dir: components
2025/03/04 08:45:42 AM DEBUG:components_dir: components
2025/03/04 08:45:42 AM DEBUG:utils_dir: utils
2025/03/04 08:45:42 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:45:42 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:45:42 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:45:42 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:45:42 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:45:42 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:45:42 AM DEBUG:utils_dir: utils
2025/03/04 08:45:42 AM DEBUG:utils_dir: utils
2025/03/04 08:45:42 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:45:42 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:45:42 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:45:42 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:45:42 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:45:42 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:45:42 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:45:42 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:45:42 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:45:42 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:45:42 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:45:42 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:45:42 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:45:42 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:45:42 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:45:42 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:45:42 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:45:42 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:45:42 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:45:42 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:45:42 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:45:42 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:45:42 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:45:42 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:45:42 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:45:42 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:45:42 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:45:42 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:45:42 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:45:42 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:45:42 AM DEBUG:perc_target: 0.5
2025/03/04 08:45:42 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:45:42 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:45:42 AM DEBUG:data_dir: data
2025/03/04 08:45:42 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:45:42 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:45:42 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:45:42 AM DEBUG:perc_target: 0.5
2025/03/04 08:45:42 AM DEBUG:perc_target: 0.5
2025/03/04 08:45:42 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:45:42 AM DEBUG:data_dir: data
2025/03/04 08:45:42 AM DEBUG:data_dir: data
2025/03/04 08:45:42 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:45:42 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:45:42 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:45:42 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:45:42 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:45:42 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:45:42 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:45:42 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:45:42 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:45:42 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:45:42 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:45:42 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:45:42 AM DEBUG:logs_dir: logs
2025/03/04 08:45:42 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:45:42 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:45:42 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:45:42 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:45:42 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:45:42 AM DEBUG:reference_dir: reference_files
2025/03/04 08:45:42 AM DEBUG:logs_dir: logs
2025/03/04 08:45:42 AM DEBUG:logs_dir: logs
2025/03/04 08:45:42 AM INFO:Session state Setup complete
2025/03/04 08:45:42 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:45:42 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:45:42 AM INFO:initialize_session_state executed successfully
2025/03/04 08:45:42 AM DEBUG:reference_dir: reference_files
2025/03/04 08:45:42 AM DEBUG:reference_dir: reference_files
2025/03/04 08:45:42 AM INFO:Package setup complete
2025/03/04 08:45:42 AM INFO:Session state Setup complete
2025/03/04 08:45:42 AM INFO:Session state Setup complete
2025/03/04 08:45:42 AM INFO:setup_package executed successfully
2025/03/04 08:45:42 AM INFO:initialize_session_state executed successfully
2025/03/04 08:45:42 AM INFO:initialize_session_state executed successfully
2025/03/04 08:45:42 AM INFO:Running Menu setup...
2025/03/04 08:45:42 AM INFO:Package setup complete
2025/03/04 08:45:42 AM INFO:Package setup complete
2025/03/04 08:45:42 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:45:42 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\app_pages',), kwargs={}
2025/03/04 08:45:42 AM INFO:setup_package executed successfully
2025/03/04 08:45:42 AM INFO:setup_package executed successfully
2025/03/04 08:45:42 AM INFO:Running Menu setup...
2025/03/04 08:45:42 AM INFO:Running Menu setup...
2025/03/04 08:45:42 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:45:42 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:45:42 AM INFO:get_git_version executed successfully
2025/03/04 08:45:42 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\components',), kwargs={}
2025/03/04 08:45:42 AM INFO:get_git_version executed successfully
2025/03/04 08:45:42 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:45:42 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:45:42 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:45:42 AM INFO:get_git_version executed successfully
2025/03/04 08:45:42 AM INFO:get_git_version executed successfully
2025/03/04 08:45:42 AM INFO:get_git_version executed successfully
2025/03/04 08:45:42 AM INFO:App Version: v20.161
2025/03/04 08:45:42 AM INFO:App Version: v20.161
2025/03/04 08:45:42 AM INFO:App Version: v20.161
2025/03/04 08:45:42 AM INFO:Switched to page: Introduction
2025/03/04 08:45:42 AM INFO:Switched to page: Introduction
2025/03/04 08:45:42 AM INFO:Switched to page: Introduction
2025/03/04 08:45:42 AM INFO:pagesetup executed successfully
2025/03/04 08:45:42 AM INFO:pagesetup executed successfully
2025/03/04 08:45:42 AM INFO:pagesetup executed successfully
2025/03/04 08:45:42 AM INFO:No data found in session state, running firstload()
2025/03/04 08:45:42 AM DEBUG:Calling initialise_data with args=(), kwargs={}
2025/03/04 08:45:42 AM INFO:No data found in session state, running firstload()
2025/03/04 08:45:42 AM INFO:No data found in session state, running firstload()
2025/03/04 08:45:43 AM INFO:Running first load function.
2025/03/04 08:45:43 AM DEBUG:Calling firstload with args=(), kwargs={}
2025/03/04 08:45:43 AM DEBUG:Calling load_data_to_session with args=('raw_data', <function get_raw_data at 0x0000025DAA3B9D80>), kwargs={}
2025/03/04 08:45:43 AM DEBUG:Calling get_raw_data with args=(), kwargs={}
2025/03/04 08:45:43 AM DEBUG:Calling load_raw_data with args=(), kwargs={'main_file': 'raw_data', 'cleaned_file': 'raw_data_clean', 'output_csv': True, 'dedupe_donors': True, 'dedupe_regentity': True, 'originaldatafilepath': 'source_data_fname', 'processeddatafilepath': 'imported_raw_fname'}
2025/03/04 08:45:43 AM DEBUG:Original data file path pre raw data load: {originaldatafilepath}
2025/03/04 08:45:43 AM DEBUG:Processed data file path pre raw data load: {processeddatafilepath}
2025/03/04 08:45:43 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': 'source\\Donations_accepted_by_political_parties.csv', 'savedfilepath': 'output\\imported_raw.csv', 'timestamp_key': 'load_raw_data_last_modified'}
2025/03/04 08:45:43 AM INFO:Original file path: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:45:43 AM INFO:Saved file path: output\imported_raw.csv
2025/03/04 08:45:43 AM DEBUG:Calling is_file_updated with args=('source\\Donations_accepted_by_political_parties.csv', 'load_raw_data_last_modified'), kwargs={}
2025/03/04 08:45:43 AM INFO:Checking if source\Donations_accepted_by_political_parties.csv has been updated.
2025/03/04 08:45:43 AM DEBUG:Calling get_file_modification_time with args=('source\\Donations_accepted_by_political_parties.csv',), kwargs={}
2025/03/04 08:45:43 AM INFO:Getting modification time for source\Donations_accepted_by_political_parties.csv
2025/03/04 08:45:43 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:45:43 AM INFO:Current modification time: 1740757862.6744745
2025/03/04 08:45:43 AM INFO:Last modification time: None
2025/03/04 08:45:43 AM INFO:is_file_updated executed successfully
2025/03/04 08:45:43 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:45:43 AM INFO:Loading raw data...
2025/03/04 08:45:43 AM DEBUG:Original data file path post raw data load: {originaldatafilepath}
2025/03/04 08:45:43 AM DEBUG:Processed data file path post raw data load: {processeddatafilepath}
2025/03/04 08:45:43 AM INFO:Data loaded successfully. Data has 65278 rows and 29 columns
2025/03/04 08:45:44 AM INFO:Data saved to output\imported_raw.csv
2025/03/04 08:45:44 AM DEBUG:Calling raw_data_cleanup with args=(), kwargs={'loaddata_df':            ECRef              RegulatedEntityName    RegulatedEntityType        Value AcceptedDate  ... AccountingUnitId  DonorId CampaigningName   RegisterName IsIrishSource
index                                                                                               ...                                                                       
0      NC0408174                   Mr Andy Street        Regulated Donee    £1,876.56   02/09/2019  ...              NaN  86310.0             NaN  Great Britain         False
1      NC0408173                   Mr Andy Street        Regulated Donee    £2,700.00   02/09/2019  ...              NaN  86310.0             NaN  Great Britain         False
2      NC0408177                   Mr Andy Street        Regulated Donee    £4,852.58   30/08/2019  ...              NaN  86310.0             NaN  Great Britain         False
3      NC0408176                   Mr Andy Street        Regulated Donee    £2,500.00   30/08/2019  ...              NaN  86310.0             NaN  Great Britain         False
4      NC0408170                   Mr Andy Street        Regulated Donee    £4,524.05   29/08/2019  ...              NaN  86310.0             NaN  Great Britain         False
...          ...                              ...                    ...          ...          ...  ...              ...      ...             ...            ...           ...
65273   C0242478               Vote Leave Limited  Permitted Participant   £10,000.00          NaN  ...              NaN  74198.0             NaN            NaN         False
65274   C0242461               Vote Leave Limited  Permitted Participant  £100,000.00          NaN  ...              NaN  74184.0             NaN            NaN         False
65275   C0243560               Vote Leave Limited  Permitted Participant   £40,000.00          NaN  ...              NaN  74576.0             NaN            NaN         False
65276   C0319710  Conservative and Unionist Party        Political Party   £50,000.00          NaN  ...              NaN  34241.0             NaN  Great Britain         False
65277   C0319727  Conservative and Unionist Party        Political Party   £15,000.00          NaN  ...              NaN  74743.0             NaN  Great Britain         False

[65278 rows x 29 columns], 'dedupe_donors': True, 'dedupe_regentity': True, 'output_csv': True, 'originaldatafilepath': 'output\\imported_raw.csv', 'processeddatafilepath': 'cleaned_donations_fname'}
2025/03/04 08:45:44 AM INFO:Cleaning up raw data
2025/03/04 08:45:44 AM ERROR:Session state variables not initialized!
2025/03/04 08:45:44 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': None, 'savedfilepath': 'output\\cleaned_donations.csv', 'timestamp_key': 'cleaned_raw_data_last_modified'}
2025/03/04 08:45:44 AM INFO:Original file path: None
2025/03/04 08:45:44 AM INFO:Saved file path: output\cleaned_donations.csv
2025/03/04 08:45:44 AM ERROR:Error: originalfilepath is None!
2025/03/04 08:45:44 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:45:44 AM INFO:Data loaded, shape: (65278, 29)
2025/03/04 08:45:45 AM DEBUG:Calling dedupe_entity_file with args=(), kwargs={'loaddata_dd_df':            ECRef              RegulatedEntityName    RegulatedEntityType      Value AcceptedDate  ... AccountingUnitId  DonorId CampaigningName   RegisterName IsIrishSource
index                                                                                             ...                                                                       
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56   02/09/2019  ...                   86310.0                  Great Britain         False
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00   02/09/2019  ...                   86310.0                  Great Britain         False
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58   30/08/2019  ...                   86310.0                  Great Britain         False
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00   30/08/2019  ...                   86310.0                  Great Britain         False
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05   29/08/2019  ...                   86310.0                  Great Britain         False
...          ...                              ...                    ...        ...          ...  ...              ...      ...             ...            ...           ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00          NaN  ...                   74198.0                          Other         False
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00          NaN  ...                   74184.0                          Other         False
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00          NaN  ...                   74576.0                          Other         False
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00          NaN  ...                   34241.0                  Great Britain         False
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00          NaN  ...                   74743.0                  Great Britain         False

[65278 rows x 29 columns], 'entity': 'RegulatedEntity', 'map_filename': 'regentity_map_fname', 'output_csv': True}
2025/03/04 08:45:45 AM DEBUG:Calling is_file_updated with args=('reference_files\\PoliticalEntityDeDuped.csv', 'regentity_map_fname_last_modified'), kwargs={}
2025/03/04 08:45:45 AM INFO:Checking if reference_files\PoliticalEntityDeDuped.csv has been updated.
2025/03/04 08:45:45 AM DEBUG:Calling get_file_modification_time with args=('reference_files\\PoliticalEntityDeDuped.csv',), kwargs={}
2025/03/04 08:45:45 AM INFO:Getting modification time for reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:45:45 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:45:45 AM INFO:Current modification time: 1740841102.2638545
2025/03/04 08:45:45 AM INFO:Last modification time: None
2025/03/04 08:45:45 AM INFO:is_file_updated executed successfully
2025/03/04 08:45:45 AM INFO:Map file regentity_map_fname has been updated. Proceeding with deduplication.
2025/03/04 08:45:45 AM INFO:File deduplication complete, shape: (65278, 34)
2025/03/04 08:45:45 AM INFO:dedupe_entity_file executed successfully
2025/03/04 08:45:45 AM DEBUG:Calling dedupe_entity_file with args=(), kwargs={'loaddata_dd_df':            ECRef      OriginalRegulatedEntityName    RegulatedEntityType  ...      OriginalRegulatedEntityName RegulatedEntityId              RegulatedEntityName
0      NC0408174                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
1      NC0408173                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
2      NC0408177                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
3      NC0408176                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
4      NC0408170                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
...          ...                              ...                    ...  ...                              ...               ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant  ...               Vote Leave Limited            3945.0               Vote Leave Limited
65274   C0242461               Vote Leave Limited  Permitted Participant  ...               Vote Leave Limited            3945.0               Vote Leave Limited
65275   C0243560               Vote Leave Limited  Permitted Participant  ...               Vote Leave Limited            3945.0               Vote Leave Limited
65276   C0319710  Conservative And Unionist Party        Political Party  ...  Conservative And Unionist Party              52.0  Conservative And Unionist Party
65277   C0319727  Conservative And Unionist Party        Political Party  ...  Conservative And Unionist Party              52.0  Conservative And Unionist Party

[65278 rows x 34 columns], 'entity': 'Donor', 'map_filename': 'donor_map_fname', 'output_csv': True}
2025/03/04 08:45:45 AM DEBUG:Calling is_file_updated with args=('reference_files\\PoliticalDonorsDeduped.csv', 'donor_map_fname_last_modified'), kwargs={}
2025/03/04 08:45:45 AM INFO:Checking if reference_files\PoliticalDonorsDeduped.csv has been updated.
2025/03/04 08:45:45 AM DEBUG:Calling get_file_modification_time with args=('reference_files\\PoliticalDonorsDeduped.csv',), kwargs={}
2025/03/04 08:45:45 AM INFO:Getting modification time for reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:45:45 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:45:45 AM INFO:Current modification time: 1740757863.2545311
2025/03/04 08:45:45 AM INFO:Last modification time: None
2025/03/04 08:45:45 AM INFO:is_file_updated executed successfully
2025/03/04 08:45:45 AM INFO:Map file donor_map_fname has been updated. Proceeding with deduplication.
2025/03/04 08:45:45 AM INFO:File deduplication complete, shape: (65278, 40)
2025/03/04 08:45:45 AM INFO:dedupe_entity_file executed successfully
2025/03/04 08:45:45 AM INFO:Raw Data cleanup completed
2025/03/04 08:45:45 AM INFO:Data shape: (65278, 40)
2025/03/04 08:45:47 AM INFO:Data saved to output\cleaned_donations.csv
2025/03/04 08:45:47 AM INFO:Data cleanup completed, shape: (65278, 40)
2025/03/04 08:45:47 AM INFO:raw_data_cleanup executed successfully
2025/03/04 08:45:47 AM INFO:load_raw_data executed successfully
2025/03/04 08:45:47 AM INFO:get_raw_data executed successfully
2025/03/04 08:45:47 AM INFO:load_data_to_session executed successfully
2025/03/04 08:45:47 AM DEBUG:Calling load_data_to_session with args=('data_clean', <function get_cleaned_data at 0x0000025DAA3B9E10>), kwargs={}
2025/03/04 08:45:47 AM DEBUG:Calling get_cleaned_data with args=(), kwargs={}
2025/03/04 08:45:47 AM DEBUG:Calling load_cleaned_data with args=(), kwargs={'originaldatafilepath': 'cleaned_donations_fname', 'processeddatafilepath': 'cleaned_data_fname', 'datafile': 'raw_data', 'streamlitrun': True, 'output_csv': True, 'main_file': 'raw_data', 'cleaned_file': 'data_clean'}
2025/03/04 08:45:47 AM DEBUG:Rows in Raw Data: 65278
2025/03/04 08:45:47 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': 'output\\cleaned_donations.csv', 'savedfilepath': 'output\\cleaned_data.csv', 'timestamp_key': 'load_raw_data_last_modified'}
2025/03/04 08:45:47 AM INFO:Original file path: output\cleaned_donations.csv
2025/03/04 08:45:47 AM INFO:Saved file path: output\cleaned_data.csv
2025/03/04 08:45:47 AM DEBUG:Calling is_file_updated with args=('output\\cleaned_donations.csv', 'load_raw_data_last_modified'), kwargs={}
2025/03/04 08:45:47 AM INFO:Checking if output\cleaned_donations.csv has been updated.
2025/03/04 08:45:47 AM DEBUG:Calling get_file_modification_time with args=('output\\cleaned_donations.csv',), kwargs={}
2025/03/04 08:45:47 AM INFO:Getting modification time for output\cleaned_donations.csv
2025/03/04 08:45:47 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:45:47 AM INFO:Current modification time: 1741077947.4282584
2025/03/04 08:45:47 AM INFO:Last modification time: 1740757862.6744745
2025/03/04 08:45:47 AM INFO:is_file_updated executed successfully
2025/03/04 08:45:47 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:45:47 AM ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/04 08:45:47 AM INFO:Loading and cleaning data... data.clean_and_enhance
2025/03/04 08:45:47 AM DEBUG:Clean Data Prep: streamlitdata load: 65278
2025/03/04 08:45:47 AM DEBUG:Clean Data Prep 123: streamlitdata load: 65278
2025/03/04 08:45:50 AM DEBUG:Calling map_mp_to_party with args=(           ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value AcceptedDate  ...                        DonorName EventCount YearReceived MonthReceived YearMonthReceived
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56   02/09/2019  ...  Conservative And Unionist Party          1         2019             9            201909
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00   02/09/2019  ...  Conservative And Unionist Party          1         2019             9            201909
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58   30/08/2019  ...  Conservative And Unionist Party          1         2019             8            201908
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00   30/08/2019  ...  Conservative And Unionist Party          1         2019             8            201908
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05   29/08/2019  ...  Conservative And Unionist Party          1         2019             8            201908
...          ...                              ...                    ...        ...          ...  ...                              ...        ...          ...           ...               ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00          NaN  ...          Shaftesbury Investments          1         2016             4            201604
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00          NaN  ...                Mr Jeremy Hosking          1         2016             2            201602
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00          NaN  ...                   Anthony Clarke          1         2016             6            201606
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00          NaN  ...                Mr Peter A Dubens          1         2017             5            201705
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00          NaN  ...                 Mr Ravi S Kailas          1         2017             5            201705

[65278 rows x 44 columns],), kwargs={}
2025/03/04 08:45:50 AM DEBUG:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/04 08:45:50 AM DEBUG:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/04 08:45:50 AM DEBUG:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/04 08:45:51 AM DEBUG:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/04 08:45:51 AM DEBUG:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/04 08:45:51 AM ERROR:Number of rows in loaddata_df and raw_data do not match 78745 != 65278
2025/03/04 08:45:51 AM ERROR:Attempting to remove duplicates
2025/03/04 08:45:51 AM DEBUG:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/04 08:45:51 AM DEBUG:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/04 08:45:51 AM INFO:Data Updated with PartyName and PartyId successfully
2025/03/04 08:45:51 AM INFO:map_mp_to_party executed successfully
2025/03/04 08:45:51 AM DEBUG:Clean Data Prep 150: Map Mps: 65278
2025/03/04 08:45:51 AM DEBUG:Clean Data Prep 235: RegEntity_Map: 65278
2025/03/04 08:45:51 AM DEBUG:Calling load_election_dates with args=(), kwargs={}
2025/03/04 08:45:51 AM DEBUG:st.session_state.ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:45:51 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': 'source\\Donations_accepted_by_political_parties.csv', 'savedfilepath': 'reference_files\\elections.csv', 'timestamp_key': 'election_dates_last_modified'}
2025/03/04 08:45:51 AM INFO:Original file path: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:45:51 AM INFO:Saved file path: reference_files\elections.csv
2025/03/04 08:45:51 AM DEBUG:Calling is_file_updated with args=('source\\Donations_accepted_by_political_parties.csv', 'election_dates_last_modified'), kwargs={}
2025/03/04 08:45:51 AM INFO:Checking if source\Donations_accepted_by_political_parties.csv has been updated.
2025/03/04 08:45:51 AM DEBUG:Calling get_file_modification_time with args=('source\\Donations_accepted_by_political_parties.csv',), kwargs={}
2025/03/04 08:45:51 AM INFO:Getting modification time for source\Donations_accepted_by_political_parties.csv
2025/03/04 08:45:51 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:45:51 AM INFO:Current modification time: 1740757862.6744745
2025/03/04 08:45:51 AM INFO:Last modification time: None
2025/03/04 08:45:51 AM INFO:is_file_updated executed successfully
2025/03/04 08:45:51 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:45:51 AM INFO:Election dates loaded from file.
2025/03/04 08:45:51 AM INFO:Election_dates_df empty - loading from pdpy.
2025/03/04 08:45:51 AM INFO:Election Dates loaded vis pdpy.
2025/03/04 08:45:51 AM DEBUG:ElectionDates_dict from pdpy: {'1929': {'dissolution': datetime.date(1929, 5, 10), 'election': datetime.date(1929, 5, 30), 'type': 'General Election'}, '1931': {'dissolution': datetime.date(1931, 10, 7), 'election': datetime.date(1931, 10, 27), 'type': 'General Election'}, '1935': {'dissolution': datetime.date(1935, 10, 25), 'election': datetime.date(1935, 11, 14), 'type': 'General Election'}, '1945': {'dissolution': datetime.date(1945, 6, 15), 'election': datetime.date(1945, 7, 5), 'type': 'General Election'}, '1950': {'dissolution': datetime.date(1950, 2, 3), 'election': datetime.date(1950, 2, 23), 'type': 'General Election'}, '1951': {'dissolution': datetime.date(1951, 10, 5), 'election': datetime.date(1951, 10, 25), 'type': 'General Election'}, '1955': {'dissolution': datetime.date(1955, 5, 6), 'election': datetime.date(1955, 5, 26), 'type': 'General Election'}, '1959': {'dissolution': datetime.date(1959, 9, 18), 'election': datetime.date(1959, 10, 8), 'type': 'General Election'}, '1964': {'dissolution': datetime.date(1964, 9, 25), 'election': datetime.date(1964, 10, 15), 'type': 'General Election'}, '1966': {'dissolution': datetime.date(1966, 3, 10), 'election': datetime.date(1966, 3, 31), 'type': 'General Election'}, '1970': {'dissolution': datetime.date(1970, 5, 29), 'election': datetime.date(1970, 6, 18), 'type': 'General Election'}, '1974 (Feb)': {'dissolution': datetime.date(1974, 2, 8), 'election': datetime.date(1974, 2, 28), 'type': 'General Election'}, '1974 (Oct)': {'dissolution': datetime.date(1974, 9, 20), 'election': datetime.date(1974, 10, 10), 'type': 'General Election'}, '1979': {'dissolution': datetime.date(1979, 4, 7), 'election': datetime.date(1979, 5, 3), 'type': 'General Election'}, '1983': {'dissolution': datetime.date(1983, 5, 13), 'election': datetime.date(1983, 6, 9), 'type': 'General Election'}, '1987': {'dissolution': datetime.date(1987, 5, 18), 'election': datetime.date(1987, 6, 11), 'type': 'General Election'}, '1992': {'dissolution': datetime.date(1992, 3, 16), 'election': datetime.date(1992, 4, 9), 'type': 'General Election'}, '1997': {'dissolution': datetime.date(1997, 4, 8), 'election': datetime.date(1997, 5, 1), 'type': 'General Election'}, '2001': {'dissolution': datetime.date(2001, 5, 14), 'election': datetime.date(2001, 6, 7), 'type': 'General Election'}, '2005': {'dissolution': datetime.date(2005, 4, 11), 'election': datetime.date(2005, 5, 5), 'type': 'General Election'}, '2010': {'dissolution': datetime.date(2010, 4, 12), 'election': datetime.date(2010, 5, 6), 'type': 'General Election'}, '2015': {'dissolution': datetime.date(2015, 3, 30), 'election': datetime.date(2015, 5, 7), 'type': 'General Election'}, '2017': {'dissolution': datetime.date(2017, 5, 3), 'election': datetime.date(2017, 6, 8), 'type': 'General Election'}, '2019': {'dissolution': datetime.date(2019, 11, 6), 'election': datetime.date(2019, 12, 12), 'type': 'General Election'}}
2025/03/04 08:45:51 AM INFO:Election Dates Loaded Successfully.
2025/03/04 08:45:51 AM DEBUG:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/04 08:45:51 AM DEBUG:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/04 08:45:51 AM INFO:load_election_dates executed successfully
2025/03/04 08:46:10 AM DEBUG:Clean Data Prep 353: Election dates: 65278
2025/03/04 08:46:10 AM DEBUG:Clean Data Prep 386: End of clean: 65278
2025/03/04 08:46:37 AM INFO:Cleaned Data completed, shape: (65278, 58)
2025/03/04 08:46:37 AM INFO:load_cleaned_data executed successfully
2025/03/04 08:46:37 AM INFO:get_cleaned_data executed successfully
2025/03/04 08:46:37 AM INFO:load_data_to_session executed successfully
2025/03/04 08:46:37 AM DEBUG:Calling load_data_to_session with args=('data_donor', <function get_donor_data at 0x0000025DAA3B9FC0>), kwargs={}
2025/03/04 08:46:37 AM DEBUG:Calling get_donor_data with args=(), kwargs={}
2025/03/04 08:46:37 AM DEBUG:Calling load_donorList_data with args=(), kwargs={'main_file': 'data_clean', 'cleaned_file': 'data_donor', 'streamlitrun': True, 'output_csv': True, 'originaldatafilepath': 'cleaned_data_fname', 'cleaneddatafilepath': 'cleaned_donorlist_fname'}
2025/03/04 08:46:37 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': 'output\\cleaned_data.csv', 'savedfilepath': 'output\\cleaned_donorlist.csv', 'timestamp_key': 'load_donorlist_data_last_modified'}
2025/03/04 08:46:37 AM INFO:Original file path: output\cleaned_data.csv
2025/03/04 08:46:37 AM INFO:Saved file path: output\cleaned_donorlist.csv
2025/03/04 08:46:37 AM DEBUG:Calling is_file_updated with args=('output\\cleaned_data.csv', 'load_donorlist_data_last_modified'), kwargs={}
2025/03/04 08:46:37 AM INFO:Checking if output\cleaned_data.csv has been updated.
2025/03/04 08:46:37 AM DEBUG:Calling get_file_modification_time with args=('output\\cleaned_data.csv',), kwargs={}
2025/03/04 08:46:37 AM INFO:Getting modification time for output\cleaned_data.csv
2025/03/04 08:46:37 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:46:37 AM INFO:Current modification time: 1741077997.3217723
2025/03/04 08:46:37 AM INFO:Last modification time: None
2025/03/04 08:46:37 AM INFO:is_file_updated executed successfully
2025/03/04 08:46:37 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:46:37 AM INFO:Donor data saved to output\cleaned_donorlist.csv
2025/03/04 08:46:37 AM INFO:Donor Data summary completed
2025/03/04 08:46:37 AM INFO:Data shape: (30219, 5)
2025/03/04 08:46:37 AM INFO:load_donorList_data executed successfully
2025/03/04 08:46:37 AM INFO:get_donor_data executed successfully
2025/03/04 08:46:37 AM INFO:load_data_to_session executed successfully
2025/03/04 08:46:37 AM DEBUG:Calling load_data_to_session with args=('data_regentity', <function get_regentity_data at 0x0000025DAA3BA0E0>), kwargs={}
2025/03/04 08:46:37 AM DEBUG:Calling get_regentity_data with args=(), kwargs={}
2025/03/04 08:46:37 AM DEBUG:Calling load_regulated_entity_data with args=(), kwargs={'main_file': 'data_clean', 'cleaned_file': 'data_regentity', 'streamlitrun': True, 'output_csv': True, 'originaldatafilepath': 'cleaned_data_fname', 'cleaneddatafilepath': 'cleaned_regentity_fname'}
2025/03/04 08:46:37 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': 'output\\cleaned_data.csv', 'savedfilepath': 'output\\cleaned_regentity.csv', 'timestamp_key': 'load_donorlist_data_last_modified'}
2025/03/04 08:46:37 AM INFO:Original file path: output\cleaned_data.csv
2025/03/04 08:46:37 AM INFO:Saved file path: output\cleaned_regentity.csv
2025/03/04 08:46:37 AM DEBUG:Calling is_file_updated with args=('output\\cleaned_data.csv', 'load_donorlist_data_last_modified'), kwargs={}
2025/03/04 08:46:37 AM INFO:Checking if output\cleaned_data.csv has been updated.
2025/03/04 08:46:37 AM DEBUG:Calling get_file_modification_time with args=('output\\cleaned_data.csv',), kwargs={}
2025/03/04 08:46:37 AM INFO:Getting modification time for output\cleaned_data.csv
2025/03/04 08:46:37 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:46:37 AM INFO:Current modification time: 1741077997.3217723
2025/03/04 08:46:37 AM INFO:Last modification time: 1741077997.3217723
2025/03/04 08:46:37 AM INFO:is_file_updated executed successfully
2025/03/04 08:46:37 AM INFO:Loading preprocessed data. Using output\cleaned_regentity.csv dated load_donorlist_data_last_modified instead of output\cleaned_data.csv
2025/03/04 08:46:37 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:46:37 AM INFO:load_regulated_entity_data executed successfully
2025/03/04 08:46:37 AM INFO:get_regentity_data executed successfully
2025/03/04 08:46:37 AM INFO:load_data_to_session executed successfully
2025/03/04 08:46:37 AM INFO:firstload executed successfully
2025/03/04 08:46:37 AM INFO:initialise_data executed successfully
2025/03/04 08:46:48 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:46:48 AM INFO:Running App setup...
2025/03/04 08:46:48 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:46:48 AM INFO:Setting up the package
2025/03/04 08:46:48 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:46:48 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:46:48 AM INFO:get_git_version executed successfully
2025/03/04 08:46:48 AM INFO:Version: v20.140
2025/03/04 08:46:48 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:46:48 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:46:48 AM DEBUG:LOG_LEVEL already exists in session state
2025/03/04 08:46:48 AM DEBUG:BASE_DIR already exists in session state
2025/03/04 08:46:48 AM DEBUG:filenames already exists in session state
2025/03/04 08:46:48 AM DEBUG:PLACEHOLDER_DATE already exists in session state
2025/03/04 08:46:48 AM DEBUG:PLACEHOLDER_ID already exists in session state
2025/03/04 08:46:48 AM DEBUG:thresholds already exists in session state
2025/03/04 08:46:48 AM DEBUG:data_remappings already exists in session state
2025/03/04 08:46:48 AM DEBUG:filter_def already exists in session state
2025/03/04 08:46:48 AM DEBUG:security already exists in session state
2025/03/04 08:46:48 AM DEBUG:perc_target already exists in session state
2025/03/04 08:46:48 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP already exists in session state
2025/03/04 08:46:48 AM DEBUG:directories already exists in session state
2025/03/04 08:46:48 AM DEBUG:reference_dir already exists in session state
2025/03/04 08:46:48 AM DEBUG:data_dir already exists in session state
2025/03/04 08:46:48 AM DEBUG:output_dir already exists in session state
2025/03/04 08:46:48 AM DEBUG:logs_dir already exists in session state
2025/03/04 08:46:48 AM DEBUG:components_dir already exists in session state
2025/03/04 08:46:48 AM DEBUG:app_pages_dir already exists in session state
2025/03/04 08:46:48 AM DEBUG:utils_dir already exists in session state
2025/03/04 08:46:48 AM DEBUG:Donor_dedupe_cleaned_fname already exists in session state
2025/03/04 08:46:48 AM DEBUG:ListofPoliticalPeople_fname already exists in session state
2025/03/04 08:46:48 AM DEBUG:mppartymemb_fname already exists in session state
2025/03/04 08:46:48 AM DEBUG:donor_map_fname already exists in session state
2025/03/04 08:46:48 AM DEBUG:politician_party_fname already exists in session state
2025/03/04 08:46:48 AM DEBUG:regentity_map_fname already exists in session state
2025/03/04 08:46:48 AM DEBUG:original_data_fname already exists in session state
2025/03/04 08:46:48 AM DEBUG:CREDENTIALS_FILE already exists in session state
2025/03/04 08:46:48 AM DEBUG:TEXT_FILE already exists in session state
2025/03/04 08:46:48 AM DEBUG:ELECTION_DATES already exists in session state
2025/03/04 08:46:48 AM DEBUG:cleaned_data_fname already exists in session state
2025/03/04 08:46:48 AM DEBUG:cleaned_donations_fname already exists in session state
2025/03/04 08:46:48 AM DEBUG:cleaned_donorlist_fname already exists in session state
2025/03/04 08:46:48 AM DEBUG:cleaned_regentity_fname already exists in session state
2025/03/04 08:46:48 AM DEBUG:party_summary_fname already exists in session state
2025/03/04 08:46:48 AM DEBUG:imported_raw_fname already exists in session state
2025/03/04 08:46:48 AM DEBUG:source_data_fname already exists in session state
2025/03/04 08:46:48 AM DEBUG:Cash_ftr already exists in session state
2025/03/04 08:46:48 AM INFO:Session_state variables initialized
2025/03/04 08:46:48 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:46:48 AM DEBUG:output_dir: output
2025/03/04 08:46:48 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:46:48 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:46:48 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:46:48 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:46:48 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:46:48 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:46:48 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:46:48 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:46:48 AM DEBUG:components_dir: components
2025/03/04 08:46:48 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:46:48 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:46:48 AM DEBUG:utils_dir: utils
2025/03/04 08:46:48 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:46:48 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:46:48 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:46:48 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:46:48 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:46:48 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:46:48 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:46:48 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:46:48 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:46:48 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:46:48 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:46:48 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:46:48 AM DEBUG:menu_selection: {'title': 'Head Line Figures', 'function': <function hlf_body at 0x0000025DAA0E0CA0>}
2025/03/04 08:46:48 AM DEBUG:perc_target: 0.5
2025/03/04 08:46:48 AM DEBUG:data_dir: data
2025/03/04 08:46:48 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:46:48 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:46:48 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:46:48 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:46:48 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:46:48 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:46:48 AM DEBUG:logs_dir: logs
2025/03/04 08:46:48 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:46:48 AM DEBUG:reference_dir: reference_files
2025/03/04 08:46:48 AM INFO:Session state Setup complete
2025/03/04 08:46:48 AM INFO:initialize_session_state executed successfully
2025/03/04 08:46:48 AM INFO:Package setup complete
2025/03/04 08:46:48 AM INFO:setup_package executed successfully
2025/03/04 08:46:48 AM INFO:Running Menu setup...
2025/03/04 08:46:48 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:46:48 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:46:48 AM INFO:get_git_version executed successfully
2025/03/04 08:46:48 AM INFO:App Version: v20.161
2025/03/04 08:46:48 AM INFO:Switched to page: Head Line Figures
2025/03/04 08:46:48 AM DEBUG:Calling hlf_body with args=(), kwargs={}
2025/03/04 08:46:48 AM DEBUG:Calling load_and_filter_data with args=(), kwargs={'filter_key': None, 'pagereflabel': 'headlinefigures'}
2025/03/04 08:46:48 AM ERROR:Error in load_and_filter_data: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 23, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/04 08:46:48 AM ERROR:Error in hlf_body: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 27, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 23, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/04 08:46:48 AM ERROR:Error in pagesetup: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 73, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 27, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 23, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/04 08:46:48 AM CRITICAL:Menu setup crashed: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 46, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 73, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 27, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 23, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/04 08:53:12 AM INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/04 08:53:12 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\utils',), kwargs={}
2025/03/04 08:53:13 AM INFO:get_git_version executed successfully
2025/03/04 08:53:14 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\data',), kwargs={}
2025/03/04 08:53:14 AM INFO:get_git_version executed successfully
2025/03/04 08:53:14 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:53:14 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:53:14 AM INFO:Running App setup...
2025/03/04 08:53:14 AM INFO:Running App setup...
2025/03/04 08:53:14 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:53:14 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:53:14 AM INFO:Setting up the package
2025/03/04 08:53:14 AM INFO:Setting up the package
2025/03/04 08:53:14 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:53:14 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:53:14 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:53:14 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:53:14 AM INFO:get_git_version executed successfully
2025/03/04 08:53:14 AM INFO:get_git_version executed successfully
2025/03/04 08:53:14 AM INFO:Version: v20.140
2025/03/04 08:53:14 AM INFO:Version: v20.140
2025/03/04 08:53:14 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:53:14 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:53:14 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:53:14 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:53:14 AM DEBUG:Initialised LOG_LEVEL with value: DEBUG
2025/03/04 08:53:14 AM DEBUG:Initialised LOG_LEVEL with value: DEBUG
2025/03/04 08:53:14 AM DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo-1
2025/03/04 08:53:14 AM DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo-1
2025/03/04 08:53:14 AM DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:53:14 AM DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:53:14 AM DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/04 08:53:14 AM DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/04 08:53:14 AM DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/04 08:53:14 AM DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/04 08:53:14 AM DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:53:14 AM DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:53:14 AM DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:53:14 AM DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:53:14 AM DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:53:14 AM DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:53:14 AM DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:53:14 AM DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:53:14 AM DEBUG:Initialised perc_target with value: 0.5
2025/03/04 08:53:14 AM DEBUG:Initialised perc_target with value: 0.5
2025/03/04 08:53:14 AM DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/04 08:53:14 AM DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/04 08:53:14 AM DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:53:14 AM DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:53:14 AM DEBUG:Initialised reference_dir with value: reference_files
2025/03/04 08:53:14 AM DEBUG:Initialised data_dir with value: data
2025/03/04 08:53:14 AM DEBUG:Initialised output_dir with value: output
2025/03/04 08:53:14 AM DEBUG:Initialised logs_dir with value: logs
2025/03/04 08:53:14 AM DEBUG:Initialised components_dir with value: components
2025/03/04 08:53:14 AM DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/04 08:53:14 AM DEBUG:Initialised utils_dir with value: utils
2025/03/04 08:53:14 AM DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:53:14 AM DEBUG:Initialised reference_dir with value: reference_files
2025/03/04 08:53:14 AM DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:53:14 AM DEBUG:Initialised data_dir with value: data
2025/03/04 08:53:14 AM DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/04 08:53:14 AM DEBUG:Initialised output_dir with value: output
2025/03/04 08:53:14 AM DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:53:14 AM DEBUG:Initialised logs_dir with value: logs
2025/03/04 08:53:14 AM DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:53:14 AM DEBUG:Initialised components_dir with value: components
2025/03/04 08:53:14 AM DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:53:14 AM DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/04 08:53:14 AM DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/04 08:53:14 AM DEBUG:Initialised utils_dir with value: utils
2025/03/04 08:53:14 AM DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/04 08:53:14 AM DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:53:14 AM DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/04 08:53:14 AM DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:53:14 AM DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/04 08:53:14 AM DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/04 08:53:14 AM DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/04 08:53:14 AM DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:53:14 AM DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/04 08:53:14 AM DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:53:14 AM DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/04 08:53:14 AM DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:53:14 AM DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/04 08:53:14 AM DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/04 08:53:14 AM DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/04 08:53:14 AM DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/04 08:53:14 AM DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/04 08:53:14 AM DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/04 08:53:14 AM DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:53:14 AM DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/04 08:53:14 AM DEBUG:Initialised Cash_ftr with value: {'DonationType': 'Cash'}
2025/03/04 08:53:14 AM DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/04 08:53:14 AM INFO:Session_state variables initialized
2025/03/04 08:53:14 AM DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/04 08:53:14 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:53:14 AM DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/04 08:53:14 AM DEBUG:utils_dir: utils
2025/03/04 08:53:14 AM DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/04 08:53:14 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:53:14 AM DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/04 08:53:14 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:53:14 AM DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/04 08:53:14 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:53:14 AM DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:53:14 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:53:14 AM DEBUG:Initialised Cash_ftr with value: {'DonationType': 'Cash'}
2025/03/04 08:53:14 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:53:14 AM INFO:Session_state variables initialized
2025/03/04 08:53:14 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:53:14 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:53:14 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:53:14 AM DEBUG:utils_dir: utils
2025/03/04 08:53:14 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:53:14 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:53:14 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:53:14 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:53:14 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:53:14 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:53:14 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:53:14 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:53:14 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:53:14 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:53:14 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:53:14 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:53:14 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:53:14 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:53:14 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:53:14 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:53:14 AM DEBUG:reference_dir: reference_files
2025/03/04 08:53:14 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:53:14 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:53:14 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:53:14 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:53:14 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:53:14 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:53:14 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:53:14 AM DEBUG:logs_dir: logs
2025/03/04 08:53:14 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:53:14 AM DEBUG:perc_target: 0.5
2025/03/04 08:53:14 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:53:14 AM DEBUG:output_dir: output
2025/03/04 08:53:14 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:53:14 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:53:14 AM DEBUG:reference_dir: reference_files
2025/03/04 08:53:14 AM DEBUG:components_dir: components
2025/03/04 08:53:14 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:53:14 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:53:14 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:53:14 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:53:14 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:53:14 AM DEBUG:data_dir: data
2025/03/04 08:53:14 AM DEBUG:logs_dir: logs
2025/03/04 08:53:14 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:53:14 AM DEBUG:perc_target: 0.5
2025/03/04 08:53:14 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:53:14 AM DEBUG:output_dir: output
2025/03/04 08:53:14 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:53:14 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:53:14 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:53:14 AM DEBUG:components_dir: components
2025/03/04 08:53:14 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:53:14 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:53:14 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:53:14 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:53:14 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:53:14 AM DEBUG:data_dir: data
2025/03/04 08:53:14 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:53:14 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:53:14 AM INFO:Session state Setup complete
2025/03/04 08:53:14 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:53:14 AM INFO:initialize_session_state executed successfully
2025/03/04 08:53:14 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:53:14 AM INFO:Package setup complete
2025/03/04 08:53:14 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:53:14 AM INFO:setup_package executed successfully
2025/03/04 08:53:14 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:53:14 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:53:14 AM INFO:Running Menu setup...
2025/03/04 08:53:14 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:53:14 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:53:14 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:53:14 AM INFO:Session state Setup complete
2025/03/04 08:53:14 AM INFO:initialize_session_state executed successfully
2025/03/04 08:53:14 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\app_pages',), kwargs={}
2025/03/04 08:53:14 AM INFO:Package setup complete
2025/03/04 08:53:14 AM INFO:setup_package executed successfully
2025/03/04 08:53:14 AM INFO:Running Menu setup...
2025/03/04 08:53:14 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:53:14 AM INFO:get_git_version executed successfully
2025/03/04 08:53:14 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\components',), kwargs={}
2025/03/04 08:53:14 AM INFO:get_git_version executed successfully
2025/03/04 08:53:14 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:53:14 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:53:14 AM INFO:get_git_version executed successfully
2025/03/04 08:53:14 AM INFO:get_git_version executed successfully
2025/03/04 08:53:14 AM INFO:App Version: v20.161
2025/03/04 08:53:14 AM INFO:App Version: v20.161
2025/03/04 08:53:14 AM INFO:Switched to page: Introduction
2025/03/04 08:53:14 AM INFO:Switched to page: Head Line Figures
2025/03/04 08:53:14 AM DEBUG:Calling hlf_body with args=(), kwargs={}
2025/03/04 08:53:14 AM DEBUG:Calling load_and_filter_data with args=(), kwargs={'filter_key': None, 'pagereflabel': 'headlinefigures'}
2025/03/04 08:53:14 AM ERROR:Error in load_and_filter_data: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 23, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/04 08:53:14 AM INFO:pagesetup executed successfully
2025/03/04 08:53:14 AM ERROR:Error in hlf_body: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 27, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 23, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/04 08:53:14 AM ERROR:Error in pagesetup: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 73, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 27, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 23, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/04 08:53:14 AM INFO:No data found in session state, running firstload()
2025/03/04 08:53:14 AM CRITICAL:Menu setup crashed: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 46, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 73, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 27, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 23, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/04 08:54:37 AM INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/04 08:54:37 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\utils',), kwargs={}
2025/03/04 08:54:38 AM INFO:get_git_version executed successfully
2025/03/04 08:54:39 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\data',), kwargs={}
2025/03/04 08:54:39 AM INFO:get_git_version executed successfully
2025/03/04 08:54:39 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:54:39 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:54:39 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:54:39 AM INFO:Running App setup...
2025/03/04 08:54:39 AM INFO:Running App setup...
2025/03/04 08:54:39 AM INFO:Running App setup...
2025/03/04 08:54:39 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:54:39 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:54:39 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:54:39 AM INFO:Setting up the package
2025/03/04 08:54:39 AM INFO:Setting up the package
2025/03/04 08:54:39 AM INFO:Setting up the package
2025/03/04 08:54:39 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:54:39 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:54:39 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:54:39 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:54:39 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:54:39 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:54:39 AM INFO:get_git_version executed successfully
2025/03/04 08:54:39 AM INFO:Version: v20.140
2025/03/04 08:54:39 AM INFO:get_git_version executed successfully
2025/03/04 08:54:39 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:54:39 AM INFO:Version: v20.140
2025/03/04 08:54:39 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:54:39 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:54:39 AM DEBUG:Initialised LOG_LEVEL with value: DEBUG
2025/03/04 08:54:39 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:54:39 AM DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo-1
2025/03/04 08:54:39 AM DEBUG:Initialised LOG_LEVEL with value: DEBUG
2025/03/04 08:54:39 AM DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:54:39 AM INFO:get_git_version executed successfully
2025/03/04 08:54:39 AM DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo-1
2025/03/04 08:54:39 AM DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/04 08:54:39 AM DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/04 08:54:39 AM DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:54:39 AM DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:54:39 AM INFO:Version: v20.140
2025/03/04 08:54:39 AM DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/04 08:54:39 AM DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:54:39 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:54:39 AM DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/04 08:54:39 AM DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:54:39 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:54:39 AM DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:54:39 AM DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:54:39 AM DEBUG:Initialised LOG_LEVEL with value: DEBUG
2025/03/04 08:54:39 AM DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:54:39 AM DEBUG:Initialised perc_target with value: 0.5
2025/03/04 08:54:39 AM DEBUG:Initialised BASE_DIR with value: H:\VScode\dashboard_demo-1
2025/03/04 08:54:39 AM DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:54:39 AM DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/04 08:54:39 AM DEBUG:Initialised filenames with value: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:54:39 AM DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:54:39 AM DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:54:39 AM DEBUG:Initialised PLACEHOLDER_DATE with value: 1900-01-01 00:00:00
2025/03/04 08:54:39 AM DEBUG:Initialised perc_target with value: 0.5
2025/03/04 08:54:39 AM DEBUG:Initialised PLACEHOLDER_ID with value: 1000001
2025/03/04 08:54:39 AM DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/04 08:54:39 AM DEBUG:Initialised thresholds with value: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:54:39 AM DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:54:39 AM DEBUG:Initialised data_remappings with value: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:54:39 AM DEBUG:Initialised filter_def with value: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:54:39 AM DEBUG:Initialised reference_dir with value: reference_files
2025/03/04 08:54:39 AM DEBUG:Initialised security with value: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:54:39 AM DEBUG:Initialised data_dir with value: data
2025/03/04 08:54:39 AM DEBUG:Initialised perc_target with value: 0.5
2025/03/04 08:54:39 AM DEBUG:Initialised output_dir with value: output
2025/03/04 08:54:39 AM DEBUG:Initialised reference_dir with value: reference_files
2025/03/04 08:54:39 AM DEBUG:Initialised RERUN_MP_PARTY_MEMBERSHIP with value: False
2025/03/04 08:54:39 AM DEBUG:Initialised logs_dir with value: logs
2025/03/04 08:54:39 AM DEBUG:Initialised data_dir with value: data
2025/03/04 08:54:39 AM DEBUG:Initialised directories with value: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:54:39 AM DEBUG:Initialised components_dir with value: components
2025/03/04 08:54:39 AM DEBUG:Initialised output_dir with value: output
2025/03/04 08:54:39 AM DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/04 08:54:39 AM DEBUG:Initialised logs_dir with value: logs
2025/03/04 08:54:39 AM DEBUG:Initialised utils_dir with value: utils
2025/03/04 08:54:39 AM DEBUG:Initialised components_dir with value: components
2025/03/04 08:54:39 AM DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:54:39 AM DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/04 08:54:39 AM DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:54:39 AM DEBUG:Initialised utils_dir with value: utils
2025/03/04 08:54:39 AM DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/04 08:54:39 AM DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:54:39 AM DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:54:39 AM DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:54:39 AM DEBUG:Initialised reference_dir with value: reference_files
2025/03/04 08:54:39 AM DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:54:39 AM DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/04 08:54:39 AM DEBUG:Initialised data_dir with value: data
2025/03/04 08:54:39 AM DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:54:39 AM DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:54:39 AM DEBUG:Initialised output_dir with value: output
2025/03/04 08:54:39 AM DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/04 08:54:39 AM DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:54:39 AM DEBUG:Initialised logs_dir with value: logs
2025/03/04 08:54:39 AM DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/04 08:54:39 AM DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:54:39 AM DEBUG:Initialised components_dir with value: components
2025/03/04 08:54:39 AM DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/04 08:54:39 AM DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/04 08:54:39 AM DEBUG:Initialised app_pages_dir with value: app_pages
2025/03/04 08:54:39 AM DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/04 08:54:39 AM DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/04 08:54:39 AM DEBUG:Initialised utils_dir with value: utils
2025/03/04 08:54:39 AM DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/04 08:54:39 AM DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/04 08:54:39 AM DEBUG:Initialised Donor_dedupe_cleaned_fname with value: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:54:39 AM DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/04 08:54:39 AM DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/04 08:54:39 AM DEBUG:Initialised ListofPoliticalPeople_fname with value: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:54:39 AM DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/04 08:54:39 AM DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/04 08:54:39 AM DEBUG:Initialised mppartymemb_fname with value: reference_files\mppartymemb_pypd.csv
2025/03/04 08:54:39 AM DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/04 08:54:39 AM DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/04 08:54:39 AM DEBUG:Initialised donor_map_fname with value: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:54:39 AM DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/04 08:54:39 AM DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/04 08:54:39 AM DEBUG:Initialised politician_party_fname with value: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:54:39 AM DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/04 08:54:39 AM DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/04 08:54:39 AM DEBUG:Initialised regentity_map_fname with value: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:54:39 AM DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:54:39 AM DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/04 08:54:39 AM DEBUG:Initialised original_data_fname with value: reference_files\original_data.csv
2025/03/04 08:54:39 AM DEBUG:Initialised Cash_ftr with value: {'DonationType': 'Cash'}
2025/03/04 08:54:39 AM DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/04 08:54:39 AM DEBUG:Initialised CREDENTIALS_FILE with value: reference_files\admin_credentials.json
2025/03/04 08:54:39 AM INFO:Session_state variables initialized
2025/03/04 08:54:39 AM DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:54:39 AM DEBUG:Initialised TEXT_FILE with value: reference_files\admin_text.json
2025/03/04 08:54:39 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:54:39 AM DEBUG:Initialised Cash_ftr with value: {'DonationType': 'Cash'}
2025/03/04 08:54:39 AM DEBUG:Initialised ELECTION_DATES with value: reference_files\elections.csv
2025/03/04 08:54:39 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:54:39 AM INFO:Session_state variables initialized
2025/03/04 08:54:39 AM DEBUG:Initialised cleaned_data_fname with value: output\cleaned_data.csv
2025/03/04 08:54:39 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:54:39 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:54:39 AM DEBUG:Initialised cleaned_donations_fname with value: output\cleaned_donations.csv
2025/03/04 08:54:39 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:54:39 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:54:39 AM DEBUG:Initialised cleaned_donorlist_fname with value: output\cleaned_donorlist.csv
2025/03/04 08:54:39 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:54:39 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:54:39 AM DEBUG:Initialised cleaned_regentity_fname with value: output\cleaned_regentity.csv
2025/03/04 08:54:39 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:54:39 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:54:39 AM DEBUG:Initialised party_summary_fname with value: output\party_summary.csv
2025/03/04 08:54:39 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:54:39 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:54:39 AM DEBUG:Initialised imported_raw_fname with value: output\imported_raw.csv
2025/03/04 08:54:39 AM DEBUG:components_dir: components
2025/03/04 08:54:39 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:54:39 AM DEBUG:Initialised source_data_fname with value: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:54:39 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:54:39 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:54:39 AM DEBUG:Initialised Cash_ftr with value: {'DonationType': 'Cash'}
2025/03/04 08:54:39 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:54:39 AM DEBUG:components_dir: components
2025/03/04 08:54:39 AM INFO:Session_state variables initialized
2025/03/04 08:54:39 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:54:39 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:54:39 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:54:39 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:54:39 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:54:39 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:54:39 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:54:39 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:54:39 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:54:39 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:54:39 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:54:39 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:54:39 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:54:39 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:54:39 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:54:39 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:54:39 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:54:39 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:54:39 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:54:39 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:54:39 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:54:39 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:54:39 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:54:39 AM DEBUG:components_dir: components
2025/03/04 08:54:39 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:54:39 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:54:39 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:54:39 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:54:39 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:54:39 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:54:39 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:54:39 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:54:39 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:54:39 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:54:39 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:54:39 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:54:39 AM DEBUG:reference_dir: reference_files
2025/03/04 08:54:39 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:54:39 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:54:39 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:54:39 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:54:39 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:54:39 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:54:39 AM DEBUG:reference_dir: reference_files
2025/03/04 08:54:39 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:54:39 AM DEBUG:utils_dir: utils
2025/03/04 08:54:39 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:54:39 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:54:39 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:54:39 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:54:39 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:54:39 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:54:39 AM DEBUG:utils_dir: utils
2025/03/04 08:54:39 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:54:39 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:54:39 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:54:39 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:54:39 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:54:39 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:54:39 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:54:39 AM DEBUG:data_dir: data
2025/03/04 08:54:39 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:54:39 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:54:39 AM DEBUG:output_dir: output
2025/03/04 08:54:39 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:54:39 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:54:39 AM DEBUG:logs_dir: logs
2025/03/04 08:54:39 AM DEBUG:data_dir: data
2025/03/04 08:54:39 AM DEBUG:reference_dir: reference_files
2025/03/04 08:54:39 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:54:39 AM DEBUG:output_dir: output
2025/03/04 08:54:39 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:54:39 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:54:39 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:54:39 AM DEBUG:perc_target: 0.5
2025/03/04 08:54:39 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:54:39 AM INFO:Session state Setup complete
2025/03/04 08:54:39 AM INFO:initialize_session_state executed successfully
2025/03/04 08:54:39 AM INFO:Package setup complete
2025/03/04 08:54:39 AM DEBUG:utils_dir: utils
2025/03/04 08:54:39 AM INFO:setup_package executed successfully
2025/03/04 08:54:39 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:54:39 AM INFO:Running Menu setup...
2025/03/04 08:54:39 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:54:39 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:54:39 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:54:39 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:54:39 AM DEBUG:logs_dir: logs
2025/03/04 08:54:39 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\app_pages',), kwargs={}
2025/03/04 08:54:39 AM DEBUG:data_dir: data
2025/03/04 08:54:39 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:54:39 AM DEBUG:output_dir: output
2025/03/04 08:54:39 AM DEBUG:logs_dir: logs
2025/03/04 08:54:39 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:54:39 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:54:39 AM DEBUG:perc_target: 0.5
2025/03/04 08:54:39 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:54:39 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:54:39 AM DEBUG:perc_target: 0.5
2025/03/04 08:54:39 AM INFO:Session state Setup complete
2025/03/04 08:54:39 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:54:39 AM INFO:initialize_session_state executed successfully
2025/03/04 08:54:39 AM INFO:Session state Setup complete
2025/03/04 08:54:39 AM INFO:Package setup complete
2025/03/04 08:54:39 AM INFO:initialize_session_state executed successfully
2025/03/04 08:54:39 AM INFO:setup_package executed successfully
2025/03/04 08:54:39 AM INFO:Package setup complete
2025/03/04 08:54:39 AM INFO:setup_package executed successfully
2025/03/04 08:54:39 AM INFO:Running Menu setup...
2025/03/04 08:54:39 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:54:39 AM INFO:Running Menu setup...
2025/03/04 08:54:39 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:54:39 AM INFO:get_git_version executed successfully
2025/03/04 08:54:39 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\components',), kwargs={}
2025/03/04 08:54:39 AM INFO:get_git_version executed successfully
2025/03/04 08:54:39 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:54:39 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:54:39 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:54:39 AM INFO:get_git_version executed successfully
2025/03/04 08:54:39 AM INFO:get_git_version executed successfully
2025/03/04 08:54:39 AM INFO:get_git_version executed successfully
2025/03/04 08:54:39 AM INFO:App Version: v20.161
2025/03/04 08:54:39 AM INFO:App Version: v20.161
2025/03/04 08:54:39 AM INFO:App Version: v20.161
2025/03/04 08:54:39 AM INFO:Switched to page: Head Line Figures
2025/03/04 08:54:39 AM INFO:Switched to page: Introduction
2025/03/04 08:54:39 AM DEBUG:Calling hlf_body with args=(), kwargs={}
2025/03/04 08:54:39 AM INFO:Switched to page: Introduction
2025/03/04 08:54:39 AM DEBUG:Calling load_and_filter_data with args=(), kwargs={'filter_key': None, 'pagereflabel': 'headlinefigures'}
2025/03/04 08:54:39 AM ERROR:Error in load_and_filter_data: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 23, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/04 08:54:39 AM INFO:pagesetup executed successfully
2025/03/04 08:54:39 AM INFO:pagesetup executed successfully
2025/03/04 08:54:40 AM ERROR:Error in hlf_body: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 27, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 23, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/04 08:54:40 AM ERROR:Error in pagesetup: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 73, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 27, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 23, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/04 08:54:40 AM INFO:No data found in session state, running firstload()
2025/03/04 08:54:40 AM INFO:No data found in session state, running firstload()
2025/03/04 08:54:40 AM CRITICAL:Menu setup crashed: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 46, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 73, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 27, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 23, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/04 08:54:40 AM DEBUG:Calling initialise_data with args=(), kwargs={}
2025/03/04 08:54:40 AM INFO:Running first load function.
2025/03/04 08:54:40 AM DEBUG:Calling firstload with args=(), kwargs={}
2025/03/04 08:54:40 AM DEBUG:Calling load_data_to_session with args=('raw_data', <function get_raw_data at 0x000001B546E115A0>), kwargs={}
2025/03/04 08:54:40 AM DEBUG:Calling get_raw_data with args=(), kwargs={}
2025/03/04 08:54:40 AM DEBUG:Calling load_raw_data with args=(), kwargs={'main_file': 'raw_data', 'cleaned_file': 'raw_data_clean', 'output_csv': True, 'dedupe_donors': True, 'dedupe_regentity': True, 'originaldatafilepath': 'source_data_fname', 'processeddatafilepath': 'imported_raw_fname'}
2025/03/04 08:54:40 AM DEBUG:Original data file path pre raw data load: {originaldatafilepath}
2025/03/04 08:54:40 AM DEBUG:Processed data file path pre raw data load: {processeddatafilepath}
2025/03/04 08:54:40 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': 'source\\Donations_accepted_by_political_parties.csv', 'savedfilepath': 'output\\imported_raw.csv', 'timestamp_key': 'load_raw_data_last_modified'}
2025/03/04 08:54:40 AM INFO:Original file path: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:54:40 AM INFO:Saved file path: output\imported_raw.csv
2025/03/04 08:54:40 AM DEBUG:Calling is_file_updated with args=('source\\Donations_accepted_by_political_parties.csv', 'load_raw_data_last_modified'), kwargs={}
2025/03/04 08:54:40 AM INFO:Checking if source\Donations_accepted_by_political_parties.csv has been updated.
2025/03/04 08:54:40 AM DEBUG:Calling get_file_modification_time with args=('source\\Donations_accepted_by_political_parties.csv',), kwargs={}
2025/03/04 08:54:40 AM INFO:Getting modification time for source\Donations_accepted_by_political_parties.csv
2025/03/04 08:54:40 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:54:40 AM INFO:Current modification time: 1740757862.6744745
2025/03/04 08:54:40 AM INFO:Last modification time: None
2025/03/04 08:54:40 AM INFO:is_file_updated executed successfully
2025/03/04 08:54:40 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:54:40 AM INFO:Loading raw data...
2025/03/04 08:54:40 AM DEBUG:Original data file path post raw data load: {originaldatafilepath}
2025/03/04 08:54:40 AM DEBUG:Processed data file path post raw data load: {processeddatafilepath}
2025/03/04 08:54:40 AM INFO:Data loaded successfully. Data has 65278 rows and 29 columns
2025/03/04 08:54:41 AM INFO:Data saved to output\imported_raw.csv
2025/03/04 08:54:41 AM DEBUG:Calling raw_data_cleanup with args=(), kwargs={'loaddata_df':            ECRef              RegulatedEntityName    RegulatedEntityType        Value AcceptedDate  ... AccountingUnitId  DonorId CampaigningName   RegisterName IsIrishSource
index                                                                                               ...                                                                       
0      NC0408174                   Mr Andy Street        Regulated Donee    £1,876.56   02/09/2019  ...              NaN  86310.0             NaN  Great Britain         False
1      NC0408173                   Mr Andy Street        Regulated Donee    £2,700.00   02/09/2019  ...              NaN  86310.0             NaN  Great Britain         False
2      NC0408177                   Mr Andy Street        Regulated Donee    £4,852.58   30/08/2019  ...              NaN  86310.0             NaN  Great Britain         False
3      NC0408176                   Mr Andy Street        Regulated Donee    £2,500.00   30/08/2019  ...              NaN  86310.0             NaN  Great Britain         False
4      NC0408170                   Mr Andy Street        Regulated Donee    £4,524.05   29/08/2019  ...              NaN  86310.0             NaN  Great Britain         False
...          ...                              ...                    ...          ...          ...  ...              ...      ...             ...            ...           ...
65273   C0242478               Vote Leave Limited  Permitted Participant   £10,000.00          NaN  ...              NaN  74198.0             NaN            NaN         False
65274   C0242461               Vote Leave Limited  Permitted Participant  £100,000.00          NaN  ...              NaN  74184.0             NaN            NaN         False
65275   C0243560               Vote Leave Limited  Permitted Participant   £40,000.00          NaN  ...              NaN  74576.0             NaN            NaN         False
65276   C0319710  Conservative and Unionist Party        Political Party   £50,000.00          NaN  ...              NaN  34241.0             NaN  Great Britain         False
65277   C0319727  Conservative and Unionist Party        Political Party   £15,000.00          NaN  ...              NaN  74743.0             NaN  Great Britain         False

[65278 rows x 29 columns], 'dedupe_donors': True, 'dedupe_regentity': True, 'output_csv': True, 'originaldatafilepath': 'output\\imported_raw.csv', 'processeddatafilepath': 'cleaned_donations_fname'}
2025/03/04 08:54:41 AM INFO:Cleaning up raw data
2025/03/04 08:54:41 AM ERROR:Session state variables not initialized!
2025/03/04 08:54:41 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': None, 'savedfilepath': 'output\\cleaned_donations.csv', 'timestamp_key': 'cleaned_raw_data_last_modified'}
2025/03/04 08:54:41 AM INFO:Original file path: None
2025/03/04 08:54:41 AM INFO:Saved file path: output\cleaned_donations.csv
2025/03/04 08:54:41 AM ERROR:Error: originalfilepath is None!
2025/03/04 08:54:41 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:54:41 AM INFO:Data loaded, shape: (65278, 29)
2025/03/04 08:54:42 AM DEBUG:Calling dedupe_entity_file with args=(), kwargs={'loaddata_dd_df':            ECRef              RegulatedEntityName    RegulatedEntityType      Value AcceptedDate  ... AccountingUnitId  DonorId CampaigningName   RegisterName IsIrishSource
index                                                                                             ...                                                                       
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56   02/09/2019  ...                   86310.0                  Great Britain         False
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00   02/09/2019  ...                   86310.0                  Great Britain         False
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58   30/08/2019  ...                   86310.0                  Great Britain         False
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00   30/08/2019  ...                   86310.0                  Great Britain         False
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05   29/08/2019  ...                   86310.0                  Great Britain         False
...          ...                              ...                    ...        ...          ...  ...              ...      ...             ...            ...           ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00          NaN  ...                   74198.0                          Other         False
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00          NaN  ...                   74184.0                          Other         False
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00          NaN  ...                   74576.0                          Other         False
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00          NaN  ...                   34241.0                  Great Britain         False
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00          NaN  ...                   74743.0                  Great Britain         False

[65278 rows x 29 columns], 'entity': 'RegulatedEntity', 'map_filename': 'regentity_map_fname', 'output_csv': True}
2025/03/04 08:54:42 AM DEBUG:Calling is_file_updated with args=('reference_files\\PoliticalEntityDeDuped.csv', 'regentity_map_fname_last_modified'), kwargs={}
2025/03/04 08:54:42 AM INFO:Checking if reference_files\PoliticalEntityDeDuped.csv has been updated.
2025/03/04 08:54:42 AM DEBUG:Calling get_file_modification_time with args=('reference_files\\PoliticalEntityDeDuped.csv',), kwargs={}
2025/03/04 08:54:42 AM INFO:Getting modification time for reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:54:42 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:54:42 AM INFO:Current modification time: 1740841102.2638545
2025/03/04 08:54:42 AM INFO:Last modification time: None
2025/03/04 08:54:42 AM INFO:is_file_updated executed successfully
2025/03/04 08:54:42 AM INFO:Map file regentity_map_fname has been updated. Proceeding with deduplication.
2025/03/04 08:54:42 AM INFO:File deduplication complete, shape: (65278, 34)
2025/03/04 08:54:42 AM INFO:dedupe_entity_file executed successfully
2025/03/04 08:54:42 AM DEBUG:Calling dedupe_entity_file with args=(), kwargs={'loaddata_dd_df':            ECRef      OriginalRegulatedEntityName    RegulatedEntityType  ...      OriginalRegulatedEntityName RegulatedEntityId              RegulatedEntityName
0      NC0408174                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
1      NC0408173                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
2      NC0408177                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
3      NC0408176                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
4      NC0408170                   Mr Andy Street        Regulated Donee  ...                      Andy Street            8015.0                      Andy Street
...          ...                              ...                    ...  ...                              ...               ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant  ...               Vote Leave Limited            3945.0               Vote Leave Limited
65274   C0242461               Vote Leave Limited  Permitted Participant  ...               Vote Leave Limited            3945.0               Vote Leave Limited
65275   C0243560               Vote Leave Limited  Permitted Participant  ...               Vote Leave Limited            3945.0               Vote Leave Limited
65276   C0319710  Conservative And Unionist Party        Political Party  ...  Conservative And Unionist Party              52.0  Conservative And Unionist Party
65277   C0319727  Conservative And Unionist Party        Political Party  ...  Conservative And Unionist Party              52.0  Conservative And Unionist Party

[65278 rows x 34 columns], 'entity': 'Donor', 'map_filename': 'donor_map_fname', 'output_csv': True}
2025/03/04 08:54:42 AM DEBUG:Calling is_file_updated with args=('reference_files\\PoliticalDonorsDeduped.csv', 'donor_map_fname_last_modified'), kwargs={}
2025/03/04 08:54:42 AM INFO:Checking if reference_files\PoliticalDonorsDeduped.csv has been updated.
2025/03/04 08:54:42 AM DEBUG:Calling get_file_modification_time with args=('reference_files\\PoliticalDonorsDeduped.csv',), kwargs={}
2025/03/04 08:54:42 AM INFO:Getting modification time for reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:54:42 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:54:42 AM INFO:Current modification time: 1740757863.2545311
2025/03/04 08:54:42 AM INFO:Last modification time: None
2025/03/04 08:54:42 AM INFO:is_file_updated executed successfully
2025/03/04 08:54:42 AM INFO:Map file donor_map_fname has been updated. Proceeding with deduplication.
2025/03/04 08:54:43 AM INFO:File deduplication complete, shape: (65278, 40)
2025/03/04 08:54:43 AM INFO:dedupe_entity_file executed successfully
2025/03/04 08:54:43 AM INFO:Raw Data cleanup completed
2025/03/04 08:54:43 AM INFO:Data shape: (65278, 40)
2025/03/04 08:54:44 AM INFO:Data saved to output\cleaned_donations.csv
2025/03/04 08:54:44 AM INFO:Data cleanup completed, shape: (65278, 40)
2025/03/04 08:54:44 AM INFO:raw_data_cleanup executed successfully
2025/03/04 08:54:44 AM INFO:load_raw_data executed successfully
2025/03/04 08:54:45 AM INFO:get_raw_data executed successfully
2025/03/04 08:54:45 AM INFO:load_data_to_session executed successfully
2025/03/04 08:54:45 AM DEBUG:st.session_state.raw_data: 65278
2025/03/04 08:54:45 AM DEBUG:Calling load_data_to_session with args=('data_clean', <function get_cleaned_data at 0x000001B546E11A20>), kwargs={}
2025/03/04 08:54:45 AM DEBUG:Calling get_cleaned_data with args=(), kwargs={}
2025/03/04 08:54:45 AM DEBUG:Calling load_cleaned_data with args=(), kwargs={'originaldatafilepath': 'cleaned_donations_fname', 'processeddatafilepath': 'cleaned_data_fname', 'datafile': 'raw_data', 'streamlitrun': True, 'output_csv': True, 'main_file': 'raw_data', 'cleaned_file': 'data_clean'}
2025/03/04 08:54:45 AM DEBUG:Rows in Raw Data: 65278
2025/03/04 08:54:45 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': 'output\\cleaned_donations.csv', 'savedfilepath': 'output\\cleaned_data.csv', 'timestamp_key': 'load_raw_data_last_modified'}
2025/03/04 08:54:45 AM INFO:Original file path: output\cleaned_donations.csv
2025/03/04 08:54:45 AM INFO:Saved file path: output\cleaned_data.csv
2025/03/04 08:54:45 AM DEBUG:Calling is_file_updated with args=('output\\cleaned_donations.csv', 'load_raw_data_last_modified'), kwargs={}
2025/03/04 08:54:45 AM INFO:Checking if output\cleaned_donations.csv has been updated.
2025/03/04 08:54:45 AM DEBUG:Calling get_file_modification_time with args=('output\\cleaned_donations.csv',), kwargs={}
2025/03/04 08:54:45 AM INFO:Getting modification time for output\cleaned_donations.csv
2025/03/04 08:54:45 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:54:45 AM INFO:Current modification time: 1741078484.7183907
2025/03/04 08:54:45 AM INFO:Last modification time: 1740757862.6744745
2025/03/04 08:54:45 AM INFO:is_file_updated executed successfully
2025/03/04 08:54:45 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:54:45 AM ERROR:Failed to load data from output\cleaned_donations.csv
2025/03/04 08:54:45 AM INFO:Loading and cleaning data... data.clean_and_enhance
2025/03/04 08:54:45 AM DEBUG:Clean Data Prep: streamlitdata load: 65278
2025/03/04 08:54:45 AM DEBUG:Clean Data Prep 123: streamlitdata load: 65278
2025/03/04 08:54:48 AM DEBUG:Calling map_mp_to_party with args=(           ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value AcceptedDate  ...                        DonorName EventCount YearReceived MonthReceived YearMonthReceived
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56   02/09/2019  ...  Conservative And Unionist Party          1         2019             9            201909
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00   02/09/2019  ...  Conservative And Unionist Party          1         2019             9            201909
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58   30/08/2019  ...  Conservative And Unionist Party          1         2019             8            201908
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00   30/08/2019  ...  Conservative And Unionist Party          1         2019             8            201908
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05   29/08/2019  ...  Conservative And Unionist Party          1         2019             8            201908
...          ...                              ...                    ...        ...          ...  ...                              ...        ...          ...           ...               ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00          NaN  ...          Shaftesbury Investments          1         2016             4            201604
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00          NaN  ...                Mr Jeremy Hosking          1         2016             2            201602
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00          NaN  ...                   Anthony Clarke          1         2016             6            201606
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00          NaN  ...                Mr Peter A Dubens          1         2017             5            201705
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00          NaN  ...                 Mr Ravi S Kailas          1         2017             5            201705

[65278 rows x 44 columns],), kwargs={}
2025/03/04 08:54:48 AM DEBUG:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/04 08:54:48 AM DEBUG:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/04 08:54:48 AM DEBUG:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/04 08:54:48 AM DEBUG:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/04 08:54:48 AM DEBUG:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/04 08:54:48 AM ERROR:Number of rows in loaddata_df and raw_data do not match 78745 != 65278
2025/03/04 08:54:48 AM ERROR:Attempting to remove duplicates
2025/03/04 08:54:48 AM DEBUG:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/04 08:54:48 AM DEBUG:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/04 08:54:48 AM INFO:Data Updated with PartyName and PartyId successfully
2025/03/04 08:54:48 AM INFO:map_mp_to_party executed successfully
2025/03/04 08:54:48 AM DEBUG:Clean Data Prep 150: Map Mps: 65278
2025/03/04 08:54:48 AM DEBUG:Clean Data Prep 235: RegEntity_Map: 65278
2025/03/04 08:54:48 AM DEBUG:Calling load_election_dates with args=(), kwargs={}
2025/03/04 08:54:48 AM DEBUG:st.session_state.ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:54:48 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': 'source\\Donations_accepted_by_political_parties.csv', 'savedfilepath': 'reference_files\\elections.csv', 'timestamp_key': 'election_dates_last_modified'}
2025/03/04 08:54:48 AM INFO:Original file path: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:54:48 AM INFO:Saved file path: reference_files\elections.csv
2025/03/04 08:54:48 AM DEBUG:Calling is_file_updated with args=('source\\Donations_accepted_by_political_parties.csv', 'election_dates_last_modified'), kwargs={}
2025/03/04 08:54:48 AM INFO:Checking if source\Donations_accepted_by_political_parties.csv has been updated.
2025/03/04 08:54:48 AM DEBUG:Calling get_file_modification_time with args=('source\\Donations_accepted_by_political_parties.csv',), kwargs={}
2025/03/04 08:54:48 AM INFO:Getting modification time for source\Donations_accepted_by_political_parties.csv
2025/03/04 08:54:48 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:54:48 AM INFO:Current modification time: 1740757862.6744745
2025/03/04 08:54:48 AM INFO:Last modification time: None
2025/03/04 08:54:48 AM INFO:is_file_updated executed successfully
2025/03/04 08:54:48 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:54:48 AM INFO:Election dates loaded from file.
2025/03/04 08:54:48 AM INFO:Election_dates_df empty - loading from pdpy.
2025/03/04 08:54:49 AM INFO:Election Dates loaded vis pdpy.
2025/03/04 08:54:49 AM DEBUG:ElectionDates_dict from pdpy: {'1929': {'dissolution': datetime.date(1929, 5, 10), 'election': datetime.date(1929, 5, 30), 'type': 'General Election'}, '1931': {'dissolution': datetime.date(1931, 10, 7), 'election': datetime.date(1931, 10, 27), 'type': 'General Election'}, '1935': {'dissolution': datetime.date(1935, 10, 25), 'election': datetime.date(1935, 11, 14), 'type': 'General Election'}, '1945': {'dissolution': datetime.date(1945, 6, 15), 'election': datetime.date(1945, 7, 5), 'type': 'General Election'}, '1950': {'dissolution': datetime.date(1950, 2, 3), 'election': datetime.date(1950, 2, 23), 'type': 'General Election'}, '1951': {'dissolution': datetime.date(1951, 10, 5), 'election': datetime.date(1951, 10, 25), 'type': 'General Election'}, '1955': {'dissolution': datetime.date(1955, 5, 6), 'election': datetime.date(1955, 5, 26), 'type': 'General Election'}, '1959': {'dissolution': datetime.date(1959, 9, 18), 'election': datetime.date(1959, 10, 8), 'type': 'General Election'}, '1964': {'dissolution': datetime.date(1964, 9, 25), 'election': datetime.date(1964, 10, 15), 'type': 'General Election'}, '1966': {'dissolution': datetime.date(1966, 3, 10), 'election': datetime.date(1966, 3, 31), 'type': 'General Election'}, '1970': {'dissolution': datetime.date(1970, 5, 29), 'election': datetime.date(1970, 6, 18), 'type': 'General Election'}, '1974 (Feb)': {'dissolution': datetime.date(1974, 2, 8), 'election': datetime.date(1974, 2, 28), 'type': 'General Election'}, '1974 (Oct)': {'dissolution': datetime.date(1974, 9, 20), 'election': datetime.date(1974, 10, 10), 'type': 'General Election'}, '1979': {'dissolution': datetime.date(1979, 4, 7), 'election': datetime.date(1979, 5, 3), 'type': 'General Election'}, '1983': {'dissolution': datetime.date(1983, 5, 13), 'election': datetime.date(1983, 6, 9), 'type': 'General Election'}, '1987': {'dissolution': datetime.date(1987, 5, 18), 'election': datetime.date(1987, 6, 11), 'type': 'General Election'}, '1992': {'dissolution': datetime.date(1992, 3, 16), 'election': datetime.date(1992, 4, 9), 'type': 'General Election'}, '1997': {'dissolution': datetime.date(1997, 4, 8), 'election': datetime.date(1997, 5, 1), 'type': 'General Election'}, '2001': {'dissolution': datetime.date(2001, 5, 14), 'election': datetime.date(2001, 6, 7), 'type': 'General Election'}, '2005': {'dissolution': datetime.date(2005, 4, 11), 'election': datetime.date(2005, 5, 5), 'type': 'General Election'}, '2010': {'dissolution': datetime.date(2010, 4, 12), 'election': datetime.date(2010, 5, 6), 'type': 'General Election'}, '2015': {'dissolution': datetime.date(2015, 3, 30), 'election': datetime.date(2015, 5, 7), 'type': 'General Election'}, '2017': {'dissolution': datetime.date(2017, 5, 3), 'election': datetime.date(2017, 6, 8), 'type': 'General Election'}, '2019': {'dissolution': datetime.date(2019, 11, 6), 'election': datetime.date(2019, 12, 12), 'type': 'General Election'}}
2025/03/04 08:54:49 AM INFO:Election Dates Loaded Successfully.
2025/03/04 08:54:49 AM DEBUG:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/04 08:54:49 AM DEBUG:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/04 08:54:49 AM INFO:load_election_dates executed successfully
2025/03/04 08:55:08 AM DEBUG:Clean Data Prep 353: Election dates: 65278
2025/03/04 08:55:08 AM DEBUG:Clean Data Prep 386: End of clean: 65278
2025/03/04 08:55:34 AM INFO:Cleaned Data completed, shape: (65278, 58)
2025/03/04 08:55:34 AM INFO:load_cleaned_data executed successfully
2025/03/04 08:55:34 AM INFO:get_cleaned_data executed successfully
2025/03/04 08:55:34 AM INFO:load_data_to_session executed successfully
2025/03/04 08:55:34 AM DEBUG:st.session_state.raw_data: 65278
2025/03/04 08:55:34 AM DEBUG:Calling load_data_to_session with args=('data_donor', <function get_donor_data at 0x000001B546E11B40>), kwargs={}
2025/03/04 08:55:34 AM DEBUG:Calling get_donor_data with args=(), kwargs={}
2025/03/04 08:55:34 AM DEBUG:Calling load_donorList_data with args=(), kwargs={'main_file': 'data_clean', 'cleaned_file': 'data_donor', 'streamlitrun': True, 'output_csv': True, 'originaldatafilepath': 'cleaned_data_fname', 'cleaneddatafilepath': 'cleaned_donorlist_fname'}
2025/03/04 08:55:34 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': 'output\\cleaned_data.csv', 'savedfilepath': 'output\\cleaned_donorlist.csv', 'timestamp_key': 'load_donorlist_data_last_modified'}
2025/03/04 08:55:34 AM INFO:Original file path: output\cleaned_data.csv
2025/03/04 08:55:34 AM INFO:Saved file path: output\cleaned_donorlist.csv
2025/03/04 08:55:34 AM DEBUG:Calling is_file_updated with args=('output\\cleaned_data.csv', 'load_donorlist_data_last_modified'), kwargs={}
2025/03/04 08:55:34 AM INFO:Checking if output\cleaned_data.csv has been updated.
2025/03/04 08:55:34 AM DEBUG:Calling get_file_modification_time with args=('output\\cleaned_data.csv',), kwargs={}
2025/03/04 08:55:34 AM INFO:Getting modification time for output\cleaned_data.csv
2025/03/04 08:55:34 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:55:34 AM INFO:Current modification time: 1741078534.2604442
2025/03/04 08:55:34 AM INFO:Last modification time: None
2025/03/04 08:55:34 AM INFO:is_file_updated executed successfully
2025/03/04 08:55:34 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:55:34 AM INFO:Donor data saved to output\cleaned_donorlist.csv
2025/03/04 08:55:34 AM INFO:Donor Data summary completed
2025/03/04 08:55:34 AM INFO:Data shape: (30219, 5)
2025/03/04 08:55:34 AM INFO:load_donorList_data executed successfully
2025/03/04 08:55:34 AM INFO:get_donor_data executed successfully
2025/03/04 08:55:34 AM INFO:load_data_to_session executed successfully
2025/03/04 08:55:34 AM DEBUG:st.session_state.data_donor: 30219
2025/03/04 08:55:34 AM DEBUG:st.session_state.data_clean: 65278
2025/03/04 08:55:34 AM DEBUG:Calling load_data_to_session with args=('data_regentity', <function get_regentity_data at 0x000001B546E11C60>), kwargs={}
2025/03/04 08:55:34 AM DEBUG:Calling get_regentity_data with args=(), kwargs={}
2025/03/04 08:55:34 AM DEBUG:Calling load_regulated_entity_data with args=(), kwargs={'main_file': 'data_clean', 'cleaned_file': 'data_regentity', 'streamlitrun': True, 'output_csv': True, 'originaldatafilepath': 'cleaned_data_fname', 'cleaneddatafilepath': 'cleaned_regentity_fname'}
2025/03/04 08:55:34 AM DEBUG:Calling try_to_use_preprocessed_data with args=(), kwargs={'originalfilepath': 'output\\cleaned_data.csv', 'savedfilepath': 'output\\cleaned_regentity.csv', 'timestamp_key': 'load_donorlist_data_last_modified'}
2025/03/04 08:55:34 AM INFO:Original file path: output\cleaned_data.csv
2025/03/04 08:55:34 AM INFO:Saved file path: output\cleaned_regentity.csv
2025/03/04 08:55:34 AM DEBUG:Calling is_file_updated with args=('output\\cleaned_data.csv', 'load_donorlist_data_last_modified'), kwargs={}
2025/03/04 08:55:34 AM INFO:Checking if output\cleaned_data.csv has been updated.
2025/03/04 08:55:34 AM DEBUG:Calling get_file_modification_time with args=('output\\cleaned_data.csv',), kwargs={}
2025/03/04 08:55:34 AM INFO:Getting modification time for output\cleaned_data.csv
2025/03/04 08:55:34 AM INFO:get_file_modification_time executed successfully
2025/03/04 08:55:34 AM INFO:Current modification time: 1741078534.2604442
2025/03/04 08:55:34 AM INFO:Last modification time: 1741078534.2604442
2025/03/04 08:55:34 AM INFO:is_file_updated executed successfully
2025/03/04 08:55:34 AM INFO:Loading preprocessed data. Using output\cleaned_regentity.csv dated load_donorlist_data_last_modified instead of output\cleaned_data.csv
2025/03/04 08:55:34 AM INFO:try_to_use_preprocessed_data executed successfully
2025/03/04 08:55:34 AM INFO:load_regulated_entity_data executed successfully
2025/03/04 08:55:34 AM INFO:get_regentity_data executed successfully
2025/03/04 08:55:34 AM INFO:load_data_to_session executed successfully
2025/03/04 08:55:34 AM DEBUG:st.session_state.data_regentity: 1364
2025/03/04 08:55:34 AM DEBUG:st.session_state.data_donor: 30219
2025/03/04 08:55:34 AM DEBUG:st.session_state.data_clean: 65278
2025/03/04 08:55:34 AM INFO:firstload executed successfully
2025/03/04 08:55:34 AM INFO:initialise_data executed successfully
2025/03/04 08:57:23 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:57:23 AM INFO:Running App setup...
2025/03/04 08:57:23 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:57:23 AM INFO:Setting up the package
2025/03/04 08:57:23 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:57:23 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:57:23 AM INFO:get_git_version executed successfully
2025/03/04 08:57:23 AM INFO:Version: v20.140
2025/03/04 08:57:23 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:57:23 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:57:23 AM DEBUG:LOG_LEVEL already exists in session state
2025/03/04 08:57:23 AM DEBUG:BASE_DIR already exists in session state
2025/03/04 08:57:23 AM DEBUG:filenames already exists in session state
2025/03/04 08:57:23 AM DEBUG:PLACEHOLDER_DATE already exists in session state
2025/03/04 08:57:23 AM DEBUG:PLACEHOLDER_ID already exists in session state
2025/03/04 08:57:23 AM DEBUG:thresholds already exists in session state
2025/03/04 08:57:23 AM DEBUG:data_remappings already exists in session state
2025/03/04 08:57:23 AM DEBUG:filter_def already exists in session state
2025/03/04 08:57:23 AM DEBUG:security already exists in session state
2025/03/04 08:57:23 AM DEBUG:perc_target already exists in session state
2025/03/04 08:57:23 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP already exists in session state
2025/03/04 08:57:23 AM DEBUG:directories already exists in session state
2025/03/04 08:57:23 AM DEBUG:reference_dir already exists in session state
2025/03/04 08:57:23 AM DEBUG:data_dir already exists in session state
2025/03/04 08:57:23 AM DEBUG:output_dir already exists in session state
2025/03/04 08:57:23 AM DEBUG:logs_dir already exists in session state
2025/03/04 08:57:23 AM DEBUG:components_dir already exists in session state
2025/03/04 08:57:23 AM DEBUG:app_pages_dir already exists in session state
2025/03/04 08:57:23 AM DEBUG:utils_dir already exists in session state
2025/03/04 08:57:23 AM DEBUG:Donor_dedupe_cleaned_fname already exists in session state
2025/03/04 08:57:23 AM DEBUG:ListofPoliticalPeople_fname already exists in session state
2025/03/04 08:57:23 AM DEBUG:mppartymemb_fname already exists in session state
2025/03/04 08:57:23 AM DEBUG:donor_map_fname already exists in session state
2025/03/04 08:57:23 AM DEBUG:politician_party_fname already exists in session state
2025/03/04 08:57:23 AM DEBUG:regentity_map_fname already exists in session state
2025/03/04 08:57:23 AM DEBUG:original_data_fname already exists in session state
2025/03/04 08:57:23 AM DEBUG:CREDENTIALS_FILE already exists in session state
2025/03/04 08:57:23 AM DEBUG:TEXT_FILE already exists in session state
2025/03/04 08:57:23 AM DEBUG:ELECTION_DATES already exists in session state
2025/03/04 08:57:23 AM DEBUG:cleaned_data_fname already exists in session state
2025/03/04 08:57:23 AM DEBUG:cleaned_donations_fname already exists in session state
2025/03/04 08:57:23 AM DEBUG:cleaned_donorlist_fname already exists in session state
2025/03/04 08:57:23 AM DEBUG:cleaned_regentity_fname already exists in session state
2025/03/04 08:57:23 AM DEBUG:party_summary_fname already exists in session state
2025/03/04 08:57:23 AM DEBUG:imported_raw_fname already exists in session state
2025/03/04 08:57:23 AM DEBUG:source_data_fname already exists in session state
2025/03/04 08:57:23 AM DEBUG:Cash_ftr already exists in session state
2025/03/04 08:57:23 AM INFO:Session_state variables initialized
2025/03/04 08:57:23 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:57:23 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:57:23 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:57:23 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:57:23 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:57:23 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:57:23 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:57:23 AM DEBUG:components_dir: components
2025/03/04 08:57:23 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:57:23 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:57:23 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:57:23 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:57:23 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:57:23 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:57:23 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:57:23 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:57:23 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:57:23 AM DEBUG:menu_selection: {'title': 'Head Line Figures', 'function': <function hlf_body at 0x000001B546B05480>}
2025/03/04 08:57:23 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:57:23 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:57:23 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:57:23 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:57:23 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:57:23 AM DEBUG:reference_dir: reference_files
2025/03/04 08:57:23 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:57:23 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:57:23 AM DEBUG:utils_dir: utils
2025/03/04 08:57:23 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:57:23 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:57:23 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:57:23 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:57:23 AM DEBUG:data_dir: data
2025/03/04 08:57:23 AM DEBUG:output_dir: output
2025/03/04 08:57:23 AM DEBUG:logs_dir: logs
2025/03/04 08:57:23 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:57:23 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:57:23 AM DEBUG:perc_target: 0.5
2025/03/04 08:57:23 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:57:23 AM INFO:Session state Setup complete
2025/03/04 08:57:23 AM INFO:initialize_session_state executed successfully
2025/03/04 08:57:23 AM INFO:Package setup complete
2025/03/04 08:57:23 AM INFO:setup_package executed successfully
2025/03/04 08:57:23 AM INFO:Running Menu setup...
2025/03/04 08:57:23 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:57:23 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:57:23 AM INFO:get_git_version executed successfully
2025/03/04 08:57:23 AM INFO:App Version: v20.161
2025/03/04 08:57:23 AM INFO:Switched to page: Head Line Figures
2025/03/04 08:57:23 AM DEBUG:Calling hlf_body with args=(), kwargs={}
2025/03/04 08:57:23 AM DEBUG:Calling load_and_filter_data with args=(), kwargs={'filter_key': None, 'pagereflabel': 'headlinefigures'}
2025/03/04 08:57:23 AM ERROR:Error in load_and_filter_data: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 23, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/04 08:57:23 AM ERROR:Error in hlf_body: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 27, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 23, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/04 08:57:23 AM ERROR:Error in pagesetup: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 73, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 27, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 23, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/04 08:57:23 AM CRITICAL:Menu setup crashed: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 46, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 73, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 27, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 23, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/04 08:58:00 AM INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/04 08:58:00 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\utils',), kwargs={}
2025/03/04 08:58:00 AM INFO:get_git_version executed successfully
2025/03/04 08:58:00 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\data',), kwargs={}
2025/03/04 08:58:00 AM INFO:get_git_version executed successfully
2025/03/04 08:58:00 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:58:00 AM INFO:Running App setup...
2025/03/04 08:58:00 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:58:00 AM INFO:Setting up the package
2025/03/04 08:58:00 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:58:00 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:58:00 AM INFO:get_git_version executed successfully
2025/03/04 08:58:00 AM INFO:Version: v20.140
2025/03/04 08:58:00 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:58:00 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:58:00 AM DEBUG:LOG_LEVEL already exists in session state
2025/03/04 08:58:00 AM DEBUG:BASE_DIR already exists in session state
2025/03/04 08:58:00 AM DEBUG:filenames already exists in session state
2025/03/04 08:58:00 AM DEBUG:PLACEHOLDER_DATE already exists in session state
2025/03/04 08:58:00 AM DEBUG:PLACEHOLDER_ID already exists in session state
2025/03/04 08:58:00 AM DEBUG:thresholds already exists in session state
2025/03/04 08:58:00 AM DEBUG:data_remappings already exists in session state
2025/03/04 08:58:00 AM DEBUG:filter_def already exists in session state
2025/03/04 08:58:00 AM DEBUG:security already exists in session state
2025/03/04 08:58:00 AM DEBUG:perc_target already exists in session state
2025/03/04 08:58:00 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP already exists in session state
2025/03/04 08:58:00 AM DEBUG:directories already exists in session state
2025/03/04 08:58:00 AM DEBUG:reference_dir already exists in session state
2025/03/04 08:58:00 AM DEBUG:data_dir already exists in session state
2025/03/04 08:58:00 AM DEBUG:output_dir already exists in session state
2025/03/04 08:58:00 AM DEBUG:logs_dir already exists in session state
2025/03/04 08:58:00 AM DEBUG:components_dir already exists in session state
2025/03/04 08:58:00 AM DEBUG:app_pages_dir already exists in session state
2025/03/04 08:58:00 AM DEBUG:utils_dir already exists in session state
2025/03/04 08:58:00 AM DEBUG:Donor_dedupe_cleaned_fname already exists in session state
2025/03/04 08:58:00 AM DEBUG:ListofPoliticalPeople_fname already exists in session state
2025/03/04 08:58:00 AM DEBUG:mppartymemb_fname already exists in session state
2025/03/04 08:58:00 AM DEBUG:donor_map_fname already exists in session state
2025/03/04 08:58:00 AM DEBUG:politician_party_fname already exists in session state
2025/03/04 08:58:00 AM DEBUG:regentity_map_fname already exists in session state
2025/03/04 08:58:00 AM DEBUG:original_data_fname already exists in session state
2025/03/04 08:58:00 AM DEBUG:CREDENTIALS_FILE already exists in session state
2025/03/04 08:58:00 AM DEBUG:TEXT_FILE already exists in session state
2025/03/04 08:58:00 AM DEBUG:ELECTION_DATES already exists in session state
2025/03/04 08:58:00 AM DEBUG:cleaned_data_fname already exists in session state
2025/03/04 08:58:00 AM DEBUG:cleaned_donations_fname already exists in session state
2025/03/04 08:58:00 AM DEBUG:cleaned_donorlist_fname already exists in session state
2025/03/04 08:58:00 AM DEBUG:cleaned_regentity_fname already exists in session state
2025/03/04 08:58:00 AM DEBUG:party_summary_fname already exists in session state
2025/03/04 08:58:00 AM DEBUG:imported_raw_fname already exists in session state
2025/03/04 08:58:00 AM DEBUG:source_data_fname already exists in session state
2025/03/04 08:58:00 AM DEBUG:Cash_ftr already exists in session state
2025/03/04 08:58:00 AM INFO:Session_state variables initialized
2025/03/04 08:58:00 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:58:00 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:58:00 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:58:00 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:58:00 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:58:00 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:58:00 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:58:00 AM DEBUG:components_dir: components
2025/03/04 08:58:00 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:58:00 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:58:00 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:58:00 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:58:00 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:58:00 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:58:00 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:58:00 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:58:00 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:58:00 AM DEBUG:menu_selection: {'title': 'Introduction', 'function': <function introduction_body at 0x000001B535969630>}
2025/03/04 08:58:00 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:58:00 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:58:00 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:58:00 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:58:00 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:58:00 AM DEBUG:reference_dir: reference_files
2025/03/04 08:58:00 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:58:00 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:58:00 AM DEBUG:utils_dir: utils
2025/03/04 08:58:00 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:58:00 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:58:00 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:58:00 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:58:00 AM DEBUG:data_dir: data
2025/03/04 08:58:00 AM DEBUG:output_dir: output
2025/03/04 08:58:00 AM DEBUG:logs_dir: logs
2025/03/04 08:58:00 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:58:00 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:58:00 AM DEBUG:perc_target: 0.5
2025/03/04 08:58:00 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:58:00 AM INFO:Session state Setup complete
2025/03/04 08:58:00 AM INFO:initialize_session_state executed successfully
2025/03/04 08:58:00 AM INFO:Package setup complete
2025/03/04 08:58:00 AM INFO:setup_package executed successfully
2025/03/04 08:58:00 AM INFO:Running Menu setup...
2025/03/04 08:58:00 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:58:00 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\app_pages',), kwargs={}
2025/03/04 08:58:00 AM INFO:get_git_version executed successfully
2025/03/04 08:58:00 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1\\components',), kwargs={}
2025/03/04 08:58:00 AM INFO:get_git_version executed successfully
2025/03/04 08:58:00 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:58:00 AM INFO:get_git_version executed successfully
2025/03/04 08:58:00 AM INFO:App Version: v20.161
2025/03/04 08:58:00 AM INFO:Switched to page: Introduction
2025/03/04 08:58:00 AM INFO:pagesetup executed successfully
2025/03/04 08:58:00 AM INFO:No data found in session state, running firstload()
2025/03/04 08:58:02 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/04 08:58:02 AM INFO:Running App setup...
2025/03/04 08:58:02 AM DEBUG:Calling setup_package with args=(), kwargs={}
2025/03/04 08:58:02 AM INFO:Setting up the package
2025/03/04 08:58:02 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/04 08:58:02 AM DEBUG:Calling get_git_version with args=('H:\\VScode\\dashboard_demo-1',), kwargs={}
2025/03/04 08:58:02 AM INFO:get_git_version executed successfully
2025/03/04 08:58:02 AM INFO:Version: v20.140
2025/03/04 08:58:02 AM DEBUG:Calling initialize_session_state with args=(), kwargs={}
2025/03/04 08:58:02 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:58:02 AM DEBUG:LOG_LEVEL already exists in session state
2025/03/04 08:58:02 AM DEBUG:BASE_DIR already exists in session state
2025/03/04 08:58:02 AM DEBUG:filenames already exists in session state
2025/03/04 08:58:02 AM DEBUG:PLACEHOLDER_DATE already exists in session state
2025/03/04 08:58:02 AM DEBUG:PLACEHOLDER_ID already exists in session state
2025/03/04 08:58:02 AM DEBUG:thresholds already exists in session state
2025/03/04 08:58:02 AM DEBUG:data_remappings already exists in session state
2025/03/04 08:58:02 AM DEBUG:filter_def already exists in session state
2025/03/04 08:58:02 AM DEBUG:security already exists in session state
2025/03/04 08:58:02 AM DEBUG:perc_target already exists in session state
2025/03/04 08:58:02 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP already exists in session state
2025/03/04 08:58:02 AM DEBUG:directories already exists in session state
2025/03/04 08:58:02 AM DEBUG:reference_dir already exists in session state
2025/03/04 08:58:02 AM DEBUG:data_dir already exists in session state
2025/03/04 08:58:02 AM DEBUG:output_dir already exists in session state
2025/03/04 08:58:02 AM DEBUG:logs_dir already exists in session state
2025/03/04 08:58:02 AM DEBUG:components_dir already exists in session state
2025/03/04 08:58:02 AM DEBUG:app_pages_dir already exists in session state
2025/03/04 08:58:02 AM DEBUG:utils_dir already exists in session state
2025/03/04 08:58:02 AM DEBUG:Donor_dedupe_cleaned_fname already exists in session state
2025/03/04 08:58:02 AM DEBUG:ListofPoliticalPeople_fname already exists in session state
2025/03/04 08:58:02 AM DEBUG:mppartymemb_fname already exists in session state
2025/03/04 08:58:02 AM DEBUG:donor_map_fname already exists in session state
2025/03/04 08:58:02 AM DEBUG:politician_party_fname already exists in session state
2025/03/04 08:58:02 AM DEBUG:regentity_map_fname already exists in session state
2025/03/04 08:58:02 AM DEBUG:original_data_fname already exists in session state
2025/03/04 08:58:02 AM DEBUG:CREDENTIALS_FILE already exists in session state
2025/03/04 08:58:02 AM DEBUG:TEXT_FILE already exists in session state
2025/03/04 08:58:02 AM DEBUG:ELECTION_DATES already exists in session state
2025/03/04 08:58:02 AM DEBUG:cleaned_data_fname already exists in session state
2025/03/04 08:58:02 AM DEBUG:cleaned_donations_fname already exists in session state
2025/03/04 08:58:02 AM DEBUG:cleaned_donorlist_fname already exists in session state
2025/03/04 08:58:02 AM DEBUG:cleaned_regentity_fname already exists in session state
2025/03/04 08:58:02 AM DEBUG:party_summary_fname already exists in session state
2025/03/04 08:58:02 AM DEBUG:imported_raw_fname already exists in session state
2025/03/04 08:58:02 AM DEBUG:source_data_fname already exists in session state
2025/03/04 08:58:02 AM DEBUG:Cash_ftr already exists in session state
2025/03/04 08:58:02 AM INFO:Session_state variables initialized
2025/03/04 08:58:02 AM DEBUG:party_summary_fname: output\party_summary.csv
2025/03/04 08:58:02 AM DEBUG:mppartymemb_fname: reference_files\mppartymemb_pypd.csv
2025/03/04 08:58:02 AM DEBUG:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/04 08:58:02 AM DEBUG:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/04 08:58:02 AM DEBUG:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/04 08:58:02 AM DEBUG:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/04 08:58:02 AM DEBUG:ELECTION_DATES: reference_files\elections.csv
2025/03/04 08:58:02 AM DEBUG:components_dir: components
2025/03/04 08:58:02 AM DEBUG:CREDENTIALS_FILE: reference_files\admin_credentials.json
2025/03/04 08:58:02 AM DEBUG:regentity_map_fname: reference_files\PoliticalEntityDeDuped.csv
2025/03/04 08:58:02 AM DEBUG:politician_party_fname: reference_files\ListOfPoliticalPeople_Final.csv
2025/03/04 08:58:02 AM DEBUG:original_data_fname: reference_files\original_data.csv
2025/03/04 08:58:02 AM DEBUG:donor_map_fname: reference_files\PoliticalDonorsDeduped.csv
2025/03/04 08:58:02 AM DEBUG:imported_raw_fname: output\imported_raw.csv
2025/03/04 08:58:02 AM DEBUG:cleaned_donorlist_fname: output\cleaned_donorlist.csv
2025/03/04 08:58:02 AM DEBUG:source_data_fname: source\Donations_accepted_by_political_parties.csv
2025/03/04 08:58:02 AM DEBUG:cleaned_regentity_fname: output\cleaned_regentity.csv
2025/03/04 08:58:02 AM DEBUG:menu_selection: {'title': 'Head Line Figures', 'function': <function hlf_body at 0x000001B54E23E5F0>}
2025/03/04 08:58:02 AM DEBUG:directories: {'BASE_DIR': WindowsPath('H:/VScode/dashboard_demo-1'), 'data_dir': 'data', 'output_dir': 'output', 'logs_dir': 'logs', 'reference_dir': 'reference_files', 'components_dir': 'components', 'app_pages_dir': 'app_pages', 'utils_dir': 'utils', 'source_dir': 'source', 'tests_dir': 'tests'}
2025/03/04 08:58:02 AM DEBUG:Cash_ftr: {'DonationType': 'Cash'}
2025/03/04 08:58:02 AM DEBUG:LOG_LEVEL: DEBUG
2025/03/04 08:58:02 AM DEBUG:TEXT_FILE: reference_files\admin_text.json
2025/03/04 08:58:02 AM DEBUG:cleaned_donations_fname: output\cleaned_donations.csv
2025/03/04 08:58:02 AM DEBUG:reference_dir: reference_files
2025/03/04 08:58:02 AM DEBUG:PLACEHOLDER_ID: 1000001
2025/03/04 08:58:02 AM DEBUG:ListofPoliticalPeople_fname: reference_files\ListOfPoliticalPeople.csv
2025/03/04 08:58:02 AM DEBUG:utils_dir: utils
2025/03/04 08:58:02 AM DEBUG:Donor_dedupe_cleaned_fname: reference_files\Donor_dedupe_cleaned_data.csv
2025/03/04 08:58:02 AM DEBUG:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/04 08:58:02 AM DEBUG:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/04 08:58:02 AM DEBUG:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/04 08:58:02 AM DEBUG:data_dir: data
2025/03/04 08:58:02 AM DEBUG:output_dir: output
2025/03/04 08:58:02 AM DEBUG:logs_dir: logs
2025/03/04 08:58:02 AM DEBUG:app_pages_dir: app_pages
2025/03/04 08:58:02 AM DEBUG:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeduped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json', 'ELECTION_DATES': 'elections.csv'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv', 'imported_raw_fname': 'imported_raw.csv'}, 'source_dir': {'source_data_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/04 08:58:02 AM DEBUG:perc_target: 0.5
2025/03/04 08:58:02 AM DEBUG:cleaned_data_fname: output\cleaned_data.csv
2025/03/04 08:58:02 AM INFO:Session state Setup complete
2025/03/04 08:58:02 AM INFO:initialize_session_state executed successfully
2025/03/04 08:58:02 AM INFO:Package setup complete
2025/03/04 08:58:02 AM INFO:setup_package executed successfully
2025/03/04 08:58:02 AM INFO:Running Menu setup...
2025/03/04 08:58:02 AM DEBUG:Calling pagesetup with args=(), kwargs={}
2025/03/04 08:58:02 AM DEBUG:Calling get_git_version with args=(), kwargs={}
2025/03/04 08:58:02 AM INFO:get_git_version executed successfully
2025/03/04 08:58:02 AM INFO:App Version: v20.161
2025/03/04 08:58:02 AM INFO:Switched to page: Head Line Figures
2025/03/04 08:58:02 AM DEBUG:Calling hlf_body with args=(), kwargs={}
2025/03/04 08:58:02 AM DEBUG:Calling load_and_filter_data with args=(), kwargs={'filter_key': None, 'pagereflabel': 'headlinefigures'}
2025/03/04 08:58:02 AM ERROR:Error in load_and_filter_data: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 23, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/04 08:58:02 AM ERROR:Error in hlf_body: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 27, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 23, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/04 08:58:02 AM ERROR:Error in pagesetup: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 73, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 27, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 23, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/04 08:58:02 AM CRITICAL:Menu setup crashed: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 46, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 73, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 47, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 27, in hlf_body
    load_and_filter_data(filter_key=filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 39, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 33, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 23, in load_and_filter_data
    cleaned_df = st.session_state.data_clean
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
