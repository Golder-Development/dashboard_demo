2025/03/01 11:00:46 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 11:00:46 AM INFO:Setting up the package
2025/03/01 11:00:46 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 11:00:46 AM INFO:get_git_version executed successfully
2025/03/01 11:00:46 AM INFO:Version: v20.115
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:init_state_var executed successfully
2025/03/01 11:00:46 AM INFO:Session_state variables initialized
2025/03/01 11:00:46 AM INFO:menu_selection: {'title': 'Head Line Figures', 'function': <function hlf_body at 0x0000018CE1BC6A70>}
2025/03/01 11:00:46 AM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 11:00:46 AM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 11:00:46 AM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 11:00:46 AM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 11:00:46 AM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 11:00:46 AM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 11:00:46 AM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 11:00:46 AM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 11:00:46 AM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 11:00:46 AM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 11:00:46 AM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 11:00:46 AM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 11:00:46 AM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 11:00:46 AM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 11:00:46 AM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 11:00:46 AM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 11:00:46 AM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 11:00:46 AM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 11:00:46 AM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 11:00:46 AM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 11:00:46 AM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 11:00:46 AM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 11:00:46 AM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 11:00:46 AM INFO:LOG_LEVEL: DEBUG
2025/03/01 11:00:46 AM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 11:00:46 AM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 11:00:46 AM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 11:00:46 AM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 11:00:46 AM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 11:00:46 AM INFO:perc_target: 0.5
2025/03/01 11:00:46 AM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 11:00:46 AM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 11:00:46 AM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 11:00:46 AM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 11:00:46 AM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 11:00:46 AM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 11:00:46 AM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 11:00:46 AM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 11:00:46 AM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 11:00:46 AM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 11:00:46 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 11:00:46 AM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 11:00:46 AM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 11:00:46 AM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 11:00:46 AM INFO:Session state Setup complete
2025/03/01 11:00:46 AM INFO:initialize_session_state executed successfully
2025/03/01 11:00:46 AM INFO:Package setup complete
2025/03/01 11:00:46 AM INFO:get_git_version executed successfully
2025/03/01 11:00:46 AM INFO:App Version: v20.130
2025/03/01 11:00:46 AM INFO:Switched to page: Head Line Figures
2025/03/01 11:00:47 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:00:47 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:00:47 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:00:48 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:00:48 AM INFO:plot_pie_chart executed successfully
2025/03/01 11:00:48 AM INFO:plot_pie_chart executed successfully
2025/03/01 11:00:48 AM INFO:pagesetup executed successfully
2025/03/01 11:00:48 AM INFO:Data already loaded in session state.
2025/03/01 11:00:51 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 11:00:51 AM INFO:Setting up the package
2025/03/01 11:00:51 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 11:00:51 AM INFO:get_git_version executed successfully
2025/03/01 11:00:51 AM INFO:Version: v20.115
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:init_state_var executed successfully
2025/03/01 11:00:51 AM INFO:Session_state variables initialized
2025/03/01 11:00:51 AM INFO:menu_selection: {'title': 'Bequeths', 'function': <function mod_bequeths_page at 0x0000018CE1FF9750>}
2025/03/01 11:00:51 AM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 11:00:51 AM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 11:00:51 AM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 11:00:51 AM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 11:00:51 AM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 11:00:51 AM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 11:00:51 AM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 11:00:51 AM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 11:00:51 AM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 11:00:51 AM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 11:00:51 AM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 11:00:51 AM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 11:00:51 AM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 11:00:51 AM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 11:00:51 AM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 11:00:51 AM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 11:00:51 AM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 11:00:51 AM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 11:00:51 AM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 11:00:51 AM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 11:00:51 AM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 11:00:51 AM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 11:00:51 AM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 11:00:51 AM INFO:LOG_LEVEL: DEBUG
2025/03/01 11:00:51 AM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 11:00:51 AM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 11:00:51 AM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 11:00:51 AM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 11:00:51 AM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 11:00:51 AM INFO:perc_target: 0.5
2025/03/01 11:00:51 AM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 11:00:51 AM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 11:00:51 AM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 11:00:51 AM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 11:00:51 AM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 11:00:51 AM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 11:00:51 AM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 11:00:51 AM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 11:00:51 AM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 11:00:51 AM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 11:00:51 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 11:00:51 AM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 11:00:51 AM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 11:00:51 AM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 11:00:51 AM INFO:Session state Setup complete
2025/03/01 11:00:51 AM INFO:initialize_session_state executed successfully
2025/03/01 11:00:51 AM INFO:Package setup complete
2025/03/01 11:00:51 AM INFO:get_git_version executed successfully
2025/03/01 11:00:51 AM INFO:App Version: v20.130
2025/03/01 11:00:51 AM INFO:Switched to page: Bequeths
2025/03/01 11:00:55 AM ERROR:Missing column: 'PartyName' in loaddata_df. Available columns: Index(['ECRef', 'OriginalRegulatedEntityName', 'RegulatedEntityType', 'Value',
       'AcceptedDate', 'AccountingUnitName', 'OriginalDonorName',
       'AccountingUnitsAsCentralParty', 'IsSponsorship', 'DonorStatus',
       'RegulatedDoneeType', 'CompanyRegistrationNumber', 'Postcode',
       'DonationType', 'NatureOfDonation', 'PurposeOfVisit', 'DonationAction',
       'ReceivedDate', 'ReportedDate', 'IsReportedPrePoll',
       'ReportingPeriodName', 'IsBequest', 'IsAggregation',
       'OriginalRegulatedEntityId', 'AccountingUnitId', 'OriginalDonorId',
       'CampaigningName', 'RegisterName', 'IsIrishSource',
       'CleanedRegulatedEntityId', 'CleanedRegulatedEntityName',
       'OriginalRegulatedEntityName', 'RegulatedEntityId',
       'RegulatedEntityName', 'CleanedDonorId', 'ParentDonorName',
       'CleanedDonorName', 'DonorStatus2', 'DonorId', 'DonorName',
       'EventCount', 'YearReceived', 'MonthReceived', 'YearMonthReceived'],
      dtype='object')
2025/03/01 11:00:55 AM INFO:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/01 11:00:55 AM INFO:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/01 11:00:55 AM INFO:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 11:00:55 AM INFO:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/01 11:00:55 AM INFO:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 11:00:55 AM INFO:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/01 11:00:55 AM INFO:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/01 11:00:55 AM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 11:00:55 AM INFO:map_mp_to_party executed successfully
2025/03/01 11:01:20 AM INFO:Cleaned Data completed, shape: (79737, 58)
2025/03/01 11:01:20 AM INFO:load_cleaned_data executed successfully
2025/03/01 11:01:20 AM INFO:load_and_filter_data executed successfully
2025/03/01 11:01:20 AM INFO:display_summary_statistics executed successfully
2025/03/01 11:01:20 AM INFO:display_textual_insights executed successfully
2025/03/01 11:01:21 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:01:21 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:01:21 AM INFO:display_visualizations executed successfully
2025/03/01 11:01:21 AM INFO:display_data_page executed successfully
2025/03/01 11:01:21 AM INFO:pagesetup executed successfully
2025/03/01 11:01:21 AM INFO:Data already loaded in session state.
2025/03/01 11:01:33 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 11:01:33 AM INFO:Setting up the package
2025/03/01 11:01:33 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 11:01:33 AM INFO:get_git_version executed successfully
2025/03/01 11:01:33 AM INFO:Version: v20.115
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:init_state_var executed successfully
2025/03/01 11:01:33 AM INFO:Session_state variables initialized
2025/03/01 11:01:33 AM INFO:menu_selection: {'title': 'Corporate Donations', 'function': <function mod_corporate_donations_page at 0x0000018CE1FF97E0>}
2025/03/01 11:01:33 AM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 11:01:33 AM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 11:01:33 AM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 11:01:33 AM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 11:01:33 AM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 11:01:33 AM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 11:01:33 AM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 11:01:33 AM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 11:01:33 AM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 11:01:33 AM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 11:01:33 AM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 11:01:33 AM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 11:01:33 AM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 11:01:33 AM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 11:01:33 AM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 11:01:33 AM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 11:01:33 AM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 11:01:33 AM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 11:01:33 AM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 11:01:33 AM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 11:01:33 AM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 11:01:33 AM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 11:01:33 AM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 11:01:33 AM INFO:LOG_LEVEL: DEBUG
2025/03/01 11:01:33 AM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 11:01:33 AM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 11:01:33 AM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 11:01:34 AM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 11:01:34 AM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 11:01:34 AM INFO:perc_target: 0.5
2025/03/01 11:01:34 AM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 11:01:34 AM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 11:01:34 AM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 11:01:34 AM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 11:01:34 AM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 11:01:34 AM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 11:01:34 AM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 11:01:34 AM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 11:01:34 AM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 11:01:34 AM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 11:01:34 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 11:01:34 AM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 11:01:34 AM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 11:01:34 AM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 11:01:34 AM INFO:Session state Setup complete
2025/03/01 11:01:34 AM INFO:initialize_session_state executed successfully
2025/03/01 11:01:34 AM INFO:Package setup complete
2025/03/01 11:01:34 AM INFO:get_git_version executed successfully
2025/03/01 11:01:34 AM INFO:App Version: v20.130
2025/03/01 11:01:34 AM INFO:Switched to page: Corporate Donations
2025/03/01 11:01:34 AM INFO:load_cleaned_data executed successfully
2025/03/01 11:01:34 AM INFO:load_and_filter_data executed successfully
2025/03/01 11:01:34 AM INFO:display_summary_statistics executed successfully
2025/03/01 11:01:34 AM INFO:display_textual_insights executed successfully
2025/03/01 11:01:34 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:01:34 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:01:34 AM INFO:display_visualizations executed successfully
2025/03/01 11:01:34 AM INFO:display_data_page executed successfully
2025/03/01 11:01:34 AM INFO:pagesetup executed successfully
2025/03/01 11:01:34 AM INFO:Data already loaded in session state.
2025/03/01 11:01:39 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 11:01:39 AM INFO:Setting up the package
2025/03/01 11:01:39 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 11:01:39 AM INFO:get_git_version executed successfully
2025/03/01 11:01:39 AM INFO:Version: v20.115
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:init_state_var executed successfully
2025/03/01 11:01:39 AM INFO:Session_state variables initialized
2025/03/01 11:01:39 AM INFO:menu_selection: {'title': 'Sponsorships', 'function': <function mod_sponsorship_page at 0x0000018CE1FF95A0>}
2025/03/01 11:01:39 AM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 11:01:39 AM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 11:01:39 AM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 11:01:39 AM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 11:01:39 AM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 11:01:39 AM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 11:01:39 AM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 11:01:39 AM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 11:01:39 AM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 11:01:39 AM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 11:01:39 AM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 11:01:39 AM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 11:01:39 AM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 11:01:39 AM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 11:01:39 AM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 11:01:39 AM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 11:01:39 AM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 11:01:39 AM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 11:01:39 AM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 11:01:39 AM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 11:01:39 AM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 11:01:39 AM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 11:01:39 AM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 11:01:39 AM INFO:LOG_LEVEL: DEBUG
2025/03/01 11:01:39 AM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 11:01:39 AM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 11:01:39 AM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 11:01:39 AM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 11:01:39 AM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 11:01:39 AM INFO:perc_target: 0.5
2025/03/01 11:01:39 AM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 11:01:39 AM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 11:01:39 AM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 11:01:39 AM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 11:01:39 AM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 11:01:39 AM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 11:01:39 AM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 11:01:39 AM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 11:01:39 AM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 11:01:39 AM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 11:01:39 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 11:01:39 AM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 11:01:39 AM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 11:01:39 AM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 11:01:39 AM INFO:Session state Setup complete
2025/03/01 11:01:39 AM INFO:initialize_session_state executed successfully
2025/03/01 11:01:39 AM INFO:Package setup complete
2025/03/01 11:01:39 AM INFO:get_git_version executed successfully
2025/03/01 11:01:39 AM INFO:App Version: v20.130
2025/03/01 11:01:39 AM INFO:Switched to page: Sponsorships
2025/03/01 11:01:39 AM INFO:load_cleaned_data executed successfully
2025/03/01 11:01:39 AM INFO:load_and_filter_data executed successfully
2025/03/01 11:01:39 AM INFO:display_summary_statistics executed successfully
2025/03/01 11:01:39 AM INFO:display_textual_insights executed successfully
2025/03/01 11:01:39 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:01:39 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:01:39 AM INFO:display_visualizations executed successfully
2025/03/01 11:01:39 AM INFO:display_data_page executed successfully
2025/03/01 11:01:39 AM INFO:pagesetup executed successfully
2025/03/01 11:01:39 AM INFO:Data already loaded in session state.
2025/03/01 11:01:42 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 11:01:42 AM INFO:Setting up the package
2025/03/01 11:01:42 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 11:01:42 AM INFO:get_git_version executed successfully
2025/03/01 11:01:42 AM INFO:Version: v20.115
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:init_state_var executed successfully
2025/03/01 11:01:42 AM INFO:Session_state variables initialized
2025/03/01 11:01:42 AM INFO:menu_selection: {'title': 'Paid Visits', 'function': <function mod_visits_page at 0x0000018CE1FC39A0>}
2025/03/01 11:01:42 AM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 11:01:42 AM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 11:01:42 AM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 11:01:42 AM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 11:01:42 AM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 11:01:42 AM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 11:01:42 AM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 11:01:42 AM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 11:01:42 AM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 11:01:42 AM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 11:01:42 AM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 11:01:42 AM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 11:01:42 AM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 11:01:42 AM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 11:01:42 AM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 11:01:42 AM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 11:01:42 AM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 11:01:42 AM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 11:01:42 AM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 11:01:42 AM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 11:01:42 AM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 11:01:42 AM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 11:01:42 AM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 11:01:42 AM INFO:LOG_LEVEL: DEBUG
2025/03/01 11:01:42 AM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 11:01:42 AM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 11:01:42 AM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 11:01:42 AM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 11:01:42 AM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 11:01:42 AM INFO:perc_target: 0.5
2025/03/01 11:01:42 AM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 11:01:42 AM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 11:01:42 AM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 11:01:42 AM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 11:01:42 AM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 11:01:42 AM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 11:01:42 AM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 11:01:42 AM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 11:01:42 AM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 11:01:42 AM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 11:01:42 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 11:01:42 AM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 11:01:42 AM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 11:01:42 AM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 11:01:42 AM INFO:Session state Setup complete
2025/03/01 11:01:42 AM INFO:initialize_session_state executed successfully
2025/03/01 11:01:42 AM INFO:Package setup complete
2025/03/01 11:01:42 AM INFO:get_git_version executed successfully
2025/03/01 11:01:42 AM INFO:App Version: v20.130
2025/03/01 11:01:42 AM INFO:Switched to page: Paid Visits
2025/03/01 11:01:42 AM INFO:load_cleaned_data executed successfully
2025/03/01 11:01:43 AM INFO:load_and_filter_data executed successfully
2025/03/01 11:01:43 AM INFO:display_summary_statistics executed successfully
2025/03/01 11:01:43 AM INFO:display_textual_insights executed successfully
2025/03/01 11:01:43 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:01:43 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:01:43 AM INFO:display_visualizations executed successfully
2025/03/01 11:01:43 AM INFO:display_data_page executed successfully
2025/03/01 11:01:43 AM INFO:pagesetup executed successfully
2025/03/01 11:01:43 AM INFO:Data already loaded in session state.
2025/03/01 11:01:57 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 11:01:57 AM INFO:Setting up the package
2025/03/01 11:01:57 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 11:01:57 AM INFO:get_git_version executed successfully
2025/03/01 11:01:57 AM INFO:Version: v20.115
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:init_state_var executed successfully
2025/03/01 11:01:57 AM INFO:Session_state variables initialized
2025/03/01 11:01:57 AM INFO:menu_selection: {'title': 'Dubious Donors', 'function': <function mod_dubious_donors_page at 0x0000018CE1FF9E10>}
2025/03/01 11:01:57 AM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 11:01:57 AM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 11:01:57 AM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 11:01:57 AM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 11:01:57 AM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 11:01:57 AM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 11:01:57 AM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 11:01:57 AM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 11:01:57 AM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 11:01:57 AM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 11:01:57 AM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 11:01:57 AM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 11:01:57 AM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 11:01:57 AM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 11:01:57 AM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 11:01:57 AM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 11:01:57 AM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 11:01:57 AM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 11:01:57 AM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 11:01:57 AM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 11:01:57 AM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 11:01:57 AM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 11:01:57 AM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 11:01:57 AM INFO:LOG_LEVEL: DEBUG
2025/03/01 11:01:57 AM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 11:01:57 AM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 11:01:57 AM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 11:01:57 AM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 11:01:57 AM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 11:01:57 AM INFO:perc_target: 0.5
2025/03/01 11:01:57 AM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 11:01:57 AM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 11:01:57 AM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 11:01:57 AM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 11:01:57 AM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 11:01:57 AM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 11:01:57 AM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 11:01:57 AM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 11:01:57 AM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 11:01:57 AM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 11:01:57 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 11:01:57 AM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 11:01:57 AM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 11:01:57 AM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 11:01:57 AM INFO:Session state Setup complete
2025/03/01 11:01:57 AM INFO:initialize_session_state executed successfully
2025/03/01 11:01:57 AM INFO:Package setup complete
2025/03/01 11:01:57 AM INFO:get_git_version executed successfully
2025/03/01 11:01:57 AM INFO:App Version: v20.130
2025/03/01 11:01:57 AM INFO:Switched to page: Dubious Donors
2025/03/01 11:01:57 AM INFO:load_cleaned_data executed successfully
2025/03/01 11:01:57 AM INFO:load_and_filter_data executed successfully
2025/03/01 11:01:57 AM INFO:display_summary_statistics executed successfully
2025/03/01 11:01:57 AM INFO:display_textual_insights executed successfully
2025/03/01 11:01:57 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:01:58 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:01:58 AM INFO:display_visualizations executed successfully
2025/03/01 11:01:58 AM INFO:display_data_page executed successfully
2025/03/01 11:01:58 AM INFO:pagesetup executed successfully
2025/03/01 11:01:58 AM INFO:Data already loaded in session state.
2025/03/01 11:02:01 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 11:02:01 AM INFO:Setting up the package
2025/03/01 11:02:01 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 11:02:01 AM INFO:get_git_version executed successfully
2025/03/01 11:02:01 AM INFO:Version: v20.115
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:init_state_var executed successfully
2025/03/01 11:02:01 AM INFO:Session_state variables initialized
2025/03/01 11:02:01 AM INFO:menu_selection: {'title': 'Dubious Donations', 'function': <function mod_dubious_donations_page at 0x0000018CE1FF9990>}
2025/03/01 11:02:01 AM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 11:02:01 AM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 11:02:01 AM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 11:02:01 AM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 11:02:01 AM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 11:02:01 AM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 11:02:01 AM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 11:02:01 AM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 11:02:01 AM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 11:02:01 AM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 11:02:01 AM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 11:02:01 AM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 11:02:01 AM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 11:02:01 AM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 11:02:01 AM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 11:02:01 AM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 11:02:01 AM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 11:02:01 AM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 11:02:01 AM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 11:02:01 AM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 11:02:01 AM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 11:02:01 AM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 11:02:01 AM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 11:02:01 AM INFO:LOG_LEVEL: DEBUG
2025/03/01 11:02:01 AM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 11:02:01 AM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 11:02:01 AM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 11:02:01 AM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 11:02:01 AM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 11:02:01 AM INFO:perc_target: 0.5
2025/03/01 11:02:01 AM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 11:02:01 AM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 11:02:01 AM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 11:02:01 AM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 11:02:01 AM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 11:02:01 AM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 11:02:01 AM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 11:02:01 AM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 11:02:01 AM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 11:02:01 AM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 11:02:01 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 11:02:01 AM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 11:02:01 AM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 11:02:01 AM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 11:02:01 AM INFO:Session state Setup complete
2025/03/01 11:02:01 AM INFO:initialize_session_state executed successfully
2025/03/01 11:02:01 AM INFO:Package setup complete
2025/03/01 11:02:01 AM INFO:get_git_version executed successfully
2025/03/01 11:02:01 AM INFO:App Version: v20.130
2025/03/01 11:02:01 AM INFO:Switched to page: Dubious Donations
2025/03/01 11:02:01 AM INFO:load_cleaned_data executed successfully
2025/03/01 11:02:01 AM INFO:load_and_filter_data executed successfully
2025/03/01 11:02:01 AM INFO:display_summary_statistics executed successfully
2025/03/01 11:02:01 AM INFO:display_textual_insights executed successfully
2025/03/01 11:02:02 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:02:02 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:02:02 AM INFO:display_visualizations executed successfully
2025/03/01 11:02:02 AM INFO:display_data_page executed successfully
2025/03/01 11:02:02 AM INFO:pagesetup executed successfully
2025/03/01 11:02:02 AM INFO:Data already loaded in session state.
2025/03/01 11:07:18 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 11:07:18 AM INFO:Setting up the package
2025/03/01 11:07:18 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 11:07:18 AM INFO:get_git_version executed successfully
2025/03/01 11:07:18 AM INFO:Version: v20.115
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:init_state_var executed successfully
2025/03/01 11:07:18 AM INFO:Session_state variables initialized
2025/03/01 11:07:18 AM INFO:menu_selection: {'title': 'Corporate Donations per Entity', 'function': <function mod_corporate_donations_per_entity_page at 0x0000018CE1FF9B40>}
2025/03/01 11:07:18 AM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 11:07:18 AM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 11:07:18 AM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 11:07:18 AM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 11:07:18 AM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 11:07:18 AM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 11:07:18 AM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 11:07:18 AM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 11:07:18 AM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 11:07:18 AM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 11:07:18 AM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 11:07:18 AM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 11:07:18 AM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 11:07:18 AM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 11:07:18 AM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 11:07:18 AM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 11:07:18 AM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 11:07:18 AM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 11:07:18 AM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 11:07:18 AM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 11:07:18 AM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 11:07:18 AM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 11:07:18 AM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 11:07:18 AM INFO:LOG_LEVEL: DEBUG
2025/03/01 11:07:18 AM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 11:07:18 AM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 11:07:18 AM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 11:07:18 AM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 11:07:18 AM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 11:07:18 AM INFO:perc_target: 0.5
2025/03/01 11:07:18 AM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 11:07:18 AM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 11:07:18 AM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 11:07:18 AM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 11:07:18 AM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 11:07:18 AM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 11:07:18 AM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 11:07:18 AM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 11:07:18 AM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 11:07:18 AM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 11:07:18 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 11:07:18 AM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 11:07:18 AM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 11:07:18 AM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 11:07:18 AM INFO:Session state Setup complete
2025/03/01 11:07:18 AM INFO:initialize_session_state executed successfully
2025/03/01 11:07:18 AM INFO:Package setup complete
2025/03/01 11:07:18 AM INFO:get_git_version executed successfully
2025/03/01 11:07:18 AM INFO:App Version: v20.130
2025/03/01 11:07:18 AM INFO:Switched to page: Corporate Donations per Entity
2025/03/01 11:07:18 AM INFO:load_cleaned_data executed successfully
2025/03/01 11:07:18 AM INFO:load_and_filter_pergroup executed successfully
2025/03/01 11:07:18 AM INFO:display_summary_statistics executed successfully
2025/03/01 11:07:18 AM INFO:display_textual_insights executed successfully
2025/03/01 11:07:18 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:07:19 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:07:19 AM INFO:display_visualizations executed successfully
2025/03/01 11:07:19 AM INFO:pagesetup executed successfully
2025/03/01 11:07:19 AM INFO:Data already loaded in session state.
2025/03/01 11:07:20 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 11:07:20 AM INFO:Setting up the package
2025/03/01 11:07:20 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 11:07:20 AM INFO:get_git_version executed successfully
2025/03/01 11:07:20 AM INFO:Version: v20.115
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:init_state_var executed successfully
2025/03/01 11:07:20 AM INFO:Session_state variables initialized
2025/03/01 11:07:20 AM INFO:menu_selection: {'title': 'Sponsorship per Entity ', 'function': <function mod_sponsorships_per_entity_page at 0x0000018CE1FF9510>}
2025/03/01 11:07:20 AM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 11:07:20 AM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 11:07:20 AM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 11:07:20 AM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 11:07:20 AM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 11:07:20 AM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 11:07:20 AM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 11:07:20 AM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 11:07:20 AM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 11:07:20 AM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 11:07:20 AM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 11:07:20 AM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 11:07:20 AM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 11:07:20 AM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 11:07:20 AM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 11:07:20 AM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 11:07:20 AM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 11:07:20 AM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 11:07:20 AM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 11:07:20 AM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 11:07:20 AM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 11:07:20 AM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 11:07:20 AM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 11:07:20 AM INFO:LOG_LEVEL: DEBUG
2025/03/01 11:07:20 AM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 11:07:20 AM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 11:07:20 AM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 11:07:20 AM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 11:07:20 AM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 11:07:20 AM INFO:perc_target: 0.5
2025/03/01 11:07:20 AM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 11:07:20 AM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 11:07:20 AM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 11:07:20 AM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 11:07:20 AM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 11:07:20 AM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 11:07:20 AM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 11:07:20 AM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 11:07:20 AM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 11:07:20 AM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 11:07:20 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 11:07:20 AM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 11:07:20 AM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 11:07:20 AM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 11:07:20 AM INFO:Session state Setup complete
2025/03/01 11:07:20 AM INFO:initialize_session_state executed successfully
2025/03/01 11:07:20 AM INFO:Package setup complete
2025/03/01 11:07:20 AM INFO:get_git_version executed successfully
2025/03/01 11:07:20 AM INFO:App Version: v20.130
2025/03/01 11:07:20 AM INFO:Switched to page: Sponsorship per Entity 
2025/03/01 11:07:20 AM INFO:load_cleaned_data executed successfully
2025/03/01 11:07:20 AM INFO:load_and_filter_pergroup executed successfully
2025/03/01 11:07:20 AM INFO:display_summary_statistics executed successfully
2025/03/01 11:07:20 AM INFO:display_textual_insights executed successfully
2025/03/01 11:07:21 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:07:21 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:07:21 AM INFO:display_visualizations executed successfully
2025/03/01 11:07:21 AM INFO:pagesetup executed successfully
2025/03/01 11:07:21 AM INFO:Data already loaded in session state.
2025/03/01 11:07:23 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 11:07:23 AM INFO:Setting up the package
2025/03/01 11:07:23 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 11:07:23 AM INFO:get_git_version executed successfully
2025/03/01 11:07:23 AM INFO:Version: v20.115
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:init_state_var executed successfully
2025/03/01 11:07:23 AM INFO:Session_state variables initialized
2025/03/01 11:07:23 AM INFO:menu_selection: {'title': 'Paid Visits per Entity', 'function': <function mod_visits_per_regulated_entity at 0x0000018CE1FF92D0>}
2025/03/01 11:07:23 AM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 11:07:23 AM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 11:07:23 AM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 11:07:23 AM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 11:07:23 AM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 11:07:23 AM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 11:07:23 AM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 11:07:23 AM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 11:07:23 AM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 11:07:23 AM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 11:07:23 AM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 11:07:23 AM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 11:07:23 AM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 11:07:23 AM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 11:07:23 AM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 11:07:23 AM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 11:07:23 AM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 11:07:23 AM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 11:07:23 AM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 11:07:23 AM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 11:07:23 AM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 11:07:23 AM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 11:07:23 AM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 11:07:23 AM INFO:LOG_LEVEL: DEBUG
2025/03/01 11:07:23 AM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 11:07:23 AM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 11:07:23 AM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 11:07:23 AM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 11:07:23 AM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 11:07:23 AM INFO:perc_target: 0.5
2025/03/01 11:07:23 AM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 11:07:23 AM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 11:07:23 AM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 11:07:23 AM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 11:07:23 AM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 11:07:23 AM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 11:07:23 AM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 11:07:23 AM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 11:07:23 AM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 11:07:23 AM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 11:07:23 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 11:07:23 AM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 11:07:23 AM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 11:07:23 AM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 11:07:23 AM INFO:Session state Setup complete
2025/03/01 11:07:23 AM INFO:initialize_session_state executed successfully
2025/03/01 11:07:23 AM INFO:Package setup complete
2025/03/01 11:07:23 AM INFO:get_git_version executed successfully
2025/03/01 11:07:23 AM INFO:App Version: v20.130
2025/03/01 11:07:23 AM INFO:Switched to page: Paid Visits per Entity
2025/03/01 11:07:23 AM INFO:load_cleaned_data executed successfully
2025/03/01 11:07:23 AM INFO:load_and_filter_pergroup executed successfully
2025/03/01 11:07:23 AM INFO:display_summary_statistics executed successfully
2025/03/01 11:07:24 AM INFO:display_textual_insights executed successfully
2025/03/01 11:07:24 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:07:24 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:07:24 AM INFO:display_visualizations executed successfully
2025/03/01 11:07:24 AM INFO:pagesetup executed successfully
2025/03/01 11:07:24 AM INFO:Data already loaded in session state.
2025/03/01 11:07:31 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 11:07:31 AM INFO:Setting up the package
2025/03/01 11:07:31 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 11:07:31 AM INFO:get_git_version executed successfully
2025/03/01 11:07:31 AM INFO:Version: v20.115
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:init_state_var executed successfully
2025/03/01 11:07:31 AM INFO:Session_state variables initialized
2025/03/01 11:07:31 AM INFO:menu_selection: {'title': 'Donors per Regulated Entity', 'function': <function mod_regulated_entity_per_donors_page at 0x0000018CE1FF9CF0>}
2025/03/01 11:07:31 AM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 11:07:31 AM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 11:07:31 AM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 11:07:31 AM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 11:07:31 AM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 11:07:31 AM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 11:07:31 AM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 11:07:31 AM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 11:07:31 AM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 11:07:31 AM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 11:07:31 AM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 11:07:31 AM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 11:07:31 AM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 11:07:31 AM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 11:07:31 AM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 11:07:31 AM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 11:07:31 AM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 11:07:31 AM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 11:07:31 AM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 11:07:31 AM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 11:07:31 AM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 11:07:31 AM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 11:07:31 AM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 11:07:31 AM INFO:LOG_LEVEL: DEBUG
2025/03/01 11:07:31 AM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 11:07:31 AM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 11:07:31 AM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 11:07:31 AM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 11:07:31 AM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 11:07:31 AM INFO:perc_target: 0.5
2025/03/01 11:07:31 AM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 11:07:31 AM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 11:07:31 AM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 11:07:31 AM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 11:07:31 AM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 11:07:31 AM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 11:07:31 AM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 11:07:31 AM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 11:07:31 AM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 11:07:31 AM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 11:07:31 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 11:07:31 AM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 11:07:31 AM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 11:07:31 AM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 11:07:31 AM INFO:Session state Setup complete
2025/03/01 11:07:31 AM INFO:initialize_session_state executed successfully
2025/03/01 11:07:31 AM INFO:Package setup complete
2025/03/01 11:07:31 AM INFO:get_git_version executed successfully
2025/03/01 11:07:31 AM INFO:App Version: v20.130
2025/03/01 11:07:31 AM INFO:Switched to page: Donors per Regulated Entity
2025/03/01 11:07:31 AM INFO:load_cleaned_data executed successfully
2025/03/01 11:07:31 AM INFO:load_and_filter_pergroup executed successfully
2025/03/01 11:07:31 AM INFO:display_summary_statistics executed successfully
2025/03/01 11:07:31 AM INFO:display_textual_insights executed successfully
2025/03/01 11:07:32 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:07:32 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:07:32 AM INFO:display_visualizations executed successfully
2025/03/01 11:07:32 AM INFO:pagesetup executed successfully
2025/03/01 11:07:32 AM INFO:Data already loaded in session state.
2025/03/01 11:07:33 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 11:07:33 AM INFO:Setting up the package
2025/03/01 11:07:33 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 11:07:33 AM INFO:get_git_version executed successfully
2025/03/01 11:07:33 AM INFO:Version: v20.115
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:init_state_var executed successfully
2025/03/01 11:07:33 AM INFO:Session_state variables initialized
2025/03/01 11:07:33 AM INFO:menu_selection: {'title': 'Dubious Donors per Regulated Entity', 'function': <function mod_dubious_donors_per_entity_page at 0x0000018CE1FF9D80>}
2025/03/01 11:07:33 AM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 11:07:33 AM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 11:07:33 AM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 11:07:33 AM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 11:07:33 AM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 11:07:33 AM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 11:07:33 AM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 11:07:33 AM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 11:07:33 AM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 11:07:33 AM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 11:07:33 AM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 11:07:33 AM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 11:07:33 AM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 11:07:33 AM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 11:07:33 AM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 11:07:33 AM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 11:07:33 AM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 11:07:33 AM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 11:07:33 AM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 11:07:33 AM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 11:07:33 AM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 11:07:33 AM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 11:07:33 AM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 11:07:33 AM INFO:LOG_LEVEL: DEBUG
2025/03/01 11:07:33 AM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 11:07:33 AM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 11:07:33 AM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 11:07:33 AM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 11:07:33 AM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 11:07:33 AM INFO:perc_target: 0.5
2025/03/01 11:07:33 AM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 11:07:33 AM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 11:07:33 AM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 11:07:33 AM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 11:07:33 AM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 11:07:33 AM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 11:07:33 AM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 11:07:33 AM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 11:07:33 AM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 11:07:33 AM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 11:07:33 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 11:07:33 AM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 11:07:33 AM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 11:07:33 AM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 11:07:33 AM INFO:Session state Setup complete
2025/03/01 11:07:33 AM INFO:initialize_session_state executed successfully
2025/03/01 11:07:33 AM INFO:Package setup complete
2025/03/01 11:07:33 AM INFO:get_git_version executed successfully
2025/03/01 11:07:33 AM INFO:App Version: v20.130
2025/03/01 11:07:33 AM INFO:Switched to page: Dubious Donors per Regulated Entity
2025/03/01 11:07:33 AM INFO:load_cleaned_data executed successfully
2025/03/01 11:07:34 AM INFO:load_and_filter_pergroup executed successfully
2025/03/01 11:07:34 AM INFO:display_summary_statistics executed successfully
2025/03/01 11:07:34 AM INFO:display_textual_insights executed successfully
2025/03/01 11:07:34 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:07:34 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:07:34 AM INFO:display_visualizations executed successfully
2025/03/01 11:07:34 AM INFO:pagesetup executed successfully
2025/03/01 11:07:34 AM INFO:Data already loaded in session state.
2025/03/01 11:07:37 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 11:07:37 AM INFO:Setting up the package
2025/03/01 11:07:37 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 11:07:37 AM INFO:get_git_version executed successfully
2025/03/01 11:07:37 AM INFO:Version: v20.115
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:init_state_var executed successfully
2025/03/01 11:07:37 AM INFO:Session_state variables initialized
2025/03/01 11:07:37 AM INFO:menu_selection: {'title': 'Dubious Donations per Regulated Entity', 'function': <function mod_dubious_donations_per_entity_page at 0x0000018CE1FF9A20>}
2025/03/01 11:07:37 AM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 11:07:37 AM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 11:07:37 AM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 11:07:37 AM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 11:07:37 AM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 11:07:37 AM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 11:07:37 AM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 11:07:37 AM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 11:07:37 AM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 11:07:37 AM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 11:07:37 AM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 11:07:37 AM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 11:07:37 AM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 11:07:37 AM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 11:07:37 AM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 11:07:37 AM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 11:07:37 AM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 11:07:37 AM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 11:07:37 AM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 11:07:37 AM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 11:07:37 AM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 11:07:37 AM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 11:07:37 AM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 11:07:37 AM INFO:LOG_LEVEL: DEBUG
2025/03/01 11:07:37 AM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 11:07:37 AM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 11:07:37 AM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 11:07:37 AM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 11:07:37 AM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 11:07:37 AM INFO:perc_target: 0.5
2025/03/01 11:07:37 AM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 11:07:37 AM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 11:07:37 AM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 11:07:37 AM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 11:07:37 AM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 11:07:37 AM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 11:07:37 AM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 11:07:37 AM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 11:07:37 AM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 11:07:37 AM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 11:07:37 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 11:07:37 AM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 11:07:37 AM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 11:07:37 AM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 11:07:37 AM INFO:Session state Setup complete
2025/03/01 11:07:37 AM INFO:initialize_session_state executed successfully
2025/03/01 11:07:37 AM INFO:Package setup complete
2025/03/01 11:07:37 AM INFO:get_git_version executed successfully
2025/03/01 11:07:37 AM INFO:App Version: v20.130
2025/03/01 11:07:37 AM INFO:Switched to page: Dubious Donations per Regulated Entity
2025/03/01 11:07:37 AM INFO:load_cleaned_data executed successfully
2025/03/01 11:07:37 AM INFO:load_and_filter_pergroup executed successfully
2025/03/01 11:07:37 AM INFO:display_summary_statistics executed successfully
2025/03/01 11:07:37 AM INFO:display_textual_insights executed successfully
2025/03/01 11:07:37 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:07:38 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:07:38 AM INFO:display_visualizations executed successfully
2025/03/01 11:07:38 AM INFO:pagesetup executed successfully
2025/03/01 11:07:38 AM INFO:Data already loaded in session state.
2025/03/01 11:07:39 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 11:07:39 AM INFO:Setting up the package
2025/03/01 11:07:39 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 11:07:39 AM INFO:get_git_version executed successfully
2025/03/01 11:07:39 AM INFO:Version: v20.115
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:init_state_var executed successfully
2025/03/01 11:07:39 AM INFO:Session_state variables initialized
2025/03/01 11:07:39 AM INFO:menu_selection: {'title': 'Corporate Donations by Donor', 'function': <function mod_corporate_donations_per_donor_page at 0x0000018CE1FF9900>}
2025/03/01 11:07:39 AM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 11:07:39 AM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 11:07:39 AM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 11:07:39 AM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 11:07:39 AM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 11:07:39 AM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 11:07:39 AM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 11:07:39 AM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 11:07:39 AM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 11:07:39 AM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 11:07:39 AM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 11:07:39 AM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 11:07:39 AM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 11:07:39 AM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 11:07:39 AM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 11:07:39 AM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 11:07:39 AM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 11:07:39 AM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 11:07:39 AM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 11:07:39 AM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 11:07:39 AM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 11:07:39 AM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 11:07:39 AM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 11:07:39 AM INFO:LOG_LEVEL: DEBUG
2025/03/01 11:07:39 AM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 11:07:39 AM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 11:07:39 AM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 11:07:39 AM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 11:07:39 AM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 11:07:39 AM INFO:perc_target: 0.5
2025/03/01 11:07:39 AM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 11:07:39 AM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 11:07:39 AM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 11:07:39 AM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 11:07:39 AM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 11:07:39 AM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 11:07:39 AM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 11:07:39 AM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 11:07:39 AM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 11:07:39 AM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 11:07:39 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 11:07:39 AM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 11:07:39 AM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 11:07:39 AM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 11:07:39 AM INFO:Session state Setup complete
2025/03/01 11:07:39 AM INFO:initialize_session_state executed successfully
2025/03/01 11:07:39 AM INFO:Package setup complete
2025/03/01 11:07:39 AM INFO:get_git_version executed successfully
2025/03/01 11:07:39 AM INFO:App Version: v20.130
2025/03/01 11:07:39 AM INFO:Switched to page: Corporate Donations by Donor
2025/03/01 11:07:39 AM INFO:load_cleaned_data executed successfully
2025/03/01 11:07:39 AM INFO:load_and_filter_perentity executed successfully
2025/03/01 11:07:39 AM ERROR:Error in pagesetup: too many values to unpack (expected 2)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 76, in mod_corporate_donations_per_donor_page
    display_per_entity_data_page("CorporateDonations_ftr",
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_entity.py", line 20, in display_data_page
    cleaned_df, filtered_df = load_and_filter_perentity(
ValueError: too many values to unpack (expected 2)
2025/03/01 11:07:39 AM CRITICAL:Menu setup crashed: too many values to unpack (expected 2)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 36, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 76, in mod_corporate_donations_per_donor_page
    display_per_entity_data_page("CorporateDonations_ftr",
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_entity.py", line 20, in display_data_page
    cleaned_df, filtered_df = load_and_filter_perentity(
ValueError: too many values to unpack (expected 2)
2025/03/01 11:07:51 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 11:07:51 AM INFO:Setting up the package
2025/03/01 11:07:51 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 11:07:51 AM INFO:get_git_version executed successfully
2025/03/01 11:07:51 AM INFO:Version: v20.115
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:init_state_var executed successfully
2025/03/01 11:07:51 AM INFO:Session_state variables initialized
2025/03/01 11:07:51 AM INFO:menu_selection: {'title': 'Sponsorships per Donor', 'function': <function mod_sponsorships_per_donor_page at 0x0000018CE1FF96C0>}
2025/03/01 11:07:51 AM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 11:07:51 AM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 11:07:51 AM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 11:07:51 AM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 11:07:51 AM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 11:07:51 AM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 11:07:51 AM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 11:07:51 AM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 11:07:51 AM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 11:07:51 AM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 11:07:51 AM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 11:07:51 AM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 11:07:51 AM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 11:07:51 AM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 11:07:51 AM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 11:07:51 AM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 11:07:51 AM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 11:07:51 AM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 11:07:51 AM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 11:07:51 AM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 11:07:51 AM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 11:07:51 AM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 11:07:51 AM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 11:07:51 AM INFO:LOG_LEVEL: DEBUG
2025/03/01 11:07:51 AM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 11:07:51 AM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 11:07:51 AM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 11:07:51 AM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 11:07:51 AM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 11:07:51 AM INFO:perc_target: 0.5
2025/03/01 11:07:51 AM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 11:07:51 AM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 11:07:51 AM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 11:07:51 AM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 11:07:51 AM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 11:07:51 AM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 11:07:51 AM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 11:07:51 AM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 11:07:51 AM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 11:07:51 AM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 11:07:51 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 11:07:51 AM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 11:07:51 AM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 11:07:51 AM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 11:07:51 AM INFO:Session state Setup complete
2025/03/01 11:07:51 AM INFO:initialize_session_state executed successfully
2025/03/01 11:07:51 AM INFO:Package setup complete
2025/03/01 11:07:51 AM INFO:get_git_version executed successfully
2025/03/01 11:07:51 AM INFO:App Version: v20.130
2025/03/01 11:07:51 AM INFO:Switched to page: Sponsorships per Donor
2025/03/01 11:07:51 AM INFO:load_cleaned_data executed successfully
2025/03/01 11:07:51 AM INFO:load_and_filter_pergroup executed successfully
2025/03/01 11:07:51 AM INFO:display_summary_statistics executed successfully
2025/03/01 11:07:51 AM INFO:display_textual_insights executed successfully
2025/03/01 11:07:51 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:07:52 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:07:52 AM INFO:display_visualizations executed successfully
2025/03/01 11:07:52 AM INFO:pagesetup executed successfully
2025/03/01 11:07:52 AM INFO:Data already loaded in session state.
2025/03/01 11:07:53 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 11:07:53 AM INFO:Setting up the package
2025/03/01 11:07:53 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 11:07:53 AM INFO:get_git_version executed successfully
2025/03/01 11:07:53 AM INFO:Version: v20.115
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:init_state_var executed successfully
2025/03/01 11:07:53 AM INFO:Session_state variables initialized
2025/03/01 11:07:53 AM INFO:menu_selection: {'title': 'Corporate Donations by Donor', 'function': <function mod_corporate_donations_per_donor_page at 0x0000018CE1FF9900>}
2025/03/01 11:07:53 AM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 11:07:53 AM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 11:07:53 AM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 11:07:53 AM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 11:07:53 AM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 11:07:53 AM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 11:07:53 AM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 11:07:53 AM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 11:07:53 AM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 11:07:53 AM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 11:07:53 AM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 11:07:53 AM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 11:07:53 AM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 11:07:53 AM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 11:07:53 AM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 11:07:53 AM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 11:07:53 AM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 11:07:53 AM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 11:07:53 AM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 11:07:53 AM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 11:07:53 AM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 11:07:53 AM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 11:07:53 AM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 11:07:53 AM INFO:LOG_LEVEL: DEBUG
2025/03/01 11:07:53 AM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 11:07:53 AM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 11:07:53 AM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 11:07:53 AM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 11:07:53 AM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 11:07:53 AM INFO:perc_target: 0.5
2025/03/01 11:07:53 AM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 11:07:53 AM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 11:07:53 AM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 11:07:53 AM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 11:07:53 AM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 11:07:53 AM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 11:07:53 AM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 11:07:53 AM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 11:07:53 AM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 11:07:53 AM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 11:07:53 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 11:07:53 AM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 11:07:53 AM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 11:07:53 AM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 11:07:53 AM INFO:Session state Setup complete
2025/03/01 11:07:53 AM INFO:initialize_session_state executed successfully
2025/03/01 11:07:53 AM INFO:Package setup complete
2025/03/01 11:07:53 AM INFO:get_git_version executed successfully
2025/03/01 11:07:53 AM INFO:App Version: v20.130
2025/03/01 11:07:53 AM INFO:Switched to page: Corporate Donations by Donor
2025/03/01 11:07:53 AM INFO:load_cleaned_data executed successfully
2025/03/01 11:07:54 AM INFO:load_and_filter_perentity executed successfully
2025/03/01 11:07:54 AM ERROR:Error in pagesetup: too many values to unpack (expected 2)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 76, in mod_corporate_donations_per_donor_page
    display_per_entity_data_page("CorporateDonations_ftr",
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_entity.py", line 20, in display_data_page
    cleaned_df, filtered_df = load_and_filter_perentity(
ValueError: too many values to unpack (expected 2)
2025/03/01 11:07:54 AM CRITICAL:Menu setup crashed: too many values to unpack (expected 2)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 36, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 76, in mod_corporate_donations_per_donor_page
    display_per_entity_data_page("CorporateDonations_ftr",
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_entity.py", line 20, in display_data_page
    cleaned_df, filtered_df = load_and_filter_perentity(
ValueError: too many values to unpack (expected 2)
2025/03/01 11:07:58 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 11:07:58 AM INFO:Setting up the package
2025/03/01 11:07:58 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 11:07:58 AM INFO:get_git_version executed successfully
2025/03/01 11:07:58 AM INFO:Version: v20.115
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:init_state_var executed successfully
2025/03/01 11:07:58 AM INFO:Session_state variables initialized
2025/03/01 11:07:58 AM INFO:menu_selection: {'title': 'Paid Visits per Donor', 'function': <function mod_visits_per_donor at 0x0000018CE1FF9630>}
2025/03/01 11:07:58 AM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 11:07:58 AM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 11:07:58 AM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 11:07:58 AM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 11:07:58 AM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 11:07:58 AM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 11:07:58 AM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 11:07:59 AM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 11:07:59 AM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 11:07:59 AM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 11:07:59 AM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 11:07:59 AM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 11:07:59 AM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 11:07:59 AM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 11:07:59 AM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 11:07:59 AM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 11:07:59 AM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 11:07:59 AM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 11:07:59 AM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 11:07:59 AM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 11:07:59 AM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 11:07:59 AM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 11:07:59 AM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 11:07:59 AM INFO:LOG_LEVEL: DEBUG
2025/03/01 11:07:59 AM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 11:07:59 AM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 11:07:59 AM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 11:07:59 AM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 11:07:59 AM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 11:07:59 AM INFO:perc_target: 0.5
2025/03/01 11:07:59 AM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 11:07:59 AM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 11:07:59 AM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 11:07:59 AM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 11:07:59 AM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 11:07:59 AM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 11:07:59 AM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 11:07:59 AM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 11:07:59 AM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 11:07:59 AM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 11:07:59 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 11:07:59 AM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 11:07:59 AM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 11:07:59 AM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 11:07:59 AM INFO:Session state Setup complete
2025/03/01 11:07:59 AM INFO:initialize_session_state executed successfully
2025/03/01 11:07:59 AM INFO:Package setup complete
2025/03/01 11:07:59 AM INFO:get_git_version executed successfully
2025/03/01 11:07:59 AM INFO:App Version: v20.130
2025/03/01 11:07:59 AM INFO:Switched to page: Paid Visits per Donor
2025/03/01 11:07:59 AM INFO:load_cleaned_data executed successfully
2025/03/01 11:07:59 AM INFO:load_and_filter_pergroup executed successfully
2025/03/01 11:07:59 AM INFO:display_summary_statistics executed successfully
2025/03/01 11:07:59 AM INFO:display_textual_insights executed successfully
2025/03/01 11:07:59 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:07:59 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:07:59 AM INFO:display_visualizations executed successfully
2025/03/01 11:07:59 AM INFO:pagesetup executed successfully
2025/03/01 11:07:59 AM INFO:Data already loaded in session state.
2025/03/01 11:08:00 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 11:08:00 AM INFO:Setting up the package
2025/03/01 11:08:00 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 11:08:00 AM INFO:get_git_version executed successfully
2025/03/01 11:08:00 AM INFO:Version: v20.115
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:init_state_var executed successfully
2025/03/01 11:08:00 AM INFO:Session_state variables initialized
2025/03/01 11:08:00 AM INFO:menu_selection: {'title': 'Regulated Entities per Donor', 'function': <function mod_regulated_donor_per_entity_page at 0x0000018CE1FF9C60>}
2025/03/01 11:08:00 AM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 11:08:00 AM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 11:08:00 AM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 11:08:00 AM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 11:08:00 AM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 11:08:00 AM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 11:08:00 AM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 11:08:00 AM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 11:08:00 AM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 11:08:00 AM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 11:08:00 AM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 11:08:00 AM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 11:08:00 AM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 11:08:00 AM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 11:08:00 AM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 11:08:00 AM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 11:08:00 AM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 11:08:00 AM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 11:08:00 AM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 11:08:00 AM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 11:08:00 AM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 11:08:00 AM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 11:08:00 AM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 11:08:00 AM INFO:LOG_LEVEL: DEBUG
2025/03/01 11:08:00 AM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 11:08:00 AM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 11:08:00 AM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 11:08:00 AM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 11:08:00 AM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 11:08:00 AM INFO:perc_target: 0.5
2025/03/01 11:08:00 AM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 11:08:00 AM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 11:08:00 AM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 11:08:00 AM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 11:08:00 AM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 11:08:00 AM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 11:08:00 AM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 11:08:00 AM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 11:08:00 AM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 11:08:00 AM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 11:08:00 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 11:08:00 AM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 11:08:00 AM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 11:08:00 AM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 11:08:00 AM INFO:Session state Setup complete
2025/03/01 11:08:00 AM INFO:initialize_session_state executed successfully
2025/03/01 11:08:00 AM INFO:Package setup complete
2025/03/01 11:08:01 AM INFO:get_git_version executed successfully
2025/03/01 11:08:01 AM INFO:App Version: v20.130
2025/03/01 11:08:01 AM INFO:Switched to page: Regulated Entities per Donor
2025/03/01 11:08:01 AM INFO:load_cleaned_data executed successfully
2025/03/01 11:08:01 AM INFO:load_and_filter_pergroup executed successfully
2025/03/01 11:08:01 AM INFO:display_summary_statistics executed successfully
2025/03/01 11:08:01 AM INFO:display_textual_insights executed successfully
2025/03/01 11:08:01 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:08:01 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:08:01 AM INFO:display_visualizations executed successfully
2025/03/01 11:08:01 AM INFO:pagesetup executed successfully
2025/03/01 11:08:01 AM INFO:Data already loaded in session state.
2025/03/01 11:08:02 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 11:08:02 AM INFO:Setting up the package
2025/03/01 11:08:02 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 11:08:02 AM INFO:get_git_version executed successfully
2025/03/01 11:08:02 AM INFO:Version: v20.115
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:init_state_var executed successfully
2025/03/01 11:08:02 AM INFO:Session_state variables initialized
2025/03/01 11:08:02 AM INFO:menu_selection: {'title': 'Dubious donations per Donor', 'function': <function mod_dubious_donations_per_donor_page at 0x0000018CE1FF9AB0>}
2025/03/01 11:08:02 AM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 11:08:02 AM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 11:08:02 AM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 11:08:02 AM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 11:08:02 AM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 11:08:02 AM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 11:08:02 AM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 11:08:03 AM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 11:08:03 AM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 11:08:03 AM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 11:08:03 AM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 11:08:03 AM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 11:08:03 AM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 11:08:03 AM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 11:08:03 AM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 11:08:03 AM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 11:08:03 AM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 11:08:03 AM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 11:08:03 AM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 11:08:03 AM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 11:08:03 AM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 11:08:03 AM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 11:08:03 AM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 11:08:03 AM INFO:LOG_LEVEL: DEBUG
2025/03/01 11:08:03 AM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 11:08:03 AM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 11:08:03 AM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 11:08:03 AM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 11:08:03 AM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 11:08:03 AM INFO:perc_target: 0.5
2025/03/01 11:08:03 AM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 11:08:03 AM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 11:08:03 AM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 11:08:03 AM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 11:08:03 AM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 11:08:03 AM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 11:08:03 AM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 11:08:03 AM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 11:08:03 AM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 11:08:03 AM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 11:08:03 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 11:08:03 AM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 11:08:03 AM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 11:08:03 AM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 11:08:03 AM INFO:Session state Setup complete
2025/03/01 11:08:03 AM INFO:initialize_session_state executed successfully
2025/03/01 11:08:03 AM INFO:Package setup complete
2025/03/01 11:08:03 AM INFO:get_git_version executed successfully
2025/03/01 11:08:03 AM INFO:App Version: v20.130
2025/03/01 11:08:03 AM INFO:Switched to page: Dubious donations per Donor
2025/03/01 11:08:03 AM INFO:load_cleaned_data executed successfully
2025/03/01 11:08:03 AM INFO:load_and_filter_pergroup executed successfully
2025/03/01 11:08:03 AM INFO:display_summary_statistics executed successfully
2025/03/01 11:08:03 AM INFO:display_textual_insights executed successfully
2025/03/01 11:08:03 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:08:03 AM INFO:plot_bar_line_by_year executed successfully
2025/03/01 11:08:03 AM INFO:display_visualizations executed successfully
2025/03/01 11:08:03 AM INFO:pagesetup executed successfully
2025/03/01 11:08:03 AM INFO:Data already loaded in session state.
2025/03/01 11:08:05 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 11:08:05 AM INFO:Setting up the package
2025/03/01 11:08:05 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 11:08:05 AM INFO:get_git_version executed successfully
2025/03/01 11:08:05 AM INFO:Version: v20.115
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:init_state_var executed successfully
2025/03/01 11:08:05 AM INFO:Session_state variables initialized
2025/03/01 11:08:05 AM INFO:menu_selection: {'title': 'Donations by Political Party', 'function': <function mod_donations_per_political_party_page at 0x0000018CE1FF9BD0>}
2025/03/01 11:08:05 AM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 11:08:05 AM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 11:08:05 AM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 11:08:05 AM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 11:08:05 AM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 11:08:05 AM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 11:08:05 AM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 11:08:05 AM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 11:08:05 AM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 11:08:05 AM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 11:08:05 AM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 11:08:05 AM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 11:08:05 AM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 11:08:05 AM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 11:08:05 AM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 11:08:05 AM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 11:08:05 AM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 11:08:05 AM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 11:08:05 AM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 11:08:05 AM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 11:08:05 AM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 11:08:05 AM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 11:08:05 AM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 11:08:05 AM INFO:LOG_LEVEL: DEBUG
2025/03/01 11:08:05 AM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 11:08:05 AM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 11:08:05 AM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 11:08:05 AM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 11:08:05 AM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 11:08:05 AM INFO:perc_target: 0.5
2025/03/01 11:08:05 AM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 11:08:05 AM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 11:08:05 AM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 11:08:05 AM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 11:08:05 AM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 11:08:05 AM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 11:08:05 AM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 11:08:05 AM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 11:08:05 AM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 11:08:05 AM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 11:08:05 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 11:08:05 AM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 11:08:05 AM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 11:08:05 AM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 11:08:05 AM INFO:Session state Setup complete
2025/03/01 11:08:05 AM INFO:initialize_session_state executed successfully
2025/03/01 11:08:05 AM INFO:Package setup complete
2025/03/01 11:08:05 AM INFO:get_git_version executed successfully
2025/03/01 11:08:05 AM INFO:App Version: v20.130
2025/03/01 11:08:05 AM INFO:Switched to page: Donations by Political Party
2025/03/01 11:08:05 AM INFO:load_cleaned_data executed successfully
2025/03/01 11:08:05 AM ERROR:Error in load_and_filter_pergroup: 'DonorType'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 191, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 234, in pandas._libs.index.IndexEngine._get_loc_duplicates
  File "index.pyx", line 242, in pandas._libs.index.IndexEngine._maybe_get_bool_indexer
  File "index.pyx", line 134, in pandas._libs.index._unpack_bool_indexer
KeyError: 'DonorType'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 415, in load_and_filter_pergroup
    cleaned_c_df = apply_filters(cleaned_df, current_target)
  File "H:\VScode\dashboard_demo-1\components\filters.py", line 37, in apply_filters
    conditions.append(df[column] == value)
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'DonorType'
2025/03/01 11:08:05 AM ERROR:Error in pagesetup: 'DonorType'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 191, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 234, in pandas._libs.index.IndexEngine._get_loc_duplicates
  File "index.pyx", line 242, in pandas._libs.index.IndexEngine._maybe_get_bool_indexer
  File "index.pyx", line 134, in pandas._libs.index._unpack_bool_indexer
KeyError: 'DonorType'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 110, in mod_donations_per_political_party_page
    display_per_group_data_page("PoliticalParty_ftr",
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_donor.py", line 28, in display_data_page
    ) = load_and_filter_pergroup(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 415, in load_and_filter_pergroup
    cleaned_c_df = apply_filters(cleaned_df, current_target)
  File "H:\VScode\dashboard_demo-1\components\filters.py", line 37, in apply_filters
    conditions.append(df[column] == value)
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'DonorType'
2025/03/01 11:08:05 AM CRITICAL:Menu setup crashed: 'DonorType'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 191, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 234, in pandas._libs.index.IndexEngine._get_loc_duplicates
  File "index.pyx", line 242, in pandas._libs.index.IndexEngine._maybe_get_bool_indexer
  File "index.pyx", line 134, in pandas._libs.index._unpack_bool_indexer
KeyError: 'DonorType'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 36, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 110, in mod_donations_per_political_party_page
    display_per_group_data_page("PoliticalParty_ftr",
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_donor.py", line 28, in display_data_page
    ) = load_and_filter_pergroup(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 415, in load_and_filter_pergroup
    cleaned_c_df = apply_filters(cleaned_df, current_target)
  File "H:\VScode\dashboard_demo-1\components\filters.py", line 37, in apply_filters
    conditions.append(df[column] == value)
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'DonorType'
2025/03/01 11:08:19 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 11:08:19 AM INFO:Setting up the package
2025/03/01 11:08:19 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 11:08:19 AM INFO:get_git_version executed successfully
2025/03/01 11:08:19 AM INFO:Version: v20.115
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:init_state_var executed successfully
2025/03/01 11:08:19 AM INFO:Session_state variables initialized
2025/03/01 11:08:19 AM INFO:menu_selection: {'title': 'Donations by Political Party', 'function': <function mod_donations_per_political_party_page at 0x0000018CE1FF9BD0>}
2025/03/01 11:08:19 AM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 11:08:19 AM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 11:08:19 AM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 11:08:19 AM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 11:08:19 AM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 11:08:19 AM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 11:08:19 AM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 11:08:19 AM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 11:08:19 AM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 11:08:19 AM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 11:08:19 AM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 11:08:19 AM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 11:08:19 AM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 11:08:19 AM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 11:08:19 AM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 11:08:19 AM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 11:08:19 AM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 11:08:19 AM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 11:08:19 AM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 11:08:19 AM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 11:08:19 AM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 11:08:19 AM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 11:08:19 AM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 11:08:19 AM INFO:LOG_LEVEL: DEBUG
2025/03/01 11:08:19 AM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 11:08:19 AM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 11:08:19 AM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 11:08:19 AM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 11:08:19 AM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 11:08:19 AM INFO:perc_target: 0.5
2025/03/01 11:08:19 AM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 11:08:19 AM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 11:08:19 AM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 11:08:19 AM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 11:08:19 AM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 11:08:19 AM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 11:08:19 AM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 11:08:19 AM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 11:08:19 AM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 11:08:19 AM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 11:08:19 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 11:08:19 AM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 11:08:19 AM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 11:08:19 AM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 11:08:19 AM INFO:Session state Setup complete
2025/03/01 11:08:19 AM INFO:initialize_session_state executed successfully
2025/03/01 11:08:19 AM INFO:Package setup complete
2025/03/01 11:08:19 AM INFO:get_git_version executed successfully
2025/03/01 11:08:19 AM INFO:App Version: v20.130
2025/03/01 11:08:19 AM INFO:Switched to page: Donations by Political Party
2025/03/01 11:08:19 AM INFO:load_cleaned_data executed successfully
2025/03/01 11:08:19 AM ERROR:Error in load_and_filter_pergroup: 'DonorType'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 191, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 234, in pandas._libs.index.IndexEngine._get_loc_duplicates
  File "index.pyx", line 242, in pandas._libs.index.IndexEngine._maybe_get_bool_indexer
  File "index.pyx", line 134, in pandas._libs.index._unpack_bool_indexer
KeyError: 'DonorType'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 415, in load_and_filter_pergroup
    cleaned_c_df = apply_filters(cleaned_df, current_target)
  File "H:\VScode\dashboard_demo-1\components\filters.py", line 37, in apply_filters
    conditions.append(df[column] == value)
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'DonorType'
2025/03/01 11:08:19 AM ERROR:Error in pagesetup: 'DonorType'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 191, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 234, in pandas._libs.index.IndexEngine._get_loc_duplicates
  File "index.pyx", line 242, in pandas._libs.index.IndexEngine._maybe_get_bool_indexer
  File "index.pyx", line 134, in pandas._libs.index._unpack_bool_indexer
KeyError: 'DonorType'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 110, in mod_donations_per_political_party_page
    display_per_group_data_page("PoliticalParty_ftr",
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_donor.py", line 28, in display_data_page
    ) = load_and_filter_pergroup(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 415, in load_and_filter_pergroup
    cleaned_c_df = apply_filters(cleaned_df, current_target)
  File "H:\VScode\dashboard_demo-1\components\filters.py", line 37, in apply_filters
    conditions.append(df[column] == value)
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'DonorType'
2025/03/01 11:08:19 AM CRITICAL:Menu setup crashed: 'DonorType'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 191, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 234, in pandas._libs.index.IndexEngine._get_loc_duplicates
  File "index.pyx", line 242, in pandas._libs.index.IndexEngine._maybe_get_bool_indexer
  File "index.pyx", line 134, in pandas._libs.index._unpack_bool_indexer
KeyError: 'DonorType'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 36, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 110, in mod_donations_per_political_party_page
    display_per_group_data_page("PoliticalParty_ftr",
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_donor.py", line 28, in display_data_page
    ) = load_and_filter_pergroup(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 415, in load_and_filter_pergroup
    cleaned_c_df = apply_filters(cleaned_df, current_target)
  File "H:\VScode\dashboard_demo-1\components\filters.py", line 37, in apply_filters
    conditions.append(df[column] == value)
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'DonorType'
2025/03/01 11:08:23 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 11:08:23 AM INFO:Setting up the package
2025/03/01 11:08:23 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 11:08:23 AM INFO:get_git_version executed successfully
2025/03/01 11:08:23 AM INFO:Version: v20.115
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:init_state_var executed successfully
2025/03/01 11:08:23 AM INFO:Session_state variables initialized
2025/03/01 11:08:23 AM INFO:menu_selection: {'title': 'Notes on Data and Manipulations', 'function': <function notesondataprep_body at 0x0000018CE1FC3AC0>}
2025/03/01 11:08:23 AM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 11:08:23 AM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 11:08:23 AM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 11:08:23 AM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 11:08:23 AM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 11:08:23 AM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 11:08:23 AM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 11:08:23 AM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 11:08:23 AM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 11:08:23 AM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 11:08:23 AM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 11:08:23 AM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 11:08:23 AM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 11:08:23 AM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 11:08:23 AM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 11:08:23 AM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 11:08:23 AM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 11:08:23 AM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 11:08:23 AM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 11:08:23 AM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 11:08:23 AM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 11:08:23 AM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 11:08:23 AM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 11:08:23 AM INFO:LOG_LEVEL: DEBUG
2025/03/01 11:08:23 AM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 11:08:23 AM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 11:08:23 AM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 11:08:23 AM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 11:08:23 AM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 11:08:23 AM INFO:perc_target: 0.5
2025/03/01 11:08:23 AM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 11:08:23 AM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 11:08:23 AM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 11:08:23 AM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 11:08:23 AM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 11:08:23 AM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 11:08:23 AM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 11:08:23 AM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 11:08:23 AM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 11:08:23 AM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 11:08:23 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 11:08:23 AM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 11:08:23 AM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 11:08:23 AM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 11:08:23 AM INFO:Session state Setup complete
2025/03/01 11:08:23 AM INFO:initialize_session_state executed successfully
2025/03/01 11:08:23 AM INFO:Package setup complete
2025/03/01 11:08:23 AM INFO:get_git_version executed successfully
2025/03/01 11:08:23 AM INFO:App Version: v20.130
2025/03/01 11:08:23 AM INFO:Switched to page: Notes on Data and Manipulations
2025/03/01 11:08:23 AM INFO:pagesetup executed successfully
2025/03/01 11:08:23 AM INFO:Data already loaded in session state.
2025/03/01 11:08:26 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 11:08:26 AM INFO:Setting up the package
2025/03/01 11:08:26 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 11:08:26 AM INFO:get_git_version executed successfully
2025/03/01 11:08:26 AM INFO:Version: v20.115
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:init_state_var executed successfully
2025/03/01 11:08:26 AM INFO:Session_state variables initialized
2025/03/01 11:08:26 AM INFO:menu_selection: {'title': 'Donations by Political Party', 'function': <function mod_donations_per_political_party_page at 0x0000018CE1FF9BD0>}
2025/03/01 11:08:26 AM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 11:08:26 AM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 11:08:26 AM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 11:08:26 AM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 11:08:26 AM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 11:08:26 AM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 11:08:26 AM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 11:08:26 AM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 11:08:26 AM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 11:08:26 AM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 11:08:26 AM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 11:08:26 AM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 11:08:26 AM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 11:08:26 AM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 11:08:26 AM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 11:08:26 AM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 11:08:26 AM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 11:08:26 AM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 11:08:26 AM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 11:08:26 AM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 11:08:26 AM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 11:08:26 AM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 11:08:26 AM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 11:08:26 AM INFO:LOG_LEVEL: DEBUG
2025/03/01 11:08:26 AM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 11:08:26 AM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 11:08:26 AM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 11:08:26 AM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 11:08:26 AM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 11:08:26 AM INFO:perc_target: 0.5
2025/03/01 11:08:26 AM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 11:08:26 AM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 11:08:26 AM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 11:08:26 AM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 11:08:26 AM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 11:08:26 AM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 11:08:26 AM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 11:08:26 AM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 11:08:26 AM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 11:08:26 AM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 11:08:26 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 11:08:26 AM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 11:08:26 AM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 11:08:26 AM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 11:08:26 AM INFO:Session state Setup complete
2025/03/01 11:08:26 AM INFO:initialize_session_state executed successfully
2025/03/01 11:08:26 AM INFO:Package setup complete
2025/03/01 11:08:26 AM INFO:get_git_version executed successfully
2025/03/01 11:08:26 AM INFO:App Version: v20.130
2025/03/01 11:08:26 AM INFO:Switched to page: Donations by Political Party
2025/03/01 11:08:26 AM INFO:load_cleaned_data executed successfully
2025/03/01 11:08:26 AM ERROR:Error in load_and_filter_pergroup: 'DonorType'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 191, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 234, in pandas._libs.index.IndexEngine._get_loc_duplicates
  File "index.pyx", line 242, in pandas._libs.index.IndexEngine._maybe_get_bool_indexer
  File "index.pyx", line 134, in pandas._libs.index._unpack_bool_indexer
KeyError: 'DonorType'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 415, in load_and_filter_pergroup
    cleaned_c_df = apply_filters(cleaned_df, current_target)
  File "H:\VScode\dashboard_demo-1\components\filters.py", line 37, in apply_filters
    conditions.append(df[column] == value)
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'DonorType'
2025/03/01 11:08:26 AM ERROR:Error in pagesetup: 'DonorType'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 191, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 234, in pandas._libs.index.IndexEngine._get_loc_duplicates
  File "index.pyx", line 242, in pandas._libs.index.IndexEngine._maybe_get_bool_indexer
  File "index.pyx", line 134, in pandas._libs.index._unpack_bool_indexer
KeyError: 'DonorType'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 110, in mod_donations_per_political_party_page
    display_per_group_data_page("PoliticalParty_ftr",
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_donor.py", line 28, in display_data_page
    ) = load_and_filter_pergroup(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 415, in load_and_filter_pergroup
    cleaned_c_df = apply_filters(cleaned_df, current_target)
  File "H:\VScode\dashboard_demo-1\components\filters.py", line 37, in apply_filters
    conditions.append(df[column] == value)
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'DonorType'
2025/03/01 11:08:26 AM CRITICAL:Menu setup crashed: 'DonorType'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 191, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 234, in pandas._libs.index.IndexEngine._get_loc_duplicates
  File "index.pyx", line 242, in pandas._libs.index.IndexEngine._maybe_get_bool_indexer
  File "index.pyx", line 134, in pandas._libs.index._unpack_bool_indexer
KeyError: 'DonorType'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 36, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 110, in mod_donations_per_political_party_page
    display_per_group_data_page("PoliticalParty_ftr",
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_donor.py", line 28, in display_data_page
    ) = load_and_filter_pergroup(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 415, in load_and_filter_pergroup
    cleaned_c_df = apply_filters(cleaned_df, current_target)
  File "H:\VScode\dashboard_demo-1\components\filters.py", line 37, in apply_filters
    conditions.append(df[column] == value)
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'DonorType'
2025/03/01 11:08:30 AM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 11:08:30 AM INFO:Setting up the package
2025/03/01 11:08:30 AM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 11:08:30 AM INFO:get_git_version executed successfully
2025/03/01 11:08:30 AM INFO:Version: v20.115
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:init_state_var executed successfully
2025/03/01 11:08:30 AM INFO:Session_state variables initialized
2025/03/01 11:08:30 AM INFO:menu_selection: {'title': 'Introduction', 'function': <function introduction_body at 0x0000018CE1BC68C0>}
2025/03/01 11:08:30 AM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 11:08:30 AM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 11:08:30 AM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 11:08:30 AM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 11:08:30 AM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 11:08:30 AM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 11:08:30 AM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 11:08:30 AM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 11:08:30 AM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 11:08:30 AM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 11:08:30 AM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 11:08:30 AM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 11:08:30 AM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 11:08:30 AM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 11:08:30 AM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 11:08:30 AM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 11:08:30 AM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 11:08:30 AM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 11:08:30 AM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 11:08:30 AM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 11:08:30 AM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 11:08:30 AM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 11:08:30 AM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 11:08:30 AM INFO:LOG_LEVEL: DEBUG
2025/03/01 11:08:30 AM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 11:08:30 AM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 11:08:30 AM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 11:08:30 AM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 11:08:30 AM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 11:08:30 AM INFO:perc_target: 0.5
2025/03/01 11:08:30 AM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 11:08:30 AM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 11:08:30 AM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 11:08:30 AM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 11:08:30 AM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 11:08:30 AM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 11:08:30 AM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 11:08:30 AM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 11:08:30 AM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 11:08:30 AM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 11:08:30 AM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 11:08:30 AM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 11:08:30 AM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 11:08:30 AM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 11:08:30 AM INFO:Session state Setup complete
2025/03/01 11:08:30 AM INFO:initialize_session_state executed successfully
2025/03/01 11:08:30 AM INFO:Package setup complete
2025/03/01 11:08:30 AM INFO:get_git_version executed successfully
2025/03/01 11:08:30 AM INFO:App Version: v20.130
2025/03/01 11:08:30 AM INFO:Switched to page: Introduction
2025/03/01 11:08:30 AM INFO:pagesetup executed successfully
2025/03/01 11:08:30 AM INFO:Data already loaded in session state.
2025/03/01 12:02:53 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 12:02:53 PM INFO:get_git_version executed successfully
2025/03/01 12:03:20 PM INFO:get_git_version executed successfully
2025/03/01 12:03:20 PM INFO:get_git_version executed successfully
2025/03/01 12:03:40 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 12:03:48 PM INFO:Setting up the package
2025/03/01 12:03:48 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 12:03:48 PM INFO:get_git_version executed successfully
2025/03/01 12:03:48 PM INFO:Version: v20.116
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:init_state_var executed successfully
2025/03/01 12:03:48 PM INFO:Session_state variables initialized
2025/03/01 12:03:48 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 12:03:48 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 12:03:48 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 12:03:48 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 12:03:48 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 12:03:48 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 12:03:48 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 12:03:48 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 12:03:48 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 12:03:48 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 12:03:48 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 12:03:48 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 12:03:48 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 12:03:48 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 12:03:48 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 12:03:48 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 12:03:48 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 12:03:48 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 12:03:48 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 12:03:48 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 12:03:48 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 12:03:48 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 12:03:48 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 12:03:48 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 12:03:48 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 12:03:48 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 12:03:48 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 12:03:48 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 12:03:48 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 12:03:48 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 12:03:48 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 12:03:48 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 12:03:48 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 12:03:48 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 12:03:48 PM INFO:perc_target: 0.5
2025/03/01 12:03:48 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 12:03:48 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 12:03:48 PM INFO:Session state Setup complete
2025/03/01 12:03:48 PM INFO:initialize_session_state executed successfully
2025/03/01 12:03:48 PM INFO:Package setup complete
2025/03/01 12:04:00 PM INFO:get_git_version executed successfully
2025/03/01 12:04:01 PM ERROR:Error in pagesetup: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 36, in pagesetup
    app = MultiPage(app_name="UK Political Donations")  # Create an instance
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 14, in __init__
    st.set_page_config(
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\commands\page_config.py", line 274, in set_page_config
    ctx.enqueue(msg)
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\scriptrunner_utils\script_run_context.py", line 179, in enqueue
    raise StreamlitSetPageConfigMustBeFirstCommandError()
streamlit.errors.StreamlitSetPageConfigMustBeFirstCommandError: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
2025/03/01 12:04:40 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 12:04:41 PM INFO:get_git_version executed successfully
2025/03/01 12:04:45 PM INFO:get_git_version executed successfully
2025/03/01 12:04:51 PM INFO:get_git_version executed successfully
2025/03/01 12:05:01 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 12:05:01 PM INFO:Setting up the package
2025/03/01 12:05:01 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 12:05:01 PM INFO:get_git_version executed successfully
2025/03/01 12:05:01 PM INFO:Version: v20.116
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:01 PM INFO:init_state_var executed successfully
2025/03/01 12:05:02 PM INFO:init_state_var executed successfully
2025/03/01 12:05:02 PM INFO:init_state_var executed successfully
2025/03/01 12:05:02 PM INFO:init_state_var executed successfully
2025/03/01 12:05:02 PM INFO:init_state_var executed successfully
2025/03/01 12:05:02 PM INFO:init_state_var executed successfully
2025/03/01 12:05:02 PM INFO:Session_state variables initialized
2025/03/01 12:05:02 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 12:05:02 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 12:05:02 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 12:05:02 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 12:05:02 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 12:05:02 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 12:05:02 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 12:05:02 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 12:05:02 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 12:05:02 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 12:05:02 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 12:05:02 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 12:05:02 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 12:05:02 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 12:05:02 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 12:05:02 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 12:05:02 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 12:05:02 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 12:05:02 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 12:05:02 PM INFO:perc_target: 0.5
2025/03/01 12:05:02 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 12:05:02 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 12:05:02 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 12:05:02 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 12:05:02 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 12:05:02 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 12:05:02 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 12:05:02 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 12:05:02 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 12:05:02 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 12:05:02 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 12:05:02 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 12:05:02 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 12:05:02 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 12:05:02 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 12:05:02 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 12:05:02 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 12:05:02 PM INFO:Session state Setup complete
2025/03/01 12:05:02 PM INFO:initialize_session_state executed successfully
2025/03/01 12:05:02 PM INFO:Package setup complete
2025/03/01 12:05:53 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 12:05:53 PM INFO:Setting up the package
2025/03/01 12:05:53 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 12:05:53 PM INFO:get_git_version executed successfully
2025/03/01 12:05:53 PM INFO:Version: v20.116
2025/03/01 12:05:53 PM INFO:init_state_var executed successfully
2025/03/01 12:05:53 PM INFO:init_state_var executed successfully
2025/03/01 12:05:53 PM INFO:init_state_var executed successfully
2025/03/01 12:05:53 PM INFO:init_state_var executed successfully
2025/03/01 12:05:53 PM INFO:init_state_var executed successfully
2025/03/01 12:05:53 PM INFO:init_state_var executed successfully
2025/03/01 12:05:53 PM INFO:init_state_var executed successfully
2025/03/01 12:05:53 PM INFO:init_state_var executed successfully
2025/03/01 12:05:57 PM INFO:init_state_var executed successfully
2025/03/01 12:05:57 PM INFO:init_state_var executed successfully
2025/03/01 12:05:57 PM INFO:init_state_var executed successfully
2025/03/01 12:05:57 PM INFO:init_state_var executed successfully
2025/03/01 12:06:02 PM INFO:get_git_version executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:init_state_var executed successfully
2025/03/01 12:07:05 PM INFO:Session_state variables initialized
2025/03/01 12:07:05 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 12:07:05 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 12:07:05 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 12:07:05 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 12:07:05 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 12:07:05 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 12:07:05 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 12:07:05 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 12:07:05 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 12:07:05 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 12:07:05 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 12:07:05 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 12:07:05 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 12:07:05 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 12:07:05 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 12:07:05 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 12:07:05 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 12:07:05 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 12:07:05 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 12:07:05 PM INFO:perc_target: 0.5
2025/03/01 12:07:05 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 12:07:05 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 12:07:05 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 12:07:05 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 12:07:05 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 12:07:05 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 12:07:05 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 12:07:05 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 12:07:05 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 12:07:06 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 12:07:06 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 12:07:06 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 12:07:06 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 12:07:06 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 12:07:06 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 12:07:06 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 12:07:06 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 12:07:06 PM INFO:Session state Setup complete
2025/03/01 12:07:06 PM INFO:initialize_session_state executed successfully
2025/03/01 12:07:06 PM INFO:Package setup complete
2025/03/01 12:07:41 PM ERROR:Error in pagesetup: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 36, in pagesetup
    app = MultiPage(app_name="UK Political Donations")  # Create an instance
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 14, in __init__
    st.set_page_config(
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\commands\page_config.py", line 274, in set_page_config
    ctx.enqueue(msg)
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\scriptrunner_utils\script_run_context.py", line 179, in enqueue
    raise StreamlitSetPageConfigMustBeFirstCommandError()
streamlit.errors.StreamlitSetPageConfigMustBeFirstCommandError: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
2025/03/01 12:07:41 PM CRITICAL:Menu setup crashed: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 36, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 36, in pagesetup
    app = MultiPage(app_name="UK Political Donations")  # Create an instance
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 14, in __init__
    st.set_page_config(
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\commands\page_config.py", line 274, in set_page_config
    ctx.enqueue(msg)
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\scriptrunner_utils\script_run_context.py", line 179, in enqueue
    raise StreamlitSetPageConfigMustBeFirstCommandError()
streamlit.errors.StreamlitSetPageConfigMustBeFirstCommandError: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
2025/03/01 12:08:32 PM INFO:get_git_version executed successfully
2025/03/01 12:08:32 PM INFO:App Version: v20.131
2025/03/01 12:08:32 PM INFO:Switched to page: Introduction
2025/03/01 12:08:32 PM INFO:pagesetup executed successfully
2025/03/01 12:08:41 PM INFO:No data found in session state, running firstload()
2025/03/01 12:08:44 PM INFO:map_filename: regentity_map_fname
2025/03/01 12:08:44 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 12:08:44 PM INFO:Dedupe by file
2025/03/01 12:08:44 PM INFO:Dedupe by file, shape: (65279, 34)
2025/03/01 12:08:44 PM INFO:dedupe_entity_file executed successfully
2025/03/01 12:08:44 PM INFO:map_filename: donor_map_fname
2025/03/01 12:08:44 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 12:08:44 PM INFO:Dedupe by file
2025/03/01 12:08:45 PM INFO:Dedupe by file, shape: (66011, 40)
2025/03/01 12:08:45 PM INFO:dedupe_entity_file executed successfully
2025/03/01 12:08:45 PM INFO:Data cleanup completed, shape: (66011, 40)
2025/03/01 12:08:45 PM INFO:raw_data_cleanup executed successfully
2025/03/01 12:08:46 PM INFO:load_raw_data executed successfully
2025/03/01 12:08:46 PM INFO:get_raw_data executed successfully
2025/03/01 12:08:46 PM INFO:load_data_to_session executed successfully
2025/03/01 12:08:49 PM ERROR:Missing column: 'PartyName' in loaddata_df. Available columns: Index(['ECRef', 'OriginalRegulatedEntityName', 'RegulatedEntityType', 'Value',
       'AcceptedDate', 'AccountingUnitName', 'OriginalDonorName',
       'AccountingUnitsAsCentralParty', 'IsSponsorship', 'DonorStatus',
       'RegulatedDoneeType', 'CompanyRegistrationNumber', 'Postcode',
       'DonationType', 'NatureOfDonation', 'PurposeOfVisit', 'DonationAction',
       'ReceivedDate', 'ReportedDate', 'IsReportedPrePoll',
       'ReportingPeriodName', 'IsBequest', 'IsAggregation',
       'OriginalRegulatedEntityId', 'AccountingUnitId', 'OriginalDonorId',
       'CampaigningName', 'RegisterName', 'IsIrishSource',
       'CleanedRegulatedEntityId', 'CleanedRegulatedEntityName',
       'OriginalRegulatedEntityName', 'RegulatedEntityId',
       'RegulatedEntityName', 'CleanedDonorId', 'ParentDonorName',
       'CleanedDonorName', 'DonorStatus2', 'DonorId', 'DonorName',
       'EventCount', 'YearReceived', 'MonthReceived', 'YearMonthReceived'],
      dtype='object')
2025/03/01 12:08:49 PM INFO:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/01 12:08:49 PM INFO:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/01 12:08:50 PM INFO:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 12:08:50 PM INFO:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/01 12:08:50 PM INFO:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 12:08:50 PM INFO:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/01 12:08:50 PM INFO:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/01 12:08:50 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 12:08:50 PM INFO:map_mp_to_party executed successfully
2025/03/01 12:08:51 PM INFO:Election Dates not found in session, loading now.
2025/03/01 12:08:51 PM INFO:ElectionDatesDict: {'1929': {'dissolution': datetime.date(1929, 5, 10), 'election': datetime.date(1929, 5, 30)}, '1931': {'dissolution': datetime.date(1931, 10, 7), 'election': datetime.date(1931, 10, 27)}, '1935': {'dissolution': datetime.date(1935, 10, 25), 'election': datetime.date(1935, 11, 14)}, '1945': {'dissolution': datetime.date(1945, 6, 15), 'election': datetime.date(1945, 7, 5)}, '1950': {'dissolution': datetime.date(1950, 2, 3), 'election': datetime.date(1950, 2, 23)}, '1951': {'dissolution': datetime.date(1951, 10, 5), 'election': datetime.date(1951, 10, 25)}, '1955': {'dissolution': datetime.date(1955, 5, 6), 'election': datetime.date(1955, 5, 26)}, '1959': {'dissolution': datetime.date(1959, 9, 18), 'election': datetime.date(1959, 10, 8)}, '1964': {'dissolution': datetime.date(1964, 9, 25), 'election': datetime.date(1964, 10, 15)}, '1966': {'dissolution': datetime.date(1966, 3, 10), 'election': datetime.date(1966, 3, 31)}, '1970': {'dissolution': datetime.date(1970, 5, 29), 'election': datetime.date(1970, 6, 18)}, '1974 (Feb)': {'dissolution': datetime.date(1974, 2, 8), 'election': datetime.date(1974, 2, 28)}, '1974 (Oct)': {'dissolution': datetime.date(1974, 9, 20), 'election': datetime.date(1974, 10, 10)}, '1979': {'dissolution': datetime.date(1979, 4, 7), 'election': datetime.date(1979, 5, 3)}, '1983': {'dissolution': datetime.date(1983, 5, 13), 'election': datetime.date(1983, 6, 9)}, '1987': {'dissolution': datetime.date(1987, 5, 18), 'election': datetime.date(1987, 6, 11)}, '1992': {'dissolution': datetime.date(1992, 3, 16), 'election': datetime.date(1992, 4, 9)}, '1997': {'dissolution': datetime.date(1997, 4, 8), 'election': datetime.date(1997, 5, 1)}, '2001': {'dissolution': datetime.date(2001, 5, 14), 'election': datetime.date(2001, 6, 7)}, '2005': {'dissolution': datetime.date(2005, 4, 11), 'election': datetime.date(2005, 5, 5)}, '2010': {'dissolution': datetime.date(2010, 4, 12), 'election': datetime.date(2010, 5, 6)}, '2015': {'dissolution': datetime.date(2015, 3, 30), 'election': datetime.date(2015, 5, 7)}, '2017': {'dissolution': datetime.date(2017, 5, 3), 'election': datetime.date(2017, 6, 8)}, '2019': {'dissolution': datetime.date(2019, 11, 6), 'election': datetime.date(2019, 12, 12)}}
2025/03/01 12:08:51 PM INFO:Election Dates Loaded Successfully.
2025/03/01 12:08:51 PM INFO:load_election_dates executed successfully
2025/03/01 12:09:19 PM INFO:Cleaned Data completed, shape: (79737, 58)
2025/03/01 12:09:20 PM INFO:load_cleaned_data executed successfully
2025/03/01 12:09:20 PM INFO:get_cleaned_data executed successfully
2025/03/01 12:09:20 PM INFO:load_data_to_session executed successfully
2025/03/01 12:09:20 PM INFO:load_entity_summary_data executed successfully
2025/03/01 12:09:20 PM INFO:get_party_summary_data executed successfully
2025/03/01 12:09:20 PM INFO:load_data_to_session executed successfully
2025/03/01 12:09:20 PM INFO:load_donorList_data executed successfully
2025/03/01 12:09:20 PM INFO:get_donor_data executed successfully
2025/03/01 12:09:20 PM INFO:load_data_to_session executed successfully
2025/03/01 12:09:20 PM INFO:load_regulated_entity_data executed successfully
2025/03/01 12:09:20 PM INFO:get_regentity_data executed successfully
2025/03/01 12:09:20 PM INFO:load_data_to_session executed successfully
2025/03/01 12:09:20 PM INFO:firstload executed successfully
2025/03/01 12:09:29 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 12:09:29 PM INFO:Setting up the package
2025/03/01 12:09:29 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 12:09:29 PM INFO:get_git_version executed successfully
2025/03/01 12:09:29 PM INFO:Version: v20.116
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:init_state_var executed successfully
2025/03/01 12:09:29 PM INFO:Session_state variables initialized
2025/03/01 12:09:29 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 12:09:29 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 12:09:29 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 12:09:29 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 12:09:29 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 12:09:29 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 12:09:29 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 12:09:29 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 12:09:29 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 12:09:29 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 12:09:29 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 12:09:29 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 12:09:29 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 12:09:29 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 12:09:29 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 12:09:29 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 12:09:29 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 12:09:29 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 12:09:29 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 12:09:29 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 12:09:29 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 12:09:29 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 12:09:29 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 12:09:29 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 12:09:29 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 12:09:29 PM INFO:perc_target: 0.5
2025/03/01 12:09:29 PM INFO:menu_selection: {'title': 'Head Line Figures', 'function': <function hlf_body at 0x000002118C666020>}
2025/03/01 12:09:29 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 12:09:29 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 12:09:29 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 12:09:29 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 12:09:29 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 12:09:29 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 12:09:29 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 12:09:29 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 12:09:29 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 12:09:29 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 12:09:29 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 12:09:29 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 12:09:29 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 12:09:29 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 12:09:29 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 12:09:29 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 12:09:29 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 12:09:29 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 12:09:29 PM INFO:Session state Setup complete
2025/03/01 12:09:29 PM INFO:initialize_session_state executed successfully
2025/03/01 12:09:29 PM INFO:Package setup complete
2025/03/01 12:09:41 PM INFO:get_git_version executed successfully
2025/03/01 12:09:41 PM INFO:App Version: v20.131
2025/03/01 12:09:41 PM INFO:Switched to page: Head Line Figures
2025/03/01 12:09:43 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 12:09:44 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 12:09:44 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 12:09:44 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 12:09:44 PM INFO:plot_pie_chart executed successfully
2025/03/01 12:09:44 PM INFO:plot_pie_chart executed successfully
2025/03/01 12:09:44 PM INFO:pagesetup executed successfully
2025/03/01 12:09:48 PM INFO:Data already loaded in session state.
2025/03/01 12:19:24 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 12:19:25 PM INFO:get_git_version executed successfully
2025/03/01 12:19:26 PM INFO:get_git_version executed successfully
2025/03/01 12:19:26 PM INFO:get_git_version executed successfully
2025/03/01 12:19:26 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 12:19:26 PM INFO:Setting up the package
2025/03/01 12:19:26 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 12:19:26 PM INFO:get_git_version executed successfully
2025/03/01 12:19:26 PM INFO:Version: v20.116
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:init_state_var executed successfully
2025/03/01 12:19:26 PM INFO:Session_state variables initialized
2025/03/01 12:19:26 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 12:19:26 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 12:19:26 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 12:19:26 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 12:19:26 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 12:19:26 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 12:19:26 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 12:19:26 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 12:19:26 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 12:19:26 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 12:19:26 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 12:19:26 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 12:19:26 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 12:19:26 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 12:19:26 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 12:19:26 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 12:19:26 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 12:19:26 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 12:19:26 PM INFO:perc_target: 0.5
2025/03/01 12:19:26 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 12:19:26 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 12:19:26 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 12:19:26 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 12:19:26 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 12:19:26 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 12:19:26 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 12:19:26 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 12:19:26 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 12:19:26 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 12:19:26 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 12:19:26 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 12:19:26 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 12:19:26 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 12:19:26 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 12:19:26 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 12:19:26 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 12:19:26 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 12:19:26 PM INFO:Session state Setup complete
2025/03/01 12:19:26 PM INFO:initialize_session_state executed successfully
2025/03/01 12:19:26 PM INFO:Package setup complete
2025/03/01 12:19:26 PM INFO:get_git_version executed successfully
2025/03/01 12:19:27 PM ERROR:Error in pagesetup: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 36, in pagesetup
    app = MultiPage(app_name="UK Political Donations")  # Create an instance
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 14, in __init__
    st.set_page_config(
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\commands\page_config.py", line 274, in set_page_config
    ctx.enqueue(msg)
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\scriptrunner_utils\script_run_context.py", line 179, in enqueue
    raise StreamlitSetPageConfigMustBeFirstCommandError()
streamlit.errors.StreamlitSetPageConfigMustBeFirstCommandError: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
2025/03/01 12:19:27 PM CRITICAL:Menu setup crashed: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 36, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 36, in pagesetup
    app = MultiPage(app_name="UK Political Donations")  # Create an instance
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 14, in __init__
    st.set_page_config(
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\commands\page_config.py", line 274, in set_page_config
    ctx.enqueue(msg)
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\scriptrunner_utils\script_run_context.py", line 179, in enqueue
    raise StreamlitSetPageConfigMustBeFirstCommandError()
streamlit.errors.StreamlitSetPageConfigMustBeFirstCommandError: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
2025/03/01 12:19:42 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 12:19:42 PM INFO:Setting up the package
2025/03/01 12:19:42 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 12:19:42 PM INFO:get_git_version executed successfully
2025/03/01 12:19:42 PM INFO:Version: v20.116
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:init_state_var executed successfully
2025/03/01 12:19:42 PM INFO:Session_state variables initialized
2025/03/01 12:19:42 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 12:19:42 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 12:19:42 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 12:19:42 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 12:19:42 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 12:19:42 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 12:19:42 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 12:19:42 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 12:19:42 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 12:19:42 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 12:19:42 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 12:19:42 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 12:19:42 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 12:19:42 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 12:19:42 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 12:19:42 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 12:19:42 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 12:19:42 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 12:19:42 PM INFO:perc_target: 0.5
2025/03/01 12:19:42 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 12:19:42 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 12:19:42 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 12:19:42 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 12:19:42 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 12:19:42 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 12:19:42 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 12:19:42 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 12:19:42 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 12:19:42 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 12:19:42 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 12:19:42 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 12:19:42 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 12:19:42 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 12:19:42 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 12:19:42 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 12:19:42 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 12:19:42 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 12:19:42 PM INFO:Session state Setup complete
2025/03/01 12:19:42 PM INFO:initialize_session_state executed successfully
2025/03/01 12:19:42 PM INFO:Package setup complete
2025/03/01 12:19:42 PM INFO:get_git_version executed successfully
2025/03/01 12:19:42 PM INFO:App Version: v20.131
2025/03/01 12:19:42 PM INFO:Switched to page: Introduction
2025/03/01 12:19:42 PM INFO:pagesetup executed successfully
2025/03/01 12:19:42 PM INFO:No data found in session state, running firstload()
2025/03/01 12:19:43 PM INFO:map_filename: regentity_map_fname
2025/03/01 12:19:43 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 12:19:43 PM INFO:Dedupe by file
2025/03/01 12:19:44 PM INFO:Dedupe by file, shape: (65279, 34)
2025/03/01 12:19:44 PM INFO:dedupe_entity_file executed successfully
2025/03/01 12:19:44 PM INFO:map_filename: donor_map_fname
2025/03/01 12:19:44 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 12:19:44 PM INFO:Dedupe by file
2025/03/01 12:19:44 PM INFO:Dedupe by file, shape: (66011, 40)
2025/03/01 12:19:44 PM INFO:dedupe_entity_file executed successfully
2025/03/01 12:19:44 PM INFO:Data cleanup completed, shape: (66011, 40)
2025/03/01 12:19:44 PM INFO:raw_data_cleanup executed successfully
2025/03/01 12:19:45 PM INFO:load_raw_data executed successfully
2025/03/01 12:19:45 PM INFO:get_raw_data executed successfully
2025/03/01 12:19:45 PM INFO:load_data_to_session executed successfully
2025/03/01 12:19:48 PM ERROR:Missing column: 'PartyName' in loaddata_df. Available columns: Index(['ECRef', 'OriginalRegulatedEntityName', 'RegulatedEntityType', 'Value',
       'AcceptedDate', 'AccountingUnitName', 'OriginalDonorName',
       'AccountingUnitsAsCentralParty', 'IsSponsorship', 'DonorStatus',
       'RegulatedDoneeType', 'CompanyRegistrationNumber', 'Postcode',
       'DonationType', 'NatureOfDonation', 'PurposeOfVisit', 'DonationAction',
       'ReceivedDate', 'ReportedDate', 'IsReportedPrePoll',
       'ReportingPeriodName', 'IsBequest', 'IsAggregation',
       'OriginalRegulatedEntityId', 'AccountingUnitId', 'OriginalDonorId',
       'CampaigningName', 'RegisterName', 'IsIrishSource',
       'CleanedRegulatedEntityId', 'CleanedRegulatedEntityName',
       'OriginalRegulatedEntityName', 'RegulatedEntityId',
       'RegulatedEntityName', 'CleanedDonorId', 'ParentDonorName',
       'CleanedDonorName', 'DonorStatus2', 'DonorId', 'DonorName',
       'EventCount', 'YearReceived', 'MonthReceived', 'YearMonthReceived'],
      dtype='object')
2025/03/01 12:19:48 PM INFO:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/01 12:19:48 PM INFO:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/01 12:19:48 PM INFO:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 12:19:48 PM INFO:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/01 12:19:48 PM INFO:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 12:19:48 PM INFO:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/01 12:19:48 PM INFO:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/01 12:19:48 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 12:19:48 PM INFO:map_mp_to_party executed successfully
2025/03/01 12:19:48 PM INFO:Election Dates not found in session, loading now.
2025/03/01 12:19:48 PM INFO:ElectionDatesDict: {'1929': {'dissolution': datetime.date(1929, 5, 10), 'election': datetime.date(1929, 5, 30)}, '1931': {'dissolution': datetime.date(1931, 10, 7), 'election': datetime.date(1931, 10, 27)}, '1935': {'dissolution': datetime.date(1935, 10, 25), 'election': datetime.date(1935, 11, 14)}, '1945': {'dissolution': datetime.date(1945, 6, 15), 'election': datetime.date(1945, 7, 5)}, '1950': {'dissolution': datetime.date(1950, 2, 3), 'election': datetime.date(1950, 2, 23)}, '1951': {'dissolution': datetime.date(1951, 10, 5), 'election': datetime.date(1951, 10, 25)}, '1955': {'dissolution': datetime.date(1955, 5, 6), 'election': datetime.date(1955, 5, 26)}, '1959': {'dissolution': datetime.date(1959, 9, 18), 'election': datetime.date(1959, 10, 8)}, '1964': {'dissolution': datetime.date(1964, 9, 25), 'election': datetime.date(1964, 10, 15)}, '1966': {'dissolution': datetime.date(1966, 3, 10), 'election': datetime.date(1966, 3, 31)}, '1970': {'dissolution': datetime.date(1970, 5, 29), 'election': datetime.date(1970, 6, 18)}, '1974 (Feb)': {'dissolution': datetime.date(1974, 2, 8), 'election': datetime.date(1974, 2, 28)}, '1974 (Oct)': {'dissolution': datetime.date(1974, 9, 20), 'election': datetime.date(1974, 10, 10)}, '1979': {'dissolution': datetime.date(1979, 4, 7), 'election': datetime.date(1979, 5, 3)}, '1983': {'dissolution': datetime.date(1983, 5, 13), 'election': datetime.date(1983, 6, 9)}, '1987': {'dissolution': datetime.date(1987, 5, 18), 'election': datetime.date(1987, 6, 11)}, '1992': {'dissolution': datetime.date(1992, 3, 16), 'election': datetime.date(1992, 4, 9)}, '1997': {'dissolution': datetime.date(1997, 4, 8), 'election': datetime.date(1997, 5, 1)}, '2001': {'dissolution': datetime.date(2001, 5, 14), 'election': datetime.date(2001, 6, 7)}, '2005': {'dissolution': datetime.date(2005, 4, 11), 'election': datetime.date(2005, 5, 5)}, '2010': {'dissolution': datetime.date(2010, 4, 12), 'election': datetime.date(2010, 5, 6)}, '2015': {'dissolution': datetime.date(2015, 3, 30), 'election': datetime.date(2015, 5, 7)}, '2017': {'dissolution': datetime.date(2017, 5, 3), 'election': datetime.date(2017, 6, 8)}, '2019': {'dissolution': datetime.date(2019, 11, 6), 'election': datetime.date(2019, 12, 12)}}
2025/03/01 12:19:48 PM INFO:Election Dates Loaded Successfully.
2025/03/01 12:19:48 PM INFO:load_election_dates executed successfully
2025/03/01 12:19:58 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 12:19:58 PM INFO:Setting up the package
2025/03/01 12:19:58 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 12:19:58 PM INFO:get_git_version executed successfully
2025/03/01 12:19:58 PM INFO:Version: v20.116
2025/03/01 12:19:58 PM INFO:init_state_var executed successfully
2025/03/01 12:19:58 PM INFO:init_state_var executed successfully
2025/03/01 12:19:58 PM INFO:init_state_var executed successfully
2025/03/01 12:19:58 PM INFO:init_state_var executed successfully
2025/03/01 12:19:58 PM INFO:init_state_var executed successfully
2025/03/01 12:19:58 PM INFO:init_state_var executed successfully
2025/03/01 12:19:58 PM INFO:init_state_var executed successfully
2025/03/01 12:19:58 PM INFO:init_state_var executed successfully
2025/03/01 12:19:58 PM INFO:init_state_var executed successfully
2025/03/01 12:19:58 PM INFO:init_state_var executed successfully
2025/03/01 12:19:58 PM INFO:init_state_var executed successfully
2025/03/01 12:19:58 PM INFO:init_state_var executed successfully
2025/03/01 12:19:59 PM INFO:init_state_var executed successfully
2025/03/01 12:19:59 PM INFO:init_state_var executed successfully
2025/03/01 12:19:59 PM INFO:init_state_var executed successfully
2025/03/01 12:19:59 PM INFO:init_state_var executed successfully
2025/03/01 12:19:59 PM INFO:init_state_var executed successfully
2025/03/01 12:19:59 PM INFO:init_state_var executed successfully
2025/03/01 12:19:59 PM INFO:init_state_var executed successfully
2025/03/01 12:19:59 PM INFO:init_state_var executed successfully
2025/03/01 12:19:59 PM INFO:init_state_var executed successfully
2025/03/01 12:19:59 PM INFO:init_state_var executed successfully
2025/03/01 12:19:59 PM INFO:init_state_var executed successfully
2025/03/01 12:19:59 PM INFO:init_state_var executed successfully
2025/03/01 12:19:59 PM INFO:init_state_var executed successfully
2025/03/01 12:19:59 PM INFO:init_state_var executed successfully
2025/03/01 12:19:59 PM INFO:init_state_var executed successfully
2025/03/01 12:19:59 PM INFO:init_state_var executed successfully
2025/03/01 12:19:59 PM INFO:init_state_var executed successfully
2025/03/01 12:19:59 PM INFO:init_state_var executed successfully
2025/03/01 12:19:59 PM INFO:init_state_var executed successfully
2025/03/01 12:19:59 PM INFO:init_state_var executed successfully
2025/03/01 12:19:59 PM INFO:init_state_var executed successfully
2025/03/01 12:19:59 PM INFO:init_state_var executed successfully
2025/03/01 12:20:00 PM INFO:init_state_var executed successfully
2025/03/01 12:20:00 PM INFO:init_state_var executed successfully
2025/03/01 12:20:00 PM INFO:init_state_var executed successfully
2025/03/01 12:20:00 PM INFO:init_state_var executed successfully
2025/03/01 12:20:00 PM INFO:init_state_var executed successfully
2025/03/01 12:20:00 PM INFO:init_state_var executed successfully
2025/03/01 12:20:00 PM INFO:Session_state variables initialized
2025/03/01 12:20:00 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 12:20:00 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 12:20:00 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 12:20:00 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 12:20:00 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 12:20:00 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 12:20:00 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 12:20:00 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 12:20:00 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 12:20:00 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 12:20:00 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 12:20:00 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 12:20:00 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 12:20:00 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 12:20:00 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 12:20:00 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 12:20:00 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 12:20:00 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 12:20:00 PM INFO:perc_target: 0.5
2025/03/01 12:20:00 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 12:20:00 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 12:20:00 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 12:20:00 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 12:20:00 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 12:20:00 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 12:20:00 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 12:20:00 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 12:20:01 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 12:20:01 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 12:20:01 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 12:20:01 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 12:20:01 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 12:20:01 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 12:20:01 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 12:20:01 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 12:20:01 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 12:20:01 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 12:20:01 PM INFO:Session state Setup complete
2025/03/01 12:20:01 PM INFO:initialize_session_state executed successfully
2025/03/01 12:20:01 PM INFO:Package setup complete
2025/03/01 12:20:01 PM INFO:get_git_version executed successfully
2025/03/01 12:20:01 PM INFO:App Version: v20.131
2025/03/01 12:20:01 PM INFO:Switched to page: Introduction
2025/03/01 12:20:01 PM INFO:pagesetup executed successfully
2025/03/01 12:20:02 PM INFO:No data found in session state, running firstload()
2025/03/01 12:20:05 PM INFO:Cleaned Data completed, shape: (79737, 58)
2025/03/01 12:20:05 PM INFO:load_cleaned_data executed successfully
2025/03/01 12:20:05 PM INFO:get_cleaned_data executed successfully
2025/03/01 12:20:05 PM INFO:load_data_to_session executed successfully
2025/03/01 12:20:05 PM INFO:load_entity_summary_data executed successfully
2025/03/01 12:20:05 PM INFO:get_party_summary_data executed successfully
2025/03/01 12:20:05 PM INFO:load_data_to_session executed successfully
2025/03/01 12:20:06 PM INFO:load_donorList_data executed successfully
2025/03/01 12:20:06 PM INFO:get_donor_data executed successfully
2025/03/01 12:20:06 PM INFO:load_data_to_session executed successfully
2025/03/01 12:20:06 PM INFO:load_regulated_entity_data executed successfully
2025/03/01 12:20:06 PM INFO:get_regentity_data executed successfully
2025/03/01 12:20:06 PM INFO:load_data_to_session executed successfully
2025/03/01 12:20:06 PM INFO:firstload executed successfully
2025/03/01 12:20:06 PM INFO:firstload executed successfully
2025/03/01 12:20:19 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 12:20:19 PM INFO:Setting up the package
2025/03/01 12:20:19 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 12:20:19 PM INFO:get_git_version executed successfully
2025/03/01 12:20:19 PM INFO:Version: v20.116
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:init_state_var executed successfully
2025/03/01 12:20:19 PM INFO:Session_state variables initialized
2025/03/01 12:20:19 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 12:20:19 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 12:20:19 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 12:20:19 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 12:20:19 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 12:20:19 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 12:20:19 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 12:20:19 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 12:20:19 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 12:20:19 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 12:20:19 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 12:20:19 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 12:20:19 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 12:20:19 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 12:20:19 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 12:20:19 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 12:20:19 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 12:20:19 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 12:20:19 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 12:20:19 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 12:20:19 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 12:20:19 PM INFO:perc_target: 0.5
2025/03/01 12:20:19 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 12:20:19 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 12:20:19 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 12:20:19 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 12:20:19 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 12:20:19 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 12:20:19 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 12:20:19 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 12:20:19 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 12:20:19 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 12:20:19 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 12:20:19 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 12:20:19 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 12:20:19 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 12:20:19 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 12:20:19 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 12:20:19 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 12:20:19 PM INFO:menu_selection: {'title': 'Head Line Figures', 'function': <function hlf_body at 0x000001AE4B51D8A0>}
2025/03/01 12:20:19 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 12:20:19 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 12:20:19 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 12:20:19 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 12:20:19 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 12:20:19 PM INFO:Session state Setup complete
2025/03/01 12:20:19 PM INFO:initialize_session_state executed successfully
2025/03/01 12:20:19 PM INFO:Package setup complete
2025/03/01 12:20:19 PM INFO:get_git_version executed successfully
2025/03/01 12:20:19 PM INFO:App Version: v20.131
2025/03/01 12:20:19 PM INFO:Switched to page: Head Line Figures
2025/03/01 12:20:20 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 12:20:20 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 12:20:20 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 12:20:20 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 12:20:20 PM INFO:plot_pie_chart executed successfully
2025/03/01 12:20:20 PM INFO:plot_pie_chart executed successfully
2025/03/01 12:20:20 PM INFO:pagesetup executed successfully
2025/03/01 12:20:20 PM INFO:Data already loaded in session state.
2025/03/01 12:20:23 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 12:20:23 PM INFO:Setting up the package
2025/03/01 12:20:23 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 12:20:23 PM INFO:get_git_version executed successfully
2025/03/01 12:20:23 PM INFO:Version: v20.116
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:init_state_var executed successfully
2025/03/01 12:20:23 PM INFO:Session_state variables initialized
2025/03/01 12:20:23 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 12:20:23 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 12:20:23 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 12:20:23 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 12:20:23 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 12:20:23 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 12:20:23 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 12:20:23 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 12:20:23 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 12:20:23 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 12:20:23 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 12:20:23 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 12:20:23 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 12:20:23 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 12:20:23 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 12:20:23 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 12:20:23 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 12:20:23 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 12:20:23 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 12:20:23 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 12:20:23 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 12:20:23 PM INFO:perc_target: 0.5
2025/03/01 12:20:23 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 12:20:23 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 12:20:23 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 12:20:23 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 12:20:23 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 12:20:23 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 12:20:23 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 12:20:23 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 12:20:23 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 12:20:23 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 12:20:23 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 12:20:23 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 12:20:23 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 12:20:23 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 12:20:23 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 12:20:23 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 12:20:23 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 12:20:23 PM INFO:menu_selection: {'title': 'Introduction', 'function': <function introduction_body at 0x000001AE4B51D120>}
2025/03/01 12:20:23 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 12:20:23 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 12:20:23 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 12:20:23 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 12:20:23 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 12:20:23 PM INFO:Session state Setup complete
2025/03/01 12:20:23 PM INFO:initialize_session_state executed successfully
2025/03/01 12:20:23 PM INFO:Package setup complete
2025/03/01 12:20:23 PM INFO:get_git_version executed successfully
2025/03/01 12:20:23 PM INFO:App Version: v20.131
2025/03/01 12:20:23 PM INFO:Switched to page: Introduction
2025/03/01 12:20:23 PM INFO:pagesetup executed successfully
2025/03/01 12:20:23 PM INFO:Data already loaded in session state.
2025/03/01 12:20:28 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 12:20:28 PM INFO:Setting up the package
2025/03/01 12:20:28 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 12:20:28 PM INFO:get_git_version executed successfully
2025/03/01 12:20:28 PM INFO:Version: v20.116
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:init_state_var executed successfully
2025/03/01 12:20:28 PM INFO:Session_state variables initialized
2025/03/01 12:20:28 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 12:20:28 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 12:20:28 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 12:20:28 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 12:20:28 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 12:20:28 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 12:20:28 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 12:20:28 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 12:20:28 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 12:20:28 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 12:20:28 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 12:20:28 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 12:20:28 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 12:20:28 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 12:20:28 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 12:20:28 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 12:20:28 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 12:20:28 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 12:20:28 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 12:20:28 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 12:20:28 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 12:20:28 PM INFO:perc_target: 0.5
2025/03/01 12:20:28 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 12:20:28 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 12:20:28 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 12:20:28 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 12:20:28 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 12:20:28 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 12:20:28 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 12:20:28 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 12:20:28 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 12:20:28 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 12:20:28 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 12:20:28 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 12:20:28 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 12:20:28 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 12:20:28 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 12:20:28 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 12:20:28 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 12:20:28 PM INFO:menu_selection: {'title': 'Paid Visits', 'function': <function mod_visits_page at 0x000001AE4C934220>}
2025/03/01 12:20:28 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 12:20:28 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 12:20:28 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 12:20:28 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 12:20:28 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 12:20:28 PM INFO:Session state Setup complete
2025/03/01 12:20:28 PM INFO:initialize_session_state executed successfully
2025/03/01 12:20:28 PM INFO:Package setup complete
2025/03/01 12:20:28 PM INFO:get_git_version executed successfully
2025/03/01 12:20:28 PM INFO:App Version: v20.131
2025/03/01 12:20:28 PM INFO:Switched to page: Paid Visits
2025/03/01 12:20:31 PM ERROR:Missing column: 'PartyName' in loaddata_df. Available columns: Index(['ECRef', 'OriginalRegulatedEntityName', 'RegulatedEntityType', 'Value',
       'AcceptedDate', 'AccountingUnitName', 'OriginalDonorName',
       'AccountingUnitsAsCentralParty', 'IsSponsorship', 'DonorStatus',
       'RegulatedDoneeType', 'CompanyRegistrationNumber', 'Postcode',
       'DonationType', 'NatureOfDonation', 'PurposeOfVisit', 'DonationAction',
       'ReceivedDate', 'ReportedDate', 'IsReportedPrePoll',
       'ReportingPeriodName', 'IsBequest', 'IsAggregation',
       'OriginalRegulatedEntityId', 'AccountingUnitId', 'OriginalDonorId',
       'CampaigningName', 'RegisterName', 'IsIrishSource',
       'CleanedRegulatedEntityId', 'CleanedRegulatedEntityName',
       'OriginalRegulatedEntityName', 'RegulatedEntityId',
       'RegulatedEntityName', 'CleanedDonorId', 'ParentDonorName',
       'CleanedDonorName', 'DonorStatus2', 'DonorId', 'DonorName',
       'EventCount', 'YearReceived', 'MonthReceived', 'YearMonthReceived'],
      dtype='object')
2025/03/01 12:20:31 PM INFO:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/01 12:20:31 PM INFO:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/01 12:20:31 PM INFO:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 12:20:31 PM INFO:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/01 12:20:31 PM INFO:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 12:20:32 PM INFO:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/01 12:20:32 PM INFO:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/01 12:20:32 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 12:20:32 PM INFO:map_mp_to_party executed successfully
2025/03/01 12:20:49 PM INFO:Cleaned Data completed, shape: (79737, 58)
2025/03/01 12:20:50 PM INFO:load_cleaned_data executed successfully
2025/03/01 12:20:50 PM INFO:load_and_filter_data executed successfully
2025/03/01 12:20:50 PM INFO:display_summary_statistics executed successfully
2025/03/01 12:20:50 PM INFO:display_textual_insights executed successfully
2025/03/01 12:20:50 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 12:20:50 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 12:20:50 PM INFO:display_visualizations executed successfully
2025/03/01 12:20:50 PM INFO:display_data_page executed successfully
2025/03/01 12:20:50 PM INFO:pagesetup executed successfully
2025/03/01 12:20:50 PM INFO:Data already loaded in session state.
2025/03/01 12:20:54 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 12:20:54 PM INFO:Setting up the package
2025/03/01 12:20:54 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 12:20:54 PM INFO:get_git_version executed successfully
2025/03/01 12:20:54 PM INFO:Version: v20.116
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:init_state_var executed successfully
2025/03/01 12:20:54 PM INFO:Session_state variables initialized
2025/03/01 12:20:54 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 12:20:54 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 12:20:54 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 12:20:54 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 12:20:54 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 12:20:54 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 12:20:54 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 12:20:54 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 12:20:54 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 12:20:54 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 12:20:54 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 12:20:54 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 12:20:54 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 12:20:54 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 12:20:54 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 12:20:54 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 12:20:54 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 12:20:54 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 12:20:54 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 12:20:54 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 12:20:54 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 12:20:54 PM INFO:perc_target: 0.5
2025/03/01 12:20:54 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 12:20:54 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 12:20:54 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 12:20:54 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 12:20:54 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 12:20:54 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 12:20:54 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 12:20:54 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 12:20:54 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 12:20:54 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 12:20:54 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 12:20:54 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 12:20:54 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 12:20:54 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 12:20:54 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 12:20:54 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 12:20:54 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 12:20:54 PM INFO:menu_selection: {'title': 'Paid Visits per Entity', 'function': <function mod_visits_per_regulated_entity at 0x000001AE4C935620>}
2025/03/01 12:20:54 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 12:20:54 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 12:20:54 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 12:20:54 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 12:20:54 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 12:20:54 PM INFO:Session state Setup complete
2025/03/01 12:20:54 PM INFO:initialize_session_state executed successfully
2025/03/01 12:20:54 PM INFO:Package setup complete
2025/03/01 12:20:54 PM INFO:get_git_version executed successfully
2025/03/01 12:20:54 PM INFO:App Version: v20.131
2025/03/01 12:20:54 PM INFO:Switched to page: Paid Visits per Entity
2025/03/01 12:20:54 PM INFO:load_cleaned_data executed successfully
2025/03/01 12:20:54 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 12:20:54 PM INFO:display_summary_statistics executed successfully
2025/03/01 12:20:54 PM INFO:display_textual_insights executed successfully
2025/03/01 12:20:54 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 12:20:55 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 12:20:55 PM INFO:display_visualizations executed successfully
2025/03/01 12:20:55 PM INFO:display_data_page executed successfully
2025/03/01 12:20:55 PM INFO:pagesetup executed successfully
2025/03/01 12:20:55 PM INFO:Data already loaded in session state.
2025/03/01 12:22:57 PM INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/01 12:22:57 PM INFO:get_git_version executed successfully
2025/03/01 12:22:57 PM INFO:get_git_version executed successfully
2025/03/01 12:22:57 PM INFO:get_git_version executed successfully
2025/03/01 12:22:57 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 12:22:57 PM INFO:Setting up the package
2025/03/01 12:22:57 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 12:22:57 PM INFO:get_git_version executed successfully
2025/03/01 12:22:57 PM INFO:Version: v20.116
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:init_state_var executed successfully
2025/03/01 12:22:57 PM INFO:Session_state variables initialized
2025/03/01 12:22:57 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 12:22:57 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 12:22:57 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 12:22:57 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 12:22:57 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 12:22:57 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 12:22:57 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 12:22:57 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 12:22:57 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 12:22:57 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 12:22:57 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 12:22:57 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 12:22:57 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 12:22:57 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 12:22:57 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 12:22:57 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 12:22:57 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 12:22:57 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 12:22:57 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 12:22:57 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 12:22:57 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 12:22:57 PM INFO:perc_target: 0.5
2025/03/01 12:22:57 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 12:22:57 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 12:22:57 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 12:22:57 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 12:22:57 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 12:22:57 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 12:22:57 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 12:22:57 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 12:22:57 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 12:22:57 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 12:22:57 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 12:22:57 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 12:22:57 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 12:22:57 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 12:22:57 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 12:22:57 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 12:22:57 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 12:22:57 PM INFO:menu_selection: {'title': 'Donors per Regulated Entity', 'function': <function mod_regulated_entity_per_donors_page at 0x000001AE4C935EE0>}
2025/03/01 12:22:57 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 12:22:57 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 12:22:57 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 12:22:57 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 12:22:57 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 12:22:57 PM INFO:Session state Setup complete
2025/03/01 12:22:58 PM INFO:initialize_session_state executed successfully
2025/03/01 12:22:58 PM INFO:Package setup complete
2025/03/01 12:22:58 PM INFO:get_git_version executed successfully
2025/03/01 12:22:58 PM INFO:get_git_version executed successfully
2025/03/01 12:22:58 PM INFO:App Version: v20.131
2025/03/01 12:22:58 PM INFO:Switched to page: Donors per Regulated Entity
2025/03/01 12:22:58 PM INFO:load_cleaned_data executed successfully
2025/03/01 12:22:58 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 12:22:58 PM INFO:display_summary_statistics executed successfully
2025/03/01 12:22:58 PM INFO:display_textual_insights executed successfully
2025/03/01 12:22:59 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 12:22:59 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 12:22:59 PM INFO:display_visualizations executed successfully
2025/03/01 12:22:59 PM INFO:display_data_page executed successfully
2025/03/01 12:22:59 PM INFO:pagesetup executed successfully
2025/03/01 12:22:59 PM INFO:Data already loaded in session state.
2025/03/01 12:23:42 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 12:23:42 PM INFO:Setting up the package
2025/03/01 12:23:42 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 12:23:42 PM INFO:get_git_version executed successfully
2025/03/01 12:23:42 PM INFO:Version: v20.116
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:init_state_var executed successfully
2025/03/01 12:23:42 PM INFO:Session_state variables initialized
2025/03/01 12:23:42 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 12:23:42 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 12:23:42 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 12:23:42 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 12:23:42 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 12:23:42 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 12:23:42 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 12:23:42 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 12:23:42 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 12:23:42 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 12:23:42 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 12:23:42 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 12:23:42 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 12:23:42 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 12:23:42 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 12:23:42 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 12:23:42 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 12:23:42 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 12:23:42 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 12:23:42 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 12:23:42 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 12:23:42 PM INFO:perc_target: 0.5
2025/03/01 12:23:42 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 12:23:42 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 12:23:42 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 12:23:42 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 12:23:42 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 12:23:42 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 12:23:42 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 12:23:42 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 12:23:42 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 12:23:42 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 12:23:42 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 12:23:42 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 12:23:42 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 12:23:42 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 12:23:42 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 12:23:42 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 12:23:42 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 12:23:42 PM INFO:menu_selection: {'title': 'Dubious Donors per Regulated Entity', 'function': <function mod_dubious_donors_per_entity_page at 0x000001AE54EB8D60>}
2025/03/01 12:23:42 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 12:23:42 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 12:23:42 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 12:23:42 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 12:23:42 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 12:23:42 PM INFO:Session state Setup complete
2025/03/01 12:23:42 PM INFO:initialize_session_state executed successfully
2025/03/01 12:23:42 PM INFO:Package setup complete
2025/03/01 12:23:42 PM INFO:get_git_version executed successfully
2025/03/01 12:23:42 PM INFO:App Version: v20.131
2025/03/01 12:23:42 PM INFO:Switched to page: Dubious Donors per Regulated Entity
2025/03/01 12:23:42 PM INFO:load_cleaned_data executed successfully
2025/03/01 12:23:43 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 12:23:43 PM INFO:display_summary_statistics executed successfully
2025/03/01 12:23:43 PM INFO:display_textual_insights executed successfully
2025/03/01 12:23:43 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 12:23:43 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 12:23:43 PM INFO:display_visualizations executed successfully
2025/03/01 12:23:43 PM INFO:display_data_page executed successfully
2025/03/01 12:23:43 PM INFO:pagesetup executed successfully
2025/03/01 12:23:43 PM INFO:Data already loaded in session state.
2025/03/01 12:23:49 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 12:23:49 PM INFO:Setting up the package
2025/03/01 12:23:49 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 12:23:49 PM INFO:get_git_version executed successfully
2025/03/01 12:23:49 PM INFO:Version: v20.116
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:init_state_var executed successfully
2025/03/01 12:23:49 PM INFO:Session_state variables initialized
2025/03/01 12:23:49 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 12:23:49 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 12:23:49 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 12:23:49 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 12:23:49 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 12:23:49 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 12:23:49 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 12:23:49 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 12:23:49 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 12:23:49 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 12:23:49 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 12:23:49 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 12:23:49 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 12:23:49 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 12:23:49 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 12:23:49 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 12:23:49 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 12:23:49 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 12:23:49 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 12:23:49 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 12:23:49 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 12:23:49 PM INFO:perc_target: 0.5
2025/03/01 12:23:49 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 12:23:49 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 12:23:49 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 12:23:49 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 12:23:49 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 12:23:49 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 12:23:49 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 12:23:49 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 12:23:49 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 12:23:49 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 12:23:49 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 12:23:49 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 12:23:49 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 12:23:49 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 12:23:49 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 12:23:49 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 12:23:49 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 12:23:49 PM INFO:menu_selection: {'title': 'Dubious Donations per Regulated Entity', 'function': <function mod_dubious_donations_per_entity_page at 0x000001AE54EB9120>}
2025/03/01 12:23:49 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 12:23:49 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 12:23:49 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 12:23:49 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 12:23:49 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 12:23:49 PM INFO:Session state Setup complete
2025/03/01 12:23:49 PM INFO:initialize_session_state executed successfully
2025/03/01 12:23:49 PM INFO:Package setup complete
2025/03/01 12:23:49 PM INFO:get_git_version executed successfully
2025/03/01 12:23:49 PM INFO:App Version: v20.131
2025/03/01 12:23:49 PM INFO:Switched to page: Dubious Donations per Regulated Entity
2025/03/01 12:23:49 PM INFO:load_cleaned_data executed successfully
2025/03/01 12:23:50 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 12:23:50 PM INFO:display_summary_statistics executed successfully
2025/03/01 12:23:50 PM INFO:display_textual_insights executed successfully
2025/03/01 12:23:50 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 12:23:50 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 12:23:50 PM INFO:display_visualizations executed successfully
2025/03/01 12:23:50 PM INFO:display_data_page executed successfully
2025/03/01 12:23:50 PM INFO:pagesetup executed successfully
2025/03/01 12:23:50 PM INFO:Data already loaded in session state.
2025/03/01 12:23:54 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 12:23:54 PM INFO:Setting up the package
2025/03/01 12:23:54 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 12:23:54 PM INFO:get_git_version executed successfully
2025/03/01 12:23:54 PM INFO:Version: v20.116
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:init_state_var executed successfully
2025/03/01 12:23:54 PM INFO:Session_state variables initialized
2025/03/01 12:23:54 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 12:23:54 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 12:23:54 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 12:23:54 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 12:23:54 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 12:23:54 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 12:23:54 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 12:23:54 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 12:23:54 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 12:23:54 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 12:23:54 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 12:23:54 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 12:23:54 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 12:23:54 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 12:23:54 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 12:23:54 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 12:23:54 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 12:23:54 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 12:23:54 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 12:23:54 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 12:23:54 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 12:23:54 PM INFO:perc_target: 0.5
2025/03/01 12:23:54 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 12:23:54 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 12:23:54 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 12:23:54 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 12:23:54 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 12:23:54 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 12:23:54 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 12:23:54 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 12:23:54 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 12:23:54 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 12:23:54 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 12:23:54 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 12:23:54 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 12:23:54 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 12:23:54 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 12:23:54 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 12:23:54 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 12:23:54 PM INFO:menu_selection: {'title': 'Dubious Donors', 'function': <function mod_dubious_donors_page at 0x000001AE54EB8CC0>}
2025/03/01 12:23:54 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 12:23:54 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 12:23:54 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 12:23:54 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 12:23:54 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 12:23:54 PM INFO:Session state Setup complete
2025/03/01 12:23:54 PM INFO:initialize_session_state executed successfully
2025/03/01 12:23:54 PM INFO:Package setup complete
2025/03/01 12:23:54 PM INFO:get_git_version executed successfully
2025/03/01 12:23:54 PM INFO:App Version: v20.131
2025/03/01 12:23:54 PM INFO:Switched to page: Dubious Donors
2025/03/01 12:23:55 PM INFO:load_cleaned_data executed successfully
2025/03/01 12:23:55 PM INFO:load_and_filter_data executed successfully
2025/03/01 12:23:55 PM INFO:display_summary_statistics executed successfully
2025/03/01 12:23:55 PM INFO:display_textual_insights executed successfully
2025/03/01 12:23:55 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 12:23:55 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 12:23:55 PM INFO:display_visualizations executed successfully
2025/03/01 12:23:55 PM INFO:display_data_page executed successfully
2025/03/01 12:23:55 PM INFO:pagesetup executed successfully
2025/03/01 12:23:55 PM INFO:Data already loaded in session state.
2025/03/01 12:23:58 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 12:23:58 PM INFO:Setting up the package
2025/03/01 12:23:58 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 12:23:58 PM INFO:get_git_version executed successfully
2025/03/01 12:23:58 PM INFO:Version: v20.116
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:init_state_var executed successfully
2025/03/01 12:23:58 PM INFO:Session_state variables initialized
2025/03/01 12:23:58 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 12:23:58 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 12:23:58 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 12:23:58 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 12:23:58 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 12:23:58 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 12:23:58 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 12:23:58 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 12:23:58 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 12:23:58 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 12:23:58 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 12:23:58 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 12:23:58 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 12:23:58 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 12:23:58 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 12:23:58 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 12:23:58 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 12:23:58 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 12:23:58 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 12:23:58 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 12:23:58 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 12:23:58 PM INFO:perc_target: 0.5
2025/03/01 12:23:58 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 12:23:58 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 12:23:58 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 12:23:58 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 12:23:58 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 12:23:58 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 12:23:58 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 12:23:58 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 12:23:58 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 12:23:58 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 12:23:58 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 12:23:58 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 12:23:58 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 12:23:58 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 12:23:58 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 12:23:58 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 12:23:58 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 12:23:58 PM INFO:menu_selection: {'title': 'Dubious Donations', 'function': <function mod_dubious_donations_page at 0x000001AE54EB91C0>}
2025/03/01 12:23:58 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 12:23:58 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 12:23:58 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 12:23:58 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 12:23:58 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 12:23:58 PM INFO:Session state Setup complete
2025/03/01 12:23:58 PM INFO:initialize_session_state executed successfully
2025/03/01 12:23:58 PM INFO:Package setup complete
2025/03/01 12:23:58 PM INFO:get_git_version executed successfully
2025/03/01 12:23:58 PM INFO:App Version: v20.131
2025/03/01 12:23:58 PM INFO:Switched to page: Dubious Donations
2025/03/01 12:23:58 PM INFO:load_cleaned_data executed successfully
2025/03/01 12:23:58 PM INFO:load_and_filter_data executed successfully
2025/03/01 12:23:59 PM INFO:display_summary_statistics executed successfully
2025/03/01 12:23:59 PM INFO:display_textual_insights executed successfully
2025/03/01 12:23:59 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 12:23:59 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 12:23:59 PM INFO:display_visualizations executed successfully
2025/03/01 12:23:59 PM INFO:display_data_page executed successfully
2025/03/01 12:23:59 PM INFO:pagesetup executed successfully
2025/03/01 12:23:59 PM INFO:Data already loaded in session state.
2025/03/01 12:24:06 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 12:24:06 PM INFO:Setting up the package
2025/03/01 12:24:06 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 12:24:06 PM INFO:get_git_version executed successfully
2025/03/01 12:24:06 PM INFO:Version: v20.116
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:init_state_var executed successfully
2025/03/01 12:24:06 PM INFO:Session_state variables initialized
2025/03/01 12:24:06 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 12:24:06 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 12:24:06 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 12:24:06 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 12:24:06 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 12:24:06 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 12:24:06 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 12:24:06 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 12:24:06 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 12:24:06 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 12:24:06 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 12:24:06 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 12:24:06 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 12:24:06 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 12:24:06 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 12:24:06 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 12:24:06 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 12:24:06 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 12:24:06 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 12:24:06 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 12:24:06 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 12:24:06 PM INFO:perc_target: 0.5
2025/03/01 12:24:06 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 12:24:06 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 12:24:06 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 12:24:06 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 12:24:06 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 12:24:06 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 12:24:06 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 12:24:06 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 12:24:06 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 12:24:06 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 12:24:06 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 12:24:06 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 12:24:06 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 12:24:06 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 12:24:06 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 12:24:06 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 12:24:06 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 12:24:06 PM INFO:menu_selection: {'title': 'Corporate Donations by Donor', 'function': <function mod_corporate_donations_per_donor_page at 0x000001AE54EB9260>}
2025/03/01 12:24:06 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 12:24:06 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 12:24:06 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 12:24:06 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 12:24:06 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 12:24:06 PM INFO:Session state Setup complete
2025/03/01 12:24:06 PM INFO:initialize_session_state executed successfully
2025/03/01 12:24:06 PM INFO:Package setup complete
2025/03/01 12:24:06 PM INFO:get_git_version executed successfully
2025/03/01 12:24:06 PM INFO:App Version: v20.131
2025/03/01 12:24:06 PM INFO:Switched to page: Corporate Donations by Donor
2025/03/01 12:24:06 PM INFO:load_cleaned_data executed successfully
2025/03/01 12:24:07 PM INFO:load_and_filter_perentity executed successfully
2025/03/01 12:24:07 PM ERROR:Error in display_data_page: too many values to unpack (expected 2)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_entity.py", line 21, in display_data_page
    cleaned_df, filtered_df = load_and_filter_perentity(
    ^^^^^^^^^^^^^^^^^^^^^^^
ValueError: too many values to unpack (expected 2)
2025/03/01 12:24:07 PM ERROR:Error in pagesetup: too many values to unpack (expected 2)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
    ^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
    ^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 76, in mod_corporate_donations_per_donor_page
    display_per_entity_data_page("CorporateDonations_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_entity.py", line 21, in display_data_page
    cleaned_df, filtered_df = load_and_filter_perentity(
    ^^^^^^^^^^^^^^^^^^^^^^^
ValueError: too many values to unpack (expected 2)
2025/03/01 12:24:07 PM CRITICAL:Menu setup crashed: too many values to unpack (expected 2)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 36, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
    ^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
    ^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 76, in mod_corporate_donations_per_donor_page
    display_per_entity_data_page("CorporateDonations_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_entity.py", line 21, in display_data_page
    cleaned_df, filtered_df = load_and_filter_perentity(
    ^^^^^^^^^^^^^^^^^^^^^^^
ValueError: too many values to unpack (expected 2)
2025/03/01 12:28:40 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 12:28:41 PM INFO:get_git_version executed successfully
2025/03/01 12:28:41 PM INFO:get_git_version executed successfully
2025/03/01 12:28:42 PM INFO:get_git_version executed successfully
2025/03/01 12:28:42 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 12:28:42 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 12:28:42 PM INFO:Setting up the package
2025/03/01 12:28:42 PM INFO:Setting up the package
2025/03/01 12:28:42 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 12:28:42 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 12:28:42 PM INFO:get_git_version executed successfully
2025/03/01 12:28:42 PM INFO:get_git_version executed successfully
2025/03/01 12:28:42 PM INFO:Version: v20.116
2025/03/01 12:28:42 PM INFO:Version: v20.116
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:init_state_var executed successfully
2025/03/01 12:28:42 PM INFO:Session_state variables initialized
2025/03/01 12:28:42 PM INFO:Session_state variables initialized
2025/03/01 12:28:42 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 12:28:42 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 12:28:42 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 12:28:42 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 12:28:42 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 12:28:42 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 12:28:42 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 12:28:42 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 12:28:42 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 12:28:42 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 12:28:42 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 12:28:42 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 12:28:42 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 12:28:42 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 12:28:42 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 12:28:42 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 12:28:42 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 12:28:42 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 12:28:42 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 12:28:42 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 12:28:42 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 12:28:42 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 12:28:42 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 12:28:42 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 12:28:42 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 12:28:42 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 12:28:42 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 12:28:42 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 12:28:42 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 12:28:42 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 12:28:42 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 12:28:42 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 12:28:42 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 12:28:42 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 12:28:42 PM INFO:perc_target: 0.5
2025/03/01 12:28:42 PM INFO:perc_target: 0.5
2025/03/01 12:28:42 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 12:28:42 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 12:28:42 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 12:28:42 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 12:28:42 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 12:28:42 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 12:28:42 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 12:28:42 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 12:28:42 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 12:28:42 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 12:28:42 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 12:28:42 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 12:28:42 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 12:28:42 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 12:28:42 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 12:28:42 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 12:28:42 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 12:28:42 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 12:28:42 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 12:28:42 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 12:28:42 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 12:28:42 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 12:28:42 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 12:28:42 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 12:28:42 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 12:28:42 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 12:28:42 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 12:28:42 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 12:28:42 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 12:28:42 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 12:28:42 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 12:28:42 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 12:28:42 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 12:28:42 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 12:28:42 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 12:28:42 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 12:28:42 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 12:28:42 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 12:28:42 PM INFO:Session state Setup complete
2025/03/01 12:28:42 PM INFO:Session state Setup complete
2025/03/01 12:28:42 PM INFO:initialize_session_state executed successfully
2025/03/01 12:28:42 PM INFO:initialize_session_state executed successfully
2025/03/01 12:28:42 PM INFO:Package setup complete
2025/03/01 12:28:42 PM INFO:Package setup complete
2025/03/01 12:28:42 PM INFO:get_git_version executed successfully
2025/03/01 12:28:43 PM ERROR:Error in pagesetup: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 36, in pagesetup
    app = MultiPage(app_name="UK Political Donations")  # Create an instance
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 14, in __init__
    st.set_page_config(
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\commands\page_config.py", line 274, in set_page_config
    ctx.enqueue(msg)
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\scriptrunner_utils\script_run_context.py", line 179, in enqueue
    raise StreamlitSetPageConfigMustBeFirstCommandError()
streamlit.errors.StreamlitSetPageConfigMustBeFirstCommandError: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
2025/03/01 12:28:43 PM ERROR:Error in pagesetup: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 36, in pagesetup
    app = MultiPage(app_name="UK Political Donations")  # Create an instance
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 14, in __init__
    st.set_page_config(
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\commands\page_config.py", line 274, in set_page_config
    ctx.enqueue(msg)
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\scriptrunner_utils\script_run_context.py", line 179, in enqueue
    raise StreamlitSetPageConfigMustBeFirstCommandError()
streamlit.errors.StreamlitSetPageConfigMustBeFirstCommandError: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
2025/03/01 12:28:43 PM CRITICAL:Menu setup crashed: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 36, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 36, in pagesetup
    app = MultiPage(app_name="UK Political Donations")  # Create an instance
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 14, in __init__
    st.set_page_config(
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\commands\page_config.py", line 274, in set_page_config
    ctx.enqueue(msg)
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\scriptrunner_utils\script_run_context.py", line 179, in enqueue
    raise StreamlitSetPageConfigMustBeFirstCommandError()
streamlit.errors.StreamlitSetPageConfigMustBeFirstCommandError: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
2025/03/01 12:28:43 PM CRITICAL:Menu setup crashed: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 36, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 36, in pagesetup
    app = MultiPage(app_name="UK Political Donations")  # Create an instance
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 14, in __init__
    st.set_page_config(
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\commands\page_config.py", line 274, in set_page_config
    ctx.enqueue(msg)
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\scriptrunner_utils\script_run_context.py", line 179, in enqueue
    raise StreamlitSetPageConfigMustBeFirstCommandError()
streamlit.errors.StreamlitSetPageConfigMustBeFirstCommandError: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
2025/03/01 01:04:23 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 01:04:23 PM INFO:get_git_version executed successfully
2025/03/01 01:04:24 PM INFO:get_git_version executed successfully
2025/03/01 01:04:24 PM INFO:get_git_version executed successfully
2025/03/01 01:04:24 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 01:04:24 PM INFO:Setting up the package
2025/03/01 01:04:24 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 01:04:25 PM INFO:get_git_version executed successfully
2025/03/01 01:04:25 PM INFO:Version: v20.117
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:init_state_var executed successfully
2025/03/01 01:04:25 PM INFO:Session_state variables initialized
2025/03/01 01:04:25 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 01:04:25 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 01:04:25 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 01:04:25 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 01:04:25 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 01:04:25 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 01:04:25 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 01:04:25 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 01:04:25 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 01:04:25 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 01:04:25 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 01:04:25 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 01:04:25 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 01:04:25 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 01:04:25 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 01:04:25 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 01:04:25 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 01:04:25 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 01:04:25 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 01:04:25 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 01:04:25 PM INFO:perc_target: 0.5
2025/03/01 01:04:25 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 01:04:25 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 01:04:25 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 01:04:25 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 01:04:25 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 01:04:25 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 01:04:25 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 01:04:25 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 01:04:25 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 01:04:25 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 01:04:25 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 01:04:25 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 01:04:25 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 01:04:25 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 01:04:25 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 01:04:25 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 01:04:25 PM INFO:Session state Setup complete
2025/03/01 01:04:25 PM INFO:initialize_session_state executed successfully
2025/03/01 01:04:25 PM INFO:Package setup complete
2025/03/01 01:04:25 PM INFO:get_git_version executed successfully
2025/03/01 01:04:25 PM ERROR:Error in pagesetup: expected an indented block after function definition on line 11 (multi_page.py, line 12)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 7, in pagesetup
    from app_pages.multi_page import MultiPage
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 12
    if cls._instance is None:
    ^^
IndentationError: expected an indented block after function definition on line 11
2025/03/01 01:04:25 PM CRITICAL:Menu setup crashed: expected an indented block after function definition on line 11 (multi_page.py, line 12)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 36, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 7, in pagesetup
    from app_pages.multi_page import MultiPage
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 12
    if cls._instance is None:
    ^^
IndentationError: expected an indented block after function definition on line 11
2025/03/01 01:04:48 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 01:04:49 PM INFO:get_git_version executed successfully
2025/03/01 01:04:49 PM INFO:get_git_version executed successfully
2025/03/01 01:04:49 PM INFO:get_git_version executed successfully
2025/03/01 01:04:50 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 01:04:50 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 01:04:50 PM INFO:Setting up the package
2025/03/01 01:04:50 PM INFO:Setting up the package
2025/03/01 01:04:50 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 01:04:50 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 01:04:50 PM INFO:get_git_version executed successfully
2025/03/01 01:04:50 PM INFO:get_git_version executed successfully
2025/03/01 01:04:50 PM INFO:Version: v20.117
2025/03/01 01:04:50 PM INFO:Version: v20.117
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:init_state_var executed successfully
2025/03/01 01:04:50 PM INFO:Session_state variables initialized
2025/03/01 01:04:50 PM INFO:Session_state variables initialized
2025/03/01 01:04:50 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 01:04:50 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 01:04:50 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 01:04:50 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 01:04:50 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 01:04:50 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 01:04:50 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 01:04:50 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 01:04:50 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 01:04:50 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 01:04:50 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 01:04:50 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 01:04:50 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 01:04:50 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 01:04:50 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 01:04:50 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 01:04:50 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 01:04:50 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 01:04:50 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 01:04:50 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 01:04:50 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 01:04:50 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 01:04:50 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 01:04:50 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 01:04:50 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 01:04:50 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 01:04:50 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 01:04:50 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 01:04:50 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 01:04:50 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 01:04:50 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 01:04:50 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 01:04:50 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 01:04:50 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 01:04:50 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 01:04:50 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 01:04:50 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 01:04:50 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 01:04:50 PM INFO:perc_target: 0.5
2025/03/01 01:04:50 PM INFO:perc_target: 0.5
2025/03/01 01:04:50 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 01:04:50 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 01:04:50 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 01:04:50 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 01:04:50 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 01:04:50 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 01:04:50 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 01:04:50 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 01:04:50 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 01:04:50 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 01:04:50 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 01:04:50 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 01:04:50 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 01:04:50 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 01:04:50 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 01:04:50 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 01:04:50 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 01:04:50 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 01:04:50 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 01:04:50 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 01:04:50 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 01:04:50 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 01:04:50 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 01:04:50 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 01:04:50 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 01:04:50 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 01:04:50 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 01:04:50 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 01:04:50 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 01:04:50 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 01:04:50 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 01:04:50 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 01:04:50 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 01:04:50 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 01:04:50 PM INFO:Session state Setup complete
2025/03/01 01:04:50 PM INFO:Session state Setup complete
2025/03/01 01:04:50 PM INFO:initialize_session_state executed successfully
2025/03/01 01:04:50 PM INFO:initialize_session_state executed successfully
2025/03/01 01:04:50 PM INFO:Package setup complete
2025/03/01 01:04:50 PM INFO:Package setup complete
2025/03/01 01:04:50 PM INFO:get_git_version executed successfully
2025/03/01 01:04:50 PM ERROR:Error in pagesetup: 'NoneType' object has no attribute 'add_page'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 39, in pagesetup
    app.add_page("Introduction", introduction_body)
    ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'add_page'
2025/03/01 01:04:50 PM CRITICAL:Menu setup crashed: 'NoneType' object has no attribute 'add_page'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 36, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 39, in pagesetup
    app.add_page("Introduction", introduction_body)
    ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'add_page'
2025/03/01 01:04:50 PM ERROR:Error in pagesetup: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 36, in pagesetup
    app = MultiPage(app_name="UK Political Donations")  # Create an instance
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 25, in __init__
    st.set_page_config(
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\commands\page_config.py", line 274, in set_page_config
    ctx.enqueue(msg)
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\scriptrunner_utils\script_run_context.py", line 179, in enqueue
    raise StreamlitSetPageConfigMustBeFirstCommandError()
streamlit.errors.StreamlitSetPageConfigMustBeFirstCommandError: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
2025/03/01 01:04:50 PM CRITICAL:Menu setup crashed: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 36, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 36, in pagesetup
    app = MultiPage(app_name="UK Political Donations")  # Create an instance
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 25, in __init__
    st.set_page_config(
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\commands\page_config.py", line 274, in set_page_config
    ctx.enqueue(msg)
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\scriptrunner_utils\script_run_context.py", line 179, in enqueue
    raise StreamlitSetPageConfigMustBeFirstCommandError()
streamlit.errors.StreamlitSetPageConfigMustBeFirstCommandError: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
2025/03/01 01:05:34 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 01:05:34 PM INFO:Setting up the package
2025/03/01 01:05:34 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 01:05:34 PM INFO:get_git_version executed successfully
2025/03/01 01:05:34 PM INFO:Version: v20.117
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:init_state_var executed successfully
2025/03/01 01:05:34 PM INFO:Session_state variables initialized
2025/03/01 01:05:34 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 01:05:34 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 01:05:34 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 01:05:34 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 01:05:34 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 01:05:34 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 01:05:34 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 01:05:34 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 01:05:34 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 01:05:34 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 01:05:34 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 01:05:34 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 01:05:34 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 01:05:34 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 01:05:34 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 01:05:34 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 01:05:34 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 01:05:34 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 01:05:34 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 01:05:34 PM INFO:perc_target: 0.5
2025/03/01 01:05:34 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 01:05:34 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 01:05:34 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 01:05:34 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 01:05:34 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 01:05:34 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 01:05:34 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 01:05:34 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 01:05:34 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 01:05:34 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 01:05:34 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 01:05:34 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 01:05:34 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 01:05:34 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 01:05:34 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 01:05:34 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 01:05:34 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 01:05:34 PM INFO:Session state Setup complete
2025/03/01 01:05:34 PM INFO:initialize_session_state executed successfully
2025/03/01 01:05:34 PM INFO:Package setup complete
2025/03/01 01:05:34 PM ERROR:Error in pagesetup: 'NoneType' object has no attribute 'add_page'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 39, in pagesetup
    app.add_page("Introduction", introduction_body)
    ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'add_page'
2025/03/01 01:05:34 PM CRITICAL:Menu setup crashed: 'NoneType' object has no attribute 'add_page'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 36, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 39, in pagesetup
    app.add_page("Introduction", introduction_body)
    ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'add_page'
2025/03/01 01:08:19 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 01:08:20 PM INFO:get_git_version executed successfully
2025/03/01 01:08:20 PM INFO:get_git_version executed successfully
2025/03/01 01:08:21 PM INFO:get_git_version executed successfully
2025/03/01 01:08:21 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 01:08:21 PM INFO:Setting up the package
2025/03/01 01:08:21 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 01:08:21 PM INFO:get_git_version executed successfully
2025/03/01 01:08:21 PM INFO:Version: v20.117
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:init_state_var executed successfully
2025/03/01 01:08:21 PM INFO:Session_state variables initialized
2025/03/01 01:08:21 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 01:08:21 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 01:08:21 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 01:08:21 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 01:08:21 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 01:08:21 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 01:08:21 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 01:08:21 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 01:08:21 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 01:08:21 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 01:08:21 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 01:08:21 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 01:08:21 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 01:08:21 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 01:08:21 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 01:08:21 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 01:08:21 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 01:08:21 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 01:08:21 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 01:08:21 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 01:08:21 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 01:08:21 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 01:08:21 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 01:08:21 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 01:08:21 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 01:08:21 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 01:08:21 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 01:08:21 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 01:08:21 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 01:08:21 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 01:08:21 PM INFO:perc_target: 0.5
2025/03/01 01:08:21 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 01:08:21 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 01:08:21 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 01:08:21 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 01:08:21 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 01:08:21 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 01:08:21 PM INFO:Session state Setup complete
2025/03/01 01:08:21 PM INFO:initialize_session_state executed successfully
2025/03/01 01:08:21 PM INFO:Package setup complete
2025/03/01 01:08:21 PM INFO:get_git_version executed successfully
2025/03/01 01:08:21 PM ERROR:Error in MultiPage: super() argument 1 must be a type, not function
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 13, in __new__
    cls._instance = super(MultiPage, cls).__new__(cls)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: super() argument 1 must be a type, not function
2025/03/01 01:08:21 PM ERROR:Error in pagesetup: super() argument 1 must be a type, not function
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 37, in pagesetup
    app = MultiPage(app_name="UK Political Donations")  # Create an instance
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 13, in __new__
    cls._instance = super(MultiPage, cls).__new__(cls)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: super() argument 1 must be a type, not function
2025/03/01 01:08:21 PM CRITICAL:Menu setup crashed: super() argument 1 must be a type, not function
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 36, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 37, in pagesetup
    app = MultiPage(app_name="UK Political Donations")  # Create an instance
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 13, in __new__
    cls._instance = super(MultiPage, cls).__new__(cls)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: super() argument 1 must be a type, not function
2025/03/01 01:09:26 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 01:09:27 PM INFO:get_git_version executed successfully
2025/03/01 01:09:28 PM INFO:get_git_version executed successfully
2025/03/01 01:09:28 PM INFO:get_git_version executed successfully
2025/03/01 01:09:28 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 01:09:28 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 01:09:28 PM INFO:Setting up the package
2025/03/01 01:09:28 PM INFO:Setting up the package
2025/03/01 01:09:28 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 01:09:28 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 01:09:28 PM INFO:get_git_version executed successfully
2025/03/01 01:09:28 PM INFO:get_git_version executed successfully
2025/03/01 01:09:28 PM INFO:Version: v20.117
2025/03/01 01:09:28 PM INFO:Version: v20.117
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:init_state_var executed successfully
2025/03/01 01:09:28 PM INFO:Session_state variables initialized
2025/03/01 01:09:28 PM INFO:Session_state variables initialized
2025/03/01 01:09:28 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 01:09:28 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 01:09:28 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 01:09:28 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 01:09:28 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 01:09:28 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 01:09:28 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 01:09:28 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 01:09:28 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 01:09:28 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 01:09:28 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 01:09:28 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 01:09:28 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 01:09:28 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 01:09:28 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 01:09:28 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 01:09:28 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 01:09:28 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 01:09:28 PM INFO:perc_target: 0.5
2025/03/01 01:09:28 PM INFO:perc_target: 0.5
2025/03/01 01:09:28 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 01:09:28 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 01:09:28 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 01:09:28 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 01:09:28 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 01:09:28 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 01:09:28 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 01:09:28 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 01:09:28 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 01:09:28 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 01:09:28 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 01:09:28 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 01:09:28 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 01:09:28 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 01:09:28 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 01:09:28 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 01:09:28 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 01:09:28 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 01:09:28 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 01:09:28 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 01:09:28 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 01:09:28 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 01:09:28 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 01:09:28 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 01:09:28 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 01:09:28 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 01:09:28 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 01:09:28 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 01:09:28 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 01:09:28 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 01:09:28 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 01:09:28 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 01:09:28 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 01:09:28 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 01:09:28 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 01:09:28 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 01:09:28 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 01:09:28 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 01:09:28 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 01:09:28 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 01:09:28 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 01:09:28 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 01:09:28 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 01:09:28 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 01:09:28 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 01:09:28 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 01:09:28 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 01:09:28 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 01:09:28 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 01:09:28 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 01:09:28 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 01:09:28 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 01:09:28 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 01:09:28 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 01:09:28 PM INFO:Session state Setup complete
2025/03/01 01:09:28 PM INFO:Session state Setup complete
2025/03/01 01:09:28 PM INFO:initialize_session_state executed successfully
2025/03/01 01:09:28 PM INFO:initialize_session_state executed successfully
2025/03/01 01:09:28 PM INFO:Package setup complete
2025/03/01 01:09:28 PM INFO:Package setup complete
2025/03/01 01:09:28 PM INFO:get_git_version executed successfully
2025/03/01 01:09:28 PM ERROR:Error in pagesetup: MultiPage.__init_subclass__() takes no keyword arguments
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 8, in pagesetup
    from app_pages.multi_page import MultiPage
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 8, in <module>
    class MultiPage(app_name="streamlitapp"):
TypeError: MultiPage.__init_subclass__() takes no keyword arguments
2025/03/01 01:09:28 PM ERROR:Error in pagesetup: MultiPage.__init_subclass__() takes no keyword arguments
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 8, in pagesetup
    from app_pages.multi_page import MultiPage
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 8, in <module>
    class MultiPage(app_name="streamlitapp"):
TypeError: MultiPage.__init_subclass__() takes no keyword arguments
2025/03/01 01:09:28 PM CRITICAL:Menu setup crashed: MultiPage.__init_subclass__() takes no keyword arguments
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 36, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 8, in pagesetup
    from app_pages.multi_page import MultiPage
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 8, in <module>
    class MultiPage(app_name="streamlitapp"):
TypeError: MultiPage.__init_subclass__() takes no keyword arguments
2025/03/01 01:09:28 PM CRITICAL:Menu setup crashed: MultiPage.__init_subclass__() takes no keyword arguments
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 36, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 8, in pagesetup
    from app_pages.multi_page import MultiPage
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 8, in <module>
    class MultiPage(app_name="streamlitapp"):
TypeError: MultiPage.__init_subclass__() takes no keyword arguments
2025/03/01 01:10:49 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 01:10:50 PM INFO:get_git_version executed successfully
2025/03/01 01:10:51 PM INFO:get_git_version executed successfully
2025/03/01 01:10:51 PM INFO:get_git_version executed successfully
2025/03/01 01:10:51 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 01:10:51 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 01:10:51 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 01:10:51 PM INFO:Setting up the package
2025/03/01 01:10:51 PM INFO:Setting up the package
2025/03/01 01:10:51 PM INFO:Setting up the package
2025/03/01 01:10:51 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 01:10:51 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 01:10:51 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 01:10:51 PM INFO:get_git_version executed successfully
2025/03/01 01:10:51 PM INFO:get_git_version executed successfully
2025/03/01 01:10:51 PM INFO:get_git_version executed successfully
2025/03/01 01:10:51 PM INFO:Version: v20.117
2025/03/01 01:10:51 PM INFO:Version: v20.117
2025/03/01 01:10:51 PM INFO:Version: v20.117
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:51 PM INFO:init_state_var executed successfully
2025/03/01 01:10:52 PM INFO:init_state_var executed successfully
2025/03/01 01:10:52 PM INFO:init_state_var executed successfully
2025/03/01 01:10:52 PM INFO:init_state_var executed successfully
2025/03/01 01:10:52 PM INFO:init_state_var executed successfully
2025/03/01 01:10:52 PM INFO:init_state_var executed successfully
2025/03/01 01:10:52 PM INFO:init_state_var executed successfully
2025/03/01 01:10:52 PM INFO:init_state_var executed successfully
2025/03/01 01:10:52 PM INFO:init_state_var executed successfully
2025/03/01 01:10:52 PM INFO:init_state_var executed successfully
2025/03/01 01:10:52 PM INFO:init_state_var executed successfully
2025/03/01 01:10:52 PM INFO:init_state_var executed successfully
2025/03/01 01:10:52 PM INFO:init_state_var executed successfully
2025/03/01 01:10:52 PM INFO:init_state_var executed successfully
2025/03/01 01:10:52 PM INFO:init_state_var executed successfully
2025/03/01 01:10:52 PM INFO:init_state_var executed successfully
2025/03/01 01:10:52 PM INFO:init_state_var executed successfully
2025/03/01 01:10:52 PM INFO:Session_state variables initialized
2025/03/01 01:10:52 PM INFO:init_state_var executed successfully
2025/03/01 01:10:52 PM INFO:init_state_var executed successfully
2025/03/01 01:10:52 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 01:10:52 PM INFO:init_state_var executed successfully
2025/03/01 01:10:52 PM INFO:init_state_var executed successfully
2025/03/01 01:10:52 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 01:10:52 PM INFO:Session_state variables initialized
2025/03/01 01:10:52 PM INFO:Session_state variables initialized
2025/03/01 01:10:52 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 01:10:52 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 01:10:52 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 01:10:52 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 01:10:52 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 01:10:52 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 01:10:52 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 01:10:52 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 01:10:52 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 01:10:52 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 01:10:52 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 01:10:52 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 01:10:52 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 01:10:52 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 01:10:52 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 01:10:52 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 01:10:52 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 01:10:52 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 01:10:52 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 01:10:52 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 01:10:52 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 01:10:52 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 01:10:52 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 01:10:52 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 01:10:52 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 01:10:52 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 01:10:52 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 01:10:52 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 01:10:52 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 01:10:52 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 01:10:52 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 01:10:52 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 01:10:52 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 01:10:52 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 01:10:52 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 01:10:52 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 01:10:52 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 01:10:52 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 01:10:52 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 01:10:52 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 01:10:52 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 01:10:52 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 01:10:52 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 01:10:52 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 01:10:52 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 01:10:52 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 01:10:52 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 01:10:52 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 01:10:52 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 01:10:52 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 01:10:52 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 01:10:52 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 01:10:52 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 01:10:52 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 01:10:52 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 01:10:52 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 01:10:52 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 01:10:52 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 01:10:52 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 01:10:52 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 01:10:52 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 01:10:52 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 01:10:52 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 01:10:52 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 01:10:52 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 01:10:52 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 01:10:52 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 01:10:52 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 01:10:52 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 01:10:52 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 01:10:52 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 01:10:52 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 01:10:52 PM INFO:perc_target: 0.5
2025/03/01 01:10:52 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 01:10:52 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 01:10:52 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 01:10:52 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 01:10:52 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 01:10:52 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 01:10:52 PM INFO:perc_target: 0.5
2025/03/01 01:10:52 PM INFO:perc_target: 0.5
2025/03/01 01:10:52 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 01:10:52 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 01:10:52 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 01:10:52 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 01:10:52 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 01:10:52 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 01:10:52 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 01:10:52 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 01:10:52 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 01:10:52 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 01:10:52 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 01:10:52 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 01:10:52 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 01:10:52 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 01:10:52 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 01:10:52 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 01:10:52 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 01:10:52 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 01:10:52 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 01:10:52 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 01:10:52 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 01:10:52 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 01:10:52 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 01:10:52 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 01:10:52 PM INFO:Session state Setup complete
2025/03/01 01:10:52 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 01:10:52 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 01:10:52 PM INFO:initialize_session_state executed successfully
2025/03/01 01:10:52 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 01:10:52 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 01:10:52 PM INFO:Package setup complete
2025/03/01 01:10:52 PM INFO:Session state Setup complete
2025/03/01 01:10:52 PM INFO:Session state Setup complete
2025/03/01 01:10:52 PM INFO:initialize_session_state executed successfully
2025/03/01 01:10:52 PM INFO:initialize_session_state executed successfully
2025/03/01 01:10:52 PM INFO:Package setup complete
2025/03/01 01:10:52 PM INFO:Package setup complete
2025/03/01 01:10:52 PM INFO:get_git_version executed successfully
2025/03/01 01:10:52 PM ERROR:Error in MultiPage: super() argument 1 must be a type, not function
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 13, in __new__
    cls._instance = super(MultiPage, cls).__new__(cls)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: super() argument 1 must be a type, not function
2025/03/01 01:10:52 PM ERROR:Error in MultiPage: super() argument 1 must be a type, not function
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 13, in __new__
    cls._instance = super(MultiPage, cls).__new__(cls)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: super() argument 1 must be a type, not function
2025/03/01 01:10:52 PM ERROR:Error in MultiPage: super() argument 1 must be a type, not function
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 13, in __new__
    cls._instance = super(MultiPage, cls).__new__(cls)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: super() argument 1 must be a type, not function
2025/03/01 01:10:52 PM ERROR:Error in pagesetup: super() argument 1 must be a type, not function
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 37, in pagesetup
    app = MultiPage(app_name="UK Political Donations")  # Create an instance
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 13, in __new__
    cls._instance = super(MultiPage, cls).__new__(cls)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: super() argument 1 must be a type, not function
2025/03/01 01:10:52 PM ERROR:Error in pagesetup: super() argument 1 must be a type, not function
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 37, in pagesetup
    app = MultiPage(app_name="UK Political Donations")  # Create an instance
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 13, in __new__
    cls._instance = super(MultiPage, cls).__new__(cls)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: super() argument 1 must be a type, not function
2025/03/01 01:10:52 PM ERROR:Error in pagesetup: super() argument 1 must be a type, not function
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 37, in pagesetup
    app = MultiPage(app_name="UK Political Donations")  # Create an instance
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 13, in __new__
    cls._instance = super(MultiPage, cls).__new__(cls)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: super() argument 1 must be a type, not function
2025/03/01 01:10:52 PM CRITICAL:Menu setup crashed: super() argument 1 must be a type, not function
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 36, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 37, in pagesetup
    app = MultiPage(app_name="UK Political Donations")  # Create an instance
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 13, in __new__
    cls._instance = super(MultiPage, cls).__new__(cls)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: super() argument 1 must be a type, not function
2025/03/01 01:10:52 PM CRITICAL:Menu setup crashed: super() argument 1 must be a type, not function
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 36, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 37, in pagesetup
    app = MultiPage(app_name="UK Political Donations")  # Create an instance
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 13, in __new__
    cls._instance = super(MultiPage, cls).__new__(cls)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: super() argument 1 must be a type, not function
2025/03/01 01:10:52 PM CRITICAL:Menu setup crashed: super() argument 1 must be a type, not function
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 36, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 37, in pagesetup
    app = MultiPage(app_name="UK Political Donations")  # Create an instance
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 13, in __new__
    cls._instance = super(MultiPage, cls).__new__(cls)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: super() argument 1 must be a type, not function
2025/03/01 01:13:23 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 01:13:24 PM INFO:get_git_version executed successfully
2025/03/01 01:13:25 PM INFO:get_git_version executed successfully
2025/03/01 01:13:25 PM INFO:get_git_version executed successfully
2025/03/01 01:13:25 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 01:13:25 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 01:13:25 PM INFO:Setting up the package
2025/03/01 01:13:25 PM INFO:Setting up the package
2025/03/01 01:13:25 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 01:13:25 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 01:13:25 PM INFO:get_git_version executed successfully
2025/03/01 01:13:25 PM INFO:get_git_version executed successfully
2025/03/01 01:13:25 PM INFO:Version: v20.117
2025/03/01 01:13:25 PM INFO:Version: v20.117
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:Session_state variables initialized
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 01:13:25 PM INFO:init_state_var executed successfully
2025/03/01 01:13:25 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 01:13:25 PM INFO:Session_state variables initialized
2025/03/01 01:13:25 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 01:13:25 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 01:13:25 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 01:13:25 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 01:13:25 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 01:13:25 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 01:13:25 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 01:13:25 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 01:13:25 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 01:13:25 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 01:13:25 PM INFO:perc_target: 0.5
2025/03/01 01:13:25 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 01:13:25 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 01:13:25 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 01:13:25 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 01:13:25 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 01:13:25 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 01:13:25 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 01:13:26 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 01:13:26 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 01:13:26 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 01:13:26 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 01:13:26 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 01:13:26 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 01:13:26 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 01:13:26 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 01:13:26 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 01:13:26 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 01:13:26 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 01:13:26 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 01:13:26 PM INFO:perc_target: 0.5
2025/03/01 01:13:26 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 01:13:26 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 01:13:26 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 01:13:26 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 01:13:26 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 01:13:26 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 01:13:26 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 01:13:26 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 01:13:26 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 01:13:26 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 01:13:26 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 01:13:26 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 01:13:26 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 01:13:26 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 01:13:26 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 01:13:26 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 01:13:26 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 01:13:26 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 01:13:26 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 01:13:26 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 01:13:26 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 01:13:26 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 01:13:26 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 01:13:26 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 01:13:26 PM INFO:Session state Setup complete
2025/03/01 01:13:26 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 01:13:26 PM INFO:initialize_session_state executed successfully
2025/03/01 01:13:26 PM INFO:Package setup complete
2025/03/01 01:13:26 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 01:13:26 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 01:13:26 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 01:13:26 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 01:13:26 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 01:13:26 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 01:13:26 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 01:13:26 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 01:13:26 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 01:13:26 PM INFO:Session state Setup complete
2025/03/01 01:13:26 PM INFO:initialize_session_state executed successfully
2025/03/01 01:13:26 PM INFO:Package setup complete
2025/03/01 01:13:26 PM INFO:get_git_version executed successfully
2025/03/01 01:13:26 PM INFO:MultiPage executed successfully
2025/03/01 01:13:26 PM ERROR:Error in pagesetup: 'NoneType' object has no attribute 'add_page'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 40, in pagesetup
    app.add_page("Introduction", introduction_body)
    ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'add_page'
2025/03/01 01:13:26 PM ERROR:Error in MultiPage: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 25, in __init__
    st.set_page_config(
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\commands\page_config.py", line 274, in set_page_config
    ctx.enqueue(msg)
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\scriptrunner_utils\script_run_context.py", line 179, in enqueue
    raise StreamlitSetPageConfigMustBeFirstCommandError()
streamlit.errors.StreamlitSetPageConfigMustBeFirstCommandError: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
2025/03/01 01:13:26 PM CRITICAL:Menu setup crashed: 'NoneType' object has no attribute 'add_page'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 36, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 40, in pagesetup
    app.add_page("Introduction", introduction_body)
    ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'add_page'
2025/03/01 01:13:26 PM ERROR:Error in pagesetup: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 37, in pagesetup
    app = MultiPage(app_name="UK Political Donations")  # Create an instance
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 25, in __init__
    st.set_page_config(
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\commands\page_config.py", line 274, in set_page_config
    ctx.enqueue(msg)
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\scriptrunner_utils\script_run_context.py", line 179, in enqueue
    raise StreamlitSetPageConfigMustBeFirstCommandError()
streamlit.errors.StreamlitSetPageConfigMustBeFirstCommandError: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
2025/03/01 01:13:26 PM CRITICAL:Menu setup crashed: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 36, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 37, in pagesetup
    app = MultiPage(app_name="UK Political Donations")  # Create an instance
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 25, in __init__
    st.set_page_config(
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\commands\page_config.py", line 274, in set_page_config
    ctx.enqueue(msg)
  File "h:\VScode\dashboard_demo-1\.venv\Lib\site-packages\streamlit\runtime\scriptrunner_utils\script_run_context.py", line 179, in enqueue
    raise StreamlitSetPageConfigMustBeFirstCommandError()
streamlit.errors.StreamlitSetPageConfigMustBeFirstCommandError: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
2025/03/01 01:16:38 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 01:16:39 PM INFO:get_git_version executed successfully
2025/03/01 01:17:49 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 01:17:49 PM INFO:get_git_version executed successfully
2025/03/01 01:17:50 PM INFO:get_git_version executed successfully
2025/03/01 01:17:50 PM INFO:get_git_version executed successfully
2025/03/01 01:19:30 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 01:19:30 PM INFO:get_git_version executed successfully
2025/03/01 01:19:31 PM INFO:get_git_version executed successfully
2025/03/01 01:19:31 PM INFO:get_git_version executed successfully
2025/03/01 01:24:23 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 01:24:24 PM INFO:get_git_version executed successfully
2025/03/01 01:24:24 PM INFO:get_git_version executed successfully
2025/03/01 01:24:24 PM INFO:get_git_version executed successfully
2025/03/01 01:24:25 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 01:24:25 PM INFO:Setting up the package
2025/03/01 01:24:25 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 01:24:25 PM INFO:get_git_version executed successfully
2025/03/01 01:24:25 PM INFO:Version: v20.117
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:init_state_var executed successfully
2025/03/01 01:24:25 PM INFO:Session_state variables initialized
2025/03/01 01:24:25 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 01:24:25 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 01:24:25 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 01:24:25 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 01:24:25 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 01:24:25 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 01:24:25 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 01:24:25 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 01:24:25 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 01:24:25 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 01:24:25 PM INFO:perc_target: 0.5
2025/03/01 01:24:25 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 01:24:25 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 01:24:25 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 01:24:25 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 01:24:25 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 01:24:25 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 01:24:25 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 01:24:25 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 01:24:25 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 01:24:25 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 01:24:25 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 01:24:25 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 01:24:25 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 01:24:25 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 01:24:25 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 01:24:25 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 01:24:25 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 01:24:25 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 01:24:25 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 01:24:25 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 01:24:25 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 01:24:25 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 01:24:25 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 01:24:25 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 01:24:25 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 01:24:25 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 01:24:25 PM INFO:Session state Setup complete
2025/03/01 01:24:25 PM INFO:initialize_session_state executed successfully
2025/03/01 01:24:25 PM INFO:Package setup complete
2025/03/01 01:24:25 PM INFO:get_git_version executed successfully
2025/03/01 01:24:25 PM ERROR:Error in pagesetup: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 36, in pagesetup
    app = MultiPage(app_name="UK Political Donations")  # Create an instance
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 14, in __init__
    st.set_page_config(
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\commands\page_config.py", line 274, in set_page_config
    ctx.enqueue(msg)
  File "H:\python310\lib\site-packages\streamlit\runtime\scriptrunner_utils\script_run_context.py", line 179, in enqueue
    raise StreamlitSetPageConfigMustBeFirstCommandError()
streamlit.errors.StreamlitSetPageConfigMustBeFirstCommandError: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
2025/03/01 01:24:25 PM CRITICAL:Menu setup crashed: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 36, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 36, in pagesetup
    app = MultiPage(app_name="UK Political Donations")  # Create an instance
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 14, in __init__
    st.set_page_config(
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\commands\page_config.py", line 274, in set_page_config
    ctx.enqueue(msg)
  File "H:\python310\lib\site-packages\streamlit\runtime\scriptrunner_utils\script_run_context.py", line 179, in enqueue
    raise StreamlitSetPageConfigMustBeFirstCommandError()
streamlit.errors.StreamlitSetPageConfigMustBeFirstCommandError: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
2025/03/01 01:25:18 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 01:25:19 PM INFO:get_git_version executed successfully
2025/03/01 01:25:19 PM INFO:get_git_version executed successfully
2025/03/01 01:25:19 PM INFO:get_git_version executed successfully
2025/03/01 01:25:19 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 01:25:19 PM INFO:Setting up the package
2025/03/01 01:25:19 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 01:25:20 PM INFO:get_git_version executed successfully
2025/03/01 01:25:20 PM INFO:Version: v20.117
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:init_state_var executed successfully
2025/03/01 01:25:20 PM INFO:Session_state variables initialized
2025/03/01 01:25:20 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 01:25:20 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 01:25:20 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 01:25:20 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 01:25:20 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 01:25:20 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 01:25:20 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 01:25:20 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 01:25:20 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 01:25:20 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 01:25:20 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 01:25:20 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 01:25:20 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 01:25:20 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 01:25:20 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 01:25:20 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 01:25:20 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 01:25:20 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 01:25:20 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 01:25:20 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 01:25:20 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 01:25:20 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 01:25:20 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 01:25:20 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 01:25:20 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 01:25:20 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 01:25:20 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 01:25:20 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 01:25:20 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 01:25:20 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 01:25:20 PM INFO:perc_target: 0.5
2025/03/01 01:25:20 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 01:25:20 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 01:25:20 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 01:25:20 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 01:25:20 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 01:25:20 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 01:25:20 PM INFO:Session state Setup complete
2025/03/01 01:25:20 PM INFO:initialize_session_state executed successfully
2025/03/01 01:25:20 PM INFO:Package setup complete
2025/03/01 01:25:20 PM INFO:get_git_version executed successfully
2025/03/01 01:25:20 PM ERROR:Error in pagesetup: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 36, in pagesetup
    app = MultiPage(app_name="UK Political Donations")  # Create an instance
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 14, in __init__
    st.set_page_config(
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\commands\page_config.py", line 274, in set_page_config
    ctx.enqueue(msg)
  File "H:\python310\lib\site-packages\streamlit\runtime\scriptrunner_utils\script_run_context.py", line 179, in enqueue
    raise StreamlitSetPageConfigMustBeFirstCommandError()
streamlit.errors.StreamlitSetPageConfigMustBeFirstCommandError: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
2025/03/01 01:25:20 PM CRITICAL:Menu setup crashed: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 36, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 36, in pagesetup
    app = MultiPage(app_name="UK Political Donations")  # Create an instance
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 14, in __init__
    st.set_page_config(
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\commands\page_config.py", line 274, in set_page_config
    ctx.enqueue(msg)
  File "H:\python310\lib\site-packages\streamlit\runtime\scriptrunner_utils\script_run_context.py", line 179, in enqueue
    raise StreamlitSetPageConfigMustBeFirstCommandError()
streamlit.errors.StreamlitSetPageConfigMustBeFirstCommandError: `set_page_config()` can only be called once per app page, and must be called as the first Streamlit command in your script.

For more information refer to the [docs](https://docs.streamlit.io/develop/api-reference/configuration/st.set_page_config).
2025/03/01 01:32:23 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 01:32:23 PM INFO:get_git_version executed successfully
2025/03/01 01:32:24 PM INFO:get_git_version executed successfully
2025/03/01 01:32:24 PM INFO:get_git_version executed successfully
2025/03/01 01:32:24 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 01:32:24 PM INFO:Setting up the package
2025/03/01 01:32:24 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 01:32:24 PM INFO:get_git_version executed successfully
2025/03/01 01:32:24 PM INFO:Version: v20.117
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:init_state_var executed successfully
2025/03/01 01:32:24 PM INFO:Session_state variables initialized
2025/03/01 01:32:24 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 01:32:24 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 01:32:24 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 01:32:24 PM INFO:perc_target: 0.5
2025/03/01 01:32:24 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 01:32:24 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 01:32:24 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 01:32:24 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 01:32:24 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 01:32:24 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 01:32:24 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 01:32:24 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 01:32:24 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 01:32:24 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 01:32:24 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 01:32:24 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 01:32:24 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 01:32:24 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 01:32:24 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 01:32:24 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 01:32:24 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 01:32:24 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 01:32:24 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 01:32:24 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 01:32:24 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 01:32:24 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 01:32:24 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 01:32:24 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 01:32:24 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 01:32:24 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 01:32:24 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 01:32:24 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 01:32:24 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 01:32:24 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 01:32:24 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 01:32:24 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 01:32:24 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 01:32:24 PM INFO:Session state Setup complete
2025/03/01 01:32:24 PM INFO:initialize_session_state executed successfully
2025/03/01 01:32:24 PM INFO:Package setup complete
2025/03/01 01:32:25 PM INFO:get_git_version executed successfully
2025/03/01 01:32:25 PM INFO:get_git_version executed successfully
2025/03/01 01:32:25 PM INFO:App Version: v20.132
2025/03/01 01:32:25 PM INFO:Switched to page: Introduction
2025/03/01 01:32:25 PM INFO:pagesetup executed successfully
2025/03/01 01:32:25 PM INFO:No data found in session state, running firstload()
2025/03/01 01:32:26 PM INFO:map_filename: regentity_map_fname
2025/03/01 01:32:26 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 01:32:26 PM INFO:Dedupe by file
2025/03/01 01:32:27 PM INFO:Dedupe by file, shape: (65279, 34)
2025/03/01 01:32:27 PM INFO:dedupe_entity_file executed successfully
2025/03/01 01:32:27 PM INFO:map_filename: donor_map_fname
2025/03/01 01:32:27 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 01:32:27 PM INFO:Dedupe by file
2025/03/01 01:32:27 PM INFO:Dedupe by file, shape: (66011, 40)
2025/03/01 01:32:27 PM INFO:dedupe_entity_file executed successfully
2025/03/01 01:32:27 PM INFO:Data cleanup completed, shape: (66011, 40)
2025/03/01 01:32:27 PM INFO:raw_data_cleanup executed successfully
2025/03/01 01:32:28 PM INFO:load_raw_data executed successfully
2025/03/01 01:32:28 PM INFO:get_raw_data executed successfully
2025/03/01 01:32:28 PM INFO:load_data_to_session executed successfully
2025/03/01 01:32:31 PM ERROR:Missing column: 'PartyName' in loaddata_df. Available columns: Index(['ECRef', 'OriginalRegulatedEntityName', 'RegulatedEntityType', 'Value',
       'AcceptedDate', 'AccountingUnitName', 'OriginalDonorName',
       'AccountingUnitsAsCentralParty', 'IsSponsorship', 'DonorStatus',
       'RegulatedDoneeType', 'CompanyRegistrationNumber', 'Postcode',
       'DonationType', 'NatureOfDonation', 'PurposeOfVisit', 'DonationAction',
       'ReceivedDate', 'ReportedDate', 'IsReportedPrePoll',
       'ReportingPeriodName', 'IsBequest', 'IsAggregation',
       'OriginalRegulatedEntityId', 'AccountingUnitId', 'OriginalDonorId',
       'CampaigningName', 'RegisterName', 'IsIrishSource',
       'CleanedRegulatedEntityId', 'CleanedRegulatedEntityName',
       'OriginalRegulatedEntityName', 'RegulatedEntityId',
       'RegulatedEntityName', 'CleanedDonorId', 'ParentDonorName',
       'CleanedDonorName', 'DonorStatus2', 'DonorId', 'DonorName',
       'EventCount', 'YearReceived', 'MonthReceived', 'YearMonthReceived'],
      dtype='object')
2025/03/01 01:32:31 PM INFO:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/01 01:32:31 PM INFO:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/01 01:32:31 PM INFO:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 01:32:31 PM INFO:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/01 01:32:32 PM INFO:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 01:32:32 PM INFO:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/01 01:32:32 PM INFO:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/01 01:32:32 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 01:32:32 PM INFO:map_mp_to_party executed successfully
2025/03/01 01:32:32 PM INFO:Election Dates not found in session, loading now.
2025/03/01 01:32:32 PM INFO:ElectionDatesDict: {'1929': {'dissolution': datetime.date(1929, 5, 10), 'election': datetime.date(1929, 5, 30)}, '1931': {'dissolution': datetime.date(1931, 10, 7), 'election': datetime.date(1931, 10, 27)}, '1935': {'dissolution': datetime.date(1935, 10, 25), 'election': datetime.date(1935, 11, 14)}, '1945': {'dissolution': datetime.date(1945, 6, 15), 'election': datetime.date(1945, 7, 5)}, '1950': {'dissolution': datetime.date(1950, 2, 3), 'election': datetime.date(1950, 2, 23)}, '1951': {'dissolution': datetime.date(1951, 10, 5), 'election': datetime.date(1951, 10, 25)}, '1955': {'dissolution': datetime.date(1955, 5, 6), 'election': datetime.date(1955, 5, 26)}, '1959': {'dissolution': datetime.date(1959, 9, 18), 'election': datetime.date(1959, 10, 8)}, '1964': {'dissolution': datetime.date(1964, 9, 25), 'election': datetime.date(1964, 10, 15)}, '1966': {'dissolution': datetime.date(1966, 3, 10), 'election': datetime.date(1966, 3, 31)}, '1970': {'dissolution': datetime.date(1970, 5, 29), 'election': datetime.date(1970, 6, 18)}, '1974 (Feb)': {'dissolution': datetime.date(1974, 2, 8), 'election': datetime.date(1974, 2, 28)}, '1974 (Oct)': {'dissolution': datetime.date(1974, 9, 20), 'election': datetime.date(1974, 10, 10)}, '1979': {'dissolution': datetime.date(1979, 4, 7), 'election': datetime.date(1979, 5, 3)}, '1983': {'dissolution': datetime.date(1983, 5, 13), 'election': datetime.date(1983, 6, 9)}, '1987': {'dissolution': datetime.date(1987, 5, 18), 'election': datetime.date(1987, 6, 11)}, '1992': {'dissolution': datetime.date(1992, 3, 16), 'election': datetime.date(1992, 4, 9)}, '1997': {'dissolution': datetime.date(1997, 4, 8), 'election': datetime.date(1997, 5, 1)}, '2001': {'dissolution': datetime.date(2001, 5, 14), 'election': datetime.date(2001, 6, 7)}, '2005': {'dissolution': datetime.date(2005, 4, 11), 'election': datetime.date(2005, 5, 5)}, '2010': {'dissolution': datetime.date(2010, 4, 12), 'election': datetime.date(2010, 5, 6)}, '2015': {'dissolution': datetime.date(2015, 3, 30), 'election': datetime.date(2015, 5, 7)}, '2017': {'dissolution': datetime.date(2017, 5, 3), 'election': datetime.date(2017, 6, 8)}, '2019': {'dissolution': datetime.date(2019, 11, 6), 'election': datetime.date(2019, 12, 12)}}
2025/03/01 01:32:32 PM INFO:Election Dates Loaded Successfully.
2025/03/01 01:32:32 PM INFO:load_election_dates executed successfully
2025/03/01 01:32:55 PM INFO:Cleaned Data completed, shape: (79737, 58)
2025/03/01 01:32:55 PM INFO:load_cleaned_data executed successfully
2025/03/01 01:32:56 PM INFO:get_cleaned_data executed successfully
2025/03/01 01:32:56 PM INFO:load_data_to_session executed successfully
2025/03/01 01:32:56 PM INFO:load_entity_summary_data executed successfully
2025/03/01 01:32:56 PM INFO:get_party_summary_data executed successfully
2025/03/01 01:32:56 PM INFO:load_data_to_session executed successfully
2025/03/01 01:32:56 PM INFO:load_donorList_data executed successfully
2025/03/01 01:32:56 PM INFO:get_donor_data executed successfully
2025/03/01 01:32:56 PM INFO:load_data_to_session executed successfully
2025/03/01 01:32:56 PM INFO:load_regulated_entity_data executed successfully
2025/03/01 01:32:56 PM INFO:get_regentity_data executed successfully
2025/03/01 01:32:56 PM INFO:load_data_to_session executed successfully
2025/03/01 01:32:56 PM INFO:firstload executed successfully
2025/03/01 01:45:57 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 01:45:57 PM INFO:Setting up the package
2025/03/01 01:45:57 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 01:45:57 PM INFO:get_git_version executed successfully
2025/03/01 01:45:57 PM INFO:Version: v20.117
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:init_state_var executed successfully
2025/03/01 01:45:57 PM INFO:Session_state variables initialized
2025/03/01 01:45:57 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 01:45:57 PM INFO:menu_selection: {'title': 'Head Line Figures', 'function': <function hlf_body at 0x0000024CA47C1D80>}
2025/03/01 01:45:57 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 01:45:57 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 01:45:57 PM INFO:perc_target: 0.5
2025/03/01 01:45:57 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 01:45:57 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 01:45:57 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 01:45:57 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 01:45:57 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 01:45:57 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 01:45:57 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 01:45:57 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 01:45:57 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 01:45:57 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 01:45:57 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 01:45:57 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 01:45:57 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 01:45:57 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 01:45:57 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 01:45:57 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 01:45:57 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 01:45:57 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 01:45:57 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 01:45:57 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 01:45:57 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 01:45:57 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 01:45:57 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 01:45:57 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 01:45:57 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 01:45:57 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 01:45:57 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 01:45:58 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 01:45:58 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 01:45:58 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 01:45:58 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 01:45:58 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 01:45:58 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 01:45:58 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 01:45:58 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 01:45:58 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 01:45:58 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 01:45:58 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 01:45:58 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 01:45:58 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 01:45:58 PM INFO:Session state Setup complete
2025/03/01 01:45:58 PM INFO:initialize_session_state executed successfully
2025/03/01 01:45:58 PM INFO:Package setup complete
2025/03/01 01:45:58 PM INFO:get_git_version executed successfully
2025/03/01 01:45:58 PM INFO:App Version: v20.132
2025/03/01 01:45:58 PM INFO:Switched to page: Head Line Figures
2025/03/01 01:45:58 PM ERROR:Error in plot_bar_line_by_year: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 01:45:58 PM ERROR:Error in pagesetup: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 113, in hlf_body
    vis.plot_bar_line_by_year(filtered_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 01:45:58 PM CRITICAL:Menu setup crashed: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 113, in hlf_body
    vis.plot_bar_line_by_year(filtered_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 01:46:20 PM INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/01 01:46:20 PM INFO:get_git_version executed successfully
2025/03/01 01:46:20 PM INFO:get_git_version executed successfully
2025/03/01 01:46:20 PM INFO:get_git_version executed successfully
2025/03/01 01:46:20 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 01:46:20 PM INFO:Setting up the package
2025/03/01 01:46:20 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 01:46:20 PM INFO:get_git_version executed successfully
2025/03/01 01:46:20 PM INFO:Version: v20.117
2025/03/01 01:46:20 PM INFO:init_state_var executed successfully
2025/03/01 01:46:20 PM INFO:init_state_var executed successfully
2025/03/01 01:46:20 PM INFO:init_state_var executed successfully
2025/03/01 01:46:20 PM INFO:init_state_var executed successfully
2025/03/01 01:46:20 PM INFO:init_state_var executed successfully
2025/03/01 01:46:20 PM INFO:init_state_var executed successfully
2025/03/01 01:46:20 PM INFO:init_state_var executed successfully
2025/03/01 01:46:20 PM INFO:init_state_var executed successfully
2025/03/01 01:46:20 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:init_state_var executed successfully
2025/03/01 01:46:21 PM INFO:Session_state variables initialized
2025/03/01 01:46:21 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 01:46:21 PM INFO:menu_selection: {'title': 'Bequeths', 'function': <function mod_bequeths_page at 0x0000024CA4BF4A60>}
2025/03/01 01:46:21 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 01:46:21 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 01:46:21 PM INFO:perc_target: 0.5
2025/03/01 01:46:21 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 01:46:21 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 01:46:21 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 01:46:21 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 01:46:21 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 01:46:21 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 01:46:21 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 01:46:21 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 01:46:21 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 01:46:21 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 01:46:21 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 01:46:21 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 01:46:21 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 01:46:21 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 01:46:21 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 01:46:21 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 01:46:21 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 01:46:21 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 01:46:21 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 01:46:21 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 01:46:21 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 01:46:21 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 01:46:21 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 01:46:21 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 01:46:21 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 01:46:21 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 01:46:21 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 01:46:21 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 01:46:21 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 01:46:21 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 01:46:21 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 01:46:21 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 01:46:21 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 01:46:21 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 01:46:21 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 01:46:21 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 01:46:21 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 01:46:21 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 01:46:21 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 01:46:21 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 01:46:21 PM INFO:Session state Setup complete
2025/03/01 01:46:21 PM INFO:initialize_session_state executed successfully
2025/03/01 01:46:21 PM INFO:Package setup complete
2025/03/01 01:46:21 PM INFO:get_git_version executed successfully
2025/03/01 01:46:21 PM INFO:get_git_version executed successfully
2025/03/01 01:46:21 PM INFO:App Version: v20.132
2025/03/01 01:46:21 PM INFO:Switched to page: Bequeths
2025/03/01 01:46:24 PM ERROR:Missing column: 'PartyName' in loaddata_df. Available columns: Index(['ECRef', 'OriginalRegulatedEntityName', 'RegulatedEntityType', 'Value',
       'AcceptedDate', 'AccountingUnitName', 'OriginalDonorName',
       'AccountingUnitsAsCentralParty', 'IsSponsorship', 'DonorStatus',
       'RegulatedDoneeType', 'CompanyRegistrationNumber', 'Postcode',
       'DonationType', 'NatureOfDonation', 'PurposeOfVisit', 'DonationAction',
       'ReceivedDate', 'ReportedDate', 'IsReportedPrePoll',
       'ReportingPeriodName', 'IsBequest', 'IsAggregation',
       'OriginalRegulatedEntityId', 'AccountingUnitId', 'OriginalDonorId',
       'CampaigningName', 'RegisterName', 'IsIrishSource',
       'CleanedRegulatedEntityId', 'CleanedRegulatedEntityName',
       'OriginalRegulatedEntityName', 'RegulatedEntityId',
       'RegulatedEntityName', 'CleanedDonorId', 'ParentDonorName',
       'CleanedDonorName', 'DonorStatus2', 'DonorId', 'DonorName',
       'EventCount', 'YearReceived', 'MonthReceived', 'YearMonthReceived'],
      dtype='object')
2025/03/01 01:46:24 PM INFO:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/01 01:46:24 PM INFO:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/01 01:46:24 PM INFO:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 01:46:24 PM INFO:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/01 01:46:24 PM INFO:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 01:46:24 PM INFO:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/01 01:46:24 PM INFO:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/01 01:46:24 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 01:46:24 PM INFO:map_mp_to_party executed successfully
2025/03/01 01:46:51 PM INFO:Cleaned Data completed, shape: (79737, 58)
2025/03/01 01:46:52 PM INFO:load_cleaned_data executed successfully
2025/03/01 01:46:52 PM INFO:load_and_filter_data executed successfully
2025/03/01 01:46:52 PM INFO:display_summary_statistics executed successfully
2025/03/01 01:46:52 PM INFO:display_textual_insights executed successfully
2025/03/01 01:46:52 PM ERROR:Error in plot_bar_line_by_year: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 01:46:52 PM ERROR:Error in display_visualizations: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 95, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 01:46:52 PM ERROR:Error in display_data_page: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 95, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 01:46:52 PM ERROR:Error in pagesetup: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 57, in mod_bequeths_page
    display_data_page("Bequests_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 95, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 01:46:52 PM CRITICAL:Menu setup crashed: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 57, in mod_bequeths_page
    display_data_page("Bequests_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 95, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 01:52:44 PM INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/01 01:52:44 PM INFO:get_git_version executed successfully
2025/03/01 01:52:44 PM INFO:get_git_version executed successfully
2025/03/01 01:52:44 PM INFO:get_git_version executed successfully
2025/03/01 01:52:44 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 01:52:44 PM INFO:Setting up the package
2025/03/01 01:52:44 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 01:52:44 PM INFO:get_git_version executed successfully
2025/03/01 01:52:44 PM INFO:Version: v20.117
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:init_state_var executed successfully
2025/03/01 01:52:44 PM INFO:Session_state variables initialized
2025/03/01 01:52:44 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 01:52:44 PM INFO:menu_selection: {'title': 'Corporate Donations', 'function': <function mod_corporate_donations_page at 0x0000024CAC9A45E0>}
2025/03/01 01:52:44 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 01:52:44 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 01:52:44 PM INFO:perc_target: 0.5
2025/03/01 01:52:44 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 01:52:44 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 01:52:44 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 01:52:44 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 01:52:44 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 01:52:44 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 01:52:44 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 01:52:44 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 01:52:44 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 01:52:44 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 01:52:44 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 01:52:44 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 01:52:44 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 01:52:44 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 01:52:44 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 01:52:44 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 01:52:44 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 01:52:44 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 01:52:44 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 01:52:44 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 01:52:44 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 01:52:44 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 01:52:44 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 01:52:44 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 01:52:44 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 01:52:44 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 01:52:44 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 01:52:44 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 01:52:44 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 01:52:44 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 01:52:44 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 01:52:44 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 01:52:44 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 01:52:44 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 01:52:44 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 01:52:44 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 01:52:44 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 01:52:44 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 01:52:44 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 01:52:44 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 01:52:44 PM INFO:Session state Setup complete
2025/03/01 01:52:44 PM INFO:initialize_session_state executed successfully
2025/03/01 01:52:44 PM INFO:Package setup complete
2025/03/01 01:52:44 PM INFO:get_git_version executed successfully
2025/03/01 01:52:44 PM ERROR:Error in pagesetup: invalid decimal literal (modular_page_blocks.py, line 71)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 11, in pagesetup
    from app_pages.mod_page_calls import (
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 2, in <module>
    from app_pages.modular_page import display_data_page
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 2, in <module>
    from components.modular_page_blocks import (
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 71
    (format_number(tstats['total_value']:,.0f))
                                           ^
SyntaxError: invalid decimal literal
2025/03/01 01:52:44 PM CRITICAL:Menu setup crashed: invalid decimal literal (modular_page_blocks.py, line 71)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 11, in pagesetup
    from app_pages.mod_page_calls import (
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 2, in <module>
    from app_pages.modular_page import display_data_page
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 2, in <module>
    from components.modular_page_blocks import (
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 71
    (format_number(tstats['total_value']:,.0f))
                                           ^
SyntaxError: invalid decimal literal
2025/03/01 01:53:44 PM INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/01 01:53:44 PM INFO:get_git_version executed successfully
2025/03/01 01:53:44 PM INFO:get_git_version executed successfully
2025/03/01 01:53:44 PM INFO:get_git_version executed successfully
2025/03/01 01:53:44 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 01:53:44 PM INFO:Setting up the package
2025/03/01 01:53:44 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 01:53:44 PM INFO:get_git_version executed successfully
2025/03/01 01:53:44 PM INFO:Version: v20.117
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:init_state_var executed successfully
2025/03/01 01:53:44 PM INFO:Session_state variables initialized
2025/03/01 01:53:44 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 01:53:44 PM INFO:menu_selection: {'title': 'Sponsorships', 'function': <function mod_sponsorship_page at 0x0000024CAC9A43A0>}
2025/03/01 01:53:44 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 01:53:44 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 01:53:44 PM INFO:perc_target: 0.5
2025/03/01 01:53:44 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 01:53:44 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 01:53:44 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 01:53:44 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 01:53:44 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 01:53:44 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 01:53:44 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 01:53:44 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 01:53:44 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 01:53:44 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 01:53:44 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 01:53:44 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 01:53:44 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 01:53:44 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 01:53:44 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 01:53:44 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 01:53:44 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 01:53:44 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 01:53:44 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 01:53:44 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 01:53:44 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 01:53:44 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 01:53:44 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 01:53:44 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 01:53:44 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 01:53:44 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 01:53:44 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 01:53:44 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 01:53:44 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 01:53:44 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 01:53:44 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 01:53:44 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 01:53:44 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 01:53:44 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 01:53:44 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 01:53:44 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 01:53:44 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 01:53:44 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 01:53:44 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 01:53:44 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 01:53:44 PM INFO:Session state Setup complete
2025/03/01 01:53:44 PM INFO:initialize_session_state executed successfully
2025/03/01 01:53:44 PM INFO:Package setup complete
2025/03/01 01:53:44 PM INFO:get_git_version executed successfully
2025/03/01 01:53:44 PM INFO:get_git_version executed successfully
2025/03/01 01:53:44 PM INFO:App Version: v20.132
2025/03/01 01:53:44 PM INFO:Switched to page: Sponsorships
2025/03/01 01:53:44 PM INFO:load_cleaned_data executed successfully
2025/03/01 01:53:44 PM INFO:load_and_filter_data executed successfully
2025/03/01 01:53:44 PM INFO:display_summary_statistics executed successfully
2025/03/01 01:53:44 PM INFO:display_textual_insights executed successfully
2025/03/01 01:53:44 PM ERROR:Error in plot_bar_line_by_year: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 01:53:44 PM ERROR:Error in display_visualizations: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 95, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 01:53:44 PM ERROR:Error in display_data_page: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 95, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 01:53:44 PM ERROR:Error in pagesetup: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 37, in mod_sponsorship_page
    display_data_page("Sponsorships_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 95, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 01:53:44 PM CRITICAL:Menu setup crashed: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 37, in mod_sponsorship_page
    display_data_page("Sponsorships_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 95, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 01:53:47 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 01:53:47 PM INFO:Setting up the package
2025/03/01 01:53:47 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 01:53:47 PM INFO:get_git_version executed successfully
2025/03/01 01:53:47 PM INFO:Version: v20.117
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:init_state_var executed successfully
2025/03/01 01:53:47 PM INFO:Session_state variables initialized
2025/03/01 01:53:47 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 01:53:47 PM INFO:menu_selection: {'title': 'Sponsorships', 'function': <function mod_sponsorship_page at 0x0000024CAC6435B0>}
2025/03/01 01:53:47 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 01:53:47 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 01:53:47 PM INFO:perc_target: 0.5
2025/03/01 01:53:47 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 01:53:47 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 01:53:47 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 01:53:47 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 01:53:47 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 01:53:47 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 01:53:47 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 01:53:47 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 01:53:47 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 01:53:47 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 01:53:47 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 01:53:47 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 01:53:47 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 01:53:47 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 01:53:47 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 01:53:47 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 01:53:47 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 01:53:47 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 01:53:47 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 01:53:47 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 01:53:47 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 01:53:47 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 01:53:47 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 01:53:47 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 01:53:47 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 01:53:47 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 01:53:47 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 01:53:47 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 01:53:47 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 01:53:47 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 01:53:47 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 01:53:47 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 01:53:47 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 01:53:47 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 01:53:47 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 01:53:47 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 01:53:47 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 01:53:47 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 01:53:47 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 01:53:47 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 01:53:47 PM INFO:Session state Setup complete
2025/03/01 01:53:47 PM INFO:initialize_session_state executed successfully
2025/03/01 01:53:47 PM INFO:Package setup complete
2025/03/01 01:53:47 PM INFO:get_git_version executed successfully
2025/03/01 01:53:47 PM INFO:App Version: v20.132
2025/03/01 01:53:47 PM INFO:Switched to page: Sponsorships
2025/03/01 01:53:47 PM INFO:load_cleaned_data executed successfully
2025/03/01 01:53:47 PM INFO:load_and_filter_data executed successfully
2025/03/01 01:53:48 PM INFO:display_summary_statistics executed successfully
2025/03/01 01:53:48 PM INFO:display_textual_insights executed successfully
2025/03/01 01:53:48 PM ERROR:Error in plot_bar_line_by_year: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 01:53:48 PM ERROR:Error in display_visualizations: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 95, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 01:53:48 PM ERROR:Error in display_data_page: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 95, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 01:53:48 PM ERROR:Error in pagesetup: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 37, in mod_sponsorship_page
    display_data_page("Sponsorships_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 95, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 01:53:48 PM CRITICAL:Menu setup crashed: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 37, in mod_sponsorship_page
    display_data_page("Sponsorships_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 95, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 01:54:35 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 01:54:36 PM INFO:get_git_version executed successfully
2025/03/01 01:54:37 PM INFO:get_git_version executed successfully
2025/03/01 01:54:37 PM INFO:get_git_version executed successfully
2025/03/01 01:54:37 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 01:54:37 PM INFO:Setting up the package
2025/03/01 01:54:37 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 01:54:37 PM INFO:get_git_version executed successfully
2025/03/01 01:54:37 PM INFO:Version: v20.117
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:init_state_var executed successfully
2025/03/01 01:54:37 PM INFO:Session_state variables initialized
2025/03/01 01:54:37 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 01:54:37 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 01:54:37 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 01:54:37 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 01:54:37 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 01:54:37 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 01:54:37 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 01:54:37 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 01:54:37 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 01:54:37 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 01:54:37 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 01:54:37 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 01:54:37 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 01:54:37 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 01:54:37 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 01:54:37 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 01:54:37 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 01:54:37 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 01:54:37 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 01:54:37 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 01:54:37 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 01:54:37 PM INFO:perc_target: 0.5
2025/03/01 01:54:37 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 01:54:37 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 01:54:37 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 01:54:37 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 01:54:37 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 01:54:37 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 01:54:37 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 01:54:37 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 01:54:37 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 01:54:37 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 01:54:37 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 01:54:37 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 01:54:37 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 01:54:37 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 01:54:37 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 01:54:37 PM INFO:Session state Setup complete
2025/03/01 01:54:37 PM INFO:initialize_session_state executed successfully
2025/03/01 01:54:37 PM INFO:Package setup complete
2025/03/01 01:54:37 PM INFO:get_git_version executed successfully
2025/03/01 01:54:37 PM INFO:get_git_version executed successfully
2025/03/01 01:54:37 PM INFO:App Version: v20.132
2025/03/01 01:54:37 PM INFO:Switched to page: Introduction
2025/03/01 01:54:37 PM INFO:pagesetup executed successfully
2025/03/01 01:54:37 PM INFO:No data found in session state, running firstload()
2025/03/01 01:54:39 PM INFO:map_filename: regentity_map_fname
2025/03/01 01:54:39 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 01:54:39 PM INFO:Dedupe by file
2025/03/01 01:54:39 PM INFO:Dedupe by file, shape: (65279, 34)
2025/03/01 01:54:39 PM INFO:dedupe_entity_file executed successfully
2025/03/01 01:54:39 PM INFO:map_filename: donor_map_fname
2025/03/01 01:54:39 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 01:54:39 PM INFO:Dedupe by file
2025/03/01 01:54:40 PM INFO:Dedupe by file, shape: (66011, 40)
2025/03/01 01:54:40 PM INFO:dedupe_entity_file executed successfully
2025/03/01 01:54:40 PM INFO:Data cleanup completed, shape: (66011, 40)
2025/03/01 01:54:40 PM INFO:raw_data_cleanup executed successfully
2025/03/01 01:54:41 PM INFO:load_raw_data executed successfully
2025/03/01 01:54:41 PM INFO:get_raw_data executed successfully
2025/03/01 01:54:41 PM INFO:load_data_to_session executed successfully
2025/03/01 01:54:44 PM ERROR:Missing column: 'PartyName' in loaddata_df. Available columns: Index(['ECRef', 'OriginalRegulatedEntityName', 'RegulatedEntityType', 'Value',
       'AcceptedDate', 'AccountingUnitName', 'OriginalDonorName',
       'AccountingUnitsAsCentralParty', 'IsSponsorship', 'DonorStatus',
       'RegulatedDoneeType', 'CompanyRegistrationNumber', 'Postcode',
       'DonationType', 'NatureOfDonation', 'PurposeOfVisit', 'DonationAction',
       'ReceivedDate', 'ReportedDate', 'IsReportedPrePoll',
       'ReportingPeriodName', 'IsBequest', 'IsAggregation',
       'OriginalRegulatedEntityId', 'AccountingUnitId', 'OriginalDonorId',
       'CampaigningName', 'RegisterName', 'IsIrishSource',
       'CleanedRegulatedEntityId', 'CleanedRegulatedEntityName',
       'OriginalRegulatedEntityName', 'RegulatedEntityId',
       'RegulatedEntityName', 'CleanedDonorId', 'ParentDonorName',
       'CleanedDonorName', 'DonorStatus2', 'DonorId', 'DonorName',
       'EventCount', 'YearReceived', 'MonthReceived', 'YearMonthReceived'],
      dtype='object')
2025/03/01 01:54:44 PM INFO:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/01 01:54:44 PM INFO:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/01 01:54:44 PM INFO:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 01:54:44 PM INFO:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/01 01:54:44 PM INFO:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 01:54:44 PM INFO:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/01 01:54:44 PM INFO:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/01 01:54:44 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 01:54:44 PM INFO:map_mp_to_party executed successfully
2025/03/01 01:54:45 PM INFO:Election Dates not found in session, loading now.
2025/03/01 01:54:45 PM INFO:ElectionDatesDict: {'1929': {'dissolution': datetime.date(1929, 5, 10), 'election': datetime.date(1929, 5, 30)}, '1931': {'dissolution': datetime.date(1931, 10, 7), 'election': datetime.date(1931, 10, 27)}, '1935': {'dissolution': datetime.date(1935, 10, 25), 'election': datetime.date(1935, 11, 14)}, '1945': {'dissolution': datetime.date(1945, 6, 15), 'election': datetime.date(1945, 7, 5)}, '1950': {'dissolution': datetime.date(1950, 2, 3), 'election': datetime.date(1950, 2, 23)}, '1951': {'dissolution': datetime.date(1951, 10, 5), 'election': datetime.date(1951, 10, 25)}, '1955': {'dissolution': datetime.date(1955, 5, 6), 'election': datetime.date(1955, 5, 26)}, '1959': {'dissolution': datetime.date(1959, 9, 18), 'election': datetime.date(1959, 10, 8)}, '1964': {'dissolution': datetime.date(1964, 9, 25), 'election': datetime.date(1964, 10, 15)}, '1966': {'dissolution': datetime.date(1966, 3, 10), 'election': datetime.date(1966, 3, 31)}, '1970': {'dissolution': datetime.date(1970, 5, 29), 'election': datetime.date(1970, 6, 18)}, '1974 (Feb)': {'dissolution': datetime.date(1974, 2, 8), 'election': datetime.date(1974, 2, 28)}, '1974 (Oct)': {'dissolution': datetime.date(1974, 9, 20), 'election': datetime.date(1974, 10, 10)}, '1979': {'dissolution': datetime.date(1979, 4, 7), 'election': datetime.date(1979, 5, 3)}, '1983': {'dissolution': datetime.date(1983, 5, 13), 'election': datetime.date(1983, 6, 9)}, '1987': {'dissolution': datetime.date(1987, 5, 18), 'election': datetime.date(1987, 6, 11)}, '1992': {'dissolution': datetime.date(1992, 3, 16), 'election': datetime.date(1992, 4, 9)}, '1997': {'dissolution': datetime.date(1997, 4, 8), 'election': datetime.date(1997, 5, 1)}, '2001': {'dissolution': datetime.date(2001, 5, 14), 'election': datetime.date(2001, 6, 7)}, '2005': {'dissolution': datetime.date(2005, 4, 11), 'election': datetime.date(2005, 5, 5)}, '2010': {'dissolution': datetime.date(2010, 4, 12), 'election': datetime.date(2010, 5, 6)}, '2015': {'dissolution': datetime.date(2015, 3, 30), 'election': datetime.date(2015, 5, 7)}, '2017': {'dissolution': datetime.date(2017, 5, 3), 'election': datetime.date(2017, 6, 8)}, '2019': {'dissolution': datetime.date(2019, 11, 6), 'election': datetime.date(2019, 12, 12)}}
2025/03/01 01:54:45 PM INFO:Election Dates Loaded Successfully.
2025/03/01 01:54:45 PM INFO:load_election_dates executed successfully
2025/03/01 01:55:09 PM INFO:Cleaned Data completed, shape: (79737, 58)
2025/03/01 01:55:09 PM INFO:load_cleaned_data executed successfully
2025/03/01 01:55:09 PM INFO:get_cleaned_data executed successfully
2025/03/01 01:55:09 PM INFO:load_data_to_session executed successfully
2025/03/01 01:55:09 PM INFO:load_entity_summary_data executed successfully
2025/03/01 01:55:09 PM INFO:get_party_summary_data executed successfully
2025/03/01 01:55:09 PM INFO:load_data_to_session executed successfully
2025/03/01 01:55:09 PM INFO:load_donorList_data executed successfully
2025/03/01 01:55:09 PM INFO:get_donor_data executed successfully
2025/03/01 01:55:09 PM INFO:load_data_to_session executed successfully
2025/03/01 01:55:10 PM INFO:load_regulated_entity_data executed successfully
2025/03/01 01:55:10 PM INFO:get_regentity_data executed successfully
2025/03/01 01:55:10 PM INFO:load_data_to_session executed successfully
2025/03/01 01:55:10 PM INFO:firstload executed successfully
2025/03/01 01:55:15 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 01:55:15 PM INFO:Setting up the package
2025/03/01 01:55:15 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 01:55:15 PM INFO:get_git_version executed successfully
2025/03/01 01:55:15 PM INFO:Version: v20.117
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:init_state_var executed successfully
2025/03/01 01:55:15 PM INFO:Session_state variables initialized
2025/03/01 01:55:15 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 01:55:15 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 01:55:15 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 01:55:15 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 01:55:15 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 01:55:15 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 01:55:15 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 01:55:15 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 01:55:15 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 01:55:15 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 01:55:15 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 01:55:15 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 01:55:15 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 01:55:15 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 01:55:15 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 01:55:15 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 01:55:15 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 01:55:15 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 01:55:15 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 01:55:15 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 01:55:15 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 01:55:15 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 01:55:15 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 01:55:15 PM INFO:perc_target: 0.5
2025/03/01 01:55:15 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 01:55:15 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 01:55:15 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 01:55:15 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 01:55:15 PM INFO:menu_selection: {'title': 'Head Line Figures', 'function': <function hlf_body at 0x000001C47FEB6B00>}
2025/03/01 01:55:15 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 01:55:15 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 01:55:15 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 01:55:15 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 01:55:15 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 01:55:15 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 01:55:15 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 01:55:15 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 01:55:15 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 01:55:15 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 01:55:15 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 01:55:15 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 01:55:15 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 01:55:15 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 01:55:15 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 01:55:15 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 01:55:15 PM INFO:Session state Setup complete
2025/03/01 01:55:15 PM INFO:initialize_session_state executed successfully
2025/03/01 01:55:15 PM INFO:Package setup complete
2025/03/01 01:55:15 PM INFO:get_git_version executed successfully
2025/03/01 01:55:15 PM INFO:App Version: v20.132
2025/03/01 01:55:15 PM INFO:Switched to page: Head Line Figures
2025/03/01 01:55:15 PM ERROR:Error in plot_bar_line_by_year: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
2025/03/01 01:55:15 PM ERROR:Error in pagesetup: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 113, in hlf_body
    vis.plot_bar_line_by_year(filtered_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
2025/03/01 01:55:15 PM CRITICAL:Menu setup crashed: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 113, in hlf_body
    vis.plot_bar_line_by_year(filtered_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
2025/03/01 02:05:37 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 02:05:38 PM INFO:get_git_version executed successfully
2025/03/01 02:05:38 PM INFO:get_git_version executed successfully
2025/03/01 02:05:38 PM INFO:get_git_version executed successfully
2025/03/01 02:05:39 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 02:05:39 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 02:05:39 PM INFO:Setting up the package
2025/03/01 02:05:39 PM INFO:Setting up the package
2025/03/01 02:05:39 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 02:05:39 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 02:05:39 PM INFO:get_git_version executed successfully
2025/03/01 02:05:39 PM INFO:get_git_version executed successfully
2025/03/01 02:05:39 PM INFO:Version: v20.117
2025/03/01 02:05:39 PM INFO:Version: v20.117
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:init_state_var executed successfully
2025/03/01 02:05:39 PM INFO:Session_state variables initialized
2025/03/01 02:05:39 PM INFO:Session_state variables initialized
2025/03/01 02:05:39 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 02:05:39 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 02:05:39 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 02:05:39 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 02:05:39 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 02:05:39 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 02:05:39 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:05:39 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:05:39 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 02:05:39 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 02:05:39 PM INFO:perc_target: 0.5
2025/03/01 02:05:39 PM INFO:perc_target: 0.5
2025/03/01 02:05:39 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 02:05:39 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 02:05:39 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 02:05:39 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 02:05:39 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 02:05:39 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 02:05:39 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 02:05:39 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 02:05:39 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 02:05:39 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 02:05:39 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 02:05:39 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 02:05:39 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 02:05:39 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 02:05:39 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 02:05:39 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 02:05:39 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 02:05:39 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 02:05:39 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 02:05:39 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 02:05:39 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 02:05:39 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 02:05:39 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 02:05:39 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 02:05:39 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 02:05:39 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 02:05:39 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 02:05:39 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 02:05:39 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 02:05:39 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 02:05:39 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 02:05:39 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 02:05:39 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 02:05:39 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 02:05:39 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 02:05:39 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 02:05:39 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 02:05:39 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 02:05:39 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 02:05:39 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 02:05:39 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 02:05:39 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 02:05:39 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 02:05:39 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 02:05:39 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 02:05:39 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 02:05:39 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 02:05:39 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 02:05:39 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 02:05:39 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 02:05:39 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:05:39 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:05:39 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 02:05:39 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 02:05:39 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 02:05:39 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 02:05:39 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 02:05:39 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 02:05:39 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 02:05:39 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 02:05:39 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 02:05:39 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 02:05:39 PM INFO:Session state Setup complete
2025/03/01 02:05:39 PM INFO:Session state Setup complete
2025/03/01 02:05:39 PM INFO:initialize_session_state executed successfully
2025/03/01 02:05:39 PM INFO:initialize_session_state executed successfully
2025/03/01 02:05:39 PM INFO:Package setup complete
2025/03/01 02:05:39 PM INFO:Package setup complete
2025/03/01 02:05:39 PM INFO:get_git_version executed successfully
2025/03/01 02:05:39 PM ERROR:Error in pagesetup: closing parenthesis ']' does not match opening parenthesis '(' (Visualisations.py, line 48)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 2, in <module>
    import components.Visualisations as vis
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 48
    if graph_df is None or not all(col in graph_df.columns for col in XValues, YValues]):
                                                                                      ^
SyntaxError: closing parenthesis ']' does not match opening parenthesis '('
2025/03/01 02:05:39 PM ERROR:Error in pagesetup: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
ImportError: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py)
2025/03/01 02:05:39 PM CRITICAL:Menu setup crashed: closing parenthesis ']' does not match opening parenthesis '(' (Visualisations.py, line 48)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 2, in <module>
    import components.Visualisations as vis
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 48
    if graph_df is None or not all(col in graph_df.columns for col in XValues, YValues]):
                                                                                      ^
SyntaxError: closing parenthesis ']' does not match opening parenthesis '('
2025/03/01 02:05:39 PM CRITICAL:Menu setup crashed: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
ImportError: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py)
2025/03/01 02:06:30 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 02:06:31 PM INFO:get_git_version executed successfully
2025/03/01 02:06:31 PM INFO:get_git_version executed successfully
2025/03/01 02:06:31 PM INFO:get_git_version executed successfully
2025/03/01 02:06:32 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 02:06:32 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 02:06:32 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 02:06:32 PM INFO:Setting up the package
2025/03/01 02:06:32 PM INFO:Setting up the package
2025/03/01 02:06:32 PM INFO:Setting up the package
2025/03/01 02:06:32 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 02:06:32 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 02:06:32 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 02:06:32 PM INFO:get_git_version executed successfully
2025/03/01 02:06:32 PM INFO:get_git_version executed successfully
2025/03/01 02:06:32 PM INFO:get_git_version executed successfully
2025/03/01 02:06:32 PM INFO:Version: v20.117
2025/03/01 02:06:32 PM INFO:Version: v20.117
2025/03/01 02:06:32 PM INFO:Version: v20.117
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:Session_state variables initialized
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 02:06:32 PM INFO:init_state_var executed successfully
2025/03/01 02:06:32 PM INFO:Session_state variables initialized
2025/03/01 02:06:32 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 02:06:32 PM INFO:Session_state variables initialized
2025/03/01 02:06:32 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 02:06:32 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 02:06:32 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 02:06:32 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 02:06:32 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 02:06:32 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 02:06:32 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 02:06:32 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 02:06:32 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 02:06:32 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 02:06:32 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 02:06:32 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 02:06:32 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 02:06:32 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 02:06:32 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 02:06:32 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 02:06:32 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:06:32 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 02:06:32 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 02:06:32 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 02:06:32 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 02:06:32 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:06:32 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:06:32 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:06:32 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 02:06:32 PM INFO:perc_target: 0.5
2025/03/01 02:06:32 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 02:06:32 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:06:32 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 02:06:32 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:06:32 PM INFO:perc_target: 0.5
2025/03/01 02:06:32 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 02:06:32 PM INFO:perc_target: 0.5
2025/03/01 02:06:32 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 02:06:32 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 02:06:32 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 02:06:32 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 02:06:32 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 02:06:32 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 02:06:32 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 02:06:32 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 02:06:32 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 02:06:32 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 02:06:32 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 02:06:32 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 02:06:32 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 02:06:32 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 02:06:32 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 02:06:32 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 02:06:32 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 02:06:32 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 02:06:32 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 02:06:32 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 02:06:32 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 02:06:32 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 02:06:32 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 02:06:32 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 02:06:32 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 02:06:32 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 02:06:32 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 02:06:32 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 02:06:32 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 02:06:32 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 02:06:32 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 02:06:32 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 02:06:32 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 02:06:32 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 02:06:32 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 02:06:32 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 02:06:32 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 02:06:32 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 02:06:32 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 02:06:32 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 02:06:32 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 02:06:32 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 02:06:32 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 02:06:32 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 02:06:32 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 02:06:32 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 02:06:32 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 02:06:32 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 02:06:32 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 02:06:32 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 02:06:32 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 02:06:32 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 02:06:32 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 02:06:32 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 02:06:32 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 02:06:32 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 02:06:32 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 02:06:32 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 02:06:32 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 02:06:32 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 02:06:32 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 02:06:32 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 02:06:32 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 02:06:32 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 02:06:32 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 02:06:32 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 02:06:32 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 02:06:32 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 02:06:32 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 02:06:32 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 02:06:32 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 02:06:32 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 02:06:32 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 02:06:32 PM INFO:Session state Setup complete
2025/03/01 02:06:32 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 02:06:32 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 02:06:32 PM INFO:initialize_session_state executed successfully
2025/03/01 02:06:32 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 02:06:32 PM INFO:Session state Setup complete
2025/03/01 02:06:32 PM INFO:Package setup complete
2025/03/01 02:06:32 PM INFO:Session state Setup complete
2025/03/01 02:06:32 PM INFO:initialize_session_state executed successfully
2025/03/01 02:06:32 PM INFO:initialize_session_state executed successfully
2025/03/01 02:06:32 PM INFO:Package setup complete
2025/03/01 02:06:32 PM INFO:Package setup complete
2025/03/01 02:06:32 PM INFO:get_git_version executed successfully
2025/03/01 02:06:32 PM INFO:get_git_version executed successfully
2025/03/01 02:06:32 PM INFO:get_git_version executed successfully
2025/03/01 02:06:32 PM INFO:get_git_version executed successfully
2025/03/01 02:06:32 PM INFO:App Version: v20.132
2025/03/01 02:06:32 PM INFO:App Version: v20.132
2025/03/01 02:06:32 PM INFO:App Version: v20.132
2025/03/01 02:06:32 PM INFO:Switched to page: Introduction
2025/03/01 02:06:32 PM INFO:Switched to page: Introduction
2025/03/01 02:06:32 PM INFO:Switched to page: Head Line Figures
2025/03/01 02:06:32 PM ERROR:Error in pagesetup: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 30, in hlf_body
    unique_donors = get_donors_ct(filtered_df)
  File "H:\VScode\dashboard_demo-1\components\calculations.py", line 97, in get_donors_ct
    return df["DonorId"].nunique()
TypeError: 'NoneType' object is not subscriptable
2025/03/01 02:06:32 PM INFO:pagesetup executed successfully
2025/03/01 02:06:32 PM INFO:pagesetup executed successfully
2025/03/01 02:06:32 PM CRITICAL:Menu setup crashed: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 30, in hlf_body
    unique_donors = get_donors_ct(filtered_df)
  File "H:\VScode\dashboard_demo-1\components\calculations.py", line 97, in get_donors_ct
    return df["DonorId"].nunique()
TypeError: 'NoneType' object is not subscriptable
2025/03/01 02:06:32 PM INFO:No data found in session state, running firstload()
2025/03/01 02:06:32 PM INFO:No data found in session state, running firstload()
2025/03/01 02:06:34 PM INFO:map_filename: regentity_map_fname
2025/03/01 02:06:34 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:06:34 PM INFO:Dedupe by file
2025/03/01 02:06:34 PM INFO:Dedupe by file, shape: (65279, 34)
2025/03/01 02:06:34 PM INFO:dedupe_entity_file executed successfully
2025/03/01 02:06:34 PM INFO:map_filename: donor_map_fname
2025/03/01 02:06:34 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:06:34 PM INFO:Dedupe by file
2025/03/01 02:06:34 PM INFO:Dedupe by file, shape: (66011, 40)
2025/03/01 02:06:34 PM INFO:dedupe_entity_file executed successfully
2025/03/01 02:06:34 PM INFO:Data cleanup completed, shape: (66011, 40)
2025/03/01 02:06:34 PM INFO:raw_data_cleanup executed successfully
2025/03/01 02:06:35 PM INFO:load_raw_data executed successfully
2025/03/01 02:06:35 PM INFO:get_raw_data executed successfully
2025/03/01 02:06:35 PM INFO:load_data_to_session executed successfully
2025/03/01 02:06:38 PM ERROR:Missing column: 'PartyName' in loaddata_df. Available columns: Index(['ECRef', 'OriginalRegulatedEntityName', 'RegulatedEntityType', 'Value',
       'AcceptedDate', 'AccountingUnitName', 'OriginalDonorName',
       'AccountingUnitsAsCentralParty', 'IsSponsorship', 'DonorStatus',
       'RegulatedDoneeType', 'CompanyRegistrationNumber', 'Postcode',
       'DonationType', 'NatureOfDonation', 'PurposeOfVisit', 'DonationAction',
       'ReceivedDate', 'ReportedDate', 'IsReportedPrePoll',
       'ReportingPeriodName', 'IsBequest', 'IsAggregation',
       'OriginalRegulatedEntityId', 'AccountingUnitId', 'OriginalDonorId',
       'CampaigningName', 'RegisterName', 'IsIrishSource',
       'CleanedRegulatedEntityId', 'CleanedRegulatedEntityName',
       'OriginalRegulatedEntityName', 'RegulatedEntityId',
       'RegulatedEntityName', 'CleanedDonorId', 'ParentDonorName',
       'CleanedDonorName', 'DonorStatus2', 'DonorId', 'DonorName',
       'EventCount', 'YearReceived', 'MonthReceived', 'YearMonthReceived'],
      dtype='object')
2025/03/01 02:06:38 PM INFO:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/01 02:06:38 PM INFO:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/01 02:06:38 PM INFO:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 02:06:39 PM INFO:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/01 02:06:39 PM INFO:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 02:06:39 PM INFO:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/01 02:06:39 PM INFO:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/01 02:06:39 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 02:06:39 PM INFO:map_mp_to_party executed successfully
2025/03/01 02:06:39 PM INFO:Election Dates not found in session, loading now.
2025/03/01 02:06:39 PM INFO:ElectionDatesDict: {'1929': {'dissolution': datetime.date(1929, 5, 10), 'election': datetime.date(1929, 5, 30)}, '1931': {'dissolution': datetime.date(1931, 10, 7), 'election': datetime.date(1931, 10, 27)}, '1935': {'dissolution': datetime.date(1935, 10, 25), 'election': datetime.date(1935, 11, 14)}, '1945': {'dissolution': datetime.date(1945, 6, 15), 'election': datetime.date(1945, 7, 5)}, '1950': {'dissolution': datetime.date(1950, 2, 3), 'election': datetime.date(1950, 2, 23)}, '1951': {'dissolution': datetime.date(1951, 10, 5), 'election': datetime.date(1951, 10, 25)}, '1955': {'dissolution': datetime.date(1955, 5, 6), 'election': datetime.date(1955, 5, 26)}, '1959': {'dissolution': datetime.date(1959, 9, 18), 'election': datetime.date(1959, 10, 8)}, '1964': {'dissolution': datetime.date(1964, 9, 25), 'election': datetime.date(1964, 10, 15)}, '1966': {'dissolution': datetime.date(1966, 3, 10), 'election': datetime.date(1966, 3, 31)}, '1970': {'dissolution': datetime.date(1970, 5, 29), 'election': datetime.date(1970, 6, 18)}, '1974 (Feb)': {'dissolution': datetime.date(1974, 2, 8), 'election': datetime.date(1974, 2, 28)}, '1974 (Oct)': {'dissolution': datetime.date(1974, 9, 20), 'election': datetime.date(1974, 10, 10)}, '1979': {'dissolution': datetime.date(1979, 4, 7), 'election': datetime.date(1979, 5, 3)}, '1983': {'dissolution': datetime.date(1983, 5, 13), 'election': datetime.date(1983, 6, 9)}, '1987': {'dissolution': datetime.date(1987, 5, 18), 'election': datetime.date(1987, 6, 11)}, '1992': {'dissolution': datetime.date(1992, 3, 16), 'election': datetime.date(1992, 4, 9)}, '1997': {'dissolution': datetime.date(1997, 4, 8), 'election': datetime.date(1997, 5, 1)}, '2001': {'dissolution': datetime.date(2001, 5, 14), 'election': datetime.date(2001, 6, 7)}, '2005': {'dissolution': datetime.date(2005, 4, 11), 'election': datetime.date(2005, 5, 5)}, '2010': {'dissolution': datetime.date(2010, 4, 12), 'election': datetime.date(2010, 5, 6)}, '2015': {'dissolution': datetime.date(2015, 3, 30), 'election': datetime.date(2015, 5, 7)}, '2017': {'dissolution': datetime.date(2017, 5, 3), 'election': datetime.date(2017, 6, 8)}, '2019': {'dissolution': datetime.date(2019, 11, 6), 'election': datetime.date(2019, 12, 12)}}
2025/03/01 02:06:39 PM INFO:Election Dates Loaded Successfully.
2025/03/01 02:06:39 PM INFO:load_election_dates executed successfully
2025/03/01 02:07:05 PM INFO:Cleaned Data completed, shape: (79737, 58)
2025/03/01 02:07:06 PM INFO:load_cleaned_data executed successfully
2025/03/01 02:07:06 PM INFO:get_cleaned_data executed successfully
2025/03/01 02:07:06 PM INFO:load_data_to_session executed successfully
2025/03/01 02:07:06 PM INFO:load_entity_summary_data executed successfully
2025/03/01 02:07:06 PM INFO:get_party_summary_data executed successfully
2025/03/01 02:07:06 PM INFO:load_data_to_session executed successfully
2025/03/01 02:07:06 PM INFO:load_donorList_data executed successfully
2025/03/01 02:07:06 PM INFO:get_donor_data executed successfully
2025/03/01 02:07:06 PM INFO:load_data_to_session executed successfully
2025/03/01 02:07:06 PM INFO:load_regulated_entity_data executed successfully
2025/03/01 02:07:06 PM INFO:get_regentity_data executed successfully
2025/03/01 02:07:06 PM INFO:load_data_to_session executed successfully
2025/03/01 02:07:06 PM INFO:firstload executed successfully
2025/03/01 02:07:06 PM INFO:firstload executed successfully
2025/03/01 02:07:10 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 02:07:10 PM INFO:Setting up the package
2025/03/01 02:07:10 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 02:07:10 PM INFO:get_git_version executed successfully
2025/03/01 02:07:10 PM INFO:Version: v20.117
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:init_state_var executed successfully
2025/03/01 02:07:10 PM INFO:Session_state variables initialized
2025/03/01 02:07:10 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 02:07:10 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 02:07:10 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 02:07:10 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 02:07:10 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 02:07:10 PM INFO:menu_selection: {'title': 'Head Line Figures', 'function': <function hlf_body at 0x0000027CE5DA2EF0>}
2025/03/01 02:07:10 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 02:07:10 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 02:07:10 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:07:10 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 02:07:10 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 02:07:10 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 02:07:10 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:07:10 PM INFO:perc_target: 0.5
2025/03/01 02:07:10 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 02:07:10 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 02:07:10 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 02:07:10 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 02:07:10 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 02:07:10 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 02:07:10 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 02:07:10 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 02:07:10 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 02:07:10 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 02:07:10 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 02:07:10 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 02:07:10 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 02:07:10 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 02:07:10 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 02:07:10 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 02:07:10 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 02:07:10 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 02:07:10 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 02:07:10 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 02:07:10 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 02:07:10 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 02:07:10 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 02:07:10 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 02:07:10 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 02:07:10 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 02:07:10 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 02:07:10 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 02:07:10 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 02:07:10 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 02:07:10 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 02:07:10 PM INFO:Session state Setup complete
2025/03/01 02:07:10 PM INFO:initialize_session_state executed successfully
2025/03/01 02:07:10 PM INFO:Package setup complete
2025/03/01 02:07:10 PM INFO:get_git_version executed successfully
2025/03/01 02:07:10 PM INFO:App Version: v20.132
2025/03/01 02:07:10 PM INFO:Switched to page: Head Line Figures
2025/03/01 02:07:10 PM ERROR:Error in plot_bar_line_by_year: plot_bar_line_by_year() got an unexpected keyword argument 'grouped_data'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'grouped_data'
2025/03/01 02:07:10 PM ERROR:Error in pagesetup: plot_bar_line_by_year() got an unexpected keyword argument 'grouped_data'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 113, in hlf_body
    vis.plot_bar_line_by_year(filtered_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'grouped_data'
2025/03/01 02:07:10 PM CRITICAL:Menu setup crashed: plot_bar_line_by_year() got an unexpected keyword argument 'grouped_data'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 113, in hlf_body
    vis.plot_bar_line_by_year(filtered_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'grouped_data'
2025/03/01 02:13:39 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 02:13:40 PM INFO:get_git_version executed successfully
2025/03/01 02:13:41 PM INFO:get_git_version executed successfully
2025/03/01 02:13:41 PM INFO:get_git_version executed successfully
2025/03/01 02:13:41 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 02:13:41 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 02:13:41 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 02:13:41 PM INFO:Setting up the package
2025/03/01 02:13:41 PM INFO:Setting up the package
2025/03/01 02:13:41 PM INFO:Setting up the package
2025/03/01 02:13:41 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 02:13:41 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 02:13:41 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 02:13:41 PM INFO:get_git_version executed successfully
2025/03/01 02:13:41 PM INFO:get_git_version executed successfully
2025/03/01 02:13:41 PM INFO:get_git_version executed successfully
2025/03/01 02:13:41 PM INFO:Version: v20.117
2025/03/01 02:13:41 PM INFO:Version: v20.117
2025/03/01 02:13:41 PM INFO:Version: v20.117
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:Session_state variables initialized
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:init_state_var executed successfully
2025/03/01 02:13:41 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 02:13:41 PM INFO:Session_state variables initialized
2025/03/01 02:13:41 PM INFO:Session_state variables initialized
2025/03/01 02:13:41 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 02:13:41 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 02:13:41 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 02:13:41 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 02:13:41 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 02:13:41 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 02:13:41 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 02:13:41 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 02:13:41 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 02:13:41 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 02:13:41 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 02:13:41 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 02:13:41 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 02:13:41 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 02:13:41 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 02:13:41 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 02:13:41 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 02:13:41 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 02:13:41 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:13:41 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 02:13:41 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 02:13:41 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 02:13:41 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 02:13:41 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 02:13:41 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 02:13:41 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 02:13:41 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 02:13:41 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 02:13:41 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 02:13:41 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 02:13:41 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 02:13:41 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:13:41 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:13:41 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 02:13:41 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 02:13:41 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 02:13:41 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:13:41 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 02:13:41 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 02:13:41 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 02:13:41 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 02:13:41 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 02:13:41 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 02:13:41 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 02:13:41 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 02:13:41 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 02:13:41 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 02:13:41 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:13:41 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 02:13:41 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:13:41 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 02:13:41 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 02:13:41 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 02:13:41 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 02:13:41 PM INFO:perc_target: 0.5
2025/03/01 02:13:41 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 02:13:41 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 02:13:41 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 02:13:41 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 02:13:41 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 02:13:41 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 02:13:41 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 02:13:41 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 02:13:41 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 02:13:41 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 02:13:41 PM INFO:perc_target: 0.5
2025/03/01 02:13:41 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 02:13:41 PM INFO:perc_target: 0.5
2025/03/01 02:13:41 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 02:13:41 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 02:13:41 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 02:13:41 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 02:13:41 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 02:13:41 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 02:13:41 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 02:13:41 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 02:13:41 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 02:13:41 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 02:13:41 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 02:13:41 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 02:13:41 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 02:13:41 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 02:13:41 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 02:13:41 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 02:13:41 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 02:13:41 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 02:13:41 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 02:13:41 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 02:13:41 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 02:13:41 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 02:13:41 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 02:13:41 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 02:13:41 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 02:13:41 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 02:13:41 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 02:13:41 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 02:13:41 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 02:13:41 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 02:13:41 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 02:13:41 PM INFO:Session state Setup complete
2025/03/01 02:13:41 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 02:13:41 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 02:13:41 PM INFO:initialize_session_state executed successfully
2025/03/01 02:13:41 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 02:13:41 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 02:13:41 PM INFO:Package setup complete
2025/03/01 02:13:41 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 02:13:41 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 02:13:41 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 02:13:41 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 02:13:41 PM INFO:Session state Setup complete
2025/03/01 02:13:41 PM INFO:Session state Setup complete
2025/03/01 02:13:41 PM INFO:initialize_session_state executed successfully
2025/03/01 02:13:41 PM INFO:initialize_session_state executed successfully
2025/03/01 02:13:41 PM INFO:Package setup complete
2025/03/01 02:13:41 PM INFO:Package setup complete
2025/03/01 02:13:41 PM INFO:get_git_version executed successfully
2025/03/01 02:13:41 PM INFO:get_git_version executed successfully
2025/03/01 02:13:41 PM INFO:get_git_version executed successfully
2025/03/01 02:13:41 PM INFO:get_git_version executed successfully
2025/03/01 02:13:41 PM INFO:App Version: v20.132
2025/03/01 02:13:41 PM INFO:App Version: v20.132
2025/03/01 02:13:41 PM INFO:App Version: v20.132
2025/03/01 02:13:41 PM INFO:Switched to page: Introduction
2025/03/01 02:13:41 PM INFO:Switched to page: Head Line Figures
2025/03/01 02:13:41 PM INFO:Switched to page: Head Line Figures
2025/03/01 02:13:41 PM ERROR:Error in pagesetup: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 30, in hlf_body
    unique_donors = get_donors_ct(filtered_df)
  File "H:\VScode\dashboard_demo-1\components\calculations.py", line 97, in get_donors_ct
    return df["DonorId"].nunique()
TypeError: 'NoneType' object is not subscriptable
2025/03/01 02:13:41 PM ERROR:Error in pagesetup: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 30, in hlf_body
    unique_donors = get_donors_ct(filtered_df)
  File "H:\VScode\dashboard_demo-1\components\calculations.py", line 97, in get_donors_ct
    return df["DonorId"].nunique()
TypeError: 'NoneType' object is not subscriptable
2025/03/01 02:13:41 PM INFO:pagesetup executed successfully
2025/03/01 02:13:41 PM CRITICAL:Menu setup crashed: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 30, in hlf_body
    unique_donors = get_donors_ct(filtered_df)
  File "H:\VScode\dashboard_demo-1\components\calculations.py", line 97, in get_donors_ct
    return df["DonorId"].nunique()
TypeError: 'NoneType' object is not subscriptable
2025/03/01 02:13:41 PM CRITICAL:Menu setup crashed: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 30, in hlf_body
    unique_donors = get_donors_ct(filtered_df)
  File "H:\VScode\dashboard_demo-1\components\calculations.py", line 97, in get_donors_ct
    return df["DonorId"].nunique()
TypeError: 'NoneType' object is not subscriptable
2025/03/01 02:13:42 PM INFO:No data found in session state, running firstload()
2025/03/01 02:13:43 PM INFO:map_filename: regentity_map_fname
2025/03/01 02:13:43 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:13:43 PM INFO:Dedupe by file
2025/03/01 02:13:43 PM INFO:Dedupe by file, shape: (65279, 34)
2025/03/01 02:13:43 PM INFO:dedupe_entity_file executed successfully
2025/03/01 02:13:43 PM INFO:map_filename: donor_map_fname
2025/03/01 02:13:43 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:13:43 PM INFO:Dedupe by file
2025/03/01 02:13:43 PM INFO:Dedupe by file, shape: (66011, 40)
2025/03/01 02:13:43 PM INFO:dedupe_entity_file executed successfully
2025/03/01 02:13:43 PM INFO:Data cleanup completed, shape: (66011, 40)
2025/03/01 02:13:43 PM INFO:raw_data_cleanup executed successfully
2025/03/01 02:13:45 PM INFO:load_raw_data executed successfully
2025/03/01 02:13:45 PM INFO:get_raw_data executed successfully
2025/03/01 02:13:45 PM INFO:load_data_to_session executed successfully
2025/03/01 02:13:47 PM ERROR:Missing column: 'PartyName' in loaddata_df. Available columns: Index(['ECRef', 'OriginalRegulatedEntityName', 'RegulatedEntityType', 'Value',
       'AcceptedDate', 'AccountingUnitName', 'OriginalDonorName',
       'AccountingUnitsAsCentralParty', 'IsSponsorship', 'DonorStatus',
       'RegulatedDoneeType', 'CompanyRegistrationNumber', 'Postcode',
       'DonationType', 'NatureOfDonation', 'PurposeOfVisit', 'DonationAction',
       'ReceivedDate', 'ReportedDate', 'IsReportedPrePoll',
       'ReportingPeriodName', 'IsBequest', 'IsAggregation',
       'OriginalRegulatedEntityId', 'AccountingUnitId', 'OriginalDonorId',
       'CampaigningName', 'RegisterName', 'IsIrishSource',
       'CleanedRegulatedEntityId', 'CleanedRegulatedEntityName',
       'OriginalRegulatedEntityName', 'RegulatedEntityId',
       'RegulatedEntityName', 'CleanedDonorId', 'ParentDonorName',
       'CleanedDonorName', 'DonorStatus2', 'DonorId', 'DonorName',
       'EventCount', 'YearReceived', 'MonthReceived', 'YearMonthReceived'],
      dtype='object')
2025/03/01 02:13:48 PM INFO:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/01 02:13:48 PM INFO:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/01 02:13:48 PM INFO:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName                OriginalDonorName  ...                        DonorName EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 02:13:48 PM INFO:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/01 02:13:48 PM INFO:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName                OriginalDonorName  ...                        DonorName EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 02:13:48 PM INFO:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName                OriginalDonorName  ...                        DonorName EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/01 02:13:48 PM INFO:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/01 02:13:48 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 02:13:48 PM INFO:map_mp_to_party executed successfully
2025/03/01 02:13:48 PM INFO:Election Dates not found in session, loading now.
2025/03/01 02:13:48 PM INFO:ElectionDatesDict: {'1929': {'dissolution': datetime.date(1929, 5, 10), 'election': datetime.date(1929, 5, 30)}, '1931': {'dissolution': datetime.date(1931, 10, 7), 'election': datetime.date(1931, 10, 27)}, '1935': {'dissolution': datetime.date(1935, 10, 25), 'election': datetime.date(1935, 11, 14)}, '1945': {'dissolution': datetime.date(1945, 6, 15), 'election': datetime.date(1945, 7, 5)}, '1950': {'dissolution': datetime.date(1950, 2, 3), 'election': datetime.date(1950, 2, 23)}, '1951': {'dissolution': datetime.date(1951, 10, 5), 'election': datetime.date(1951, 10, 25)}, '1955': {'dissolution': datetime.date(1955, 5, 6), 'election': datetime.date(1955, 5, 26)}, '1959': {'dissolution': datetime.date(1959, 9, 18), 'election': datetime.date(1959, 10, 8)}, '1964': {'dissolution': datetime.date(1964, 9, 25), 'election': datetime.date(1964, 10, 15)}, '1966': {'dissolution': datetime.date(1966, 3, 10), 'election': datetime.date(1966, 3, 31)}, '1970': {'dissolution': datetime.date(1970, 5, 29), 'election': datetime.date(1970, 6, 18)}, '1974 (Feb)': {'dissolution': datetime.date(1974, 2, 8), 'election': datetime.date(1974, 2, 28)}, '1974 (Oct)': {'dissolution': datetime.date(1974, 9, 20), 'election': datetime.date(1974, 10, 10)}, '1979': {'dissolution': datetime.date(1979, 4, 7), 'election': datetime.date(1979, 5, 3)}, '1983': {'dissolution': datetime.date(1983, 5, 13), 'election': datetime.date(1983, 6, 9)}, '1987': {'dissolution': datetime.date(1987, 5, 18), 'election': datetime.date(1987, 6, 11)}, '1992': {'dissolution': datetime.date(1992, 3, 16), 'election': datetime.date(1992, 4, 9)}, '1997': {'dissolution': datetime.date(1997, 4, 8), 'election': datetime.date(1997, 5, 1)}, '2001': {'dissolution': datetime.date(2001, 5, 14), 'election': datetime.date(2001, 6, 7)}, '2005': {'dissolution': datetime.date(2005, 4, 11), 'election': datetime.date(2005, 5, 5)}, '2010': {'dissolution': datetime.date(2010, 4, 12), 'election': datetime.date(2010, 5, 6)}, '2015': {'dissolution': datetime.date(2015, 3, 30), 'election': datetime.date(2015, 5, 7)}, '2017': {'dissolution': datetime.date(2017, 5, 3), 'election': datetime.date(2017, 6, 8)}, '2019': {'dissolution': datetime.date(2019, 11, 6), 'election': datetime.date(2019, 12, 12)}}
2025/03/01 02:13:48 PM INFO:Election Dates Loaded Successfully.
2025/03/01 02:13:48 PM INFO:load_election_dates executed successfully
2025/03/01 02:14:12 PM INFO:Cleaned Data completed, shape: (79737, 58)
2025/03/01 02:14:12 PM INFO:load_cleaned_data executed successfully
2025/03/01 02:14:12 PM INFO:get_cleaned_data executed successfully
2025/03/01 02:14:12 PM INFO:load_data_to_session executed successfully
2025/03/01 02:14:12 PM INFO:load_entity_summary_data executed successfully
2025/03/01 02:14:12 PM INFO:get_party_summary_data executed successfully
2025/03/01 02:14:12 PM INFO:load_data_to_session executed successfully
2025/03/01 02:14:12 PM INFO:load_donorList_data executed successfully
2025/03/01 02:14:12 PM INFO:get_donor_data executed successfully
2025/03/01 02:14:12 PM INFO:load_data_to_session executed successfully
2025/03/01 02:14:12 PM INFO:load_regulated_entity_data executed successfully
2025/03/01 02:14:12 PM INFO:get_regentity_data executed successfully
2025/03/01 02:14:12 PM INFO:load_data_to_session executed successfully
2025/03/01 02:14:12 PM INFO:firstload executed successfully
2025/03/01 02:14:50 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 02:14:50 PM INFO:Setting up the package
2025/03/01 02:14:50 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 02:14:50 PM INFO:get_git_version executed successfully
2025/03/01 02:14:50 PM INFO:Version: v20.117
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:init_state_var executed successfully
2025/03/01 02:14:50 PM INFO:Session_state variables initialized
2025/03/01 02:14:50 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 02:14:50 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 02:14:50 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 02:14:50 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 02:14:50 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 02:14:50 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 02:14:50 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 02:14:50 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 02:14:50 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 02:14:50 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 02:14:50 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 02:14:50 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 02:14:50 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:14:50 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 02:14:50 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 02:14:50 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 02:14:50 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 02:14:50 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 02:14:50 PM INFO:menu_selection: {'title': 'Notes on Data and Manipulations', 'function': <function notesondataprep_body at 0x00000201325F8790>}
2025/03/01 02:14:50 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 02:14:50 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:14:50 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 02:14:50 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 02:14:50 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 02:14:50 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 02:14:50 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 02:14:50 PM INFO:perc_target: 0.5
2025/03/01 02:14:50 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 02:14:50 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ... DaysSinceLastElection WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...                 32967                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...                 32967                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...                 32964                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...                 32964                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...                 32963                    15                   4709                        2                       363
...          ...                              ...                    ...        ...                              ...  ...                   ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...                 31721                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...                 31665                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...                 31795                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...                 32137                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...                 32142                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 02:14:50 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 02:14:50 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 02:14:50 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 02:14:50 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 02:14:50 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 02:14:50 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 02:14:50 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value AcceptedDate  ...                  ParentDonorName                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56   02/09/2019  ...  Conservative And Unionist Party  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00   02/09/2019  ...  Conservative And Unionist Party  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58   30/08/2019  ...  Conservative And Unionist Party  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00   30/08/2019  ...  Conservative And Unionist Party  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05   29/08/2019  ...  Conservative And Unionist Party  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...          ...  ...                              ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          NaN  ...      Shaftesbury Investments Ltd          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00          NaN  ...                Mr Jeremy Hosking                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00          NaN  ...                    Anthony Clake                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00          NaN  ...                Mr Peter A Dubens                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00          NaN  ...                 Mr Ravi S Kailas                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 02:14:50 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 02:14:50 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 02:14:50 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 02:14:50 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 02:14:50 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 02:14:50 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 02:14:50 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 02:14:50 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 02:14:50 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 02:14:50 PM INFO:Session state Setup complete
2025/03/01 02:14:50 PM INFO:initialize_session_state executed successfully
2025/03/01 02:14:50 PM INFO:Package setup complete
2025/03/01 02:14:50 PM INFO:get_git_version executed successfully
2025/03/01 02:14:50 PM INFO:App Version: v20.132
2025/03/01 02:14:50 PM INFO:Switched to page: Notes on Data and Manipulations
2025/03/01 02:14:50 PM INFO:pagesetup executed successfully
2025/03/01 02:14:50 PM INFO:Data already loaded in session state.
2025/03/01 02:14:53 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 02:14:53 PM INFO:Setting up the package
2025/03/01 02:14:53 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 02:14:53 PM INFO:get_git_version executed successfully
2025/03/01 02:14:53 PM INFO:Version: v20.117
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:init_state_var executed successfully
2025/03/01 02:14:53 PM INFO:Session_state variables initialized
2025/03/01 02:14:53 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 02:14:53 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 02:14:53 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 02:14:53 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 02:14:53 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 02:14:53 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 02:14:53 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 02:14:53 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 02:14:53 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 02:14:53 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 02:14:53 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 02:14:53 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 02:14:53 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:14:53 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 02:14:53 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 02:14:53 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 02:14:53 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 02:14:53 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 02:14:53 PM INFO:menu_selection: {'title': 'Donations by Political Party', 'function': <function mod_donations_per_political_party_page at 0x00000201325FA8C0>}
2025/03/01 02:14:53 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 02:14:53 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:14:53 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 02:14:53 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 02:14:53 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 02:14:53 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 02:14:53 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 02:14:53 PM INFO:perc_target: 0.5
2025/03/01 02:14:53 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 02:14:54 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value                OriginalDonorName  ... DaysSinceLastElection WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  Conservative And Unionist Party  ...                 32967                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  Conservative And Unionist Party  ...                 32967                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  Conservative And Unionist Party  ...                 32964                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  Conservative And Unionist Party  ...                 32964                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  Conservative And Unionist Party  ...                 32963                    15                   4709                        2                       363
...          ...                              ...                    ...        ...                              ...  ...                   ...                   ...                    ...                      ...                       ...
79732   C0242478               Vote Leave Limited  Permitted Participant   10000.00          Shaftesbury Investments  ...                 31721                    62                   4532                        5                       349
79733   C0242461               Vote Leave Limited  Permitted Participant  100000.00                Mr Jeremy Hosking  ...                 31665                    70                   4524                        6                       348
79734   C0243560               Vote Leave Limited  Permitted Participant   40000.00                   Anthony Clarke  ...                 31795                    51                   4543                        4                       350
79735   C0319710  Conservative And Unionist Party        Political Party   50000.00                Mr Peter A Dubens  ...                 32137                     2                   4591                        1                       354
79736   C0319727  Conservative And Unionist Party        Political Party   15000.00                 Mr Ravi S Kailas  ...                 32142                     2                   4592                        1                       354

[79737 rows x 58 columns]
2025/03/01 02:14:54 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 02:14:54 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30284    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30285  1000001.0             Not Recorded 1900-01-01         20000.00                3    6666.666667
30286  1000001.0             Not Recorded 1961-01-01         12908.00                3    4302.666667
30287  1000001.0             Not Recorded 1995-05-10         40876.38                3   13625.460000
30288  1000001.0                  Unidentified Donor       1127120.21              133    8474.588045

[30289 rows x 5 columns]
2025/03/01 02:14:54 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 02:14:54 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 02:14:54 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 02:14:54 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 02:14:54 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value AcceptedDate  ...                  ParentDonorName                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56   02/09/2019  ...  Conservative And Unionist Party  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00   02/09/2019  ...  Conservative And Unionist Party  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58   30/08/2019  ...  Conservative And Unionist Party  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00   30/08/2019  ...  Conservative And Unionist Party  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05   29/08/2019  ...  Conservative And Unionist Party  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...          ...  ...                              ...                              ...                         ...      ...                              ...
66006   C0242478               Vote Leave Limited  Permitted Participant   10000.00          NaN  ...      Shaftesbury Investments Ltd          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
66007   C0242461               Vote Leave Limited  Permitted Participant  100000.00          NaN  ...                Mr Jeremy Hosking                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
66008   C0243560               Vote Leave Limited  Permitted Participant   40000.00          NaN  ...                    Anthony Clake                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
66009   C0319710  Conservative And Unionist Party        Political Party   50000.00          NaN  ...                Mr Peter A Dubens                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
66010   C0319727  Conservative And Unionist Party        Political Party   15000.00          NaN  ...                 Mr Ravi S Kailas                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[66011 rows x 40 columns]
2025/03/01 02:14:54 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 02:14:54 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 02:14:54 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 02:14:54 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 02:14:54 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 02:14:54 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 02:14:54 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 02:14:54 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 02:14:54 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 02:14:54 PM INFO:Session state Setup complete
2025/03/01 02:14:54 PM INFO:initialize_session_state executed successfully
2025/03/01 02:14:54 PM INFO:Package setup complete
2025/03/01 02:14:54 PM INFO:get_git_version executed successfully
2025/03/01 02:14:54 PM INFO:App Version: v20.132
2025/03/01 02:14:54 PM INFO:Switched to page: Donations by Political Party
2025/03/01 02:14:56 PM ERROR:Missing column: 'PartyName' in loaddata_df. Available columns: Index(['ECRef', 'OriginalRegulatedEntityName', 'RegulatedEntityType', 'Value',
       'AcceptedDate', 'AccountingUnitName', 'OriginalDonorName',
       'AccountingUnitsAsCentralParty', 'IsSponsorship', 'DonorStatus',
       'RegulatedDoneeType', 'CompanyRegistrationNumber', 'Postcode',
       'DonationType', 'NatureOfDonation', 'PurposeOfVisit', 'DonationAction',
       'ReceivedDate', 'ReportedDate', 'IsReportedPrePoll',
       'ReportingPeriodName', 'IsBequest', 'IsAggregation',
       'OriginalRegulatedEntityId', 'AccountingUnitId', 'OriginalDonorId',
       'CampaigningName', 'RegisterName', 'IsIrishSource',
       'CleanedRegulatedEntityId', 'CleanedRegulatedEntityName',
       'OriginalRegulatedEntityName', 'RegulatedEntityId',
       'RegulatedEntityName', 'CleanedDonorId', 'ParentDonorName',
       'CleanedDonorName', 'DonorStatus2', 'DonorId', 'DonorName',
       'EventCount', 'YearReceived', 'MonthReceived', 'YearMonthReceived'],
      dtype='object')
2025/03/01 02:14:56 PM INFO:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/01 02:14:56 PM INFO:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/01 02:14:56 PM INFO:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName                OriginalDonorName  ...                        DonorName EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 02:14:56 PM INFO:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/01 02:14:56 PM INFO:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName                OriginalDonorName  ...                        DonorName EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 02:14:57 PM INFO:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName                OriginalDonorName  ...                        DonorName EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     Conservative And Unionist Party  ...  Conservative And Unionist Party          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/01 02:14:57 PM INFO:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/01 02:14:57 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 02:14:57 PM INFO:map_mp_to_party executed successfully
2025/03/01 02:15:21 PM INFO:Cleaned Data completed, shape: (79737, 58)
2025/03/01 02:15:21 PM INFO:load_cleaned_data executed successfully
2025/03/01 02:15:22 PM ERROR:Error in load_and_filter_pergroup: 'DonorType'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 191, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 234, in pandas._libs.index.IndexEngine._get_loc_duplicates
  File "index.pyx", line 242, in pandas._libs.index.IndexEngine._maybe_get_bool_indexer
  File "index.pyx", line 134, in pandas._libs.index._unpack_bool_indexer
KeyError: 'DonorType'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 416, in load_and_filter_pergroup
    cleaned_c_df = apply_filters(cleaned_df, current_target)
  File "H:\VScode\dashboard_demo-1\components\filters.py", line 37, in apply_filters
    conditions.append(df[column] == value)
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'DonorType'
2025/03/01 02:15:22 PM ERROR:Error in display_data_page: 'DonorType'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 191, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 234, in pandas._libs.index.IndexEngine._get_loc_duplicates
  File "index.pyx", line 242, in pandas._libs.index.IndexEngine._maybe_get_bool_indexer
  File "index.pyx", line 134, in pandas._libs.index._unpack_bool_indexer
KeyError: 'DonorType'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_donor.py", line 29, in display_data_page
    ) = load_and_filter_pergroup(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 416, in load_and_filter_pergroup
    cleaned_c_df = apply_filters(cleaned_df, current_target)
  File "H:\VScode\dashboard_demo-1\components\filters.py", line 37, in apply_filters
    conditions.append(df[column] == value)
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'DonorType'
2025/03/01 02:15:22 PM ERROR:Error in pagesetup: 'DonorType'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 191, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 234, in pandas._libs.index.IndexEngine._get_loc_duplicates
  File "index.pyx", line 242, in pandas._libs.index.IndexEngine._maybe_get_bool_indexer
  File "index.pyx", line 134, in pandas._libs.index._unpack_bool_indexer
KeyError: 'DonorType'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 110, in mod_donations_per_political_party_page
    display_per_group_data_page("PoliticalParty_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_donor.py", line 29, in display_data_page
    ) = load_and_filter_pergroup(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 416, in load_and_filter_pergroup
    cleaned_c_df = apply_filters(cleaned_df, current_target)
  File "H:\VScode\dashboard_demo-1\components\filters.py", line 37, in apply_filters
    conditions.append(df[column] == value)
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'DonorType'
2025/03/01 02:15:22 PM CRITICAL:Menu setup crashed: 'DonorType'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 191, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 234, in pandas._libs.index.IndexEngine._get_loc_duplicates
  File "index.pyx", line 242, in pandas._libs.index.IndexEngine._maybe_get_bool_indexer
  File "index.pyx", line 134, in pandas._libs.index._unpack_bool_indexer
KeyError: 'DonorType'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 110, in mod_donations_per_political_party_page
    display_per_group_data_page("PoliticalParty_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_donor.py", line 29, in display_data_page
    ) = load_and_filter_pergroup(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 416, in load_and_filter_pergroup
    cleaned_c_df = apply_filters(cleaned_df, current_target)
  File "H:\VScode\dashboard_demo-1\components\filters.py", line 37, in apply_filters
    conditions.append(df[column] == value)
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'DonorType'
2025/03/01 02:29:56 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 02:29:56 PM INFO:get_git_version executed successfully
2025/03/01 02:29:58 PM INFO:get_git_version executed successfully
2025/03/01 02:29:59 PM INFO:get_git_version executed successfully
2025/03/01 02:29:59 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 02:29:59 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 02:29:59 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 02:29:59 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 02:29:59 PM INFO:Setting up the package
2025/03/01 02:29:59 PM INFO:Setting up the package
2025/03/01 02:29:59 PM INFO:Setting up the package
2025/03/01 02:29:59 PM INFO:Setting up the package
2025/03/01 02:29:59 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 02:29:59 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 02:29:59 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 02:29:59 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 02:29:59 PM INFO:get_git_version executed successfully
2025/03/01 02:29:59 PM INFO:get_git_version executed successfully
2025/03/01 02:29:59 PM INFO:get_git_version executed successfully
2025/03/01 02:29:59 PM INFO:Version: v20.117
2025/03/01 02:29:59 PM INFO:get_git_version executed successfully
2025/03/01 02:29:59 PM INFO:Version: v20.117
2025/03/01 02:29:59 PM INFO:Version: v20.117
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:Version: v20.117
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:Session_state variables initialized
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:perc_target: 0.5
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:Session_state variables initialized
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 02:29:59 PM INFO:init_state_var executed successfully
2025/03/01 02:29:59 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 02:29:59 PM INFO:Session_state variables initialized
2025/03/01 02:29:59 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:29:59 PM INFO:Session_state variables initialized
2025/03/01 02:29:59 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 02:29:59 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 02:29:59 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 02:29:59 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 02:29:59 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 02:29:59 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 02:29:59 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 02:29:59 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 02:29:59 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 02:29:59 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 02:29:59 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 02:29:59 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 02:29:59 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 02:29:59 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 02:29:59 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 02:29:59 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 02:29:59 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 02:29:59 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 02:29:59 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 02:29:59 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 02:29:59 PM INFO:perc_target: 0.5
2025/03/01 02:29:59 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 02:29:59 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 02:29:59 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 02:29:59 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 02:29:59 PM INFO:perc_target: 0.5
2025/03/01 02:29:59 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 02:29:59 PM INFO:perc_target: 0.5
2025/03/01 02:29:59 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:29:59 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 02:29:59 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 02:29:59 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 02:29:59 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 02:29:59 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:29:59 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 02:29:59 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:29:59 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 02:29:59 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 02:29:59 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 02:29:59 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 02:29:59 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 02:29:59 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 02:29:59 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 02:29:59 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 02:29:59 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 02:29:59 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 02:29:59 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 02:29:59 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 02:29:59 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 02:29:59 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 02:29:59 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 02:29:59 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 02:29:59 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 02:29:59 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 02:29:59 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 02:29:59 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 02:29:59 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 02:29:59 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 02:29:59 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 02:29:59 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 02:29:59 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 02:29:59 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 02:29:59 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 02:29:59 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 02:29:59 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 02:29:59 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 02:29:59 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:29:59 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 02:29:59 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 02:29:59 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 02:29:59 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 02:29:59 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 02:29:59 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 02:29:59 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 02:29:59 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 02:29:59 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 02:29:59 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 02:29:59 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 02:29:59 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 02:29:59 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 02:29:59 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 02:29:59 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 02:29:59 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 02:29:59 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 02:29:59 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 02:29:59 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 02:29:59 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 02:29:59 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 02:29:59 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 02:29:59 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 02:29:59 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 02:29:59 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 02:29:59 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 02:29:59 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 02:29:59 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 02:29:59 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 02:29:59 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:29:59 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 02:29:59 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 02:29:59 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 02:29:59 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 02:29:59 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:29:59 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 02:29:59 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:29:59 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 02:29:59 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 02:29:59 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 02:29:59 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 02:29:59 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 02:29:59 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 02:29:59 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 02:29:59 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 02:29:59 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 02:29:59 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 02:29:59 PM INFO:Session state Setup complete
2025/03/01 02:29:59 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 02:29:59 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 02:29:59 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 02:29:59 PM INFO:initialize_session_state executed successfully
2025/03/01 02:29:59 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 02:29:59 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 02:29:59 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 02:29:59 PM INFO:Package setup complete
2025/03/01 02:29:59 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 02:29:59 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 02:29:59 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 02:29:59 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 02:29:59 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 02:29:59 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 02:29:59 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 02:29:59 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 02:29:59 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 02:29:59 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 02:29:59 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 02:29:59 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 02:29:59 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 02:29:59 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 02:29:59 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 02:29:59 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 02:29:59 PM INFO:Session state Setup complete
2025/03/01 02:29:59 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 02:29:59 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 02:29:59 PM INFO:initialize_session_state executed successfully
2025/03/01 02:29:59 PM INFO:Session state Setup complete
2025/03/01 02:29:59 PM INFO:Session state Setup complete
2025/03/01 02:29:59 PM INFO:Package setup complete
2025/03/01 02:29:59 PM INFO:initialize_session_state executed successfully
2025/03/01 02:29:59 PM INFO:initialize_session_state executed successfully
2025/03/01 02:29:59 PM INFO:Package setup complete
2025/03/01 02:29:59 PM INFO:Package setup complete
2025/03/01 02:29:59 PM INFO:get_git_version executed successfully
2025/03/01 02:29:59 PM ERROR:Error in pagesetup: invalid syntax. Perhaps you forgot a comma? (Visualisations.py, line 85)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 2, in <module>
    import components.Visualisations as vis
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 85
    percentbars=False
                
SyntaxError: invalid syntax. Perhaps you forgot a comma?
2025/03/01 02:29:59 PM ERROR:Error in pagesetup: invalid syntax. Perhaps you forgot a comma? (Visualisations.py, line 85)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 2, in <module>
    import components.Visualisations as vis
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 85
    percentbars=False
                
SyntaxError: invalid syntax. Perhaps you forgot a comma?
2025/03/01 02:29:59 PM CRITICAL:Menu setup crashed: invalid syntax. Perhaps you forgot a comma? (Visualisations.py, line 85)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 2, in <module>
    import components.Visualisations as vis
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 85
    percentbars=False
                
SyntaxError: invalid syntax. Perhaps you forgot a comma?
2025/03/01 02:29:59 PM ERROR:Error in pagesetup: invalid syntax. Perhaps you forgot a comma? (Visualisations.py, line 85)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 2, in <module>
    import components.Visualisations as vis
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 85
    percentbars=False
                
SyntaxError: invalid syntax. Perhaps you forgot a comma?
2025/03/01 02:29:59 PM CRITICAL:Menu setup crashed: invalid syntax. Perhaps you forgot a comma? (Visualisations.py, line 85)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 2, in <module>
    import components.Visualisations as vis
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 85
    percentbars=False
                
SyntaxError: invalid syntax. Perhaps you forgot a comma?
2025/03/01 02:29:59 PM ERROR:Error in pagesetup: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
ImportError: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py)
2025/03/01 02:29:59 PM CRITICAL:Menu setup crashed: invalid syntax. Perhaps you forgot a comma? (Visualisations.py, line 85)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 2, in <module>
    import components.Visualisations as vis
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 85
    percentbars=False
                
SyntaxError: invalid syntax. Perhaps you forgot a comma?
2025/03/01 02:29:59 PM CRITICAL:Menu setup crashed: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
ImportError: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py)
2025/03/01 02:31:05 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 02:31:06 PM INFO:get_git_version executed successfully
2025/03/01 02:31:07 PM INFO:get_git_version executed successfully
2025/03/01 02:31:07 PM INFO:get_git_version executed successfully
2025/03/01 02:31:07 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 02:31:07 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 02:31:07 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 02:31:07 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 02:31:07 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 02:31:07 PM INFO:Setting up the package
2025/03/01 02:31:07 PM INFO:Setting up the package
2025/03/01 02:31:07 PM INFO:Setting up the package
2025/03/01 02:31:07 PM INFO:Setting up the package
2025/03/01 02:31:07 PM INFO:Setting up the package
2025/03/01 02:31:07 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 02:31:07 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 02:31:07 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 02:31:07 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 02:31:07 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 02:31:07 PM INFO:get_git_version executed successfully
2025/03/01 02:31:07 PM INFO:get_git_version executed successfully
2025/03/01 02:31:07 PM INFO:get_git_version executed successfully
2025/03/01 02:31:07 PM INFO:get_git_version executed successfully
2025/03/01 02:31:07 PM INFO:Version: v20.117
2025/03/01 02:31:07 PM INFO:get_git_version executed successfully
2025/03/01 02:31:07 PM INFO:Version: v20.117
2025/03/01 02:31:07 PM INFO:Version: v20.117
2025/03/01 02:31:07 PM INFO:Version: v20.117
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:Version: v20.117
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:Session_state variables initialized
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:Session_state variables initialized
2025/03/01 02:31:07 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 02:31:07 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 02:31:07 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:Session_state variables initialized
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 02:31:07 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 02:31:07 PM INFO:init_state_var executed successfully
2025/03/01 02:31:07 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 02:31:07 PM INFO:Session_state variables initialized
2025/03/01 02:31:07 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 02:31:07 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 02:31:07 PM INFO:Session_state variables initialized
2025/03/01 02:31:07 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 02:31:07 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 02:31:07 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 02:31:07 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 02:31:07 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 02:31:07 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 02:31:07 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 02:31:07 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 02:31:07 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 02:31:07 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 02:31:07 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 02:31:07 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 02:31:07 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 02:31:07 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 02:31:07 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 02:31:07 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 02:31:07 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 02:31:07 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 02:31:07 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 02:31:07 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 02:31:07 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 02:31:07 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 02:31:07 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 02:31:07 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 02:31:07 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 02:31:07 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 02:31:07 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 02:31:07 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 02:31:07 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 02:31:07 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 02:31:07 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 02:31:07 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 02:31:07 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 02:31:07 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 02:31:07 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 02:31:07 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 02:31:07 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 02:31:07 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 02:31:07 PM INFO:perc_target: 0.5
2025/03/01 02:31:07 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 02:31:07 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 02:31:07 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 02:31:07 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 02:31:07 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 02:31:07 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 02:31:07 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 02:31:07 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 02:31:07 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 02:31:07 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 02:31:07 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 02:31:07 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 02:31:07 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 02:31:07 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 02:31:07 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 02:31:07 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 02:31:07 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 02:31:07 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 02:31:07 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 02:31:07 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 02:31:07 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 02:31:07 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 02:31:07 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 02:31:07 PM INFO:perc_target: 0.5
2025/03/01 02:31:07 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:31:07 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 02:31:07 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 02:31:07 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 02:31:07 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 02:31:07 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 02:31:07 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 02:31:07 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 02:31:07 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 02:31:07 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 02:31:07 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 02:31:07 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 02:31:07 PM INFO:perc_target: 0.5
2025/03/01 02:31:07 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 02:31:07 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 02:31:07 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 02:31:07 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 02:31:07 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 02:31:07 PM INFO:perc_target: 0.5
2025/03/01 02:31:07 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 02:31:07 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 02:31:07 PM INFO:perc_target: 0.5
2025/03/01 02:31:07 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 02:31:07 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 02:31:07 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:31:07 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 02:31:07 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 02:31:07 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 02:31:07 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 02:31:07 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 02:31:07 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 02:31:07 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 02:31:07 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 02:31:07 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 02:31:07 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 02:31:07 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 02:31:07 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 02:31:07 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:31:07 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 02:31:07 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 02:31:07 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 02:31:07 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 02:31:07 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 02:31:07 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:31:07 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 02:31:07 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 02:31:07 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:31:07 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 02:31:07 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 02:31:07 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 02:31:07 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 02:31:07 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 02:31:07 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 02:31:07 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 02:31:07 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 02:31:07 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:31:07 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 02:31:07 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 02:31:07 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 02:31:07 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 02:31:07 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 02:31:07 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 02:31:07 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 02:31:07 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 02:31:07 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 02:31:07 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 02:31:07 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 02:31:07 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 02:31:07 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 02:31:07 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 02:31:07 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 02:31:07 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 02:31:07 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 02:31:07 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 02:31:07 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 02:31:07 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 02:31:07 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 02:31:07 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 02:31:07 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 02:31:07 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:31:07 PM INFO:Session state Setup complete
2025/03/01 02:31:07 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 02:31:07 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 02:31:07 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 02:31:07 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 02:31:07 PM INFO:initialize_session_state executed successfully
2025/03/01 02:31:07 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 02:31:07 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 02:31:07 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 02:31:07 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 02:31:07 PM INFO:Package setup complete
2025/03/01 02:31:07 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 02:31:07 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:31:07 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 02:31:07 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 02:31:07 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 02:31:07 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 02:31:07 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:31:07 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 02:31:07 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:31:07 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 02:31:07 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 02:31:07 PM INFO:Session state Setup complete
2025/03/01 02:31:07 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 02:31:07 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 02:31:07 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 02:31:07 PM INFO:initialize_session_state executed successfully
2025/03/01 02:31:07 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 02:31:07 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 02:31:07 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 02:31:07 PM INFO:Package setup complete
2025/03/01 02:31:07 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 02:31:07 PM INFO:Session state Setup complete
2025/03/01 02:31:07 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 02:31:07 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 02:31:07 PM INFO:initialize_session_state executed successfully
2025/03/01 02:31:07 PM INFO:Session state Setup complete
2025/03/01 02:31:07 PM INFO:Session state Setup complete
2025/03/01 02:31:07 PM INFO:Package setup complete
2025/03/01 02:31:07 PM INFO:initialize_session_state executed successfully
2025/03/01 02:31:07 PM INFO:initialize_session_state executed successfully
2025/03/01 02:31:07 PM INFO:Package setup complete
2025/03/01 02:31:07 PM INFO:Package setup complete
2025/03/01 02:31:07 PM INFO:get_git_version executed successfully
2025/03/01 02:31:08 PM ERROR:Error in pagesetup: st.session_state has no attribute "clean_data". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "clean_data". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 2, in <module>
    import components.Visualisations as vis
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 76, in <module>
    def plot_bar_line_by_year(graph_df = st.session_state.clean_data,
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "clean_data". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/01 02:31:08 PM ERROR:Error in pagesetup: st.session_state has no attribute "clean_data". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "clean_data". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 2, in <module>
    import components.Visualisations as vis
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 76, in <module>
    def plot_bar_line_by_year(graph_df = st.session_state.clean_data,
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "clean_data". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/01 02:31:08 PM ERROR:Error in pagesetup: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
ImportError: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py)
2025/03/01 02:31:08 PM ERROR:Error in pagesetup: st.session_state has no attribute "clean_data". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "clean_data". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 2, in <module>
    import components.Visualisations as vis
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 76, in <module>
    def plot_bar_line_by_year(graph_df = st.session_state.clean_data,
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "clean_data". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/01 02:31:08 PM ERROR:Error in pagesetup: st.session_state has no attribute "clean_data". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "clean_data". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 2, in <module>
    import components.Visualisations as vis
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 76, in <module>
    def plot_bar_line_by_year(graph_df = st.session_state.clean_data,
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "clean_data". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/01 02:31:08 PM CRITICAL:Menu setup crashed: st.session_state has no attribute "clean_data". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "clean_data". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 2, in <module>
    import components.Visualisations as vis
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 76, in <module>
    def plot_bar_line_by_year(graph_df = st.session_state.clean_data,
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "clean_data". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/01 02:31:08 PM CRITICAL:Menu setup crashed: st.session_state has no attribute "clean_data". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "clean_data". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 2, in <module>
    import components.Visualisations as vis
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 76, in <module>
    def plot_bar_line_by_year(graph_df = st.session_state.clean_data,
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "clean_data". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/01 02:31:08 PM CRITICAL:Menu setup crashed: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
ImportError: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py)
2025/03/01 02:31:08 PM CRITICAL:Menu setup crashed: st.session_state has no attribute "clean_data". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "clean_data". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 2, in <module>
    import components.Visualisations as vis
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 76, in <module>
    def plot_bar_line_by_year(graph_df = st.session_state.clean_data,
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "clean_data". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/01 02:31:08 PM CRITICAL:Menu setup crashed: st.session_state has no attribute "clean_data". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 130, in __getattr__
    return self[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "clean_data". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 2, in <module>
    import components.Visualisations as vis
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 76, in <module>
    def plot_bar_line_by_year(graph_df = st.session_state.clean_data,
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 132, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "clean_data". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025/03/01 02:33:37 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 02:33:38 PM INFO:get_git_version executed successfully
2025/03/01 02:33:38 PM INFO:get_git_version executed successfully
2025/03/01 02:33:39 PM INFO:get_git_version executed successfully
2025/03/01 02:33:39 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 02:33:39 PM INFO:Setting up the package
2025/03/01 02:33:39 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 02:33:39 PM INFO:get_git_version executed successfully
2025/03/01 02:33:39 PM INFO:Version: v20.117
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:init_state_var executed successfully
2025/03/01 02:33:39 PM INFO:Session_state variables initialized
2025/03/01 02:33:39 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 02:33:39 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 02:33:39 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 02:33:39 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 02:33:39 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 02:33:39 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 02:33:39 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 02:33:39 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 02:33:39 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 02:33:39 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:33:39 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 02:33:39 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 02:33:39 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 02:33:39 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 02:33:39 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 02:33:39 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 02:33:39 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 02:33:39 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 02:33:39 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 02:33:39 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 02:33:39 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 02:33:39 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 02:33:39 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 02:33:39 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:33:39 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 02:33:39 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 02:33:39 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 02:33:39 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 02:33:39 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 02:33:39 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 02:33:39 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 02:33:39 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 02:33:39 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 02:33:39 PM INFO:perc_target: 0.5
2025/03/01 02:33:39 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 02:33:39 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 02:33:39 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 02:33:39 PM INFO:Session state Setup complete
2025/03/01 02:33:39 PM INFO:initialize_session_state executed successfully
2025/03/01 02:33:39 PM INFO:Package setup complete
2025/03/01 02:33:39 PM INFO:get_git_version executed successfully
2025/03/01 02:33:39 PM ERROR:Error in pagesetup: name 'YLabel' is not defined
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 2, in <module>
    import components.Visualisations as vis
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 82, in <module>
    Title=f"{YLabel} by {XLabel}, grouped by {LegendTitle}",
NameError: name 'YLabel' is not defined
2025/03/01 02:33:39 PM CRITICAL:Menu setup crashed: name 'YLabel' is not defined
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 2, in <module>
    import components.Visualisations as vis
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 82, in <module>
    Title=f"{YLabel} by {XLabel}, grouped by {LegendTitle}",
NameError: name 'YLabel' is not defined
2025/03/01 02:35:01 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 02:35:02 PM INFO:get_git_version executed successfully
2025/03/01 02:35:03 PM INFO:get_git_version executed successfully
2025/03/01 02:35:03 PM INFO:get_git_version executed successfully
2025/03/01 02:35:03 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 02:35:03 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 02:35:03 PM INFO:Setting up the package
2025/03/01 02:35:03 PM INFO:Setting up the package
2025/03/01 02:35:03 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 02:35:03 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 02:35:03 PM INFO:get_git_version executed successfully
2025/03/01 02:35:03 PM INFO:get_git_version executed successfully
2025/03/01 02:35:03 PM INFO:Version: v20.117
2025/03/01 02:35:03 PM INFO:Version: v20.117
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:init_state_var executed successfully
2025/03/01 02:35:03 PM INFO:Session_state variables initialized
2025/03/01 02:35:03 PM INFO:Session_state variables initialized
2025/03/01 02:35:03 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 02:35:03 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 02:35:03 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 02:35:03 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 02:35:03 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 02:35:03 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 02:35:03 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 02:35:03 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 02:35:03 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 02:35:03 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 02:35:03 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 02:35:03 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 02:35:03 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 02:35:03 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 02:35:03 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 02:35:03 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 02:35:03 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 02:35:03 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 02:35:03 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 02:35:03 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 02:35:03 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 02:35:03 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 02:35:03 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 02:35:03 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 02:35:03 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 02:35:03 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 02:35:03 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 02:35:03 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 02:35:03 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 02:35:03 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 02:35:03 PM INFO:perc_target: 0.5
2025/03/01 02:35:03 PM INFO:perc_target: 0.5
2025/03/01 02:35:03 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 02:35:03 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 02:35:03 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 02:35:03 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 02:35:03 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 02:35:03 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 02:35:03 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 02:35:03 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 02:35:03 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 02:35:03 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 02:35:03 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:35:03 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:35:03 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:35:03 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:35:03 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 02:35:03 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 02:35:03 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 02:35:03 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 02:35:03 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 02:35:03 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 02:35:03 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 02:35:03 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 02:35:03 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 02:35:03 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 02:35:03 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 02:35:03 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 02:35:03 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 02:35:03 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 02:35:03 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 02:35:03 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 02:35:03 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 02:35:03 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 02:35:03 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 02:35:03 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 02:35:03 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 02:35:03 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 02:35:03 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 02:35:03 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 02:35:03 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 02:35:03 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 02:35:03 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 02:35:03 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 02:35:03 PM INFO:Session state Setup complete
2025/03/01 02:35:03 PM INFO:Session state Setup complete
2025/03/01 02:35:03 PM INFO:initialize_session_state executed successfully
2025/03/01 02:35:03 PM INFO:initialize_session_state executed successfully
2025/03/01 02:35:03 PM INFO:Package setup complete
2025/03/01 02:35:03 PM INFO:Package setup complete
2025/03/01 02:35:03 PM INFO:get_git_version executed successfully
2025/03/01 02:35:03 PM INFO:get_git_version executed successfully
2025/03/01 02:35:03 PM INFO:get_git_version executed successfully
2025/03/01 02:35:03 PM INFO:App Version: v20.132
2025/03/01 02:35:03 PM INFO:App Version: v20.132
2025/03/01 02:35:03 PM INFO:Switched to page: Introduction
2025/03/01 02:35:03 PM INFO:Switched to page: Introduction
2025/03/01 02:35:03 PM INFO:pagesetup executed successfully
2025/03/01 02:35:03 PM INFO:pagesetup executed successfully
2025/03/01 02:35:03 PM INFO:No data found in session state, running firstload()
2025/03/01 02:35:03 PM INFO:No data found in session state, running firstload()
2025/03/01 02:35:05 PM INFO:map_filename: regentity_map_fname
2025/03/01 02:35:05 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:35:05 PM INFO:Dedupe by file
2025/03/01 02:35:05 PM INFO:Dedupe by file, shape: (65279, 34)
2025/03/01 02:35:05 PM INFO:dedupe_entity_file executed successfully
2025/03/01 02:35:05 PM INFO:map_filename: donor_map_fname
2025/03/01 02:35:05 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:35:05 PM INFO:Dedupe by file
2025/03/01 02:35:05 PM INFO:Dedupe by file, shape: (66011, 40)
2025/03/01 02:35:05 PM INFO:dedupe_entity_file executed successfully
2025/03/01 02:35:05 PM INFO:Data cleanup completed, shape: (66011, 40)
2025/03/01 02:35:05 PM INFO:raw_data_cleanup executed successfully
2025/03/01 02:35:07 PM INFO:load_raw_data executed successfully
2025/03/01 02:35:07 PM INFO:get_raw_data executed successfully
2025/03/01 02:35:07 PM INFO:load_data_to_session executed successfully
2025/03/01 02:35:10 PM ERROR:Missing column: 'PartyName' in loaddata_df. Available columns: Index(['ECRef', 'OriginalRegulatedEntityName', 'RegulatedEntityType', 'Value',
       'AcceptedDate', 'AccountingUnitName', 'OriginalDonorName',
       'AccountingUnitsAsCentralParty', 'IsSponsorship', 'DonorStatus',
       'RegulatedDoneeType', 'CompanyRegistrationNumber', 'Postcode',
       'DonationType', 'NatureOfDonation', 'PurposeOfVisit', 'DonationAction',
       'ReceivedDate', 'ReportedDate', 'IsReportedPrePoll',
       'ReportingPeriodName', 'IsBequest', 'IsAggregation',
       'OriginalRegulatedEntityId', 'AccountingUnitId', 'OriginalDonorId',
       'CampaigningName', 'RegisterName', 'IsIrishSource',
       'CleanedRegulatedEntityId', 'CleanedRegulatedEntityName',
       'OriginalRegulatedEntityName', 'RegulatedEntityId',
       'RegulatedEntityName', 'CleanedDonorId', 'ParentDonorName',
       'CleanedDonorName', 'DonorStatus2', 'DonorId', 'DonorName',
       'EventCount', 'YearReceived', 'MonthReceived', 'YearMonthReceived'],
      dtype='object')
2025/03/01 02:35:10 PM INFO:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/01 02:35:10 PM INFO:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/01 02:35:10 PM INFO:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 02:35:10 PM INFO:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/01 02:35:10 PM INFO:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 02:35:10 PM INFO:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/01 02:35:10 PM INFO:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/01 02:35:10 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 02:35:10 PM INFO:map_mp_to_party executed successfully
2025/03/01 02:35:11 PM INFO:Election Dates not found in session, loading now.
2025/03/01 02:35:11 PM INFO:ElectionDatesDict: {'1929': {'dissolution': datetime.date(1929, 5, 10), 'election': datetime.date(1929, 5, 30)}, '1931': {'dissolution': datetime.date(1931, 10, 7), 'election': datetime.date(1931, 10, 27)}, '1935': {'dissolution': datetime.date(1935, 10, 25), 'election': datetime.date(1935, 11, 14)}, '1945': {'dissolution': datetime.date(1945, 6, 15), 'election': datetime.date(1945, 7, 5)}, '1950': {'dissolution': datetime.date(1950, 2, 3), 'election': datetime.date(1950, 2, 23)}, '1951': {'dissolution': datetime.date(1951, 10, 5), 'election': datetime.date(1951, 10, 25)}, '1955': {'dissolution': datetime.date(1955, 5, 6), 'election': datetime.date(1955, 5, 26)}, '1959': {'dissolution': datetime.date(1959, 9, 18), 'election': datetime.date(1959, 10, 8)}, '1964': {'dissolution': datetime.date(1964, 9, 25), 'election': datetime.date(1964, 10, 15)}, '1966': {'dissolution': datetime.date(1966, 3, 10), 'election': datetime.date(1966, 3, 31)}, '1970': {'dissolution': datetime.date(1970, 5, 29), 'election': datetime.date(1970, 6, 18)}, '1974 (Feb)': {'dissolution': datetime.date(1974, 2, 8), 'election': datetime.date(1974, 2, 28)}, '1974 (Oct)': {'dissolution': datetime.date(1974, 9, 20), 'election': datetime.date(1974, 10, 10)}, '1979': {'dissolution': datetime.date(1979, 4, 7), 'election': datetime.date(1979, 5, 3)}, '1983': {'dissolution': datetime.date(1983, 5, 13), 'election': datetime.date(1983, 6, 9)}, '1987': {'dissolution': datetime.date(1987, 5, 18), 'election': datetime.date(1987, 6, 11)}, '1992': {'dissolution': datetime.date(1992, 3, 16), 'election': datetime.date(1992, 4, 9)}, '1997': {'dissolution': datetime.date(1997, 4, 8), 'election': datetime.date(1997, 5, 1)}, '2001': {'dissolution': datetime.date(2001, 5, 14), 'election': datetime.date(2001, 6, 7)}, '2005': {'dissolution': datetime.date(2005, 4, 11), 'election': datetime.date(2005, 5, 5)}, '2010': {'dissolution': datetime.date(2010, 4, 12), 'election': datetime.date(2010, 5, 6)}, '2015': {'dissolution': datetime.date(2015, 3, 30), 'election': datetime.date(2015, 5, 7)}, '2017': {'dissolution': datetime.date(2017, 5, 3), 'election': datetime.date(2017, 6, 8)}, '2019': {'dissolution': datetime.date(2019, 11, 6), 'election': datetime.date(2019, 12, 12)}}
2025/03/01 02:35:11 PM INFO:Election Dates Loaded Successfully.
2025/03/01 02:35:11 PM INFO:load_election_dates executed successfully
2025/03/01 02:35:34 PM INFO:Cleaned Data completed, shape: (79737, 58)
2025/03/01 02:35:34 PM INFO:load_cleaned_data executed successfully
2025/03/01 02:35:34 PM INFO:get_cleaned_data executed successfully
2025/03/01 02:35:34 PM INFO:load_data_to_session executed successfully
2025/03/01 02:35:34 PM INFO:load_entity_summary_data executed successfully
2025/03/01 02:35:34 PM INFO:get_party_summary_data executed successfully
2025/03/01 02:35:34 PM INFO:load_data_to_session executed successfully
2025/03/01 02:35:34 PM INFO:load_donorList_data executed successfully
2025/03/01 02:35:34 PM INFO:get_donor_data executed successfully
2025/03/01 02:35:34 PM INFO:load_data_to_session executed successfully
2025/03/01 02:35:34 PM INFO:load_regulated_entity_data executed successfully
2025/03/01 02:35:34 PM INFO:get_regentity_data executed successfully
2025/03/01 02:35:34 PM INFO:load_data_to_session executed successfully
2025/03/01 02:35:34 PM INFO:firstload executed successfully
2025/03/01 02:35:34 PM INFO:firstload executed successfully
2025/03/01 02:35:48 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 02:35:48 PM INFO:Setting up the package
2025/03/01 02:35:48 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 02:35:48 PM INFO:get_git_version executed successfully
2025/03/01 02:35:48 PM INFO:Version: v20.117
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:init_state_var executed successfully
2025/03/01 02:35:48 PM INFO:Session_state variables initialized
2025/03/01 02:35:48 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 02:35:48 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 02:35:48 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 02:35:48 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 02:35:48 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 02:35:48 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 02:35:48 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 02:35:48 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 02:35:48 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 02:35:48 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 02:35:48 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 02:35:48 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 02:35:48 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 02:35:48 PM INFO:menu_selection: {'title': 'Head Line Figures', 'function': <function hlf_body at 0x000001979096E680>}
2025/03/01 02:35:48 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 02:35:48 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 02:35:48 PM INFO:perc_target: 0.5
2025/03/01 02:35:48 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 02:35:48 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 02:35:48 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 02:35:48 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 02:35:48 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 02:35:48 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:35:48 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:35:48 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 02:35:48 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 02:35:48 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 02:35:48 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 02:35:48 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 02:35:48 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 02:35:48 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 02:35:48 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 02:35:48 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 02:35:48 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 02:35:48 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 02:35:48 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 02:35:48 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 02:35:48 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 02:35:48 PM INFO:Session state Setup complete
2025/03/01 02:35:48 PM INFO:initialize_session_state executed successfully
2025/03/01 02:35:48 PM INFO:Package setup complete
2025/03/01 02:35:48 PM INFO:get_git_version executed successfully
2025/03/01 02:35:48 PM INFO:App Version: v20.132
2025/03/01 02:35:48 PM INFO:Switched to page: Head Line Figures
2025/03/01 02:35:48 PM ERROR:Error in pagesetup: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 30, in hlf_body
    unique_donors = get_donors_ct(filtered_df)
  File "H:\VScode\dashboard_demo-1\components\calculations.py", line 97, in get_donors_ct
    return df["DonorId"].nunique()
TypeError: 'NoneType' object is not subscriptable
2025/03/01 02:35:48 PM CRITICAL:Menu setup crashed: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 30, in hlf_body
    unique_donors = get_donors_ct(filtered_df)
  File "H:\VScode\dashboard_demo-1\components\calculations.py", line 97, in get_donors_ct
    return df["DonorId"].nunique()
TypeError: 'NoneType' object is not subscriptable
2025/03/01 02:51:27 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 02:51:27 PM INFO:get_git_version executed successfully
2025/03/01 02:51:28 PM INFO:get_git_version executed successfully
2025/03/01 02:51:28 PM INFO:get_git_version executed successfully
2025/03/01 02:51:28 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 02:51:28 PM INFO:Setting up the package
2025/03/01 02:51:28 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 02:51:28 PM INFO:get_git_version executed successfully
2025/03/01 02:51:28 PM INFO:Version: v20.117
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:init_state_var executed successfully
2025/03/01 02:51:28 PM INFO:Session_state variables initialized
2025/03/01 02:51:28 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 02:51:28 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 02:51:28 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 02:51:28 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 02:51:28 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 02:51:28 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 02:51:28 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 02:51:28 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 02:51:28 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 02:51:28 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:51:28 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 02:51:28 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 02:51:28 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 02:51:28 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 02:51:28 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 02:51:28 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 02:51:28 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 02:51:28 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 02:51:28 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 02:51:28 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 02:51:28 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 02:51:28 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 02:51:28 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 02:51:28 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 02:51:28 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 02:51:28 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 02:51:28 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 02:51:28 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 02:51:28 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 02:51:28 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 02:51:28 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 02:51:28 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 02:51:28 PM INFO:perc_target: 0.5
2025/03/01 02:51:28 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:51:28 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 02:51:28 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 02:51:28 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 02:51:28 PM INFO:Session state Setup complete
2025/03/01 02:51:28 PM INFO:initialize_session_state executed successfully
2025/03/01 02:51:28 PM INFO:Package setup complete
2025/03/01 02:51:28 PM INFO:get_git_version executed successfully
2025/03/01 02:51:29 PM INFO:get_git_version executed successfully
2025/03/01 02:51:29 PM INFO:App Version: v20.132
2025/03/01 02:51:29 PM INFO:Switched to page: Introduction
2025/03/01 02:51:29 PM INFO:pagesetup executed successfully
2025/03/01 02:51:29 PM INFO:No data found in session state, running firstload()
2025/03/01 02:51:30 PM INFO:map_filename: regentity_map_fname
2025/03/01 02:51:30 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 02:51:30 PM INFO:Dedupe by file
2025/03/01 02:51:31 PM INFO:Dedupe by file, shape: (65279, 34)
2025/03/01 02:51:31 PM INFO:dedupe_entity_file executed successfully
2025/03/01 02:51:31 PM INFO:map_filename: donor_map_fname
2025/03/01 02:51:31 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 02:51:31 PM INFO:Dedupe by file
2025/03/01 02:51:31 PM INFO:Dedupe by file, shape: (66011, 40)
2025/03/01 02:51:31 PM INFO:dedupe_entity_file executed successfully
2025/03/01 02:51:31 PM INFO:Data cleanup completed, shape: (66011, 40)
2025/03/01 02:51:31 PM INFO:raw_data_cleanup executed successfully
2025/03/01 02:51:32 PM INFO:load_raw_data executed successfully
2025/03/01 02:51:32 PM INFO:get_raw_data executed successfully
2025/03/01 02:51:32 PM INFO:load_data_to_session executed successfully
2025/03/01 02:51:35 PM ERROR:Missing column: 'PartyName' in loaddata_df. Available columns: Index(['ECRef', 'OriginalRegulatedEntityName', 'RegulatedEntityType', 'Value',
       'AcceptedDate', 'AccountingUnitName', 'OriginalDonorName',
       'AccountingUnitsAsCentralParty', 'IsSponsorship', 'DonorStatus',
       'RegulatedDoneeType', 'CompanyRegistrationNumber', 'Postcode',
       'DonationType', 'NatureOfDonation', 'PurposeOfVisit', 'DonationAction',
       'ReceivedDate', 'ReportedDate', 'IsReportedPrePoll',
       'ReportingPeriodName', 'IsBequest', 'IsAggregation',
       'OriginalRegulatedEntityId', 'AccountingUnitId', 'OriginalDonorId',
       'CampaigningName', 'RegisterName', 'IsIrishSource',
       'CleanedRegulatedEntityId', 'CleanedRegulatedEntityName',
       'OriginalRegulatedEntityName', 'RegulatedEntityId',
       'RegulatedEntityName', 'CleanedDonorId', 'ParentDonorName',
       'CleanedDonorName', 'DonorStatus2', 'DonorId', 'DonorName',
       'EventCount', 'YearReceived', 'MonthReceived', 'YearMonthReceived'],
      dtype='object')
2025/03/01 02:51:35 PM INFO:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/01 02:51:35 PM INFO:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/01 02:51:35 PM INFO:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 02:51:36 PM INFO:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/01 02:51:36 PM INFO:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 02:51:36 PM INFO:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/01 02:51:36 PM INFO:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/01 02:51:36 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 02:51:36 PM INFO:map_mp_to_party executed successfully
2025/03/01 02:51:36 PM INFO:Election Dates not found in session, loading now.
2025/03/01 02:51:36 PM INFO:ElectionDatesDict: {'1929': {'dissolution': datetime.date(1929, 5, 10), 'election': datetime.date(1929, 5, 30)}, '1931': {'dissolution': datetime.date(1931, 10, 7), 'election': datetime.date(1931, 10, 27)}, '1935': {'dissolution': datetime.date(1935, 10, 25), 'election': datetime.date(1935, 11, 14)}, '1945': {'dissolution': datetime.date(1945, 6, 15), 'election': datetime.date(1945, 7, 5)}, '1950': {'dissolution': datetime.date(1950, 2, 3), 'election': datetime.date(1950, 2, 23)}, '1951': {'dissolution': datetime.date(1951, 10, 5), 'election': datetime.date(1951, 10, 25)}, '1955': {'dissolution': datetime.date(1955, 5, 6), 'election': datetime.date(1955, 5, 26)}, '1959': {'dissolution': datetime.date(1959, 9, 18), 'election': datetime.date(1959, 10, 8)}, '1964': {'dissolution': datetime.date(1964, 9, 25), 'election': datetime.date(1964, 10, 15)}, '1966': {'dissolution': datetime.date(1966, 3, 10), 'election': datetime.date(1966, 3, 31)}, '1970': {'dissolution': datetime.date(1970, 5, 29), 'election': datetime.date(1970, 6, 18)}, '1974 (Feb)': {'dissolution': datetime.date(1974, 2, 8), 'election': datetime.date(1974, 2, 28)}, '1974 (Oct)': {'dissolution': datetime.date(1974, 9, 20), 'election': datetime.date(1974, 10, 10)}, '1979': {'dissolution': datetime.date(1979, 4, 7), 'election': datetime.date(1979, 5, 3)}, '1983': {'dissolution': datetime.date(1983, 5, 13), 'election': datetime.date(1983, 6, 9)}, '1987': {'dissolution': datetime.date(1987, 5, 18), 'election': datetime.date(1987, 6, 11)}, '1992': {'dissolution': datetime.date(1992, 3, 16), 'election': datetime.date(1992, 4, 9)}, '1997': {'dissolution': datetime.date(1997, 4, 8), 'election': datetime.date(1997, 5, 1)}, '2001': {'dissolution': datetime.date(2001, 5, 14), 'election': datetime.date(2001, 6, 7)}, '2005': {'dissolution': datetime.date(2005, 4, 11), 'election': datetime.date(2005, 5, 5)}, '2010': {'dissolution': datetime.date(2010, 4, 12), 'election': datetime.date(2010, 5, 6)}, '2015': {'dissolution': datetime.date(2015, 3, 30), 'election': datetime.date(2015, 5, 7)}, '2017': {'dissolution': datetime.date(2017, 5, 3), 'election': datetime.date(2017, 6, 8)}, '2019': {'dissolution': datetime.date(2019, 11, 6), 'election': datetime.date(2019, 12, 12)}}
2025/03/01 02:51:36 PM INFO:Election Dates Loaded Successfully.
2025/03/01 02:51:36 PM INFO:load_election_dates executed successfully
2025/03/01 02:52:00 PM INFO:Cleaned Data completed, shape: (79737, 58)
2025/03/01 02:52:00 PM INFO:load_cleaned_data executed successfully
2025/03/01 02:52:01 PM INFO:get_cleaned_data executed successfully
2025/03/01 02:52:01 PM INFO:load_data_to_session executed successfully
2025/03/01 02:52:01 PM INFO:load_entity_summary_data executed successfully
2025/03/01 02:52:01 PM INFO:get_party_summary_data executed successfully
2025/03/01 02:52:01 PM INFO:load_data_to_session executed successfully
2025/03/01 02:52:01 PM INFO:load_donorList_data executed successfully
2025/03/01 02:52:01 PM INFO:get_donor_data executed successfully
2025/03/01 02:52:01 PM INFO:load_data_to_session executed successfully
2025/03/01 02:52:01 PM INFO:load_regulated_entity_data executed successfully
2025/03/01 02:52:01 PM INFO:get_regentity_data executed successfully
2025/03/01 02:52:01 PM INFO:load_data_to_session executed successfully
2025/03/01 02:52:01 PM INFO:firstload executed successfully
2025/03/01 03:00:30 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 03:00:31 PM INFO:get_git_version executed successfully
2025/03/01 03:00:31 PM INFO:get_git_version executed successfully
2025/03/01 03:00:31 PM INFO:get_git_version executed successfully
2025/03/01 03:00:31 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:00:31 PM INFO:Setting up the package
2025/03/01 03:00:31 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:00:31 PM INFO:get_git_version executed successfully
2025/03/01 03:00:31 PM INFO:Version: v20.117
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:init_state_var executed successfully
2025/03/01 03:00:31 PM INFO:Session_state variables initialized
2025/03/01 03:00:32 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:00:32 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:00:32 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:00:32 PM INFO:perc_target: 0.5
2025/03/01 03:00:32 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:00:32 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:00:32 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:00:32 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:00:32 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:00:32 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:00:32 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:00:32 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:00:32 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:00:32 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:00:32 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:00:32 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:00:32 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:00:32 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:00:32 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:00:32 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:00:32 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:00:32 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:00:32 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:00:32 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:00:32 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:00:32 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:00:32 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:00:32 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:00:32 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:00:32 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:00:32 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:00:32 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:00:32 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:00:32 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:00:32 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:00:32 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:00:32 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:00:32 PM INFO:Session state Setup complete
2025/03/01 03:00:32 PM INFO:initialize_session_state executed successfully
2025/03/01 03:00:32 PM INFO:Package setup complete
2025/03/01 03:00:32 PM INFO:get_git_version executed successfully
2025/03/01 03:00:32 PM INFO:get_git_version executed successfully
2025/03/01 03:00:32 PM INFO:App Version: v20.132
2025/03/01 03:00:32 PM INFO:Switched to page: Introduction
2025/03/01 03:00:32 PM INFO:pagesetup executed successfully
2025/03/01 03:00:32 PM INFO:No data found in session state, running firstload()
2025/03/01 03:00:34 PM INFO:map_filename: regentity_map_fname
2025/03/01 03:00:34 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:00:34 PM INFO:Dedupe by file
2025/03/01 03:00:34 PM INFO:Dedupe by file, shape: (65278, 34)
2025/03/01 03:00:34 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:00:34 PM INFO:map_filename: donor_map_fname
2025/03/01 03:00:34 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:00:34 PM INFO:Dedupe by file
2025/03/01 03:00:34 PM INFO:Dedupe by file, shape: (65278, 40)
2025/03/01 03:00:34 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:00:34 PM INFO:Data cleanup completed, shape: (65278, 40)
2025/03/01 03:00:34 PM INFO:raw_data_cleanup executed successfully
2025/03/01 03:00:35 PM INFO:load_raw_data executed successfully
2025/03/01 03:00:35 PM INFO:get_raw_data executed successfully
2025/03/01 03:00:35 PM INFO:load_data_to_session executed successfully
2025/03/01 03:00:38 PM ERROR:Missing column: 'PartyName' in loaddata_df. Available columns: Index(['ECRef', 'OriginalRegulatedEntityName', 'RegulatedEntityType', 'Value',
       'AcceptedDate', 'AccountingUnitName', 'OriginalDonorName',
       'AccountingUnitsAsCentralParty', 'IsSponsorship', 'DonorStatus',
       'RegulatedDoneeType', 'CompanyRegistrationNumber', 'Postcode',
       'DonationType', 'NatureOfDonation', 'PurposeOfVisit', 'DonationAction',
       'ReceivedDate', 'ReportedDate', 'IsReportedPrePoll',
       'ReportingPeriodName', 'IsBequest', 'IsAggregation',
       'OriginalRegulatedEntityId', 'AccountingUnitId', 'OriginalDonorId',
       'CampaigningName', 'RegisterName', 'IsIrishSource',
       'CleanedRegulatedEntityId', 'CleanedRegulatedEntityName',
       'OriginalRegulatedEntityName', 'RegulatedEntityId',
       'RegulatedEntityName', 'CleanedDonorId', 'ParentDonorName',
       'CleanedDonorName', 'DonorStatus2', 'DonorId', 'DonorName',
       'EventCount', 'YearReceived', 'MonthReceived', 'YearMonthReceived'],
      dtype='object')
2025/03/01 03:00:38 PM INFO:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/01 03:00:38 PM INFO:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/01 03:00:39 PM INFO:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 03:00:39 PM INFO:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/01 03:00:39 PM INFO:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 03:00:39 PM INFO:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/01 03:00:39 PM INFO:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/01 03:00:39 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 03:00:39 PM INFO:map_mp_to_party executed successfully
2025/03/01 03:00:39 PM INFO:Election Dates not found in session, loading now.
2025/03/01 03:00:39 PM INFO:ElectionDatesDict: {'1929': {'dissolution': datetime.date(1929, 5, 10), 'election': datetime.date(1929, 5, 30)}, '1931': {'dissolution': datetime.date(1931, 10, 7), 'election': datetime.date(1931, 10, 27)}, '1935': {'dissolution': datetime.date(1935, 10, 25), 'election': datetime.date(1935, 11, 14)}, '1945': {'dissolution': datetime.date(1945, 6, 15), 'election': datetime.date(1945, 7, 5)}, '1950': {'dissolution': datetime.date(1950, 2, 3), 'election': datetime.date(1950, 2, 23)}, '1951': {'dissolution': datetime.date(1951, 10, 5), 'election': datetime.date(1951, 10, 25)}, '1955': {'dissolution': datetime.date(1955, 5, 6), 'election': datetime.date(1955, 5, 26)}, '1959': {'dissolution': datetime.date(1959, 9, 18), 'election': datetime.date(1959, 10, 8)}, '1964': {'dissolution': datetime.date(1964, 9, 25), 'election': datetime.date(1964, 10, 15)}, '1966': {'dissolution': datetime.date(1966, 3, 10), 'election': datetime.date(1966, 3, 31)}, '1970': {'dissolution': datetime.date(1970, 5, 29), 'election': datetime.date(1970, 6, 18)}, '1974 (Feb)': {'dissolution': datetime.date(1974, 2, 8), 'election': datetime.date(1974, 2, 28)}, '1974 (Oct)': {'dissolution': datetime.date(1974, 9, 20), 'election': datetime.date(1974, 10, 10)}, '1979': {'dissolution': datetime.date(1979, 4, 7), 'election': datetime.date(1979, 5, 3)}, '1983': {'dissolution': datetime.date(1983, 5, 13), 'election': datetime.date(1983, 6, 9)}, '1987': {'dissolution': datetime.date(1987, 5, 18), 'election': datetime.date(1987, 6, 11)}, '1992': {'dissolution': datetime.date(1992, 3, 16), 'election': datetime.date(1992, 4, 9)}, '1997': {'dissolution': datetime.date(1997, 4, 8), 'election': datetime.date(1997, 5, 1)}, '2001': {'dissolution': datetime.date(2001, 5, 14), 'election': datetime.date(2001, 6, 7)}, '2005': {'dissolution': datetime.date(2005, 4, 11), 'election': datetime.date(2005, 5, 5)}, '2010': {'dissolution': datetime.date(2010, 4, 12), 'election': datetime.date(2010, 5, 6)}, '2015': {'dissolution': datetime.date(2015, 3, 30), 'election': datetime.date(2015, 5, 7)}, '2017': {'dissolution': datetime.date(2017, 5, 3), 'election': datetime.date(2017, 6, 8)}, '2019': {'dissolution': datetime.date(2019, 11, 6), 'election': datetime.date(2019, 12, 12)}}
2025/03/01 03:00:39 PM INFO:Election Dates Loaded Successfully.
2025/03/01 03:00:39 PM INFO:load_election_dates executed successfully
2025/03/01 03:01:03 PM INFO:Cleaned Data completed, shape: (78745, 58)
2025/03/01 03:01:03 PM INFO:load_cleaned_data executed successfully
2025/03/01 03:01:04 PM INFO:get_cleaned_data executed successfully
2025/03/01 03:01:04 PM INFO:load_data_to_session executed successfully
2025/03/01 03:01:04 PM INFO:load_entity_summary_data executed successfully
2025/03/01 03:01:04 PM INFO:get_party_summary_data executed successfully
2025/03/01 03:01:04 PM INFO:load_data_to_session executed successfully
2025/03/01 03:01:04 PM INFO:load_donorList_data executed successfully
2025/03/01 03:01:04 PM INFO:get_donor_data executed successfully
2025/03/01 03:01:04 PM INFO:load_data_to_session executed successfully
2025/03/01 03:01:04 PM INFO:load_regulated_entity_data executed successfully
2025/03/01 03:01:04 PM INFO:get_regentity_data executed successfully
2025/03/01 03:01:04 PM INFO:load_data_to_session executed successfully
2025/03/01 03:01:04 PM INFO:firstload executed successfully
2025/03/01 03:01:38 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:01:38 PM INFO:Setting up the package
2025/03/01 03:01:38 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:01:38 PM INFO:get_git_version executed successfully
2025/03/01 03:01:38 PM INFO:Version: v20.117
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:init_state_var executed successfully
2025/03/01 03:01:38 PM INFO:Session_state variables initialized
2025/03/01 03:01:38 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:01:38 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:01:38 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:01:38 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:01:38 PM INFO:perc_target: 0.5
2025/03/01 03:01:38 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:01:38 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:01:38 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:01:38 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:01:38 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:01:38 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:01:38 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:01:38 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:01:38 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:01:38 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:01:38 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:01:38 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:01:38 PM INFO:menu_selection: {'title': 'Bequeths', 'function': <function mod_bequeths_page at 0x0000017607789750>}
2025/03/01 03:01:38 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:01:38 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:01:38 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:01:38 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:01:38 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:01:38 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:01:38 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:01:38 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:01:38 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:01:38 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:01:38 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:01:38 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:01:38 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:01:38 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:01:38 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:01:38 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:01:38 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:01:38 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:01:38 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:01:39 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:01:39 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:01:39 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:01:39 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:01:39 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:01:39 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:01:39 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:01:39 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:01:39 PM INFO:Session state Setup complete
2025/03/01 03:01:39 PM INFO:initialize_session_state executed successfully
2025/03/01 03:01:39 PM INFO:Package setup complete
2025/03/01 03:01:39 PM INFO:get_git_version executed successfully
2025/03/01 03:01:39 PM INFO:App Version: v20.132
2025/03/01 03:01:39 PM INFO:Switched to page: Bequeths
2025/03/01 03:01:42 PM ERROR:Missing column: 'PartyName' in loaddata_df. Available columns: Index(['ECRef', 'OriginalRegulatedEntityName', 'RegulatedEntityType', 'Value',
       'AcceptedDate', 'AccountingUnitName', 'OriginalDonorName',
       'AccountingUnitsAsCentralParty', 'IsSponsorship', 'DonorStatus',
       'RegulatedDoneeType', 'CompanyRegistrationNumber', 'Postcode',
       'DonationType', 'NatureOfDonation', 'PurposeOfVisit', 'DonationAction',
       'ReceivedDate', 'ReportedDate', 'IsReportedPrePoll',
       'ReportingPeriodName', 'IsBequest', 'IsAggregation',
       'OriginalRegulatedEntityId', 'AccountingUnitId', 'OriginalDonorId',
       'CampaigningName', 'RegisterName', 'IsIrishSource',
       'CleanedRegulatedEntityId', 'CleanedRegulatedEntityName',
       'OriginalRegulatedEntityName', 'RegulatedEntityId',
       'RegulatedEntityName', 'CleanedDonorId', 'ParentDonorName',
       'CleanedDonorName', 'DonorStatus2', 'DonorId', 'DonorName',
       'EventCount', 'YearReceived', 'MonthReceived', 'YearMonthReceived'],
      dtype='object')
2025/03/01 03:01:42 PM INFO:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/01 03:01:42 PM INFO:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/01 03:01:42 PM INFO:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 03:01:42 PM INFO:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/01 03:01:42 PM INFO:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 03:01:42 PM INFO:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/01 03:01:42 PM INFO:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/01 03:01:42 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 03:01:42 PM INFO:map_mp_to_party executed successfully
2025/03/01 03:02:10 PM INFO:Cleaned Data completed, shape: (78745, 58)
2025/03/01 03:02:10 PM INFO:load_cleaned_data executed successfully
2025/03/01 03:02:10 PM INFO:load_and_filter_data executed successfully
2025/03/01 03:02:10 PM INFO:display_summary_statistics executed successfully
2025/03/01 03:02:10 PM INFO:display_textual_insights executed successfully
2025/03/01 03:02:10 PM ERROR:Error in display_visualizations: name 'filtered_df' is not defined
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 88, in display_visualizations
    if filtered_df.empty:
NameError: name 'filtered_df' is not defined
2025/03/01 03:02:10 PM ERROR:Error in display_data_page: name 'filtered_df' is not defined
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 88, in display_visualizations
    if filtered_df.empty:
NameError: name 'filtered_df' is not defined
2025/03/01 03:02:10 PM ERROR:Error in pagesetup: name 'filtered_df' is not defined
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 57, in mod_bequeths_page
    display_data_page(filter_key="Bequests_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 88, in display_visualizations
    if filtered_df.empty:
NameError: name 'filtered_df' is not defined
2025/03/01 03:02:10 PM CRITICAL:Menu setup crashed: name 'filtered_df' is not defined
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 57, in mod_bequeths_page
    display_data_page(filter_key="Bequests_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 88, in display_visualizations
    if filtered_df.empty:
NameError: name 'filtered_df' is not defined
2025/03/01 03:05:13 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 03:05:13 PM INFO:get_git_version executed successfully
2025/03/01 03:05:14 PM INFO:get_git_version executed successfully
2025/03/01 03:05:14 PM INFO:get_git_version executed successfully
2025/03/01 03:05:14 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:05:14 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:05:14 PM INFO:Setting up the package
2025/03/01 03:05:14 PM INFO:Setting up the package
2025/03/01 03:05:14 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:05:14 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:05:14 PM INFO:get_git_version executed successfully
2025/03/01 03:05:14 PM INFO:get_git_version executed successfully
2025/03/01 03:05:14 PM INFO:Version: v20.117
2025/03/01 03:05:14 PM INFO:Version: v20.117
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:14 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:init_state_var executed successfully
2025/03/01 03:05:15 PM INFO:Session_state variables initialized
2025/03/01 03:05:15 PM INFO:Session_state variables initialized
2025/03/01 03:05:15 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:05:15 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:05:15 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:05:15 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:05:15 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:05:15 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:05:15 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:05:15 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:05:15 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:05:15 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:05:15 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:05:15 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:05:15 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:05:15 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:05:15 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:05:15 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:05:15 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:05:15 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:05:15 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:05:15 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:05:15 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:05:15 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:05:15 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:05:15 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:05:15 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:05:15 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:05:15 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:05:15 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:05:15 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:05:15 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:05:15 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:05:15 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:05:15 PM INFO:perc_target: 0.5
2025/03/01 03:05:15 PM INFO:perc_target: 0.5
2025/03/01 03:05:15 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:05:15 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:05:15 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:05:15 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:05:15 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:05:15 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:05:15 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:05:15 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:05:15 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:05:15 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:05:15 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:05:15 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:05:15 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:05:15 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:05:15 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:05:15 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:05:15 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:05:15 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:05:15 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:05:15 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:05:15 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:05:15 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:05:15 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:05:15 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:05:15 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:05:15 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:05:15 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:05:15 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:05:15 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:05:15 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:05:15 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:05:15 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:05:15 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:05:15 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:05:15 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:05:15 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:05:15 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:05:15 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:05:15 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:05:15 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:05:15 PM INFO:Session state Setup complete
2025/03/01 03:05:15 PM INFO:Session state Setup complete
2025/03/01 03:05:15 PM INFO:initialize_session_state executed successfully
2025/03/01 03:05:15 PM INFO:initialize_session_state executed successfully
2025/03/01 03:05:15 PM INFO:Package setup complete
2025/03/01 03:05:15 PM INFO:Package setup complete
2025/03/01 03:05:15 PM INFO:get_git_version executed successfully
2025/03/01 03:05:15 PM INFO:get_git_version executed successfully
2025/03/01 03:05:15 PM INFO:get_git_version executed successfully
2025/03/01 03:05:15 PM INFO:App Version: v20.132
2025/03/01 03:05:15 PM INFO:App Version: v20.132
2025/03/01 03:05:15 PM INFO:Switched to page: Bequeths
2025/03/01 03:05:15 PM INFO:Switched to page: Introduction
2025/03/01 03:05:15 PM ERROR:Error in load_and_filter_data: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:05:15 PM INFO:pagesetup executed successfully
2025/03/01 03:05:15 PM ERROR:Error in display_data_page: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:05:15 PM ERROR:Error in pagesetup: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 54, in mod_bequeths_page
    display_data_page(filter_key="Bequests_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:05:15 PM INFO:No data found in session state, running firstload()
2025/03/01 03:05:15 PM CRITICAL:Menu setup crashed: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 54, in mod_bequeths_page
    display_data_page(filter_key="Bequests_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:05:16 PM INFO:map_filename: regentity_map_fname
2025/03/01 03:05:16 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:05:16 PM INFO:Dedupe by file
2025/03/01 03:05:16 PM INFO:Dedupe by file, shape: (65278, 34)
2025/03/01 03:05:16 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:05:17 PM INFO:map_filename: donor_map_fname
2025/03/01 03:05:17 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:05:17 PM INFO:Dedupe by file
2025/03/01 03:05:17 PM INFO:Dedupe by file, shape: (65278, 40)
2025/03/01 03:05:17 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:05:17 PM INFO:Data cleanup completed, shape: (65278, 40)
2025/03/01 03:05:17 PM INFO:raw_data_cleanup executed successfully
2025/03/01 03:05:18 PM INFO:load_raw_data executed successfully
2025/03/01 03:05:18 PM INFO:get_raw_data executed successfully
2025/03/01 03:05:18 PM INFO:load_data_to_session executed successfully
2025/03/01 03:05:21 PM ERROR:Missing column: 'PartyName' in loaddata_df. Available columns: Index(['ECRef', 'OriginalRegulatedEntityName', 'RegulatedEntityType', 'Value',
       'AcceptedDate', 'AccountingUnitName', 'OriginalDonorName',
       'AccountingUnitsAsCentralParty', 'IsSponsorship', 'DonorStatus',
       'RegulatedDoneeType', 'CompanyRegistrationNumber', 'Postcode',
       'DonationType', 'NatureOfDonation', 'PurposeOfVisit', 'DonationAction',
       'ReceivedDate', 'ReportedDate', 'IsReportedPrePoll',
       'ReportingPeriodName', 'IsBequest', 'IsAggregation',
       'OriginalRegulatedEntityId', 'AccountingUnitId', 'OriginalDonorId',
       'CampaigningName', 'RegisterName', 'IsIrishSource',
       'CleanedRegulatedEntityId', 'CleanedRegulatedEntityName',
       'OriginalRegulatedEntityName', 'RegulatedEntityId',
       'RegulatedEntityName', 'CleanedDonorId', 'ParentDonorName',
       'CleanedDonorName', 'DonorStatus2', 'DonorId', 'DonorName',
       'EventCount', 'YearReceived', 'MonthReceived', 'YearMonthReceived'],
      dtype='object')
2025/03/01 03:05:21 PM INFO:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/01 03:05:21 PM INFO:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/01 03:05:21 PM INFO:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 03:05:21 PM INFO:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/01 03:05:21 PM INFO:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 03:05:21 PM INFO:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/01 03:05:21 PM INFO:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/01 03:05:21 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 03:05:21 PM INFO:map_mp_to_party executed successfully
2025/03/01 03:05:22 PM INFO:Election Dates not found in session, loading now.
2025/03/01 03:05:22 PM INFO:ElectionDatesDict: {'1929': {'dissolution': datetime.date(1929, 5, 10), 'election': datetime.date(1929, 5, 30)}, '1931': {'dissolution': datetime.date(1931, 10, 7), 'election': datetime.date(1931, 10, 27)}, '1935': {'dissolution': datetime.date(1935, 10, 25), 'election': datetime.date(1935, 11, 14)}, '1945': {'dissolution': datetime.date(1945, 6, 15), 'election': datetime.date(1945, 7, 5)}, '1950': {'dissolution': datetime.date(1950, 2, 3), 'election': datetime.date(1950, 2, 23)}, '1951': {'dissolution': datetime.date(1951, 10, 5), 'election': datetime.date(1951, 10, 25)}, '1955': {'dissolution': datetime.date(1955, 5, 6), 'election': datetime.date(1955, 5, 26)}, '1959': {'dissolution': datetime.date(1959, 9, 18), 'election': datetime.date(1959, 10, 8)}, '1964': {'dissolution': datetime.date(1964, 9, 25), 'election': datetime.date(1964, 10, 15)}, '1966': {'dissolution': datetime.date(1966, 3, 10), 'election': datetime.date(1966, 3, 31)}, '1970': {'dissolution': datetime.date(1970, 5, 29), 'election': datetime.date(1970, 6, 18)}, '1974 (Feb)': {'dissolution': datetime.date(1974, 2, 8), 'election': datetime.date(1974, 2, 28)}, '1974 (Oct)': {'dissolution': datetime.date(1974, 9, 20), 'election': datetime.date(1974, 10, 10)}, '1979': {'dissolution': datetime.date(1979, 4, 7), 'election': datetime.date(1979, 5, 3)}, '1983': {'dissolution': datetime.date(1983, 5, 13), 'election': datetime.date(1983, 6, 9)}, '1987': {'dissolution': datetime.date(1987, 5, 18), 'election': datetime.date(1987, 6, 11)}, '1992': {'dissolution': datetime.date(1992, 3, 16), 'election': datetime.date(1992, 4, 9)}, '1997': {'dissolution': datetime.date(1997, 4, 8), 'election': datetime.date(1997, 5, 1)}, '2001': {'dissolution': datetime.date(2001, 5, 14), 'election': datetime.date(2001, 6, 7)}, '2005': {'dissolution': datetime.date(2005, 4, 11), 'election': datetime.date(2005, 5, 5)}, '2010': {'dissolution': datetime.date(2010, 4, 12), 'election': datetime.date(2010, 5, 6)}, '2015': {'dissolution': datetime.date(2015, 3, 30), 'election': datetime.date(2015, 5, 7)}, '2017': {'dissolution': datetime.date(2017, 5, 3), 'election': datetime.date(2017, 6, 8)}, '2019': {'dissolution': datetime.date(2019, 11, 6), 'election': datetime.date(2019, 12, 12)}}
2025/03/01 03:05:22 PM INFO:Election Dates Loaded Successfully.
2025/03/01 03:05:22 PM INFO:load_election_dates executed successfully
2025/03/01 03:05:46 PM INFO:Cleaned Data completed, shape: (78745, 58)
2025/03/01 03:05:46 PM INFO:load_cleaned_data executed successfully
2025/03/01 03:05:46 PM INFO:get_cleaned_data executed successfully
2025/03/01 03:05:46 PM INFO:load_data_to_session executed successfully
2025/03/01 03:05:46 PM INFO:load_entity_summary_data executed successfully
2025/03/01 03:05:46 PM INFO:get_party_summary_data executed successfully
2025/03/01 03:05:46 PM INFO:load_data_to_session executed successfully
2025/03/01 03:05:46 PM INFO:load_donorList_data executed successfully
2025/03/01 03:05:46 PM INFO:get_donor_data executed successfully
2025/03/01 03:05:46 PM INFO:load_data_to_session executed successfully
2025/03/01 03:05:46 PM INFO:load_regulated_entity_data executed successfully
2025/03/01 03:05:46 PM INFO:get_regentity_data executed successfully
2025/03/01 03:05:46 PM INFO:load_data_to_session executed successfully
2025/03/01 03:05:46 PM INFO:firstload executed successfully
2025/03/01 03:09:11 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:09:11 PM INFO:Setting up the package
2025/03/01 03:09:11 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:09:11 PM INFO:get_git_version executed successfully
2025/03/01 03:09:11 PM INFO:Version: v20.117
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:init_state_var executed successfully
2025/03/01 03:09:11 PM INFO:Session_state variables initialized
2025/03/01 03:09:11 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:09:11 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:09:11 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:09:11 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:09:11 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:09:11 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:09:11 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:09:11 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:09:11 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:09:11 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:09:11 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:09:11 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:09:11 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:09:11 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:09:11 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:09:11 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:09:11 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:09:11 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:09:11 PM INFO:perc_target: 0.5
2025/03/01 03:09:11 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:09:11 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:09:11 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:09:11 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:09:11 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:09:11 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:09:11 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:09:11 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:09:11 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:09:11 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:09:11 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:09:11 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:09:11 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:09:11 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:09:11 PM INFO:menu_selection: {'title': 'Head Line Figures', 'function': <function hlf_body at 0x000001D87C2A6A70>}
2025/03/01 03:09:11 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:09:11 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:09:11 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:09:11 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:09:11 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:09:11 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:09:11 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:09:11 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:09:11 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:09:11 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:09:11 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:09:11 PM INFO:Session state Setup complete
2025/03/01 03:09:11 PM INFO:initialize_session_state executed successfully
2025/03/01 03:09:11 PM INFO:Package setup complete
2025/03/01 03:09:11 PM INFO:get_git_version executed successfully
2025/03/01 03:09:11 PM INFO:App Version: v20.132
2025/03/01 03:09:11 PM INFO:Switched to page: Head Line Figures
2025/03/01 03:09:12 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:09:12 PM ERROR:Error in plot_bar_line_by_year: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 03:09:12 PM ERROR:Error in pagesetup: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 134, in hlf_body
    vis.plot_bar_line_by_year(filtered_df_sort,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 03:09:12 PM CRITICAL:Menu setup crashed: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 134, in hlf_body
    vis.plot_bar_line_by_year(filtered_df_sort,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 03:09:43 PM INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/01 03:09:43 PM INFO:get_git_version executed successfully
2025/03/01 03:09:43 PM INFO:get_git_version executed successfully
2025/03/01 03:09:43 PM INFO:get_git_version executed successfully
2025/03/01 03:09:43 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:09:43 PM INFO:Setting up the package
2025/03/01 03:09:43 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:09:43 PM INFO:get_git_version executed successfully
2025/03/01 03:09:43 PM INFO:Version: v20.117
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:init_state_var executed successfully
2025/03/01 03:09:43 PM INFO:Session_state variables initialized
2025/03/01 03:09:43 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:09:43 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:09:43 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:09:43 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:09:43 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:09:43 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:09:43 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:09:43 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:09:43 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:09:43 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:09:43 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:09:43 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:09:43 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:09:43 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:09:43 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:09:43 PM INFO:year_slider_dons_by_year_n_entity: (2001, 2019)
2025/03/01 03:09:43 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:09:43 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:09:43 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:09:43 PM INFO:perc_target: 0.5
2025/03/01 03:09:43 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:09:43 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:09:43 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:09:43 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:09:43 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:09:43 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:09:43 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:09:43 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:09:43 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:09:43 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:09:43 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:09:43 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:09:43 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:09:43 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:09:43 PM INFO:menu_selection: {'title': 'Corporate Donations', 'function': <function mod_corporate_donations_page at 0x000001D87C6D1750>}
2025/03/01 03:09:43 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:09:43 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:09:43 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:09:43 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:09:43 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:09:43 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:09:43 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:09:43 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:09:43 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:09:43 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:09:43 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:09:43 PM INFO:Session state Setup complete
2025/03/01 03:09:43 PM INFO:initialize_session_state executed successfully
2025/03/01 03:09:43 PM INFO:Package setup complete
2025/03/01 03:09:43 PM INFO:get_git_version executed successfully
2025/03/01 03:09:43 PM INFO:get_git_version executed successfully
2025/03/01 03:09:43 PM INFO:App Version: v20.132
2025/03/01 03:09:43 PM INFO:Switched to page: Corporate Donations
2025/03/01 03:09:44 PM INFO:load_and_filter_data executed successfully
2025/03/01 03:09:44 PM INFO:display_summary_statistics executed successfully
2025/03/01 03:09:44 PM INFO:display_textual_insights executed successfully
2025/03/01 03:09:44 PM ERROR:Error in plot_bar_line_by_year: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
2025/03/01 03:09:44 PM ERROR:Error in display_visualizations: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 95, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
2025/03/01 03:09:44 PM ERROR:Error in display_data_page: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 95, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
2025/03/01 03:09:44 PM ERROR:Error in pagesetup: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 60, in mod_corporate_donations_page
    display_data_page(filter_key="CorporateDonations_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 95, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
2025/03/01 03:09:44 PM CRITICAL:Menu setup crashed: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 60, in mod_corporate_donations_page
    display_data_page(filter_key="CorporateDonations_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 95, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
2025/03/01 03:10:26 PM INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/01 03:10:26 PM INFO:get_git_version executed successfully
2025/03/01 03:10:26 PM INFO:get_git_version executed successfully
2025/03/01 03:10:26 PM INFO:get_git_version executed successfully
2025/03/01 03:10:26 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:10:26 PM INFO:Setting up the package
2025/03/01 03:10:26 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:10:26 PM INFO:get_git_version executed successfully
2025/03/01 03:10:26 PM INFO:Version: v20.117
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:init_state_var executed successfully
2025/03/01 03:10:26 PM INFO:Session_state variables initialized
2025/03/01 03:10:26 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:10:26 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:10:26 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:10:26 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:10:26 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:10:26 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:10:26 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:10:26 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:10:26 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:10:26 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:10:26 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:10:26 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:10:26 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:10:26 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:10:26 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:10:26 PM INFO:year_slider_dons_by_year_n_entity: (2001, 2019)
2025/03/01 03:10:26 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:10:26 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:10:26 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:10:26 PM INFO:perc_target: 0.5
2025/03/01 03:10:26 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:10:26 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:10:26 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:10:26 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:10:26 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:10:26 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:10:26 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:10:26 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:10:26 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:10:26 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:10:26 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:10:26 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:10:26 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:10:26 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:10:26 PM INFO:menu_selection: {'title': 'Sponsorships', 'function': <function mod_sponsorship_page at 0x000001D800B98AF0>}
2025/03/01 03:10:26 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:10:26 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:10:26 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:10:26 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:10:26 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:10:26 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:10:26 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:10:26 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:10:26 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:10:26 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:10:26 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:10:26 PM INFO:Session state Setup complete
2025/03/01 03:10:26 PM INFO:initialize_session_state executed successfully
2025/03/01 03:10:26 PM INFO:Package setup complete
2025/03/01 03:10:26 PM INFO:get_git_version executed successfully
2025/03/01 03:10:26 PM INFO:get_git_version executed successfully
2025/03/01 03:10:26 PM INFO:App Version: v20.132
2025/03/01 03:10:26 PM INFO:Switched to page: Sponsorships
2025/03/01 03:10:26 PM INFO:load_and_filter_data executed successfully
2025/03/01 03:10:27 PM INFO:display_summary_statistics executed successfully
2025/03/01 03:10:27 PM INFO:display_textual_insights executed successfully
2025/03/01 03:10:27 PM ERROR:Error in plot_bar_line_by_year: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
2025/03/01 03:10:27 PM ERROR:Error in display_visualizations: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 95, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
2025/03/01 03:10:27 PM ERROR:Error in display_data_page: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 95, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
2025/03/01 03:10:27 PM ERROR:Error in pagesetup: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 34, in mod_sponsorship_page
    display_data_page(filter_key="Sponsorships_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 95, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
2025/03/01 03:10:27 PM CRITICAL:Menu setup crashed: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 34, in mod_sponsorship_page
    display_data_page(filter_key="Sponsorships_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 95, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'GGroup'
2025/03/01 03:11:15 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 03:11:16 PM INFO:get_git_version executed successfully
2025/03/01 03:11:17 PM INFO:get_git_version executed successfully
2025/03/01 03:11:17 PM INFO:get_git_version executed successfully
2025/03/01 03:11:17 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:11:17 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:11:17 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:11:17 PM INFO:Setting up the package
2025/03/01 03:11:17 PM INFO:Setting up the package
2025/03/01 03:11:17 PM INFO:Setting up the package
2025/03/01 03:11:17 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:11:17 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:11:17 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:11:17 PM INFO:get_git_version executed successfully
2025/03/01 03:11:17 PM INFO:get_git_version executed successfully
2025/03/01 03:11:17 PM INFO:get_git_version executed successfully
2025/03/01 03:11:17 PM INFO:Version: v20.117
2025/03/01 03:11:17 PM INFO:Version: v20.117
2025/03/01 03:11:17 PM INFO:Version: v20.117
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:Session_state variables initialized
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:perc_target: 0.5
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:11:17 PM INFO:init_state_var executed successfully
2025/03/01 03:11:17 PM INFO:Session_state variables initialized
2025/03/01 03:11:17 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:11:17 PM INFO:Session_state variables initialized
2025/03/01 03:11:17 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:11:17 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:11:17 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:11:17 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:11:17 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:11:17 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:11:17 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:11:17 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:11:17 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:11:17 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:11:17 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:11:17 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:11:17 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:11:17 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:11:17 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:11:17 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:11:17 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:11:17 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:11:17 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:11:17 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:11:17 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:11:17 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:11:17 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:11:17 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:11:17 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:11:17 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:11:17 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:11:17 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:11:17 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:11:17 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:11:17 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:11:17 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:11:17 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:11:17 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:11:17 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:11:17 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:11:17 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:11:17 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:11:17 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:11:17 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:11:17 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:11:17 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:11:17 PM INFO:perc_target: 0.5
2025/03/01 03:11:17 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:11:17 PM INFO:perc_target: 0.5
2025/03/01 03:11:17 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:11:17 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:11:17 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:11:17 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:11:17 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:11:17 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:11:17 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:11:17 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:11:17 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:11:17 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:11:17 PM INFO:Session state Setup complete
2025/03/01 03:11:17 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:11:17 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:11:17 PM INFO:initialize_session_state executed successfully
2025/03/01 03:11:17 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:11:17 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:11:17 PM INFO:Package setup complete
2025/03/01 03:11:17 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:11:17 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:11:17 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:11:17 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:11:17 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:11:17 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:11:17 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:11:17 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:11:17 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:11:17 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:11:17 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:11:17 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:11:17 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:11:17 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:11:17 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:11:17 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:11:17 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:11:17 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:11:17 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:11:17 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:11:17 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:11:17 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:11:17 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:11:17 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:11:17 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:11:17 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:11:17 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:11:17 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:11:17 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:11:17 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:11:17 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:11:17 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:11:17 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:11:17 PM INFO:Session state Setup complete
2025/03/01 03:11:17 PM INFO:Session state Setup complete
2025/03/01 03:11:17 PM INFO:initialize_session_state executed successfully
2025/03/01 03:11:17 PM INFO:initialize_session_state executed successfully
2025/03/01 03:11:17 PM INFO:Package setup complete
2025/03/01 03:11:17 PM INFO:Package setup complete
2025/03/01 03:11:17 PM INFO:get_git_version executed successfully
2025/03/01 03:11:17 PM INFO:get_git_version executed successfully
2025/03/01 03:11:17 PM INFO:get_git_version executed successfully
2025/03/01 03:11:17 PM INFO:get_git_version executed successfully
2025/03/01 03:11:17 PM INFO:App Version: v20.132
2025/03/01 03:11:17 PM INFO:App Version: v20.132
2025/03/01 03:11:17 PM INFO:App Version: v20.132
2025/03/01 03:11:17 PM INFO:Switched to page: Sponsorships
2025/03/01 03:11:17 PM INFO:Switched to page: Bequeths
2025/03/01 03:11:17 PM INFO:Switched to page: Introduction
2025/03/01 03:11:17 PM ERROR:Error in load_and_filter_data: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:11:17 PM ERROR:Error in load_and_filter_data: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:11:17 PM INFO:pagesetup executed successfully
2025/03/01 03:11:17 PM ERROR:Error in display_data_page: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:11:17 PM ERROR:Error in display_data_page: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:11:17 PM ERROR:Error in pagesetup: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 34, in mod_sponsorship_page
    display_data_page(filter_key="Sponsorships_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:11:17 PM ERROR:Error in pagesetup: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 54, in mod_bequeths_page
    display_data_page(filter_key="Bequests_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:11:17 PM INFO:No data found in session state, running firstload()
2025/03/01 03:11:18 PM CRITICAL:Menu setup crashed: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 34, in mod_sponsorship_page
    display_data_page(filter_key="Sponsorships_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:11:18 PM CRITICAL:Menu setup crashed: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 54, in mod_bequeths_page
    display_data_page(filter_key="Bequests_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:11:19 PM INFO:map_filename: regentity_map_fname
2025/03/01 03:11:19 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:11:19 PM INFO:Dedupe by file
2025/03/01 03:11:19 PM INFO:Dedupe by file, shape: (65278, 34)
2025/03/01 03:11:19 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:11:19 PM INFO:map_filename: donor_map_fname
2025/03/01 03:11:19 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:11:19 PM INFO:Dedupe by file
2025/03/01 03:11:19 PM INFO:Dedupe by file, shape: (65278, 40)
2025/03/01 03:11:19 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:11:19 PM INFO:Data cleanup completed, shape: (65278, 40)
2025/03/01 03:11:19 PM INFO:raw_data_cleanup executed successfully
2025/03/01 03:11:21 PM INFO:load_raw_data executed successfully
2025/03/01 03:11:21 PM INFO:get_raw_data executed successfully
2025/03/01 03:11:21 PM INFO:load_data_to_session executed successfully
2025/03/01 03:11:24 PM ERROR:Missing column: 'PartyName' in loaddata_df. Available columns: Index(['ECRef', 'OriginalRegulatedEntityName', 'RegulatedEntityType', 'Value',
       'AcceptedDate', 'AccountingUnitName', 'OriginalDonorName',
       'AccountingUnitsAsCentralParty', 'IsSponsorship', 'DonorStatus',
       'RegulatedDoneeType', 'CompanyRegistrationNumber', 'Postcode',
       'DonationType', 'NatureOfDonation', 'PurposeOfVisit', 'DonationAction',
       'ReceivedDate', 'ReportedDate', 'IsReportedPrePoll',
       'ReportingPeriodName', 'IsBequest', 'IsAggregation',
       'OriginalRegulatedEntityId', 'AccountingUnitId', 'OriginalDonorId',
       'CampaigningName', 'RegisterName', 'IsIrishSource',
       'CleanedRegulatedEntityId', 'CleanedRegulatedEntityName',
       'OriginalRegulatedEntityName', 'RegulatedEntityId',
       'RegulatedEntityName', 'CleanedDonorId', 'ParentDonorName',
       'CleanedDonorName', 'DonorStatus2', 'DonorId', 'DonorName',
       'EventCount', 'YearReceived', 'MonthReceived', 'YearMonthReceived'],
      dtype='object')
2025/03/01 03:11:24 PM INFO:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/01 03:11:24 PM INFO:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/01 03:11:24 PM INFO:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 03:11:24 PM INFO:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/01 03:11:24 PM INFO:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 03:11:24 PM INFO:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/01 03:11:24 PM INFO:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/01 03:11:24 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 03:11:24 PM INFO:map_mp_to_party executed successfully
2025/03/01 03:11:24 PM INFO:Election Dates not found in session, loading now.
2025/03/01 03:11:24 PM INFO:ElectionDatesDict: {'1929': {'dissolution': datetime.date(1929, 5, 10), 'election': datetime.date(1929, 5, 30)}, '1931': {'dissolution': datetime.date(1931, 10, 7), 'election': datetime.date(1931, 10, 27)}, '1935': {'dissolution': datetime.date(1935, 10, 25), 'election': datetime.date(1935, 11, 14)}, '1945': {'dissolution': datetime.date(1945, 6, 15), 'election': datetime.date(1945, 7, 5)}, '1950': {'dissolution': datetime.date(1950, 2, 3), 'election': datetime.date(1950, 2, 23)}, '1951': {'dissolution': datetime.date(1951, 10, 5), 'election': datetime.date(1951, 10, 25)}, '1955': {'dissolution': datetime.date(1955, 5, 6), 'election': datetime.date(1955, 5, 26)}, '1959': {'dissolution': datetime.date(1959, 9, 18), 'election': datetime.date(1959, 10, 8)}, '1964': {'dissolution': datetime.date(1964, 9, 25), 'election': datetime.date(1964, 10, 15)}, '1966': {'dissolution': datetime.date(1966, 3, 10), 'election': datetime.date(1966, 3, 31)}, '1970': {'dissolution': datetime.date(1970, 5, 29), 'election': datetime.date(1970, 6, 18)}, '1974 (Feb)': {'dissolution': datetime.date(1974, 2, 8), 'election': datetime.date(1974, 2, 28)}, '1974 (Oct)': {'dissolution': datetime.date(1974, 9, 20), 'election': datetime.date(1974, 10, 10)}, '1979': {'dissolution': datetime.date(1979, 4, 7), 'election': datetime.date(1979, 5, 3)}, '1983': {'dissolution': datetime.date(1983, 5, 13), 'election': datetime.date(1983, 6, 9)}, '1987': {'dissolution': datetime.date(1987, 5, 18), 'election': datetime.date(1987, 6, 11)}, '1992': {'dissolution': datetime.date(1992, 3, 16), 'election': datetime.date(1992, 4, 9)}, '1997': {'dissolution': datetime.date(1997, 4, 8), 'election': datetime.date(1997, 5, 1)}, '2001': {'dissolution': datetime.date(2001, 5, 14), 'election': datetime.date(2001, 6, 7)}, '2005': {'dissolution': datetime.date(2005, 4, 11), 'election': datetime.date(2005, 5, 5)}, '2010': {'dissolution': datetime.date(2010, 4, 12), 'election': datetime.date(2010, 5, 6)}, '2015': {'dissolution': datetime.date(2015, 3, 30), 'election': datetime.date(2015, 5, 7)}, '2017': {'dissolution': datetime.date(2017, 5, 3), 'election': datetime.date(2017, 6, 8)}, '2019': {'dissolution': datetime.date(2019, 11, 6), 'election': datetime.date(2019, 12, 12)}}
2025/03/01 03:11:24 PM INFO:Election Dates Loaded Successfully.
2025/03/01 03:11:24 PM INFO:load_election_dates executed successfully
2025/03/01 03:11:49 PM INFO:Cleaned Data completed, shape: (78745, 58)
2025/03/01 03:11:49 PM INFO:load_cleaned_data executed successfully
2025/03/01 03:11:49 PM INFO:get_cleaned_data executed successfully
2025/03/01 03:11:49 PM INFO:load_data_to_session executed successfully
2025/03/01 03:11:49 PM INFO:load_entity_summary_data executed successfully
2025/03/01 03:11:49 PM INFO:get_party_summary_data executed successfully
2025/03/01 03:11:49 PM INFO:load_data_to_session executed successfully
2025/03/01 03:11:49 PM INFO:load_donorList_data executed successfully
2025/03/01 03:11:49 PM INFO:get_donor_data executed successfully
2025/03/01 03:11:49 PM INFO:load_data_to_session executed successfully
2025/03/01 03:11:49 PM INFO:load_regulated_entity_data executed successfully
2025/03/01 03:11:49 PM INFO:get_regentity_data executed successfully
2025/03/01 03:11:49 PM INFO:load_data_to_session executed successfully
2025/03/01 03:11:49 PM INFO:firstload executed successfully
2025/03/01 03:12:25 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:12:25 PM INFO:Setting up the package
2025/03/01 03:12:25 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:12:25 PM INFO:get_git_version executed successfully
2025/03/01 03:12:25 PM INFO:Version: v20.117
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:init_state_var executed successfully
2025/03/01 03:12:25 PM INFO:Session_state variables initialized
2025/03/01 03:12:25 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:12:25 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:12:25 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:12:25 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:12:25 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:12:25 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:12:25 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:12:25 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:12:25 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:12:25 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:12:25 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:12:25 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:12:25 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:12:25 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:12:25 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:12:25 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:12:25 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:12:25 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:12:25 PM INFO:perc_target: 0.5
2025/03/01 03:12:25 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:12:25 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:12:25 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:12:25 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:12:25 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:12:25 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:12:25 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:12:25 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:12:25 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:12:25 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:12:25 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:12:25 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:12:25 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:12:25 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:12:25 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:12:25 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:12:25 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:12:25 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:12:25 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:12:25 PM INFO:menu_selection: {'title': 'Head Line Figures', 'function': <function hlf_body at 0x00000269CED9B2E0>}
2025/03/01 03:12:25 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:12:25 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:12:25 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:12:25 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:12:25 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:12:25 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:12:25 PM INFO:Session state Setup complete
2025/03/01 03:12:25 PM INFO:initialize_session_state executed successfully
2025/03/01 03:12:25 PM INFO:Package setup complete
2025/03/01 03:12:25 PM INFO:get_git_version executed successfully
2025/03/01 03:12:25 PM INFO:App Version: v20.132
2025/03/01 03:12:25 PM INFO:Switched to page: Head Line Figures
2025/03/01 03:12:25 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:12:25 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:12:26 PM ERROR:Error in plot_bar_line_by_year: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 03:12:26 PM ERROR:Error in pagesetup: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 200, in hlf_body
    vis.plot_bar_line_by_year(filtered_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 03:12:26 PM CRITICAL:Menu setup crashed: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 200, in hlf_body
    vis.plot_bar_line_by_year(filtered_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 03:12:54 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:12:54 PM INFO:Setting up the package
2025/03/01 03:12:54 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:12:54 PM INFO:get_git_version executed successfully
2025/03/01 03:12:54 PM INFO:Version: v20.117
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:init_state_var executed successfully
2025/03/01 03:12:54 PM INFO:Session_state variables initialized
2025/03/01 03:12:54 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:12:54 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:12:54 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:12:54 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:12:54 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:12:54 PM INFO:year_slider_dons_by_year_n_entity: (2001, 2019)
2025/03/01 03:12:54 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:12:54 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:12:54 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:12:54 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:12:54 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:12:55 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:12:55 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:12:55 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:12:55 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:12:55 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:12:55 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:12:55 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:12:55 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:12:55 PM INFO:perc_target: 0.5
2025/03/01 03:12:55 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:12:55 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:12:55 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:12:55 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:12:55 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:12:55 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:12:55 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:12:55 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:12:55 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:12:55 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:12:55 PM INFO:year_slider_dons_by_year_n_type: (2001, 2019)
2025/03/01 03:12:55 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:12:55 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:12:55 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:12:55 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:12:55 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:12:55 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:12:55 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:12:55 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:12:55 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:12:55 PM INFO:menu_selection: {'title': 'Bequeths', 'function': <function mod_bequeths_page at 0x00000269CF1C1D80>}
2025/03/01 03:12:55 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:12:55 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:12:55 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:12:55 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:12:55 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:12:55 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:12:55 PM INFO:Session state Setup complete
2025/03/01 03:12:55 PM INFO:initialize_session_state executed successfully
2025/03/01 03:12:55 PM INFO:Package setup complete
2025/03/01 03:12:55 PM INFO:get_git_version executed successfully
2025/03/01 03:12:55 PM INFO:App Version: v20.132
2025/03/01 03:12:55 PM INFO:Switched to page: Bequeths
2025/03/01 03:12:55 PM INFO:load_and_filter_data executed successfully
2025/03/01 03:12:55 PM INFO:display_summary_statistics executed successfully
2025/03/01 03:12:55 PM INFO:display_textual_insights executed successfully
2025/03/01 03:12:55 PM ERROR:Error in plot_bar_line_by_year: plot_bar_line_by_year() got an unexpected keyword argument 'use_container_width'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'use_container_width'
2025/03/01 03:12:55 PM ERROR:Error in display_visualizations: plot_bar_line_by_year() got an unexpected keyword argument 'use_container_width'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 95, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'use_container_width'
2025/03/01 03:12:55 PM ERROR:Error in display_data_page: plot_bar_line_by_year() got an unexpected keyword argument 'use_container_width'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 95, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'use_container_width'
2025/03/01 03:12:55 PM ERROR:Error in pagesetup: plot_bar_line_by_year() got an unexpected keyword argument 'use_container_width'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 54, in mod_bequeths_page
    display_data_page(filter_key="Bequests_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 95, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'use_container_width'
2025/03/01 03:12:55 PM CRITICAL:Menu setup crashed: plot_bar_line_by_year() got an unexpected keyword argument 'use_container_width'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 54, in mod_bequeths_page
    display_data_page(filter_key="Bequests_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 95, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'use_container_width'
2025/03/01 03:13:22 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 03:13:23 PM INFO:get_git_version executed successfully
2025/03/01 03:13:24 PM INFO:get_git_version executed successfully
2025/03/01 03:13:24 PM INFO:get_git_version executed successfully
2025/03/01 03:13:24 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:13:24 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:13:24 PM INFO:Setting up the package
2025/03/01 03:13:24 PM INFO:Setting up the package
2025/03/01 03:13:24 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:13:24 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:13:24 PM INFO:get_git_version executed successfully
2025/03/01 03:13:24 PM INFO:get_git_version executed successfully
2025/03/01 03:13:24 PM INFO:Version: v20.117
2025/03/01 03:13:24 PM INFO:Version: v20.117
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:Session_state variables initialized
2025/03/01 03:13:24 PM INFO:init_state_var executed successfully
2025/03/01 03:13:24 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:13:24 PM INFO:Session_state variables initialized
2025/03/01 03:13:24 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:13:24 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:13:24 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:13:24 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:13:24 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:13:24 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:13:24 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:13:24 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:13:24 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:13:24 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:13:24 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:13:24 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:13:24 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:13:24 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:13:24 PM INFO:perc_target: 0.5
2025/03/01 03:13:24 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:13:24 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:13:24 PM INFO:perc_target: 0.5
2025/03/01 03:13:24 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:13:24 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:13:24 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:13:24 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:13:24 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:13:24 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:13:24 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:13:24 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:13:24 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:13:24 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:13:24 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:13:24 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:13:24 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:13:24 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:13:24 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:13:24 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:13:24 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:13:24 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:13:24 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:13:24 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:13:24 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:13:24 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:13:24 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:13:24 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:13:24 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:13:24 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:13:24 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:13:24 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:13:24 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:13:24 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:13:24 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:13:24 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:13:24 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:13:24 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:13:24 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:13:24 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:13:24 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:13:24 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:13:24 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:13:24 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:13:24 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:13:24 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:13:24 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:13:24 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:13:24 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:13:24 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:13:24 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:13:24 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:13:24 PM INFO:Session state Setup complete
2025/03/01 03:13:24 PM INFO:initialize_session_state executed successfully
2025/03/01 03:13:24 PM INFO:Package setup complete
2025/03/01 03:13:24 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:13:24 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:13:24 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:13:24 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:13:24 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:13:24 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:13:24 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:13:24 PM INFO:Session state Setup complete
2025/03/01 03:13:24 PM INFO:initialize_session_state executed successfully
2025/03/01 03:13:24 PM INFO:Package setup complete
2025/03/01 03:13:24 PM INFO:get_git_version executed successfully
2025/03/01 03:13:24 PM INFO:get_git_version executed successfully
2025/03/01 03:13:24 PM INFO:get_git_version executed successfully
2025/03/01 03:13:24 PM INFO:App Version: v20.132
2025/03/01 03:13:24 PM INFO:App Version: v20.132
2025/03/01 03:13:24 PM INFO:Switched to page: Bequeths
2025/03/01 03:13:24 PM ERROR:Error in load_and_filter_data: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:13:24 PM INFO:Switched to page: Introduction
2025/03/01 03:13:24 PM ERROR:Error in display_data_page: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:13:24 PM INFO:pagesetup executed successfully
2025/03/01 03:13:24 PM ERROR:Error in pagesetup: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 54, in mod_bequeths_page
    display_data_page(filter_key="Bequests_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:13:24 PM CRITICAL:Menu setup crashed: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 54, in mod_bequeths_page
    display_data_page(filter_key="Bequests_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:13:24 PM INFO:No data found in session state, running firstload()
2025/03/01 03:13:26 PM INFO:map_filename: regentity_map_fname
2025/03/01 03:13:26 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:13:26 PM INFO:Dedupe by file
2025/03/01 03:13:26 PM INFO:Dedupe by file, shape: (65278, 34)
2025/03/01 03:13:26 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:13:26 PM INFO:map_filename: donor_map_fname
2025/03/01 03:13:26 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:13:26 PM INFO:Dedupe by file
2025/03/01 03:13:26 PM INFO:Dedupe by file, shape: (65278, 40)
2025/03/01 03:13:26 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:13:26 PM INFO:Data cleanup completed, shape: (65278, 40)
2025/03/01 03:13:26 PM INFO:raw_data_cleanup executed successfully
2025/03/01 03:13:27 PM INFO:load_raw_data executed successfully
2025/03/01 03:13:28 PM INFO:get_raw_data executed successfully
2025/03/01 03:13:28 PM INFO:load_data_to_session executed successfully
2025/03/01 03:13:30 PM ERROR:Missing column: 'PartyName' in loaddata_df. Available columns: Index(['ECRef', 'OriginalRegulatedEntityName', 'RegulatedEntityType', 'Value',
       'AcceptedDate', 'AccountingUnitName', 'OriginalDonorName',
       'AccountingUnitsAsCentralParty', 'IsSponsorship', 'DonorStatus',
       'RegulatedDoneeType', 'CompanyRegistrationNumber', 'Postcode',
       'DonationType', 'NatureOfDonation', 'PurposeOfVisit', 'DonationAction',
       'ReceivedDate', 'ReportedDate', 'IsReportedPrePoll',
       'ReportingPeriodName', 'IsBequest', 'IsAggregation',
       'OriginalRegulatedEntityId', 'AccountingUnitId', 'OriginalDonorId',
       'CampaigningName', 'RegisterName', 'IsIrishSource',
       'CleanedRegulatedEntityId', 'CleanedRegulatedEntityName',
       'OriginalRegulatedEntityName', 'RegulatedEntityId',
       'RegulatedEntityName', 'CleanedDonorId', 'ParentDonorName',
       'CleanedDonorName', 'DonorStatus2', 'DonorId', 'DonorName',
       'EventCount', 'YearReceived', 'MonthReceived', 'YearMonthReceived'],
      dtype='object')
2025/03/01 03:13:30 PM INFO:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/01 03:13:30 PM INFO:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/01 03:13:30 PM INFO:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 03:13:30 PM INFO:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/01 03:13:31 PM INFO:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 03:13:31 PM INFO:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/01 03:13:31 PM INFO:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/01 03:13:31 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 03:13:31 PM INFO:map_mp_to_party executed successfully
2025/03/01 03:13:31 PM INFO:Election Dates not found in session, loading now.
2025/03/01 03:13:31 PM INFO:ElectionDatesDict: {'1929': {'dissolution': datetime.date(1929, 5, 10), 'election': datetime.date(1929, 5, 30)}, '1931': {'dissolution': datetime.date(1931, 10, 7), 'election': datetime.date(1931, 10, 27)}, '1935': {'dissolution': datetime.date(1935, 10, 25), 'election': datetime.date(1935, 11, 14)}, '1945': {'dissolution': datetime.date(1945, 6, 15), 'election': datetime.date(1945, 7, 5)}, '1950': {'dissolution': datetime.date(1950, 2, 3), 'election': datetime.date(1950, 2, 23)}, '1951': {'dissolution': datetime.date(1951, 10, 5), 'election': datetime.date(1951, 10, 25)}, '1955': {'dissolution': datetime.date(1955, 5, 6), 'election': datetime.date(1955, 5, 26)}, '1959': {'dissolution': datetime.date(1959, 9, 18), 'election': datetime.date(1959, 10, 8)}, '1964': {'dissolution': datetime.date(1964, 9, 25), 'election': datetime.date(1964, 10, 15)}, '1966': {'dissolution': datetime.date(1966, 3, 10), 'election': datetime.date(1966, 3, 31)}, '1970': {'dissolution': datetime.date(1970, 5, 29), 'election': datetime.date(1970, 6, 18)}, '1974 (Feb)': {'dissolution': datetime.date(1974, 2, 8), 'election': datetime.date(1974, 2, 28)}, '1974 (Oct)': {'dissolution': datetime.date(1974, 9, 20), 'election': datetime.date(1974, 10, 10)}, '1979': {'dissolution': datetime.date(1979, 4, 7), 'election': datetime.date(1979, 5, 3)}, '1983': {'dissolution': datetime.date(1983, 5, 13), 'election': datetime.date(1983, 6, 9)}, '1987': {'dissolution': datetime.date(1987, 5, 18), 'election': datetime.date(1987, 6, 11)}, '1992': {'dissolution': datetime.date(1992, 3, 16), 'election': datetime.date(1992, 4, 9)}, '1997': {'dissolution': datetime.date(1997, 4, 8), 'election': datetime.date(1997, 5, 1)}, '2001': {'dissolution': datetime.date(2001, 5, 14), 'election': datetime.date(2001, 6, 7)}, '2005': {'dissolution': datetime.date(2005, 4, 11), 'election': datetime.date(2005, 5, 5)}, '2010': {'dissolution': datetime.date(2010, 4, 12), 'election': datetime.date(2010, 5, 6)}, '2015': {'dissolution': datetime.date(2015, 3, 30), 'election': datetime.date(2015, 5, 7)}, '2017': {'dissolution': datetime.date(2017, 5, 3), 'election': datetime.date(2017, 6, 8)}, '2019': {'dissolution': datetime.date(2019, 11, 6), 'election': datetime.date(2019, 12, 12)}}
2025/03/01 03:13:31 PM INFO:Election Dates Loaded Successfully.
2025/03/01 03:13:31 PM INFO:load_election_dates executed successfully
2025/03/01 03:13:55 PM INFO:Cleaned Data completed, shape: (78745, 58)
2025/03/01 03:13:55 PM INFO:load_cleaned_data executed successfully
2025/03/01 03:13:55 PM INFO:get_cleaned_data executed successfully
2025/03/01 03:13:55 PM INFO:load_data_to_session executed successfully
2025/03/01 03:13:55 PM INFO:load_entity_summary_data executed successfully
2025/03/01 03:13:55 PM INFO:get_party_summary_data executed successfully
2025/03/01 03:13:55 PM INFO:load_data_to_session executed successfully
2025/03/01 03:13:55 PM INFO:load_donorList_data executed successfully
2025/03/01 03:13:55 PM INFO:get_donor_data executed successfully
2025/03/01 03:13:55 PM INFO:load_data_to_session executed successfully
2025/03/01 03:13:55 PM INFO:load_regulated_entity_data executed successfully
2025/03/01 03:13:55 PM INFO:get_regentity_data executed successfully
2025/03/01 03:13:55 PM INFO:load_data_to_session executed successfully
2025/03/01 03:13:55 PM INFO:firstload executed successfully
2025/03/01 03:14:05 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:14:05 PM INFO:Setting up the package
2025/03/01 03:14:05 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:14:05 PM INFO:get_git_version executed successfully
2025/03/01 03:14:05 PM INFO:Version: v20.117
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:init_state_var executed successfully
2025/03/01 03:14:05 PM INFO:Session_state variables initialized
2025/03/01 03:14:05 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:14:05 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:14:05 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:14:05 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:14:05 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:14:05 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:14:05 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:14:05 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:14:05 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:14:05 PM INFO:menu_selection: {'title': 'Head Line Figures', 'function': <function hlf_body at 0x000002307855A680>}
2025/03/01 03:14:05 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:14:05 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:14:05 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:14:05 PM INFO:perc_target: 0.5
2025/03/01 03:14:05 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:14:05 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:14:05 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:14:05 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:14:05 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:14:05 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:14:05 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:14:05 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:14:05 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:14:05 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:14:05 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:14:05 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:14:05 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:14:05 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:14:05 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:14:05 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:14:05 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:14:05 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:14:05 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:14:05 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:14:05 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:14:05 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:14:05 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:14:05 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:14:05 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:14:05 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:14:05 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:14:05 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:14:05 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:14:05 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:14:05 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:14:05 PM INFO:Session state Setup complete
2025/03/01 03:14:05 PM INFO:initialize_session_state executed successfully
2025/03/01 03:14:05 PM INFO:Package setup complete
2025/03/01 03:14:05 PM INFO:get_git_version executed successfully
2025/03/01 03:14:05 PM INFO:App Version: v20.132
2025/03/01 03:14:05 PM INFO:Switched to page: Head Line Figures
2025/03/01 03:14:06 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:14:06 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:14:06 PM ERROR:Error in plot_bar_line_by_year: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 03:14:06 PM ERROR:Error in pagesetup: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 200, in hlf_body
    vis.plot_bar_line_by_year(filtered_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 03:14:06 PM CRITICAL:Menu setup crashed: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 200, in hlf_body
    vis.plot_bar_line_by_year(filtered_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 03:14:24 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:14:24 PM INFO:Setting up the package
2025/03/01 03:14:24 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:14:24 PM INFO:get_git_version executed successfully
2025/03/01 03:14:24 PM INFO:Version: v20.117
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:init_state_var executed successfully
2025/03/01 03:14:24 PM INFO:Session_state variables initialized
2025/03/01 03:14:24 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:14:24 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:14:24 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:14:24 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:14:24 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:14:24 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:14:24 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:14:24 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:14:24 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:14:24 PM INFO:menu_selection: {'title': 'Bequeths', 'function': <function mod_bequeths_page at 0x00000230789B12D0>}
2025/03/01 03:14:24 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:14:24 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:14:24 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:14:24 PM INFO:perc_target: 0.5
2025/03/01 03:14:24 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:14:24 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:14:24 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:14:24 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:14:24 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:14:24 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:14:24 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:14:24 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:14:24 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:14:24 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:14:24 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:14:24 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:14:24 PM INFO:year_slider_dons_by_year_n_type: (2001, 2019)
2025/03/01 03:14:24 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:14:24 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:14:24 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:14:24 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:14:24 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:14:24 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:14:24 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:14:24 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:14:24 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:14:24 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:14:24 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:14:24 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:14:24 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:14:24 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:14:24 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:14:24 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:14:24 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:14:24 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:14:24 PM INFO:year_slider_dons_by_year_n_entity: (2001, 2019)
2025/03/01 03:14:24 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:14:24 PM INFO:Session state Setup complete
2025/03/01 03:14:24 PM INFO:initialize_session_state executed successfully
2025/03/01 03:14:24 PM INFO:Package setup complete
2025/03/01 03:14:24 PM INFO:get_git_version executed successfully
2025/03/01 03:14:24 PM INFO:App Version: v20.132
2025/03/01 03:14:24 PM INFO:Switched to page: Bequeths
2025/03/01 03:14:24 PM INFO:load_and_filter_data executed successfully
2025/03/01 03:14:24 PM INFO:display_summary_statistics executed successfully
2025/03/01 03:14:24 PM INFO:display_textual_insights executed successfully
2025/03/01 03:14:24 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:14:24 PM ERROR:Error in plot_bar_line_by_year: There are multiple elements with the same `key='year_slider_Value_by_entity'`. To fix this, please make sure that the `key` argument is unique for each element you create.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 108, in plot_bar_line_by_year
    selected_years = st.slider(
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\slider.py", line 504, in slider
    return self._slider(
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\slider.py", line 549, in _slider
    element_id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 126, in _register_element_id
    raise StreamlitDuplicateElementKey(user_key)
streamlit.errors.StreamlitDuplicateElementKey: There are multiple elements with the same `key='year_slider_Value_by_entity'`. To fix this, please make sure that the `key` argument is unique for each element you create.
2025/03/01 03:14:24 PM ERROR:Error in display_visualizations: There are multiple elements with the same `key='year_slider_Value_by_entity'`. To fix this, please make sure that the `key` argument is unique for each element you create.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 113, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 108, in plot_bar_line_by_year
    selected_years = st.slider(
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\slider.py", line 504, in slider
    return self._slider(
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\slider.py", line 549, in _slider
    element_id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 126, in _register_element_id
    raise StreamlitDuplicateElementKey(user_key)
streamlit.errors.StreamlitDuplicateElementKey: There are multiple elements with the same `key='year_slider_Value_by_entity'`. To fix this, please make sure that the `key` argument is unique for each element you create.
2025/03/01 03:14:24 PM ERROR:Error in display_data_page: There are multiple elements with the same `key='year_slider_Value_by_entity'`. To fix this, please make sure that the `key` argument is unique for each element you create.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 113, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 108, in plot_bar_line_by_year
    selected_years = st.slider(
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\slider.py", line 504, in slider
    return self._slider(
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\slider.py", line 549, in _slider
    element_id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 126, in _register_element_id
    raise StreamlitDuplicateElementKey(user_key)
streamlit.errors.StreamlitDuplicateElementKey: There are multiple elements with the same `key='year_slider_Value_by_entity'`. To fix this, please make sure that the `key` argument is unique for each element you create.
2025/03/01 03:14:24 PM ERROR:Error in pagesetup: There are multiple elements with the same `key='year_slider_Value_by_entity'`. To fix this, please make sure that the `key` argument is unique for each element you create.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 54, in mod_bequeths_page
    display_data_page(filter_key="Bequests_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 113, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 108, in plot_bar_line_by_year
    selected_years = st.slider(
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\slider.py", line 504, in slider
    return self._slider(
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\slider.py", line 549, in _slider
    element_id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 126, in _register_element_id
    raise StreamlitDuplicateElementKey(user_key)
streamlit.errors.StreamlitDuplicateElementKey: There are multiple elements with the same `key='year_slider_Value_by_entity'`. To fix this, please make sure that the `key` argument is unique for each element you create.
2025/03/01 03:14:24 PM CRITICAL:Menu setup crashed: There are multiple elements with the same `key='year_slider_Value_by_entity'`. To fix this, please make sure that the `key` argument is unique for each element you create.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 54, in mod_bequeths_page
    display_data_page(filter_key="Bequests_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 113, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 108, in plot_bar_line_by_year
    selected_years = st.slider(
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\slider.py", line 504, in slider
    return self._slider(
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\slider.py", line 549, in _slider
    element_id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 126, in _register_element_id
    raise StreamlitDuplicateElementKey(user_key)
streamlit.errors.StreamlitDuplicateElementKey: There are multiple elements with the same `key='year_slider_Value_by_entity'`. To fix this, please make sure that the `key` argument is unique for each element you create.
2025/03/01 03:17:03 PM INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/01 03:17:03 PM INFO:get_git_version executed successfully
2025/03/01 03:17:03 PM INFO:get_git_version executed successfully
2025/03/01 03:17:03 PM INFO:get_git_version executed successfully
2025/03/01 03:17:03 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:17:03 PM INFO:Setting up the package
2025/03/01 03:17:03 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:17:03 PM INFO:get_git_version executed successfully
2025/03/01 03:17:03 PM INFO:Version: v20.117
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:init_state_var executed successfully
2025/03/01 03:17:03 PM INFO:Session_state variables initialized
2025/03/01 03:17:03 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:17:03 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:17:03 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:17:03 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:17:03 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:17:03 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:17:03 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:17:03 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:17:03 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:17:03 PM INFO:menu_selection: {'title': 'Corporate Donations', 'function': <function mod_corporate_donations_page at 0x00000230789B1360>}
2025/03/01 03:17:03 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:17:03 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:17:03 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:17:03 PM INFO:year_slider_Value_by_entity: (2001, 2019)
2025/03/01 03:17:03 PM INFO:perc_target: 0.5
2025/03/01 03:17:03 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:17:03 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:17:03 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:17:03 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:17:03 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:17:03 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:17:03 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:17:03 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:17:03 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:17:03 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:17:03 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:17:03 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:17:03 PM INFO:year_slider_dons_by_year_n_type: (2001, 2019)
2025/03/01 03:17:03 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:17:03 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:17:03 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:17:03 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:17:03 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:17:03 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:17:03 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:17:03 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:17:04 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:17:04 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:17:04 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:17:04 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:17:04 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:17:04 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:17:04 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:17:04 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:17:04 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:17:04 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:17:04 PM INFO:year_slider_dons_by_year_n_entity: (2001, 2019)
2025/03/01 03:17:04 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:17:04 PM INFO:Session state Setup complete
2025/03/01 03:17:04 PM INFO:initialize_session_state executed successfully
2025/03/01 03:17:04 PM INFO:Package setup complete
2025/03/01 03:17:04 PM INFO:get_git_version executed successfully
2025/03/01 03:17:04 PM INFO:get_git_version executed successfully
2025/03/01 03:17:04 PM INFO:App Version: v20.132
2025/03/01 03:17:04 PM INFO:Switched to page: Corporate Donations
2025/03/01 03:17:04 PM INFO:load_and_filter_data executed successfully
2025/03/01 03:17:04 PM INFO:display_summary_statistics executed successfully
2025/03/01 03:17:04 PM INFO:display_textual_insights executed successfully
2025/03/01 03:17:04 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:17:04 PM ERROR:Error in plot_bar_line_by_year: There are multiple elements with the same `key='year_slider_Value_by_entity'`. To fix this, please make sure that the `key` argument is unique for each element you create.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 108, in plot_bar_line_by_year
    selected_years = st.slider(
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\slider.py", line 504, in slider
    return self._slider(
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\slider.py", line 549, in _slider
    element_id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 126, in _register_element_id
    raise StreamlitDuplicateElementKey(user_key)
streamlit.errors.StreamlitDuplicateElementKey: There are multiple elements with the same `key='year_slider_Value_by_entity'`. To fix this, please make sure that the `key` argument is unique for each element you create.
2025/03/01 03:17:04 PM ERROR:Error in display_visualizations: There are multiple elements with the same `key='year_slider_Value_by_entity'`. To fix this, please make sure that the `key` argument is unique for each element you create.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 113, in display_visualizations
    with right_column:
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 108, in plot_bar_line_by_year
    selected_years = st.slider(
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\slider.py", line 504, in slider
    return self._slider(
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\slider.py", line 549, in _slider
    element_id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 126, in _register_element_id
    raise StreamlitDuplicateElementKey(user_key)
streamlit.errors.StreamlitDuplicateElementKey: There are multiple elements with the same `key='year_slider_Value_by_entity'`. To fix this, please make sure that the `key` argument is unique for each element you create.
2025/03/01 03:17:04 PM ERROR:Error in display_data_page: There are multiple elements with the same `key='year_slider_Value_by_entity'`. To fix this, please make sure that the `key` argument is unique for each element you create.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 113, in display_visualizations
    with right_column:
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 108, in plot_bar_line_by_year
    selected_years = st.slider(
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\slider.py", line 504, in slider
    return self._slider(
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\slider.py", line 549, in _slider
    element_id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 126, in _register_element_id
    raise StreamlitDuplicateElementKey(user_key)
streamlit.errors.StreamlitDuplicateElementKey: There are multiple elements with the same `key='year_slider_Value_by_entity'`. To fix this, please make sure that the `key` argument is unique for each element you create.
2025/03/01 03:17:04 PM ERROR:Error in pagesetup: There are multiple elements with the same `key='year_slider_Value_by_entity'`. To fix this, please make sure that the `key` argument is unique for each element you create.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 60, in mod_corporate_donations_page
    display_data_page(filter_key="CorporateDonations_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 113, in display_visualizations
    with right_column:
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 108, in plot_bar_line_by_year
    selected_years = st.slider(
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\slider.py", line 504, in slider
    return self._slider(
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\slider.py", line 549, in _slider
    element_id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 126, in _register_element_id
    raise StreamlitDuplicateElementKey(user_key)
streamlit.errors.StreamlitDuplicateElementKey: There are multiple elements with the same `key='year_slider_Value_by_entity'`. To fix this, please make sure that the `key` argument is unique for each element you create.
2025/03/01 03:17:04 PM CRITICAL:Menu setup crashed: There are multiple elements with the same `key='year_slider_Value_by_entity'`. To fix this, please make sure that the `key` argument is unique for each element you create.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 60, in mod_corporate_donations_page
    display_data_page(filter_key="CorporateDonations_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 113, in display_visualizations
    with right_column:
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 108, in plot_bar_line_by_year
    selected_years = st.slider(
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\slider.py", line 504, in slider
    return self._slider(
  File "H:\python310\lib\site-packages\streamlit\elements\widgets\slider.py", line 549, in _slider
    element_id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 126, in _register_element_id
    raise StreamlitDuplicateElementKey(user_key)
streamlit.errors.StreamlitDuplicateElementKey: There are multiple elements with the same `key='year_slider_Value_by_entity'`. To fix this, please make sure that the `key` argument is unique for each element you create.
2025/03/01 03:17:20 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 03:17:21 PM INFO:get_git_version executed successfully
2025/03/01 03:17:22 PM INFO:get_git_version executed successfully
2025/03/01 03:17:22 PM INFO:get_git_version executed successfully
2025/03/01 03:17:22 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:17:22 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:17:22 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:17:22 PM INFO:Setting up the package
2025/03/01 03:17:22 PM INFO:Setting up the package
2025/03/01 03:17:22 PM INFO:Setting up the package
2025/03/01 03:17:22 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:17:22 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:17:22 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:17:22 PM INFO:get_git_version executed successfully
2025/03/01 03:17:22 PM INFO:get_git_version executed successfully
2025/03/01 03:17:22 PM INFO:get_git_version executed successfully
2025/03/01 03:17:22 PM INFO:Version: v20.117
2025/03/01 03:17:22 PM INFO:Version: v20.117
2025/03/01 03:17:22 PM INFO:Version: v20.117
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:Session_state variables initialized
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:perc_target: 0.5
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:Session_state variables initialized
2025/03/01 03:17:22 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:17:22 PM INFO:init_state_var executed successfully
2025/03/01 03:17:22 PM INFO:perc_target: 0.5
2025/03/01 03:17:22 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:17:22 PM INFO:Session_state variables initialized
2025/03/01 03:17:22 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:17:22 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:17:22 PM INFO:perc_target: 0.5
2025/03/01 03:17:22 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:17:22 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:17:22 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:17:22 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:17:22 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:17:22 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:17:22 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:17:22 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:17:22 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:17:22 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:17:22 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:17:22 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:17:22 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:17:22 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:17:22 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:17:22 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:17:22 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:17:22 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:17:22 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:17:22 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:17:22 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:17:22 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:17:22 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:17:22 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:17:22 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:17:22 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:17:22 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:17:22 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:17:22 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:17:22 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:17:22 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:17:22 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:17:22 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:17:22 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:17:22 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:17:22 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:17:22 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:17:22 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:17:22 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:17:22 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:17:22 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:17:22 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:17:22 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:17:22 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:17:22 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:17:22 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:17:22 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:17:22 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:17:22 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:17:22 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:17:22 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:17:22 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:17:22 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:17:22 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:17:22 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:17:22 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:17:22 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:17:22 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:17:22 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:17:22 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:17:22 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:17:22 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:17:22 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:17:22 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:17:22 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:17:22 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:17:22 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:17:22 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:17:22 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:17:22 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:17:22 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:17:22 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:17:22 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:17:22 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:17:22 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:17:22 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:17:22 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:17:22 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:17:22 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:17:22 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:17:22 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:17:22 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:17:22 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:17:22 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:17:22 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:17:22 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:17:22 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:17:22 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:17:22 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:17:22 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:17:22 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:17:22 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:17:22 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:17:22 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:17:22 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:17:22 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:17:22 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:17:22 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:17:22 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:17:22 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:17:22 PM INFO:Session state Setup complete
2025/03/01 03:17:22 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:17:22 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:17:22 PM INFO:initialize_session_state executed successfully
2025/03/01 03:17:22 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:17:22 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:17:22 PM INFO:Package setup complete
2025/03/01 03:17:22 PM INFO:Session state Setup complete
2025/03/01 03:17:22 PM INFO:Session state Setup complete
2025/03/01 03:17:22 PM INFO:initialize_session_state executed successfully
2025/03/01 03:17:22 PM INFO:initialize_session_state executed successfully
2025/03/01 03:17:22 PM INFO:Package setup complete
2025/03/01 03:17:22 PM INFO:Package setup complete
2025/03/01 03:17:22 PM INFO:get_git_version executed successfully
2025/03/01 03:17:23 PM INFO:get_git_version executed successfully
2025/03/01 03:17:23 PM INFO:get_git_version executed successfully
2025/03/01 03:17:23 PM INFO:get_git_version executed successfully
2025/03/01 03:17:23 PM INFO:App Version: v20.132
2025/03/01 03:17:23 PM INFO:App Version: v20.132
2025/03/01 03:17:23 PM INFO:App Version: v20.132
2025/03/01 03:17:23 PM INFO:Switched to page: Introduction
2025/03/01 03:17:23 PM INFO:Switched to page: Corporate Donations
2025/03/01 03:17:23 PM INFO:Switched to page: Bequeths
2025/03/01 03:17:23 PM ERROR:Error in load_and_filter_data: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:17:23 PM ERROR:Error in load_and_filter_data: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:17:23 PM INFO:pagesetup executed successfully
2025/03/01 03:17:23 PM ERROR:Error in display_data_page: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:17:23 PM ERROR:Error in display_data_page: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:17:23 PM ERROR:Error in pagesetup: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 60, in mod_corporate_donations_page
    display_data_page(filter_key="CorporateDonations_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:17:23 PM ERROR:Error in pagesetup: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 54, in mod_bequeths_page
    display_data_page(filter_key="Bequests_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:17:23 PM INFO:No data found in session state, running firstload()
2025/03/01 03:17:23 PM CRITICAL:Menu setup crashed: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 60, in mod_corporate_donations_page
    display_data_page(filter_key="CorporateDonations_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:17:23 PM CRITICAL:Menu setup crashed: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 54, in mod_bequeths_page
    display_data_page(filter_key="Bequests_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:17:24 PM INFO:map_filename: regentity_map_fname
2025/03/01 03:17:24 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:17:24 PM INFO:Dedupe by file
2025/03/01 03:17:24 PM INFO:Dedupe by file, shape: (65278, 34)
2025/03/01 03:17:24 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:17:24 PM INFO:map_filename: donor_map_fname
2025/03/01 03:17:24 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:17:24 PM INFO:Dedupe by file
2025/03/01 03:17:25 PM INFO:Dedupe by file, shape: (65278, 40)
2025/03/01 03:17:25 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:17:25 PM INFO:Data cleanup completed, shape: (65278, 40)
2025/03/01 03:17:25 PM INFO:raw_data_cleanup executed successfully
2025/03/01 03:17:26 PM INFO:load_raw_data executed successfully
2025/03/01 03:17:26 PM INFO:get_raw_data executed successfully
2025/03/01 03:17:26 PM INFO:load_data_to_session executed successfully
2025/03/01 03:17:29 PM ERROR:Missing column: 'PartyName' in loaddata_df. Available columns: Index(['ECRef', 'OriginalRegulatedEntityName', 'RegulatedEntityType', 'Value',
       'AcceptedDate', 'AccountingUnitName', 'OriginalDonorName',
       'AccountingUnitsAsCentralParty', 'IsSponsorship', 'DonorStatus',
       'RegulatedDoneeType', 'CompanyRegistrationNumber', 'Postcode',
       'DonationType', 'NatureOfDonation', 'PurposeOfVisit', 'DonationAction',
       'ReceivedDate', 'ReportedDate', 'IsReportedPrePoll',
       'ReportingPeriodName', 'IsBequest', 'IsAggregation',
       'OriginalRegulatedEntityId', 'AccountingUnitId', 'OriginalDonorId',
       'CampaigningName', 'RegisterName', 'IsIrishSource',
       'CleanedRegulatedEntityId', 'CleanedRegulatedEntityName',
       'OriginalRegulatedEntityName', 'RegulatedEntityId',
       'RegulatedEntityName', 'CleanedDonorId', 'ParentDonorName',
       'CleanedDonorName', 'DonorStatus2', 'DonorId', 'DonorName',
       'EventCount', 'YearReceived', 'MonthReceived', 'YearMonthReceived'],
      dtype='object')
2025/03/01 03:17:29 PM INFO:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/01 03:17:29 PM INFO:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/01 03:17:29 PM INFO:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 03:17:29 PM INFO:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/01 03:17:29 PM INFO:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 03:17:29 PM INFO:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/01 03:17:29 PM INFO:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/01 03:17:29 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 03:17:29 PM INFO:map_mp_to_party executed successfully
2025/03/01 03:17:29 PM INFO:Election Dates not found in session, loading now.
2025/03/01 03:17:29 PM INFO:ElectionDatesDict: {'1929': {'dissolution': datetime.date(1929, 5, 10), 'election': datetime.date(1929, 5, 30)}, '1931': {'dissolution': datetime.date(1931, 10, 7), 'election': datetime.date(1931, 10, 27)}, '1935': {'dissolution': datetime.date(1935, 10, 25), 'election': datetime.date(1935, 11, 14)}, '1945': {'dissolution': datetime.date(1945, 6, 15), 'election': datetime.date(1945, 7, 5)}, '1950': {'dissolution': datetime.date(1950, 2, 3), 'election': datetime.date(1950, 2, 23)}, '1951': {'dissolution': datetime.date(1951, 10, 5), 'election': datetime.date(1951, 10, 25)}, '1955': {'dissolution': datetime.date(1955, 5, 6), 'election': datetime.date(1955, 5, 26)}, '1959': {'dissolution': datetime.date(1959, 9, 18), 'election': datetime.date(1959, 10, 8)}, '1964': {'dissolution': datetime.date(1964, 9, 25), 'election': datetime.date(1964, 10, 15)}, '1966': {'dissolution': datetime.date(1966, 3, 10), 'election': datetime.date(1966, 3, 31)}, '1970': {'dissolution': datetime.date(1970, 5, 29), 'election': datetime.date(1970, 6, 18)}, '1974 (Feb)': {'dissolution': datetime.date(1974, 2, 8), 'election': datetime.date(1974, 2, 28)}, '1974 (Oct)': {'dissolution': datetime.date(1974, 9, 20), 'election': datetime.date(1974, 10, 10)}, '1979': {'dissolution': datetime.date(1979, 4, 7), 'election': datetime.date(1979, 5, 3)}, '1983': {'dissolution': datetime.date(1983, 5, 13), 'election': datetime.date(1983, 6, 9)}, '1987': {'dissolution': datetime.date(1987, 5, 18), 'election': datetime.date(1987, 6, 11)}, '1992': {'dissolution': datetime.date(1992, 3, 16), 'election': datetime.date(1992, 4, 9)}, '1997': {'dissolution': datetime.date(1997, 4, 8), 'election': datetime.date(1997, 5, 1)}, '2001': {'dissolution': datetime.date(2001, 5, 14), 'election': datetime.date(2001, 6, 7)}, '2005': {'dissolution': datetime.date(2005, 4, 11), 'election': datetime.date(2005, 5, 5)}, '2010': {'dissolution': datetime.date(2010, 4, 12), 'election': datetime.date(2010, 5, 6)}, '2015': {'dissolution': datetime.date(2015, 3, 30), 'election': datetime.date(2015, 5, 7)}, '2017': {'dissolution': datetime.date(2017, 5, 3), 'election': datetime.date(2017, 6, 8)}, '2019': {'dissolution': datetime.date(2019, 11, 6), 'election': datetime.date(2019, 12, 12)}}
2025/03/01 03:17:29 PM INFO:Election Dates Loaded Successfully.
2025/03/01 03:17:29 PM INFO:load_election_dates executed successfully
2025/03/01 03:17:54 PM INFO:Cleaned Data completed, shape: (78745, 58)
2025/03/01 03:17:54 PM INFO:load_cleaned_data executed successfully
2025/03/01 03:17:54 PM INFO:get_cleaned_data executed successfully
2025/03/01 03:17:54 PM INFO:load_data_to_session executed successfully
2025/03/01 03:17:54 PM INFO:load_entity_summary_data executed successfully
2025/03/01 03:17:54 PM INFO:get_party_summary_data executed successfully
2025/03/01 03:17:54 PM INFO:load_data_to_session executed successfully
2025/03/01 03:17:55 PM INFO:load_donorList_data executed successfully
2025/03/01 03:17:55 PM INFO:get_donor_data executed successfully
2025/03/01 03:17:55 PM INFO:load_data_to_session executed successfully
2025/03/01 03:17:55 PM INFO:load_regulated_entity_data executed successfully
2025/03/01 03:17:55 PM INFO:get_regentity_data executed successfully
2025/03/01 03:17:55 PM INFO:load_data_to_session executed successfully
2025/03/01 03:17:55 PM INFO:firstload executed successfully
2025/03/01 03:21:02 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 03:21:02 PM INFO:get_git_version executed successfully
2025/03/01 03:21:03 PM INFO:get_git_version executed successfully
2025/03/01 03:21:03 PM INFO:get_git_version executed successfully
2025/03/01 03:21:03 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:21:03 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:21:03 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:21:03 PM INFO:Setting up the package
2025/03/01 03:21:03 PM INFO:Setting up the package
2025/03/01 03:21:03 PM INFO:Setting up the package
2025/03/01 03:21:03 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:21:03 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:21:03 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:21:03 PM INFO:get_git_version executed successfully
2025/03/01 03:21:03 PM INFO:get_git_version executed successfully
2025/03/01 03:21:03 PM INFO:get_git_version executed successfully
2025/03/01 03:21:03 PM INFO:Version: v20.117
2025/03/01 03:21:03 PM INFO:Version: v20.117
2025/03/01 03:21:03 PM INFO:Version: v20.117
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:Session_state variables initialized
2025/03/01 03:21:03 PM INFO:init_state_var executed successfully
2025/03/01 03:21:03 PM INFO:Session_state variables initialized
2025/03/01 03:21:03 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:21:03 PM INFO:Session_state variables initialized
2025/03/01 03:21:03 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:21:03 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:21:03 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:21:03 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:21:03 PM INFO:perc_target: 0.5
2025/03/01 03:21:03 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:21:03 PM INFO:perc_target: 0.5
2025/03/01 03:21:03 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:21:03 PM INFO:perc_target: 0.5
2025/03/01 03:21:03 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:21:03 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:21:03 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:21:03 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:21:03 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:21:03 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:21:03 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:21:03 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:21:03 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:21:03 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:21:03 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:21:03 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:21:03 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:21:03 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:21:03 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:21:03 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:21:03 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:21:03 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:21:03 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:21:03 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:21:03 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:21:03 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:21:03 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:21:03 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:21:03 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:21:03 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:21:03 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:21:03 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:21:03 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:21:03 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:21:03 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:21:03 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:21:03 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:21:03 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:21:03 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:21:03 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:21:03 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:21:03 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:21:03 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:21:03 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:21:03 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:21:03 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:21:03 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:21:03 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:21:03 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:21:03 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:21:03 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:21:03 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:21:03 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:21:03 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:21:03 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:21:03 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:21:03 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:21:03 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:21:03 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:21:03 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:21:03 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:21:03 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:21:03 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:21:03 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:21:03 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:21:03 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:21:03 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:21:03 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:21:03 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:21:03 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:21:03 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:21:03 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:21:03 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:21:03 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:21:03 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:21:03 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:21:03 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:21:03 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:21:03 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:21:03 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:21:03 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:21:03 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:21:03 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:21:03 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:21:03 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:21:03 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:21:03 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:21:03 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:21:03 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:21:03 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:21:03 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:21:03 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:21:03 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:21:03 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:21:03 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:21:03 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:21:03 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:21:03 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:21:03 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:21:03 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:21:03 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:21:03 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:21:03 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:21:03 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:21:03 PM INFO:Session state Setup complete
2025/03/01 03:21:03 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:21:03 PM INFO:Session state Setup complete
2025/03/01 03:21:03 PM INFO:initialize_session_state executed successfully
2025/03/01 03:21:03 PM INFO:Session state Setup complete
2025/03/01 03:21:03 PM INFO:initialize_session_state executed successfully
2025/03/01 03:21:03 PM INFO:Package setup complete
2025/03/01 03:21:03 PM INFO:initialize_session_state executed successfully
2025/03/01 03:21:03 PM INFO:Package setup complete
2025/03/01 03:21:03 PM INFO:Package setup complete
2025/03/01 03:21:03 PM INFO:get_git_version executed successfully
2025/03/01 03:21:04 PM INFO:get_git_version executed successfully
2025/03/01 03:21:04 PM INFO:get_git_version executed successfully
2025/03/01 03:21:04 PM INFO:get_git_version executed successfully
2025/03/01 03:21:04 PM INFO:App Version: v20.132
2025/03/01 03:21:04 PM INFO:App Version: v20.132
2025/03/01 03:21:04 PM INFO:App Version: v20.132
2025/03/01 03:21:04 PM INFO:Switched to page: Corporate Donations
2025/03/01 03:21:04 PM INFO:Switched to page: Bequeths
2025/03/01 03:21:04 PM INFO:Switched to page: Introduction
2025/03/01 03:21:04 PM ERROR:Error in load_and_filter_data: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:21:04 PM ERROR:Error in load_and_filter_data: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:21:04 PM INFO:pagesetup executed successfully
2025/03/01 03:21:04 PM ERROR:Error in display_data_page: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:21:04 PM ERROR:Error in display_data_page: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:21:04 PM ERROR:Error in pagesetup: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 60, in mod_corporate_donations_page
    display_data_page(filter_key="CorporateDonations_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:21:04 PM ERROR:Error in pagesetup: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 54, in mod_bequeths_page
    display_data_page(filter_key="Bequests_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:21:04 PM INFO:No data found in session state, running firstload()
2025/03/01 03:21:04 PM CRITICAL:Menu setup crashed: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 60, in mod_corporate_donations_page
    display_data_page(filter_key="CorporateDonations_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:21:04 PM CRITICAL:Menu setup crashed: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 54, in mod_bequeths_page
    display_data_page(filter_key="Bequests_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:21:06 PM INFO:map_filename: regentity_map_fname
2025/03/01 03:21:06 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:21:06 PM INFO:Dedupe by file
2025/03/01 03:21:06 PM INFO:Dedupe by file, shape: (65278, 34)
2025/03/01 03:21:06 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:21:06 PM INFO:map_filename: donor_map_fname
2025/03/01 03:21:06 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:21:06 PM INFO:Dedupe by file
2025/03/01 03:21:06 PM INFO:Dedupe by file, shape: (65278, 40)
2025/03/01 03:21:06 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:21:06 PM INFO:Data cleanup completed, shape: (65278, 40)
2025/03/01 03:21:06 PM INFO:raw_data_cleanup executed successfully
2025/03/01 03:21:07 PM INFO:load_raw_data executed successfully
2025/03/01 03:21:07 PM INFO:get_raw_data executed successfully
2025/03/01 03:21:07 PM INFO:load_data_to_session executed successfully
2025/03/01 03:21:10 PM ERROR:Missing column: 'PartyName' in loaddata_df. Available columns: Index(['ECRef', 'OriginalRegulatedEntityName', 'RegulatedEntityType', 'Value',
       'AcceptedDate', 'AccountingUnitName', 'OriginalDonorName',
       'AccountingUnitsAsCentralParty', 'IsSponsorship', 'DonorStatus',
       'RegulatedDoneeType', 'CompanyRegistrationNumber', 'Postcode',
       'DonationType', 'NatureOfDonation', 'PurposeOfVisit', 'DonationAction',
       'ReceivedDate', 'ReportedDate', 'IsReportedPrePoll',
       'ReportingPeriodName', 'IsBequest', 'IsAggregation',
       'OriginalRegulatedEntityId', 'AccountingUnitId', 'OriginalDonorId',
       'CampaigningName', 'RegisterName', 'IsIrishSource',
       'CleanedRegulatedEntityId', 'CleanedRegulatedEntityName',
       'OriginalRegulatedEntityName', 'RegulatedEntityId',
       'RegulatedEntityName', 'CleanedDonorId', 'ParentDonorName',
       'CleanedDonorName', 'DonorStatus2', 'DonorId', 'DonorName',
       'EventCount', 'YearReceived', 'MonthReceived', 'YearMonthReceived'],
      dtype='object')
2025/03/01 03:21:10 PM INFO:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/01 03:21:10 PM INFO:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/01 03:21:10 PM INFO:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 03:21:10 PM INFO:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/01 03:21:10 PM INFO:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 03:21:10 PM INFO:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/01 03:21:10 PM INFO:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/01 03:21:10 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 03:21:10 PM INFO:map_mp_to_party executed successfully
2025/03/01 03:21:11 PM INFO:Election Dates not found in session, loading now.
2025/03/01 03:21:11 PM INFO:ElectionDatesDict: {'1929': {'dissolution': datetime.date(1929, 5, 10), 'election': datetime.date(1929, 5, 30)}, '1931': {'dissolution': datetime.date(1931, 10, 7), 'election': datetime.date(1931, 10, 27)}, '1935': {'dissolution': datetime.date(1935, 10, 25), 'election': datetime.date(1935, 11, 14)}, '1945': {'dissolution': datetime.date(1945, 6, 15), 'election': datetime.date(1945, 7, 5)}, '1950': {'dissolution': datetime.date(1950, 2, 3), 'election': datetime.date(1950, 2, 23)}, '1951': {'dissolution': datetime.date(1951, 10, 5), 'election': datetime.date(1951, 10, 25)}, '1955': {'dissolution': datetime.date(1955, 5, 6), 'election': datetime.date(1955, 5, 26)}, '1959': {'dissolution': datetime.date(1959, 9, 18), 'election': datetime.date(1959, 10, 8)}, '1964': {'dissolution': datetime.date(1964, 9, 25), 'election': datetime.date(1964, 10, 15)}, '1966': {'dissolution': datetime.date(1966, 3, 10), 'election': datetime.date(1966, 3, 31)}, '1970': {'dissolution': datetime.date(1970, 5, 29), 'election': datetime.date(1970, 6, 18)}, '1974 (Feb)': {'dissolution': datetime.date(1974, 2, 8), 'election': datetime.date(1974, 2, 28)}, '1974 (Oct)': {'dissolution': datetime.date(1974, 9, 20), 'election': datetime.date(1974, 10, 10)}, '1979': {'dissolution': datetime.date(1979, 4, 7), 'election': datetime.date(1979, 5, 3)}, '1983': {'dissolution': datetime.date(1983, 5, 13), 'election': datetime.date(1983, 6, 9)}, '1987': {'dissolution': datetime.date(1987, 5, 18), 'election': datetime.date(1987, 6, 11)}, '1992': {'dissolution': datetime.date(1992, 3, 16), 'election': datetime.date(1992, 4, 9)}, '1997': {'dissolution': datetime.date(1997, 4, 8), 'election': datetime.date(1997, 5, 1)}, '2001': {'dissolution': datetime.date(2001, 5, 14), 'election': datetime.date(2001, 6, 7)}, '2005': {'dissolution': datetime.date(2005, 4, 11), 'election': datetime.date(2005, 5, 5)}, '2010': {'dissolution': datetime.date(2010, 4, 12), 'election': datetime.date(2010, 5, 6)}, '2015': {'dissolution': datetime.date(2015, 3, 30), 'election': datetime.date(2015, 5, 7)}, '2017': {'dissolution': datetime.date(2017, 5, 3), 'election': datetime.date(2017, 6, 8)}, '2019': {'dissolution': datetime.date(2019, 11, 6), 'election': datetime.date(2019, 12, 12)}}
2025/03/01 03:21:11 PM INFO:Election Dates Loaded Successfully.
2025/03/01 03:21:11 PM INFO:load_election_dates executed successfully
2025/03/01 03:21:34 PM INFO:Cleaned Data completed, shape: (78745, 58)
2025/03/01 03:21:34 PM INFO:load_cleaned_data executed successfully
2025/03/01 03:21:34 PM INFO:get_cleaned_data executed successfully
2025/03/01 03:21:34 PM INFO:load_data_to_session executed successfully
2025/03/01 03:21:34 PM INFO:load_entity_summary_data executed successfully
2025/03/01 03:21:34 PM INFO:get_party_summary_data executed successfully
2025/03/01 03:21:34 PM INFO:load_data_to_session executed successfully
2025/03/01 03:21:35 PM INFO:load_donorList_data executed successfully
2025/03/01 03:21:35 PM INFO:get_donor_data executed successfully
2025/03/01 03:21:35 PM INFO:load_data_to_session executed successfully
2025/03/01 03:21:35 PM INFO:load_regulated_entity_data executed successfully
2025/03/01 03:21:35 PM INFO:get_regentity_data executed successfully
2025/03/01 03:21:35 PM INFO:load_data_to_session executed successfully
2025/03/01 03:21:35 PM INFO:firstload executed successfully
2025/03/01 03:21:38 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:21:38 PM INFO:Setting up the package
2025/03/01 03:21:38 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:21:38 PM INFO:get_git_version executed successfully
2025/03/01 03:21:38 PM INFO:Version: v20.117
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:init_state_var executed successfully
2025/03/01 03:21:38 PM INFO:Session_state variables initialized
2025/03/01 03:21:38 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:21:38 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:21:38 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:21:38 PM INFO:perc_target: 0.5
2025/03/01 03:21:38 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:21:38 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:21:38 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:21:38 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:21:38 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:21:38 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:21:38 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:21:38 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:21:38 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:21:38 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:21:38 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:21:38 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:21:38 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:21:38 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:21:38 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:21:38 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:21:38 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:21:38 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:21:38 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:21:38 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:21:38 PM INFO:menu_selection: {'title': 'Head Line Figures', 'function': <function hlf_body at 0x000001DF0DD3F490>}
2025/03/01 03:21:38 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:21:38 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:21:38 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:21:38 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:21:38 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:21:38 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:21:38 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:21:38 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:21:38 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:21:38 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:21:38 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:21:38 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:21:38 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:21:38 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:21:38 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:21:38 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:21:38 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:21:38 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:21:38 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:21:38 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:21:38 PM INFO:Session state Setup complete
2025/03/01 03:21:38 PM INFO:initialize_session_state executed successfully
2025/03/01 03:21:38 PM INFO:Package setup complete
2025/03/01 03:21:38 PM INFO:get_git_version executed successfully
2025/03/01 03:21:38 PM INFO:App Version: v20.132
2025/03/01 03:21:38 PM INFO:Switched to page: Head Line Figures
2025/03/01 03:21:39 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:21:39 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:21:39 PM ERROR:Error in plot_bar_line_by_year: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 03:21:39 PM ERROR:Error in pagesetup: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 200, in hlf_body
    vis.plot_bar_line_by_year(filtered_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 03:21:39 PM CRITICAL:Menu setup crashed: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 200, in hlf_body
    vis.plot_bar_line_by_year(filtered_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_bar_line_by_year() got an unexpected keyword argument 'YValue'
2025/03/01 03:27:46 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 03:27:46 PM INFO:get_git_version executed successfully
2025/03/01 03:27:47 PM INFO:get_git_version executed successfully
2025/03/01 03:27:47 PM INFO:get_git_version executed successfully
2025/03/01 03:27:47 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:27:47 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:27:47 PM INFO:Setting up the package
2025/03/01 03:27:47 PM INFO:Setting up the package
2025/03/01 03:27:47 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:27:47 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:27:47 PM INFO:get_git_version executed successfully
2025/03/01 03:27:47 PM INFO:get_git_version executed successfully
2025/03/01 03:27:47 PM INFO:Version: v20.117
2025/03/01 03:27:47 PM INFO:Version: v20.117
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:init_state_var executed successfully
2025/03/01 03:27:47 PM INFO:Session_state variables initialized
2025/03/01 03:27:47 PM INFO:Session_state variables initialized
2025/03/01 03:27:47 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:27:47 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:27:47 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:27:47 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:27:47 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:27:47 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:27:47 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:27:47 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:27:47 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:27:47 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:27:47 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:27:47 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:27:47 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:27:47 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:27:47 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:27:47 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:27:47 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:27:47 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:27:47 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:27:47 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:27:47 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:27:47 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:27:47 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:27:47 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:27:47 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:27:47 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:27:47 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:27:47 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:27:47 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:27:47 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:27:47 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:27:47 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:27:47 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:27:47 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:27:47 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:27:47 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:27:47 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:27:47 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:27:47 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:27:47 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:27:47 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:27:47 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:27:47 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:27:47 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:27:47 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:27:47 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:27:47 PM INFO:perc_target: 0.5
2025/03/01 03:27:47 PM INFO:perc_target: 0.5
2025/03/01 03:27:47 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:27:47 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:27:47 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:27:47 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:27:47 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:27:47 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:27:47 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:27:47 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:27:47 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:27:47 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:27:47 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:27:47 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:27:47 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:27:47 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:27:47 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:27:47 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:27:47 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:27:47 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:27:47 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:27:47 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:27:47 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:27:47 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:27:47 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:27:47 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:27:47 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:27:47 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:27:47 PM INFO:Session state Setup complete
2025/03/01 03:27:47 PM INFO:Session state Setup complete
2025/03/01 03:27:47 PM INFO:initialize_session_state executed successfully
2025/03/01 03:27:47 PM INFO:initialize_session_state executed successfully
2025/03/01 03:27:47 PM INFO:Package setup complete
2025/03/01 03:27:47 PM INFO:Package setup complete
2025/03/01 03:27:48 PM INFO:get_git_version executed successfully
2025/03/01 03:27:48 PM ERROR:Error in pagesetup: non-default argument follows default argument (Visualisations.py, line 39)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 2, in <module>
    import components.Visualisations as vis
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 39
    wideget_key):
    ^^^^^^^^^^^
SyntaxError: non-default argument follows default argument
2025/03/01 03:27:48 PM ERROR:Error in pagesetup: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
ImportError: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py)
2025/03/01 03:27:48 PM CRITICAL:Menu setup crashed: non-default argument follows default argument (Visualisations.py, line 39)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 2, in <module>
    import components.Visualisations as vis
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 39
    wideget_key):
    ^^^^^^^^^^^
SyntaxError: non-default argument follows default argument
2025/03/01 03:27:48 PM CRITICAL:Menu setup crashed: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
ImportError: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py)
2025/03/01 03:28:24 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 03:28:25 PM INFO:get_git_version executed successfully
2025/03/01 03:28:25 PM INFO:get_git_version executed successfully
2025/03/01 03:28:25 PM INFO:get_git_version executed successfully
2025/03/01 03:28:26 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:28:26 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:28:26 PM INFO:Setting up the package
2025/03/01 03:28:26 PM INFO:Setting up the package
2025/03/01 03:28:26 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:28:26 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:28:26 PM INFO:get_git_version executed successfully
2025/03/01 03:28:26 PM INFO:get_git_version executed successfully
2025/03/01 03:28:26 PM INFO:Version: v20.117
2025/03/01 03:28:26 PM INFO:Version: v20.117
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:Session_state variables initialized
2025/03/01 03:28:26 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:28:26 PM INFO:init_state_var executed successfully
2025/03/01 03:28:26 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:28:26 PM INFO:Session_state variables initialized
2025/03/01 03:28:26 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:28:26 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:28:26 PM INFO:perc_target: 0.5
2025/03/01 03:28:26 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:28:26 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:28:26 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:28:26 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:28:26 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:28:26 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:28:26 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:28:26 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:28:26 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:28:26 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:28:26 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:28:26 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:28:26 PM INFO:perc_target: 0.5
2025/03/01 03:28:26 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:28:26 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:28:26 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:28:26 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:28:26 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:28:26 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:28:26 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:28:26 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:28:26 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:28:26 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:28:26 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:28:26 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:28:26 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:28:26 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:28:26 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:28:26 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:28:26 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:28:26 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:28:26 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:28:26 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:28:26 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:28:26 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:28:26 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:28:26 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:28:26 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:28:26 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:28:26 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:28:26 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:28:26 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:28:26 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:28:26 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:28:26 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:28:26 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:28:26 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:28:26 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:28:26 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:28:26 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:28:26 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:28:26 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:28:26 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:28:26 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:28:26 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:28:26 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:28:26 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:28:26 PM INFO:Session state Setup complete
2025/03/01 03:28:26 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:28:26 PM INFO:initialize_session_state executed successfully
2025/03/01 03:28:26 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:28:26 PM INFO:Package setup complete
2025/03/01 03:28:26 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:28:26 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:28:26 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:28:26 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:28:26 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:28:26 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:28:26 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:28:26 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:28:26 PM INFO:Session state Setup complete
2025/03/01 03:28:26 PM INFO:initialize_session_state executed successfully
2025/03/01 03:28:26 PM INFO:Package setup complete
2025/03/01 03:28:26 PM INFO:get_git_version executed successfully
2025/03/01 03:28:26 PM ERROR:Error in pagesetup: non-default argument follows default argument (Visualisations.py, line 39)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 2, in <module>
    import components.Visualisations as vis
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 39
    widget_key):
    ^^^^^^^^^^
SyntaxError: non-default argument follows default argument
2025/03/01 03:28:26 PM ERROR:Error in pagesetup: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
ImportError: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py)
2025/03/01 03:28:26 PM CRITICAL:Menu setup crashed: non-default argument follows default argument (Visualisations.py, line 39)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 2, in <module>
    import components.Visualisations as vis
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 39
    widget_key):
    ^^^^^^^^^^
SyntaxError: non-default argument follows default argument
2025/03/01 03:28:26 PM CRITICAL:Menu setup crashed: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py)
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 9, in pagesetup
    from app_pages.headlinefigures import hlf_body
ImportError: cannot import name 'hlf_body' from 'app_pages.headlinefigures' (H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py)
2025/03/01 03:30:31 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 03:30:31 PM INFO:get_git_version executed successfully
2025/03/01 03:30:32 PM INFO:get_git_version executed successfully
2025/03/01 03:30:32 PM INFO:get_git_version executed successfully
2025/03/01 03:30:32 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:30:32 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:30:32 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:30:32 PM INFO:Setting up the package
2025/03/01 03:30:32 PM INFO:Setting up the package
2025/03/01 03:30:32 PM INFO:Setting up the package
2025/03/01 03:30:32 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:30:32 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:30:32 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:30:32 PM INFO:get_git_version executed successfully
2025/03/01 03:30:32 PM INFO:get_git_version executed successfully
2025/03/01 03:30:32 PM INFO:Version: v20.117
2025/03/01 03:30:32 PM INFO:Version: v20.117
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:Session_state variables initialized
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:30:32 PM INFO:init_state_var executed successfully
2025/03/01 03:30:32 PM INFO:perc_target: 0.5
2025/03/01 03:30:32 PM INFO:Session_state variables initialized
2025/03/01 03:30:32 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:30:32 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:30:32 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:30:32 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:30:32 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:30:32 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:30:32 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:30:32 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:30:32 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:30:32 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:30:32 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:30:32 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:30:32 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:30:32 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:30:32 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:30:32 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:30:32 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:30:32 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:30:32 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:30:32 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:30:32 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:30:32 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:30:32 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:30:32 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:30:32 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:30:32 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:30:32 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:30:32 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:30:32 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:30:32 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:30:32 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:30:32 PM INFO:perc_target: 0.5
2025/03/01 03:30:32 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:30:32 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:30:32 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:30:32 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:30:32 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:30:32 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:30:32 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:30:32 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:30:32 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:30:32 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:30:32 PM INFO:Session state Setup complete
2025/03/01 03:30:32 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:30:32 PM INFO:initialize_session_state executed successfully
2025/03/01 03:30:32 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:30:32 PM INFO:Package setup complete
2025/03/01 03:30:32 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:30:32 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:30:32 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:30:32 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:30:32 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:30:32 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:30:32 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:30:32 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:30:32 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:30:32 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:30:32 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:30:32 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:30:32 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:30:32 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:30:32 PM INFO:Session state Setup complete
2025/03/01 03:30:32 PM INFO:initialize_session_state executed successfully
2025/03/01 03:30:32 PM INFO:Package setup complete
2025/03/01 03:30:32 PM INFO:get_git_version executed successfully
2025/03/01 03:30:33 PM INFO:get_git_version executed successfully
2025/03/01 03:30:33 PM INFO:get_git_version executed successfully
2025/03/01 03:30:33 PM INFO:App Version: v20.132
2025/03/01 03:30:33 PM INFO:App Version: v20.132
2025/03/01 03:30:33 PM INFO:Switched to page: Introduction
2025/03/01 03:30:33 PM INFO:Switched to page: Introduction
2025/03/01 03:30:33 PM INFO:pagesetup executed successfully
2025/03/01 03:30:33 PM INFO:pagesetup executed successfully
2025/03/01 03:30:33 PM INFO:No data found in session state, running firstload()
2025/03/01 03:30:33 PM INFO:No data found in session state, running firstload()
2025/03/01 03:30:34 PM INFO:map_filename: regentity_map_fname
2025/03/01 03:30:34 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:30:34 PM INFO:Dedupe by file
2025/03/01 03:30:34 PM INFO:Dedupe by file, shape: (65278, 34)
2025/03/01 03:30:34 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:30:34 PM INFO:map_filename: donor_map_fname
2025/03/01 03:30:34 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:30:34 PM INFO:Dedupe by file
2025/03/01 03:30:34 PM INFO:Dedupe by file, shape: (65278, 40)
2025/03/01 03:30:34 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:30:34 PM INFO:Data cleanup completed, shape: (65278, 40)
2025/03/01 03:30:34 PM INFO:raw_data_cleanup executed successfully
2025/03/01 03:30:36 PM INFO:load_raw_data executed successfully
2025/03/01 03:30:36 PM INFO:get_raw_data executed successfully
2025/03/01 03:30:36 PM INFO:load_data_to_session executed successfully
2025/03/01 03:30:38 PM ERROR:Missing column: 'PartyName' in loaddata_df. Available columns: Index(['ECRef', 'OriginalRegulatedEntityName', 'RegulatedEntityType', 'Value',
       'AcceptedDate', 'AccountingUnitName', 'OriginalDonorName',
       'AccountingUnitsAsCentralParty', 'IsSponsorship', 'DonorStatus',
       'RegulatedDoneeType', 'CompanyRegistrationNumber', 'Postcode',
       'DonationType', 'NatureOfDonation', 'PurposeOfVisit', 'DonationAction',
       'ReceivedDate', 'ReportedDate', 'IsReportedPrePoll',
       'ReportingPeriodName', 'IsBequest', 'IsAggregation',
       'OriginalRegulatedEntityId', 'AccountingUnitId', 'OriginalDonorId',
       'CampaigningName', 'RegisterName', 'IsIrishSource',
       'CleanedRegulatedEntityId', 'CleanedRegulatedEntityName',
       'OriginalRegulatedEntityName', 'RegulatedEntityId',
       'RegulatedEntityName', 'CleanedDonorId', 'ParentDonorName',
       'CleanedDonorName', 'DonorStatus2', 'DonorId', 'DonorName',
       'EventCount', 'YearReceived', 'MonthReceived', 'YearMonthReceived'],
      dtype='object')
2025/03/01 03:30:38 PM INFO:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/01 03:30:38 PM INFO:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/01 03:30:38 PM INFO:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 03:30:39 PM INFO:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/01 03:30:39 PM INFO:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 03:30:39 PM INFO:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/01 03:30:39 PM INFO:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/01 03:30:39 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 03:30:39 PM INFO:map_mp_to_party executed successfully
2025/03/01 03:30:39 PM INFO:Election Dates not found in session, loading now.
2025/03/01 03:30:39 PM INFO:ElectionDatesDict: {'1929': {'dissolution': datetime.date(1929, 5, 10), 'election': datetime.date(1929, 5, 30)}, '1931': {'dissolution': datetime.date(1931, 10, 7), 'election': datetime.date(1931, 10, 27)}, '1935': {'dissolution': datetime.date(1935, 10, 25), 'election': datetime.date(1935, 11, 14)}, '1945': {'dissolution': datetime.date(1945, 6, 15), 'election': datetime.date(1945, 7, 5)}, '1950': {'dissolution': datetime.date(1950, 2, 3), 'election': datetime.date(1950, 2, 23)}, '1951': {'dissolution': datetime.date(1951, 10, 5), 'election': datetime.date(1951, 10, 25)}, '1955': {'dissolution': datetime.date(1955, 5, 6), 'election': datetime.date(1955, 5, 26)}, '1959': {'dissolution': datetime.date(1959, 9, 18), 'election': datetime.date(1959, 10, 8)}, '1964': {'dissolution': datetime.date(1964, 9, 25), 'election': datetime.date(1964, 10, 15)}, '1966': {'dissolution': datetime.date(1966, 3, 10), 'election': datetime.date(1966, 3, 31)}, '1970': {'dissolution': datetime.date(1970, 5, 29), 'election': datetime.date(1970, 6, 18)}, '1974 (Feb)': {'dissolution': datetime.date(1974, 2, 8), 'election': datetime.date(1974, 2, 28)}, '1974 (Oct)': {'dissolution': datetime.date(1974, 9, 20), 'election': datetime.date(1974, 10, 10)}, '1979': {'dissolution': datetime.date(1979, 4, 7), 'election': datetime.date(1979, 5, 3)}, '1983': {'dissolution': datetime.date(1983, 5, 13), 'election': datetime.date(1983, 6, 9)}, '1987': {'dissolution': datetime.date(1987, 5, 18), 'election': datetime.date(1987, 6, 11)}, '1992': {'dissolution': datetime.date(1992, 3, 16), 'election': datetime.date(1992, 4, 9)}, '1997': {'dissolution': datetime.date(1997, 4, 8), 'election': datetime.date(1997, 5, 1)}, '2001': {'dissolution': datetime.date(2001, 5, 14), 'election': datetime.date(2001, 6, 7)}, '2005': {'dissolution': datetime.date(2005, 4, 11), 'election': datetime.date(2005, 5, 5)}, '2010': {'dissolution': datetime.date(2010, 4, 12), 'election': datetime.date(2010, 5, 6)}, '2015': {'dissolution': datetime.date(2015, 3, 30), 'election': datetime.date(2015, 5, 7)}, '2017': {'dissolution': datetime.date(2017, 5, 3), 'election': datetime.date(2017, 6, 8)}, '2019': {'dissolution': datetime.date(2019, 11, 6), 'election': datetime.date(2019, 12, 12)}}
2025/03/01 03:30:39 PM INFO:Election Dates Loaded Successfully.
2025/03/01 03:30:39 PM INFO:load_election_dates executed successfully
2025/03/01 03:31:06 PM INFO:Cleaned Data completed, shape: (78745, 58)
2025/03/01 03:31:06 PM INFO:load_cleaned_data executed successfully
2025/03/01 03:31:07 PM INFO:get_cleaned_data executed successfully
2025/03/01 03:31:07 PM INFO:load_data_to_session executed successfully
2025/03/01 03:31:07 PM INFO:load_entity_summary_data executed successfully
2025/03/01 03:31:07 PM INFO:get_party_summary_data executed successfully
2025/03/01 03:31:07 PM INFO:load_data_to_session executed successfully
2025/03/01 03:31:07 PM INFO:load_donorList_data executed successfully
2025/03/01 03:31:07 PM INFO:get_donor_data executed successfully
2025/03/01 03:31:07 PM INFO:load_data_to_session executed successfully
2025/03/01 03:31:07 PM INFO:load_regulated_entity_data executed successfully
2025/03/01 03:31:07 PM INFO:get_regentity_data executed successfully
2025/03/01 03:31:07 PM INFO:load_data_to_session executed successfully
2025/03/01 03:31:07 PM INFO:firstload executed successfully
2025/03/01 03:31:47 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:31:47 PM INFO:Setting up the package
2025/03/01 03:31:47 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:31:47 PM INFO:get_git_version executed successfully
2025/03/01 03:31:47 PM INFO:Version: v20.117
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:init_state_var executed successfully
2025/03/01 03:31:47 PM INFO:Session_state variables initialized
2025/03/01 03:31:47 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:31:47 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:31:47 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:31:47 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:31:47 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:31:47 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:31:47 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:31:47 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:31:47 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:31:47 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:31:47 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:31:47 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:31:47 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:31:47 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:31:47 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:31:47 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:31:47 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:31:47 PM INFO:perc_target: 0.5
2025/03/01 03:31:47 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:31:47 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:31:47 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:31:47 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:31:47 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:31:47 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:31:47 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:31:47 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:31:47 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:31:47 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:31:47 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:31:47 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:31:47 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:31:47 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:31:47 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:31:47 PM INFO:menu_selection: {'title': 'Head Line Figures', 'function': <function hlf_body at 0x000001BC5C73AA70>}
2025/03/01 03:31:47 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:31:47 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:31:47 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:31:47 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:31:47 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:31:47 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:31:47 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:31:47 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:31:47 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:31:47 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:31:47 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:31:47 PM INFO:Session state Setup complete
2025/03/01 03:31:47 PM INFO:initialize_session_state executed successfully
2025/03/01 03:31:47 PM INFO:Package setup complete
2025/03/01 03:31:47 PM INFO:get_git_version executed successfully
2025/03/01 03:31:47 PM INFO:App Version: v20.132
2025/03/01 03:31:47 PM INFO:Switched to page: Head Line Figures
2025/03/01 03:31:48 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:31:48 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:31:48 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:31:48 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:31:48 PM ERROR:Error in plot_pie_chart: plot_pie_chart() got an unexpected keyword argument 'graoh_df'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_pie_chart() got an unexpected keyword argument 'graoh_df'
2025/03/01 03:31:48 PM ERROR:Error in pagesetup: plot_pie_chart() got an unexpected keyword argument 'graoh_df'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 236, in hlf_body
    vis.plot_pie_chart(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_pie_chart() got an unexpected keyword argument 'graoh_df'
2025/03/01 03:31:48 PM CRITICAL:Menu setup crashed: plot_pie_chart() got an unexpected keyword argument 'graoh_df'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 236, in hlf_body
    vis.plot_pie_chart(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_pie_chart() got an unexpected keyword argument 'graoh_df'
2025/03/01 03:32:11 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 03:32:12 PM INFO:get_git_version executed successfully
2025/03/01 03:32:12 PM INFO:get_git_version executed successfully
2025/03/01 03:32:13 PM INFO:get_git_version executed successfully
2025/03/01 03:32:13 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:32:13 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:32:13 PM INFO:Setting up the package
2025/03/01 03:32:13 PM INFO:Setting up the package
2025/03/01 03:32:13 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:32:13 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:32:13 PM INFO:get_git_version executed successfully
2025/03/01 03:32:13 PM INFO:get_git_version executed successfully
2025/03/01 03:32:13 PM INFO:Version: v20.117
2025/03/01 03:32:13 PM INFO:Version: v20.117
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:init_state_var executed successfully
2025/03/01 03:32:13 PM INFO:Session_state variables initialized
2025/03/01 03:32:13 PM INFO:Session_state variables initialized
2025/03/01 03:32:13 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:32:13 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:32:13 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:32:13 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:32:13 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:32:13 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:32:13 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:32:13 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:32:13 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:32:13 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:32:13 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:32:13 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:32:13 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:32:13 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:32:13 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:32:13 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:32:13 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:32:13 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:32:13 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:32:13 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:32:13 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:32:13 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:32:13 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:32:13 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:32:13 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:32:13 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:32:13 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:32:13 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:32:13 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:32:13 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:32:13 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:32:13 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:32:13 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:32:13 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:32:13 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:32:13 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:32:13 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:32:13 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:32:13 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:32:13 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:32:13 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:32:13 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:32:13 PM INFO:perc_target: 0.5
2025/03/01 03:32:13 PM INFO:perc_target: 0.5
2025/03/01 03:32:13 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:32:13 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:32:13 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:32:13 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:32:13 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:32:13 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:32:13 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:32:13 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:32:13 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:32:13 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:32:13 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:32:13 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:32:13 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:32:13 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:32:13 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:32:13 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:32:13 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:32:13 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:32:13 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:32:13 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:32:13 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:32:13 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:32:13 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:32:13 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:32:13 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:32:13 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:32:13 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:32:13 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:32:13 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:32:13 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:32:13 PM INFO:Session state Setup complete
2025/03/01 03:32:13 PM INFO:Session state Setup complete
2025/03/01 03:32:13 PM INFO:initialize_session_state executed successfully
2025/03/01 03:32:13 PM INFO:initialize_session_state executed successfully
2025/03/01 03:32:13 PM INFO:Package setup complete
2025/03/01 03:32:13 PM INFO:Package setup complete
2025/03/01 03:32:13 PM INFO:get_git_version executed successfully
2025/03/01 03:32:13 PM INFO:get_git_version executed successfully
2025/03/01 03:32:13 PM INFO:get_git_version executed successfully
2025/03/01 03:32:13 PM INFO:App Version: v20.132
2025/03/01 03:32:13 PM INFO:App Version: v20.132
2025/03/01 03:32:13 PM INFO:Switched to page: Head Line Figures
2025/03/01 03:32:13 PM INFO:Switched to page: Introduction
2025/03/01 03:32:13 PM ERROR:Error in pagesetup: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 30, in hlf_body
    unique_donors = get_donors_ct(filtered_df)
  File "H:\VScode\dashboard_demo-1\components\calculations.py", line 97, in get_donors_ct
    return df["DonorId"].nunique()
TypeError: 'NoneType' object is not subscriptable
2025/03/01 03:32:13 PM INFO:pagesetup executed successfully
2025/03/01 03:32:13 PM CRITICAL:Menu setup crashed: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 30, in hlf_body
    unique_donors = get_donors_ct(filtered_df)
  File "H:\VScode\dashboard_demo-1\components\calculations.py", line 97, in get_donors_ct
    return df["DonorId"].nunique()
TypeError: 'NoneType' object is not subscriptable
2025/03/01 03:32:13 PM INFO:No data found in session state, running firstload()
2025/03/01 03:32:15 PM INFO:map_filename: regentity_map_fname
2025/03/01 03:32:15 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:32:15 PM INFO:Dedupe by file
2025/03/01 03:32:15 PM INFO:Dedupe by file, shape: (65278, 34)
2025/03/01 03:32:15 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:32:15 PM INFO:map_filename: donor_map_fname
2025/03/01 03:32:15 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:32:15 PM INFO:Dedupe by file
2025/03/01 03:32:15 PM INFO:Dedupe by file, shape: (65278, 40)
2025/03/01 03:32:15 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:32:15 PM INFO:Data cleanup completed, shape: (65278, 40)
2025/03/01 03:32:15 PM INFO:raw_data_cleanup executed successfully
2025/03/01 03:32:16 PM INFO:load_raw_data executed successfully
2025/03/01 03:32:17 PM INFO:get_raw_data executed successfully
2025/03/01 03:32:17 PM INFO:load_data_to_session executed successfully
2025/03/01 03:32:19 PM ERROR:Missing column: 'PartyName' in loaddata_df. Available columns: Index(['ECRef', 'OriginalRegulatedEntityName', 'RegulatedEntityType', 'Value',
       'AcceptedDate', 'AccountingUnitName', 'OriginalDonorName',
       'AccountingUnitsAsCentralParty', 'IsSponsorship', 'DonorStatus',
       'RegulatedDoneeType', 'CompanyRegistrationNumber', 'Postcode',
       'DonationType', 'NatureOfDonation', 'PurposeOfVisit', 'DonationAction',
       'ReceivedDate', 'ReportedDate', 'IsReportedPrePoll',
       'ReportingPeriodName', 'IsBequest', 'IsAggregation',
       'OriginalRegulatedEntityId', 'AccountingUnitId', 'OriginalDonorId',
       'CampaigningName', 'RegisterName', 'IsIrishSource',
       'CleanedRegulatedEntityId', 'CleanedRegulatedEntityName',
       'OriginalRegulatedEntityName', 'RegulatedEntityId',
       'RegulatedEntityName', 'CleanedDonorId', 'ParentDonorName',
       'CleanedDonorName', 'DonorStatus2', 'DonorId', 'DonorName',
       'EventCount', 'YearReceived', 'MonthReceived', 'YearMonthReceived'],
      dtype='object')
2025/03/01 03:32:19 PM INFO:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/01 03:32:19 PM INFO:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/01 03:32:19 PM INFO:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 03:32:20 PM INFO:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/01 03:32:20 PM INFO:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 03:32:20 PM INFO:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/01 03:32:20 PM INFO:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/01 03:32:20 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 03:32:20 PM INFO:map_mp_to_party executed successfully
2025/03/01 03:32:20 PM INFO:Election Dates not found in session, loading now.
2025/03/01 03:32:20 PM INFO:ElectionDatesDict: {'1929': {'dissolution': datetime.date(1929, 5, 10), 'election': datetime.date(1929, 5, 30)}, '1931': {'dissolution': datetime.date(1931, 10, 7), 'election': datetime.date(1931, 10, 27)}, '1935': {'dissolution': datetime.date(1935, 10, 25), 'election': datetime.date(1935, 11, 14)}, '1945': {'dissolution': datetime.date(1945, 6, 15), 'election': datetime.date(1945, 7, 5)}, '1950': {'dissolution': datetime.date(1950, 2, 3), 'election': datetime.date(1950, 2, 23)}, '1951': {'dissolution': datetime.date(1951, 10, 5), 'election': datetime.date(1951, 10, 25)}, '1955': {'dissolution': datetime.date(1955, 5, 6), 'election': datetime.date(1955, 5, 26)}, '1959': {'dissolution': datetime.date(1959, 9, 18), 'election': datetime.date(1959, 10, 8)}, '1964': {'dissolution': datetime.date(1964, 9, 25), 'election': datetime.date(1964, 10, 15)}, '1966': {'dissolution': datetime.date(1966, 3, 10), 'election': datetime.date(1966, 3, 31)}, '1970': {'dissolution': datetime.date(1970, 5, 29), 'election': datetime.date(1970, 6, 18)}, '1974 (Feb)': {'dissolution': datetime.date(1974, 2, 8), 'election': datetime.date(1974, 2, 28)}, '1974 (Oct)': {'dissolution': datetime.date(1974, 9, 20), 'election': datetime.date(1974, 10, 10)}, '1979': {'dissolution': datetime.date(1979, 4, 7), 'election': datetime.date(1979, 5, 3)}, '1983': {'dissolution': datetime.date(1983, 5, 13), 'election': datetime.date(1983, 6, 9)}, '1987': {'dissolution': datetime.date(1987, 5, 18), 'election': datetime.date(1987, 6, 11)}, '1992': {'dissolution': datetime.date(1992, 3, 16), 'election': datetime.date(1992, 4, 9)}, '1997': {'dissolution': datetime.date(1997, 4, 8), 'election': datetime.date(1997, 5, 1)}, '2001': {'dissolution': datetime.date(2001, 5, 14), 'election': datetime.date(2001, 6, 7)}, '2005': {'dissolution': datetime.date(2005, 4, 11), 'election': datetime.date(2005, 5, 5)}, '2010': {'dissolution': datetime.date(2010, 4, 12), 'election': datetime.date(2010, 5, 6)}, '2015': {'dissolution': datetime.date(2015, 3, 30), 'election': datetime.date(2015, 5, 7)}, '2017': {'dissolution': datetime.date(2017, 5, 3), 'election': datetime.date(2017, 6, 8)}, '2019': {'dissolution': datetime.date(2019, 11, 6), 'election': datetime.date(2019, 12, 12)}}
2025/03/01 03:32:20 PM INFO:Election Dates Loaded Successfully.
2025/03/01 03:32:20 PM INFO:load_election_dates executed successfully
2025/03/01 03:32:44 PM INFO:Cleaned Data completed, shape: (78745, 58)
2025/03/01 03:32:44 PM INFO:load_cleaned_data executed successfully
2025/03/01 03:32:44 PM INFO:get_cleaned_data executed successfully
2025/03/01 03:32:44 PM INFO:load_data_to_session executed successfully
2025/03/01 03:32:44 PM INFO:load_entity_summary_data executed successfully
2025/03/01 03:32:44 PM INFO:get_party_summary_data executed successfully
2025/03/01 03:32:44 PM INFO:load_data_to_session executed successfully
2025/03/01 03:32:44 PM INFO:load_donorList_data executed successfully
2025/03/01 03:32:44 PM INFO:get_donor_data executed successfully
2025/03/01 03:32:44 PM INFO:load_data_to_session executed successfully
2025/03/01 03:32:44 PM INFO:load_regulated_entity_data executed successfully
2025/03/01 03:32:44 PM INFO:get_regentity_data executed successfully
2025/03/01 03:32:44 PM INFO:load_data_to_session executed successfully
2025/03/01 03:32:44 PM INFO:firstload executed successfully
2025/03/01 03:33:17 PM INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/01 03:33:17 PM INFO:get_git_version executed successfully
2025/03/01 03:33:17 PM INFO:get_git_version executed successfully
2025/03/01 03:33:17 PM INFO:get_git_version executed successfully
2025/03/01 03:33:17 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:33:17 PM INFO:Setting up the package
2025/03/01 03:33:17 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:33:17 PM INFO:get_git_version executed successfully
2025/03/01 03:33:17 PM INFO:Version: v20.117
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:init_state_var executed successfully
2025/03/01 03:33:17 PM INFO:Session_state variables initialized
2025/03/01 03:33:17 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:33:17 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:33:17 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:33:17 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:33:17 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:33:17 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:33:17 PM INFO:menu_selection: {'title': 'Head Line Figures', 'function': <function hlf_body at 0x0000013CBCE26A70>}
2025/03/01 03:33:17 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:33:17 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:33:17 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:33:17 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:33:17 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:33:17 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:33:17 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:33:17 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:33:17 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:33:17 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:33:17 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:33:17 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:33:17 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:33:17 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:33:17 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:33:17 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:33:17 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:33:17 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:33:17 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:33:17 PM INFO:perc_target: 0.5
2025/03/01 03:33:17 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:33:17 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:33:17 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:33:17 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:33:17 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:33:17 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:33:17 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:33:17 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:33:17 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:33:17 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:33:17 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:33:17 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:33:17 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:33:17 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:33:17 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:33:17 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:33:17 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:33:17 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:33:17 PM INFO:Session state Setup complete
2025/03/01 03:33:17 PM INFO:initialize_session_state executed successfully
2025/03/01 03:33:17 PM INFO:Package setup complete
2025/03/01 03:33:17 PM INFO:get_git_version executed successfully
2025/03/01 03:33:17 PM INFO:get_git_version executed successfully
2025/03/01 03:33:17 PM INFO:App Version: v20.132
2025/03/01 03:33:17 PM INFO:Switched to page: Head Line Figures
2025/03/01 03:33:18 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:33:18 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:33:18 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:33:18 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:33:18 PM ERROR:Error in plot_pie_chart: 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 55, in plot_pie_chart
    color_discrete_map = {cat: color_mapping.get(cat, "#636efa") for cat in data[XValues]} if use_custom_colors else None
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 55, in <dictcomp>
    color_discrete_map = {cat: color_mapping.get(cat, "#636efa") for cat in data[XValues]} if use_custom_colors else None
AttributeError: 'NoneType' object has no attribute 'get'
2025/03/01 03:33:18 PM ERROR:Error in pagesetup: 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 236, in hlf_body
    vis.plot_pie_chart(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 55, in plot_pie_chart
    color_discrete_map = {cat: color_mapping.get(cat, "#636efa") for cat in data[XValues]} if use_custom_colors else None
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 55, in <dictcomp>
    color_discrete_map = {cat: color_mapping.get(cat, "#636efa") for cat in data[XValues]} if use_custom_colors else None
AttributeError: 'NoneType' object has no attribute 'get'
2025/03/01 03:33:18 PM CRITICAL:Menu setup crashed: 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 236, in hlf_body
    vis.plot_pie_chart(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 55, in plot_pie_chart
    color_discrete_map = {cat: color_mapping.get(cat, "#636efa") for cat in data[XValues]} if use_custom_colors else None
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 55, in <dictcomp>
    color_discrete_map = {cat: color_mapping.get(cat, "#636efa") for cat in data[XValues]} if use_custom_colors else None
AttributeError: 'NoneType' object has no attribute 'get'
2025/03/01 03:35:09 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 03:35:10 PM INFO:get_git_version executed successfully
2025/03/01 03:35:11 PM INFO:get_git_version executed successfully
2025/03/01 03:35:11 PM INFO:get_git_version executed successfully
2025/03/01 03:35:11 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:35:11 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:35:11 PM INFO:Setting up the package
2025/03/01 03:35:11 PM INFO:Setting up the package
2025/03/01 03:35:11 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:35:11 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:35:11 PM INFO:get_git_version executed successfully
2025/03/01 03:35:11 PM INFO:get_git_version executed successfully
2025/03/01 03:35:11 PM INFO:Version: v20.117
2025/03/01 03:35:11 PM INFO:Version: v20.117
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:init_state_var executed successfully
2025/03/01 03:35:11 PM INFO:Session_state variables initialized
2025/03/01 03:35:11 PM INFO:Session_state variables initialized
2025/03/01 03:35:11 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:35:11 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:35:11 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:35:11 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:35:11 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:35:11 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:35:11 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:35:11 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:35:11 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:35:11 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:35:11 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:35:11 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:35:11 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:35:11 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:35:11 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:35:11 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:35:11 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:35:11 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:35:11 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:35:11 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:35:11 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:35:11 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:35:11 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:35:11 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:35:11 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:35:11 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:35:11 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:35:11 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:35:11 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:35:11 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:35:11 PM INFO:perc_target: 0.5
2025/03/01 03:35:11 PM INFO:perc_target: 0.5
2025/03/01 03:35:11 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:35:11 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:35:11 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:35:11 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:35:11 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:35:11 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:35:11 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:35:11 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:35:11 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:35:11 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:35:11 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:35:11 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:35:11 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:35:11 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:35:11 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:35:11 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:35:11 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:35:11 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:35:11 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:35:11 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:35:11 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:35:11 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:35:11 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:35:11 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:35:11 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:35:11 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:35:11 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:35:11 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:35:11 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:35:11 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:35:11 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:35:11 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:35:11 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:35:11 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:35:11 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:35:11 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:35:11 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:35:11 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:35:11 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:35:11 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:35:11 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:35:11 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:35:11 PM INFO:Session state Setup complete
2025/03/01 03:35:11 PM INFO:Session state Setup complete
2025/03/01 03:35:11 PM INFO:initialize_session_state executed successfully
2025/03/01 03:35:11 PM INFO:initialize_session_state executed successfully
2025/03/01 03:35:11 PM INFO:Package setup complete
2025/03/01 03:35:11 PM INFO:Package setup complete
2025/03/01 03:35:11 PM INFO:get_git_version executed successfully
2025/03/01 03:35:11 PM INFO:get_git_version executed successfully
2025/03/01 03:35:11 PM INFO:get_git_version executed successfully
2025/03/01 03:35:11 PM INFO:App Version: v20.132
2025/03/01 03:35:11 PM INFO:App Version: v20.132
2025/03/01 03:35:11 PM INFO:Switched to page: Introduction
2025/03/01 03:35:11 PM INFO:Switched to page: Head Line Figures
2025/03/01 03:35:11 PM ERROR:Error in pagesetup: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 30, in hlf_body
    unique_donors = get_donors_ct(filtered_df)
  File "H:\VScode\dashboard_demo-1\components\calculations.py", line 97, in get_donors_ct
    return df["DonorId"].nunique()
TypeError: 'NoneType' object is not subscriptable
2025/03/01 03:35:11 PM INFO:pagesetup executed successfully
2025/03/01 03:35:11 PM CRITICAL:Menu setup crashed: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 30, in hlf_body
    unique_donors = get_donors_ct(filtered_df)
  File "H:\VScode\dashboard_demo-1\components\calculations.py", line 97, in get_donors_ct
    return df["DonorId"].nunique()
TypeError: 'NoneType' object is not subscriptable
2025/03/01 03:35:11 PM INFO:No data found in session state, running firstload()
2025/03/01 03:35:13 PM INFO:map_filename: regentity_map_fname
2025/03/01 03:35:13 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:35:13 PM INFO:Dedupe by file
2025/03/01 03:35:13 PM INFO:Dedupe by file, shape: (65278, 34)
2025/03/01 03:35:13 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:35:13 PM INFO:map_filename: donor_map_fname
2025/03/01 03:35:13 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:35:13 PM INFO:Dedupe by file
2025/03/01 03:35:13 PM INFO:Dedupe by file, shape: (65278, 40)
2025/03/01 03:35:13 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:35:13 PM INFO:Data cleanup completed, shape: (65278, 40)
2025/03/01 03:35:13 PM INFO:raw_data_cleanup executed successfully
2025/03/01 03:35:15 PM INFO:load_raw_data executed successfully
2025/03/01 03:35:15 PM INFO:get_raw_data executed successfully
2025/03/01 03:35:15 PM INFO:load_data_to_session executed successfully
2025/03/01 03:35:18 PM ERROR:Missing column: 'PartyName' in loaddata_df. Available columns: Index(['ECRef', 'OriginalRegulatedEntityName', 'RegulatedEntityType', 'Value',
       'AcceptedDate', 'AccountingUnitName', 'OriginalDonorName',
       'AccountingUnitsAsCentralParty', 'IsSponsorship', 'DonorStatus',
       'RegulatedDoneeType', 'CompanyRegistrationNumber', 'Postcode',
       'DonationType', 'NatureOfDonation', 'PurposeOfVisit', 'DonationAction',
       'ReceivedDate', 'ReportedDate', 'IsReportedPrePoll',
       'ReportingPeriodName', 'IsBequest', 'IsAggregation',
       'OriginalRegulatedEntityId', 'AccountingUnitId', 'OriginalDonorId',
       'CampaigningName', 'RegisterName', 'IsIrishSource',
       'CleanedRegulatedEntityId', 'CleanedRegulatedEntityName',
       'OriginalRegulatedEntityName', 'RegulatedEntityId',
       'RegulatedEntityName', 'CleanedDonorId', 'ParentDonorName',
       'CleanedDonorName', 'DonorStatus2', 'DonorId', 'DonorName',
       'EventCount', 'YearReceived', 'MonthReceived', 'YearMonthReceived'],
      dtype='object')
2025/03/01 03:35:18 PM INFO:Loaded politician_party_dict:    RegulatedEntityId  RegulatedEntityId     PartyName
0               6304               6304  Conservative
1               6423               6423  Conservative
2               1425               1425  Conservative
3               2061               2061  Conservative
4               6417               6417       Unknown
2025/03/01 03:35:18 PM INFO:PartyUpdate_dict keys: dict_keys(['Conservatives', 'Labour', 'Liberal Democrats', 'Scottish National Party', 'Green Party', 'Plaid Cymru', 'UKIP', 'Unknown'])
2025/03/01 03:35:18 PM INFO:Updated loaddata_df with PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 03:35:18 PM INFO:Loaded RegulatedEntityNameMatch:    PartyId                                          PartyName
0       17                                  English Democrats
1       19                         Legalise Cannabis Alliance
2       30        Upminster And Cranham Residents Association
3       44  Independent Kidderminster Hospital And Health ...
4       46                           Scottish Socialist Party
2025/03/01 03:35:18 PM INFO:loaddata_df after merging:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909      <NA>  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908      <NA>  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908      <NA>  8015.0

[5 rows x 46 columns]
2025/03/01 03:35:18 PM INFO:loaddata_df after updating PartyName and PartyId:        ECRef OriginalRegulatedEntityName RegulatedEntityType    Value AcceptedDate AccountingUnitName  ... EventCount YearReceived MonthReceived YearMonthReceived    PartyName PartyId
0  NC0408174              Mr Andy Street     Regulated Donee  1876.56   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
1  NC0408173              Mr Andy Street     Regulated Donee  2700.00   02/09/2019                     ...          1         2019             9            201909  Andy Street  8015.0
2  NC0408177              Mr Andy Street     Regulated Donee  4852.58   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
3  NC0408176              Mr Andy Street     Regulated Donee  2500.00   30/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0
4  NC0408170              Mr Andy Street     Regulated Donee  4524.05   29/08/2019                     ...          1         2019             8            201908  Andy Street  8015.0

[5 rows x 46 columns]
2025/03/01 03:35:18 PM INFO:loaddata_df PartyName unique values: ['Andy Street' 'Conservative Group For Europe' 'Progress Ltd' ...
 'A Minority Pastime Limited' 'Cruelty Free International'
 'Society For The Protection Of Unborn Children']
2025/03/01 03:35:18 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 03:35:18 PM INFO:map_mp_to_party executed successfully
2025/03/01 03:35:19 PM INFO:Election Dates not found in session, loading now.
2025/03/01 03:35:19 PM INFO:Election Dates Loaded Successfully.
2025/03/01 03:35:19 PM INFO:load_election_dates executed successfully
2025/03/01 03:35:43 PM INFO:Cleaned Data completed, shape: (78745, 58)
2025/03/01 03:35:43 PM INFO:load_cleaned_data executed successfully
2025/03/01 03:35:43 PM INFO:get_cleaned_data executed successfully
2025/03/01 03:35:43 PM INFO:load_data_to_session executed successfully
2025/03/01 03:35:43 PM INFO:load_entity_summary_data executed successfully
2025/03/01 03:35:43 PM INFO:get_party_summary_data executed successfully
2025/03/01 03:35:43 PM INFO:load_data_to_session executed successfully
2025/03/01 03:35:43 PM INFO:load_donorList_data executed successfully
2025/03/01 03:35:43 PM INFO:get_donor_data executed successfully
2025/03/01 03:35:43 PM INFO:load_data_to_session executed successfully
2025/03/01 03:35:43 PM INFO:load_regulated_entity_data executed successfully
2025/03/01 03:35:43 PM INFO:get_regentity_data executed successfully
2025/03/01 03:35:43 PM INFO:load_data_to_session executed successfully
2025/03/01 03:35:43 PM INFO:firstload executed successfully
2025/03/01 03:38:21 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 03:38:22 PM INFO:get_git_version executed successfully
2025/03/01 03:38:22 PM INFO:get_git_version executed successfully
2025/03/01 03:38:44 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 03:38:44 PM INFO:get_git_version executed successfully
2025/03/01 03:38:45 PM INFO:get_git_version executed successfully
2025/03/01 03:39:08 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 03:39:09 PM INFO:get_git_version executed successfully
2025/03/01 03:39:09 PM INFO:get_git_version executed successfully
2025/03/01 03:39:09 PM INFO:get_git_version executed successfully
2025/03/01 03:39:09 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:39:09 PM INFO:Setting up the package
2025/03/01 03:39:09 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:39:10 PM INFO:get_git_version executed successfully
2025/03/01 03:39:10 PM INFO:Version: v20.117
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:init_state_var executed successfully
2025/03/01 03:39:10 PM INFO:Session_state variables initialized
2025/03/01 03:39:10 PM INFO:perc_target: 0.5
2025/03/01 03:39:10 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:39:10 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:39:10 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:39:10 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:39:10 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:39:10 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:39:10 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:39:10 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:39:10 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:39:10 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:39:10 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:39:10 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:39:10 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:39:10 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:39:10 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:39:10 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:39:10 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:39:10 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:39:10 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:39:10 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:39:10 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:39:10 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:39:10 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:39:10 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:39:10 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:39:10 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:39:10 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:39:10 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:39:10 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:39:10 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:39:10 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:39:10 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:39:10 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:39:10 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:39:10 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:39:10 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:39:10 PM INFO:Session state Setup complete
2025/03/01 03:39:10 PM INFO:initialize_session_state executed successfully
2025/03/01 03:39:10 PM INFO:Package setup complete
2025/03/01 03:39:10 PM INFO:get_git_version executed successfully
2025/03/01 03:39:10 PM INFO:get_git_version executed successfully
2025/03/01 03:39:10 PM INFO:App Version: v20.132
2025/03/01 03:39:10 PM INFO:Switched to page: Introduction
2025/03/01 03:39:10 PM INFO:pagesetup executed successfully
2025/03/01 03:39:10 PM INFO:No data found in session state, running firstload()
2025/03/01 03:39:11 PM INFO:map_filename: regentity_map_fname
2025/03/01 03:39:11 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:39:11 PM INFO:Dedupe by file
2025/03/01 03:39:12 PM INFO:Dedupe by file, shape: (65278, 34)
2025/03/01 03:39:12 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:39:12 PM INFO:map_filename: donor_map_fname
2025/03/01 03:39:12 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:39:12 PM INFO:Dedupe by file
2025/03/01 03:39:12 PM INFO:Dedupe by file, shape: (65278, 40)
2025/03/01 03:39:12 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:39:12 PM INFO:Data cleanup completed, shape: (65278, 40)
2025/03/01 03:39:12 PM INFO:raw_data_cleanup executed successfully
2025/03/01 03:39:13 PM INFO:load_raw_data executed successfully
2025/03/01 03:39:13 PM INFO:get_raw_data executed successfully
2025/03/01 03:39:13 PM INFO:load_data_to_session executed successfully
2025/03/01 03:39:16 PM ERROR:Missing column: 'PartyName' in loaddata_df. Available columns: Index(['ECRef', 'OriginalRegulatedEntityName', 'RegulatedEntityType', 'Value',
       'AcceptedDate', 'AccountingUnitName', 'OriginalDonorName',
       'AccountingUnitsAsCentralParty', 'IsSponsorship', 'DonorStatus',
       'RegulatedDoneeType', 'CompanyRegistrationNumber', 'Postcode',
       'DonationType', 'NatureOfDonation', 'PurposeOfVisit', 'DonationAction',
       'ReceivedDate', 'ReportedDate', 'IsReportedPrePoll',
       'ReportingPeriodName', 'IsBequest', 'IsAggregation',
       'OriginalRegulatedEntityId', 'AccountingUnitId', 'OriginalDonorId',
       'CampaigningName', 'RegisterName', 'IsIrishSource',
       'CleanedRegulatedEntityId', 'CleanedRegulatedEntityName',
       'OriginalRegulatedEntityName', 'RegulatedEntityId',
       'RegulatedEntityName', 'CleanedDonorId', 'ParentDonorName',
       'CleanedDonorName', 'DonorStatus2', 'DonorId', 'DonorName',
       'EventCount', 'YearReceived', 'MonthReceived', 'YearMonthReceived'],
      dtype='object')
2025/03/01 03:39:16 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 03:39:16 PM INFO:map_mp_to_party executed successfully
2025/03/01 03:39:16 PM INFO:Election Dates not found in session, loading now.
2025/03/01 03:39:17 PM INFO:Election Dates Loaded Successfully.
2025/03/01 03:39:17 PM INFO:load_election_dates executed successfully
2025/03/01 03:39:40 PM INFO:Cleaned Data completed, shape: (78745, 58)
2025/03/01 03:39:40 PM INFO:load_cleaned_data executed successfully
2025/03/01 03:39:40 PM INFO:get_cleaned_data executed successfully
2025/03/01 03:39:40 PM INFO:load_data_to_session executed successfully
2025/03/01 03:39:40 PM INFO:load_entity_summary_data executed successfully
2025/03/01 03:39:40 PM INFO:get_party_summary_data executed successfully
2025/03/01 03:39:40 PM INFO:load_data_to_session executed successfully
2025/03/01 03:39:41 PM INFO:load_donorList_data executed successfully
2025/03/01 03:39:41 PM INFO:get_donor_data executed successfully
2025/03/01 03:39:41 PM INFO:load_data_to_session executed successfully
2025/03/01 03:39:41 PM INFO:load_regulated_entity_data executed successfully
2025/03/01 03:39:41 PM INFO:get_regentity_data executed successfully
2025/03/01 03:39:41 PM INFO:load_data_to_session executed successfully
2025/03/01 03:39:41 PM INFO:firstload executed successfully
2025/03/01 03:40:00 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:40:00 PM INFO:Setting up the package
2025/03/01 03:40:00 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:40:00 PM INFO:get_git_version executed successfully
2025/03/01 03:40:00 PM INFO:Version: v20.117
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:init_state_var executed successfully
2025/03/01 03:40:00 PM INFO:Session_state variables initialized
2025/03/01 03:40:00 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:40:00 PM INFO:perc_target: 0.5
2025/03/01 03:40:00 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:40:00 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:40:00 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:40:00 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:40:00 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:40:00 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:40:00 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:40:00 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:40:00 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:40:00 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:40:00 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:40:00 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:40:00 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:40:00 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:40:00 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:40:00 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:40:00 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:40:00 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:40:00 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:40:00 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:40:00 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:40:00 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:40:00 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:40:00 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:40:00 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:40:00 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:40:00 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:40:00 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:40:00 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:40:00 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:40:00 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:40:00 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:40:00 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:40:00 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:40:00 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:40:00 PM INFO:menu_selection: {'title': 'Head Line Figures', 'function': <function hlf_body at 0x0000026899D46680>}
2025/03/01 03:40:00 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:40:00 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:40:00 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:40:00 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:40:00 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:40:00 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:40:00 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:40:00 PM INFO:Session state Setup complete
2025/03/01 03:40:00 PM INFO:initialize_session_state executed successfully
2025/03/01 03:40:00 PM INFO:Package setup complete
2025/03/01 03:40:00 PM INFO:get_git_version executed successfully
2025/03/01 03:40:00 PM INFO:App Version: v20.132
2025/03/01 03:40:00 PM INFO:Switched to page: Head Line Figures
2025/03/01 03:40:01 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:40:01 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:40:01 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:40:01 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:40:01 PM ERROR:Error in plot_pie_chart: 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 55, in plot_pie_chart
    color_discrete_map = {cat: color_mapping.get(cat, "#636efa") for cat in data[XValues]} if use_custom_colors else None
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 55, in <dictcomp>
    color_discrete_map = {cat: color_mapping.get(cat, "#636efa") for cat in data[XValues]} if use_custom_colors else None
AttributeError: 'NoneType' object has no attribute 'get'
2025/03/01 03:40:01 PM ERROR:Error in pagesetup: 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 236, in hlf_body
    vis.plot_pie_chart(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 55, in plot_pie_chart
    color_discrete_map = {cat: color_mapping.get(cat, "#636efa") for cat in data[XValues]} if use_custom_colors else None
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 55, in <dictcomp>
    color_discrete_map = {cat: color_mapping.get(cat, "#636efa") for cat in data[XValues]} if use_custom_colors else None
AttributeError: 'NoneType' object has no attribute 'get'
2025/03/01 03:40:01 PM CRITICAL:Menu setup crashed: 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 236, in hlf_body
    vis.plot_pie_chart(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 55, in plot_pie_chart
    color_discrete_map = {cat: color_mapping.get(cat, "#636efa") for cat in data[XValues]} if use_custom_colors else None
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 55, in <dictcomp>
    color_discrete_map = {cat: color_mapping.get(cat, "#636efa") for cat in data[XValues]} if use_custom_colors else None
AttributeError: 'NoneType' object has no attribute 'get'
2025/03/01 03:41:45 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 03:41:46 PM INFO:get_git_version executed successfully
2025/03/01 03:41:46 PM INFO:get_git_version executed successfully
2025/03/01 03:41:46 PM INFO:get_git_version executed successfully
2025/03/01 03:41:47 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:41:47 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:41:47 PM INFO:Setting up the package
2025/03/01 03:41:47 PM INFO:Setting up the package
2025/03/01 03:41:47 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:41:47 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:41:47 PM INFO:get_git_version executed successfully
2025/03/01 03:41:47 PM INFO:get_git_version executed successfully
2025/03/01 03:41:47 PM INFO:Version: v20.117
2025/03/01 03:41:47 PM INFO:Version: v20.117
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:Session_state variables initialized
2025/03/01 03:41:47 PM INFO:init_state_var executed successfully
2025/03/01 03:41:47 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:41:47 PM INFO:Session_state variables initialized
2025/03/01 03:41:47 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:41:47 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:41:47 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:41:47 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:41:47 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:41:47 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:41:47 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:41:47 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:41:47 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:41:47 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:41:47 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:41:47 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:41:47 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:41:47 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:41:47 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:41:47 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:41:47 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:41:47 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:41:47 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:41:47 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:41:47 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:41:47 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:41:47 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:41:47 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:41:47 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:41:47 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:41:47 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:41:47 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:41:47 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:41:47 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:41:47 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:41:47 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:41:47 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:41:47 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:41:47 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:41:47 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:41:47 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:41:47 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:41:47 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:41:47 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:41:47 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:41:47 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:41:47 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:41:47 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:41:47 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:41:47 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:41:47 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:41:47 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:41:47 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:41:47 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:41:47 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:41:47 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:41:47 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:41:47 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:41:47 PM INFO:perc_target: 0.5
2025/03/01 03:41:47 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:41:47 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:41:47 PM INFO:perc_target: 0.5
2025/03/01 03:41:47 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:41:47 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:41:47 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:41:47 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:41:47 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:41:47 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:41:47 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:41:47 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:41:47 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:41:47 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:41:47 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:41:47 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:41:47 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:41:47 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:41:47 PM INFO:Session state Setup complete
2025/03/01 03:41:47 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:41:47 PM INFO:initialize_session_state executed successfully
2025/03/01 03:41:47 PM INFO:Session state Setup complete
2025/03/01 03:41:47 PM INFO:Package setup complete
2025/03/01 03:41:47 PM INFO:initialize_session_state executed successfully
2025/03/01 03:41:47 PM INFO:Package setup complete
2025/03/01 03:41:47 PM INFO:get_git_version executed successfully
2025/03/01 03:41:47 PM INFO:get_git_version executed successfully
2025/03/01 03:41:47 PM INFO:get_git_version executed successfully
2025/03/01 03:41:47 PM INFO:App Version: v20.132
2025/03/01 03:41:47 PM INFO:App Version: v20.132
2025/03/01 03:41:47 PM INFO:Switched to page: Head Line Figures
2025/03/01 03:41:47 PM INFO:Switched to page: Introduction
2025/03/01 03:41:47 PM ERROR:Error in pagesetup: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 30, in hlf_body
    unique_donors = get_donors_ct(filtered_df)
  File "H:\VScode\dashboard_demo-1\components\calculations.py", line 97, in get_donors_ct
    return df["DonorId"].nunique()
TypeError: 'NoneType' object is not subscriptable
2025/03/01 03:41:47 PM INFO:pagesetup executed successfully
2025/03/01 03:41:47 PM CRITICAL:Menu setup crashed: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 30, in hlf_body
    unique_donors = get_donors_ct(filtered_df)
  File "H:\VScode\dashboard_demo-1\components\calculations.py", line 97, in get_donors_ct
    return df["DonorId"].nunique()
TypeError: 'NoneType' object is not subscriptable
2025/03/01 03:41:47 PM INFO:No data found in session state, running firstload()
2025/03/01 03:41:49 PM INFO:map_filename: regentity_map_fname
2025/03/01 03:41:49 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:41:49 PM INFO:Dedupe by file
2025/03/01 03:41:49 PM INFO:Dedupe by file, shape: (65278, 34)
2025/03/01 03:41:49 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:41:49 PM INFO:map_filename: donor_map_fname
2025/03/01 03:41:49 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:41:49 PM INFO:Dedupe by file
2025/03/01 03:41:49 PM INFO:Dedupe by file, shape: (65278, 40)
2025/03/01 03:41:49 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:41:49 PM INFO:Data cleanup completed, shape: (65278, 40)
2025/03/01 03:41:49 PM INFO:raw_data_cleanup executed successfully
2025/03/01 03:41:51 PM INFO:load_raw_data executed successfully
2025/03/01 03:41:51 PM INFO:get_raw_data executed successfully
2025/03/01 03:41:51 PM INFO:load_data_to_session executed successfully
2025/03/01 03:41:54 PM ERROR:Missing column: 'PartyName' in loaddata_df. Available columns: Index(['ECRef', 'OriginalRegulatedEntityName', 'RegulatedEntityType', 'Value',
       'AcceptedDate', 'AccountingUnitName', 'OriginalDonorName',
       'AccountingUnitsAsCentralParty', 'IsSponsorship', 'DonorStatus',
       'RegulatedDoneeType', 'CompanyRegistrationNumber', 'Postcode',
       'DonationType', 'NatureOfDonation', 'PurposeOfVisit', 'DonationAction',
       'ReceivedDate', 'ReportedDate', 'IsReportedPrePoll',
       'ReportingPeriodName', 'IsBequest', 'IsAggregation',
       'OriginalRegulatedEntityId', 'AccountingUnitId', 'OriginalDonorId',
       'CampaigningName', 'RegisterName', 'IsIrishSource',
       'CleanedRegulatedEntityId', 'CleanedRegulatedEntityName',
       'OriginalRegulatedEntityName', 'RegulatedEntityId',
       'RegulatedEntityName', 'CleanedDonorId', 'ParentDonorName',
       'CleanedDonorName', 'DonorStatus2', 'DonorId', 'DonorName',
       'EventCount', 'YearReceived', 'MonthReceived', 'YearMonthReceived'],
      dtype='object')
2025/03/01 03:41:54 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 03:41:54 PM INFO:map_mp_to_party executed successfully
2025/03/01 03:41:54 PM INFO:Election Dates not found in session, loading now.
2025/03/01 03:41:54 PM INFO:Election Dates Loaded Successfully.
2025/03/01 03:41:54 PM INFO:load_election_dates executed successfully
2025/03/01 03:42:19 PM INFO:Cleaned Data completed, shape: (78745, 58)
2025/03/01 03:42:19 PM INFO:load_cleaned_data executed successfully
2025/03/01 03:42:19 PM INFO:get_cleaned_data executed successfully
2025/03/01 03:42:19 PM INFO:load_data_to_session executed successfully
2025/03/01 03:42:19 PM INFO:load_entity_summary_data executed successfully
2025/03/01 03:42:19 PM INFO:get_party_summary_data executed successfully
2025/03/01 03:42:19 PM INFO:load_data_to_session executed successfully
2025/03/01 03:42:20 PM INFO:load_donorList_data executed successfully
2025/03/01 03:42:20 PM INFO:get_donor_data executed successfully
2025/03/01 03:42:20 PM INFO:load_data_to_session executed successfully
2025/03/01 03:42:20 PM INFO:load_regulated_entity_data executed successfully
2025/03/01 03:42:20 PM INFO:get_regentity_data executed successfully
2025/03/01 03:42:20 PM INFO:load_data_to_session executed successfully
2025/03/01 03:42:20 PM INFO:firstload executed successfully
2025/03/01 03:43:07 PM INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/01 03:43:07 PM INFO:get_git_version executed successfully
2025/03/01 03:43:07 PM INFO:get_git_version executed successfully
2025/03/01 03:43:07 PM INFO:get_git_version executed successfully
2025/03/01 03:43:07 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:43:07 PM INFO:Setting up the package
2025/03/01 03:43:07 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:43:07 PM INFO:get_git_version executed successfully
2025/03/01 03:43:07 PM INFO:Version: v20.117
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:init_state_var executed successfully
2025/03/01 03:43:07 PM INFO:Session_state variables initialized
2025/03/01 03:43:07 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:43:07 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:43:07 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:43:07 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:43:07 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:43:07 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:43:07 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:43:07 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:43:07 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:43:07 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:43:07 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:43:07 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:43:07 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:43:07 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:43:07 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:43:07 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:43:07 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:43:07 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:43:07 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:43:07 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:43:07 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:43:07 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:43:07 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:43:07 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:43:07 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:43:07 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:43:07 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:43:07 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:43:07 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:43:07 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:43:07 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:43:07 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:43:07 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:43:07 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:43:07 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:43:07 PM INFO:perc_target: 0.5
2025/03/01 03:43:07 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:43:07 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:43:07 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:43:07 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:43:07 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:43:07 PM INFO:menu_selection: {'title': 'Head Line Figures', 'function': <function hlf_body at 0x000001D475122B90>}
2025/03/01 03:43:07 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:43:07 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:43:07 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:43:07 PM INFO:Session state Setup complete
2025/03/01 03:43:07 PM INFO:initialize_session_state executed successfully
2025/03/01 03:43:07 PM INFO:Package setup complete
2025/03/01 03:43:07 PM INFO:get_git_version executed successfully
2025/03/01 03:43:07 PM INFO:get_git_version executed successfully
2025/03/01 03:43:07 PM INFO:App Version: v20.132
2025/03/01 03:43:07 PM INFO:Switched to page: Head Line Figures
2025/03/01 03:43:08 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:43:08 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:43:08 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:43:09 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:43:09 PM INFO:plot_pie_chart executed successfully
2025/03/01 03:43:09 PM ERROR:Error in plot_pie_chart: plot_pie_chart() got an unexpected keyword argument 'Xlabel'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_pie_chart() got an unexpected keyword argument 'Xlabel'
2025/03/01 03:43:09 PM ERROR:Error in pagesetup: plot_pie_chart() got an unexpected keyword argument 'Xlabel'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 255, in hlf_body
    vis.plot_pie_chart(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_pie_chart() got an unexpected keyword argument 'Xlabel'
2025/03/01 03:43:09 PM CRITICAL:Menu setup crashed: plot_pie_chart() got an unexpected keyword argument 'Xlabel'
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 255, in hlf_body
    vis.plot_pie_chart(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
TypeError: plot_pie_chart() got an unexpected keyword argument 'Xlabel'
2025/03/01 03:43:49 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 03:43:49 PM INFO:get_git_version executed successfully
2025/03/01 03:43:50 PM INFO:get_git_version executed successfully
2025/03/01 03:43:50 PM INFO:get_git_version executed successfully
2025/03/01 03:43:50 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:43:50 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:43:50 PM INFO:Setting up the package
2025/03/01 03:43:50 PM INFO:Setting up the package
2025/03/01 03:43:50 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:43:50 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:43:50 PM INFO:get_git_version executed successfully
2025/03/01 03:43:50 PM INFO:get_git_version executed successfully
2025/03/01 03:43:50 PM INFO:Version: v20.117
2025/03/01 03:43:50 PM INFO:Version: v20.117
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:Session_state variables initialized
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:43:50 PM INFO:init_state_var executed successfully
2025/03/01 03:43:50 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:43:50 PM INFO:Session_state variables initialized
2025/03/01 03:43:50 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:43:50 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:43:50 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:43:50 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:43:50 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:43:50 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:43:50 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:43:50 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:43:50 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:43:50 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:43:50 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:43:50 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:43:50 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:43:50 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:43:50 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:43:50 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:43:50 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:43:50 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:43:50 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:43:50 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:43:50 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:43:50 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:43:50 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:43:50 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:43:50 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:43:50 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:43:50 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:43:50 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:43:50 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:43:50 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:43:50 PM INFO:perc_target: 0.5
2025/03/01 03:43:50 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:43:50 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:43:50 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:43:50 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:43:50 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:43:50 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:43:50 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:43:50 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:43:50 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:43:50 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:43:50 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:43:50 PM INFO:Session state Setup complete
2025/03/01 03:43:50 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:43:50 PM INFO:initialize_session_state executed successfully
2025/03/01 03:43:50 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:43:50 PM INFO:Package setup complete
2025/03/01 03:43:50 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:43:50 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:43:50 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:43:50 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:43:50 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:43:50 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:43:50 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:43:50 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:43:50 PM INFO:perc_target: 0.5
2025/03/01 03:43:50 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:43:50 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:43:50 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:43:50 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:43:50 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:43:50 PM INFO:Session state Setup complete
2025/03/01 03:43:50 PM INFO:initialize_session_state executed successfully
2025/03/01 03:43:50 PM INFO:Package setup complete
2025/03/01 03:43:50 PM INFO:get_git_version executed successfully
2025/03/01 03:43:51 PM INFO:get_git_version executed successfully
2025/03/01 03:43:51 PM INFO:get_git_version executed successfully
2025/03/01 03:43:51 PM INFO:App Version: v20.132
2025/03/01 03:43:51 PM INFO:App Version: v20.132
2025/03/01 03:43:51 PM INFO:Switched to page: Head Line Figures
2025/03/01 03:43:51 PM INFO:Switched to page: Introduction
2025/03/01 03:43:51 PM ERROR:Error in pagesetup: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 30, in hlf_body
    unique_donors = get_donors_ct(filtered_df)
  File "H:\VScode\dashboard_demo-1\components\calculations.py", line 97, in get_donors_ct
    return df["DonorId"].nunique()
TypeError: 'NoneType' object is not subscriptable
2025/03/01 03:43:51 PM INFO:pagesetup executed successfully
2025/03/01 03:43:51 PM CRITICAL:Menu setup crashed: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 30, in hlf_body
    unique_donors = get_donors_ct(filtered_df)
  File "H:\VScode\dashboard_demo-1\components\calculations.py", line 97, in get_donors_ct
    return df["DonorId"].nunique()
TypeError: 'NoneType' object is not subscriptable
2025/03/01 03:43:51 PM INFO:No data found in session state, running firstload()
2025/03/01 03:43:52 PM INFO:map_filename: regentity_map_fname
2025/03/01 03:43:52 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:43:52 PM INFO:Dedupe by file
2025/03/01 03:43:52 PM INFO:Dedupe by file, shape: (65278, 34)
2025/03/01 03:43:52 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:43:52 PM INFO:map_filename: donor_map_fname
2025/03/01 03:43:52 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:43:52 PM INFO:Dedupe by file
2025/03/01 03:43:52 PM INFO:Dedupe by file, shape: (65278, 40)
2025/03/01 03:43:52 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:43:52 PM INFO:Data cleanup completed, shape: (65278, 40)
2025/03/01 03:43:52 PM INFO:raw_data_cleanup executed successfully
2025/03/01 03:43:54 PM INFO:load_raw_data executed successfully
2025/03/01 03:43:54 PM INFO:get_raw_data executed successfully
2025/03/01 03:43:54 PM INFO:load_data_to_session executed successfully
2025/03/01 03:43:57 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 03:43:57 PM INFO:map_mp_to_party executed successfully
2025/03/01 03:43:57 PM INFO:Election Dates not found in session, loading now.
2025/03/01 03:43:57 PM INFO:Election Dates Loaded Successfully.
2025/03/01 03:43:57 PM INFO:load_election_dates executed successfully
2025/03/01 03:44:22 PM INFO:Cleaned Data completed, shape: (78745, 58)
2025/03/01 03:44:22 PM INFO:load_cleaned_data executed successfully
2025/03/01 03:44:22 PM INFO:get_cleaned_data executed successfully
2025/03/01 03:44:22 PM INFO:load_data_to_session executed successfully
2025/03/01 03:44:22 PM INFO:load_entity_summary_data executed successfully
2025/03/01 03:44:22 PM INFO:get_party_summary_data executed successfully
2025/03/01 03:44:22 PM INFO:load_data_to_session executed successfully
2025/03/01 03:44:23 PM INFO:load_donorList_data executed successfully
2025/03/01 03:44:23 PM INFO:get_donor_data executed successfully
2025/03/01 03:44:23 PM INFO:load_data_to_session executed successfully
2025/03/01 03:44:23 PM INFO:load_regulated_entity_data executed successfully
2025/03/01 03:44:23 PM INFO:get_regentity_data executed successfully
2025/03/01 03:44:23 PM INFO:load_data_to_session executed successfully
2025/03/01 03:44:23 PM INFO:firstload executed successfully
2025/03/01 03:44:39 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:44:39 PM INFO:Setting up the package
2025/03/01 03:44:39 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:44:39 PM INFO:get_git_version executed successfully
2025/03/01 03:44:39 PM INFO:Version: v20.117
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:init_state_var executed successfully
2025/03/01 03:44:39 PM INFO:Session_state variables initialized
2025/03/01 03:44:39 PM INFO:menu_selection: {'title': 'Head Line Figures', 'function': <function hlf_body at 0x000001C28D84A680>}
2025/03/01 03:44:39 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:44:39 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:44:39 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:44:39 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:44:39 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:44:39 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:44:39 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:44:39 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:44:39 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:44:39 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:44:39 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:44:39 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:44:39 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:44:39 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:44:39 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:44:39 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:44:39 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:44:39 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:44:39 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:44:39 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:44:39 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:44:39 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:44:39 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:44:39 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:44:39 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:44:39 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:44:39 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:44:39 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:44:39 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:44:39 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:44:39 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:44:39 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:44:39 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:44:39 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:44:39 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:44:39 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:44:39 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:44:39 PM INFO:perc_target: 0.5
2025/03/01 03:44:39 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:44:39 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:44:39 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:44:39 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:44:39 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:44:39 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:44:39 PM INFO:Session state Setup complete
2025/03/01 03:44:39 PM INFO:initialize_session_state executed successfully
2025/03/01 03:44:39 PM INFO:Package setup complete
2025/03/01 03:44:39 PM INFO:get_git_version executed successfully
2025/03/01 03:44:39 PM INFO:App Version: v20.132
2025/03/01 03:44:39 PM INFO:Switched to page: Head Line Figures
2025/03/01 03:44:40 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:44:40 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:44:40 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:44:40 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:44:41 PM INFO:plot_pie_chart executed successfully
2025/03/01 03:44:41 PM INFO:plot_pie_chart executed successfully
2025/03/01 03:44:41 PM INFO:pagesetup executed successfully
2025/03/01 03:44:41 PM INFO:Data already loaded in session state.
2025/03/01 03:44:49 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:44:49 PM INFO:Setting up the package
2025/03/01 03:44:49 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:44:49 PM INFO:get_git_version executed successfully
2025/03/01 03:44:49 PM INFO:Version: v20.117
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:init_state_var executed successfully
2025/03/01 03:44:49 PM INFO:Session_state variables initialized
2025/03/01 03:44:49 PM INFO:menu_selection: {'title': 'Bequeths', 'function': <function mod_bequeths_page at 0x000001C28DC7D2D0>}
2025/03/01 03:44:49 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:44:49 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:44:49 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:44:49 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:44:49 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:44:49 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:44:49 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:44:49 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:44:49 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:44:49 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:44:49 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:44:49 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:44:49 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:44:49 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:44:49 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:44:49 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:44:49 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:44:49 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:44:49 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:44:49 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:44:49 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:44:49 PM INFO:year_slider_value_by_year_n_entity: (2001, 2019)
2025/03/01 03:44:49 PM INFO:year_slider_dons_by_year_n_entity: (2001, 2019)
2025/03/01 03:44:49 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:44:49 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:44:49 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:44:49 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:44:49 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:44:49 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:44:49 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:44:49 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:44:49 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:44:49 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:44:49 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:44:49 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:44:49 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:44:49 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:44:49 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:44:49 PM INFO:year_slider_dons_by_year_n_type: (2001, 2019)
2025/03/01 03:44:49 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:44:49 PM INFO:year_slider_value_by_year_n_type: (2001, 2019)
2025/03/01 03:44:49 PM INFO:perc_target: 0.5
2025/03/01 03:44:49 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:44:49 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:44:49 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:44:49 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:44:49 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:44:49 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:44:49 PM INFO:Session state Setup complete
2025/03/01 03:44:49 PM INFO:initialize_session_state executed successfully
2025/03/01 03:44:49 PM INFO:Package setup complete
2025/03/01 03:44:49 PM INFO:get_git_version executed successfully
2025/03/01 03:44:49 PM INFO:App Version: v20.132
2025/03/01 03:44:49 PM INFO:Switched to page: Bequeths
2025/03/01 03:44:49 PM INFO:load_and_filter_data executed successfully
2025/03/01 03:44:49 PM INFO:display_summary_statistics executed successfully
2025/03/01 03:44:49 PM INFO:display_textual_insights executed successfully
2025/03/01 03:44:49 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:44:49 PM ERROR:Error in plot_bar_line_by_year: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 131, in plot_bar_line_by_year
    st.plotly_chart(fig)
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\plotly_chart.py", line 509, in plotly_chart
    plotly_chart_proto.id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 131, in _register_element_id
    raise StreamlitDuplicateElementId(element_type)
streamlit.errors.StreamlitDuplicateElementId: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
2025/03/01 03:44:49 PM ERROR:Error in display_visualizations: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 114, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 131, in plot_bar_line_by_year
    st.plotly_chart(fig)
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\plotly_chart.py", line 509, in plotly_chart
    plotly_chart_proto.id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 131, in _register_element_id
    raise StreamlitDuplicateElementId(element_type)
streamlit.errors.StreamlitDuplicateElementId: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
2025/03/01 03:44:49 PM ERROR:Error in display_data_page: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 114, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 131, in plot_bar_line_by_year
    st.plotly_chart(fig)
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\plotly_chart.py", line 509, in plotly_chart
    plotly_chart_proto.id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 131, in _register_element_id
    raise StreamlitDuplicateElementId(element_type)
streamlit.errors.StreamlitDuplicateElementId: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
2025/03/01 03:44:49 PM ERROR:Error in pagesetup: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 54, in mod_bequeths_page
    display_data_page(filter_key="Bequests_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 114, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 131, in plot_bar_line_by_year
    st.plotly_chart(fig)
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\plotly_chart.py", line 509, in plotly_chart
    plotly_chart_proto.id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 131, in _register_element_id
    raise StreamlitDuplicateElementId(element_type)
streamlit.errors.StreamlitDuplicateElementId: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
2025/03/01 03:44:49 PM CRITICAL:Menu setup crashed: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 54, in mod_bequeths_page
    display_data_page(filter_key="Bequests_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 114, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 131, in plot_bar_line_by_year
    st.plotly_chart(fig)
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\plotly_chart.py", line 509, in plotly_chart
    plotly_chart_proto.id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 131, in _register_element_id
    raise StreamlitDuplicateElementId(element_type)
streamlit.errors.StreamlitDuplicateElementId: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
2025/03/01 03:47:17 PM INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/01 03:47:17 PM INFO:get_git_version executed successfully
2025/03/01 03:47:17 PM INFO:get_git_version executed successfully
2025/03/01 03:47:17 PM INFO:get_git_version executed successfully
2025/03/01 03:47:17 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:47:17 PM INFO:Setting up the package
2025/03/01 03:47:17 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:47:17 PM INFO:get_git_version executed successfully
2025/03/01 03:47:17 PM INFO:Version: v20.117
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:init_state_var executed successfully
2025/03/01 03:47:17 PM INFO:Session_state variables initialized
2025/03/01 03:47:17 PM INFO:menu_selection: {'title': 'Corporate Donations', 'function': <function mod_corporate_donations_page at 0x000001C28DC7D360>}
2025/03/01 03:47:17 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:47:17 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:47:17 PM INFO:year_slider_rightfiltered_keytarget_label_vis: (2001, 2019)
2025/03/01 03:47:17 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:47:17 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:47:17 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:47:17 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:47:17 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:47:17 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:47:17 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:47:17 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:47:17 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:47:17 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:47:17 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:47:17 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:47:17 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:47:17 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:47:17 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:47:17 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:47:17 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:47:17 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:47:17 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:47:17 PM INFO:year_slider_value_by_year_n_entity: (2001, 2019)
2025/03/01 03:47:17 PM INFO:year_slider_dons_by_year_n_entity: (2001, 2019)
2025/03/01 03:47:17 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:47:17 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:47:17 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:47:17 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:47:17 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:47:17 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:47:17 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:47:17 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:47:17 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:47:17 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:47:17 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:47:17 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:47:17 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:47:17 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:47:17 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:47:17 PM INFO:year_slider_dons_by_year_n_type: (2001, 2019)
2025/03/01 03:47:17 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:47:17 PM INFO:year_slider_value_by_year_n_type: (2001, 2019)
2025/03/01 03:47:17 PM INFO:perc_target: 0.5
2025/03/01 03:47:17 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:47:17 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:47:17 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:47:17 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:47:17 PM INFO:year_slider_leftfiltered_keytarget_label_vis: (2001, 2019)
2025/03/01 03:47:17 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:47:17 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:47:17 PM INFO:Session state Setup complete
2025/03/01 03:47:17 PM INFO:initialize_session_state executed successfully
2025/03/01 03:47:17 PM INFO:Package setup complete
2025/03/01 03:47:17 PM INFO:get_git_version executed successfully
2025/03/01 03:47:17 PM INFO:get_git_version executed successfully
2025/03/01 03:47:17 PM INFO:App Version: v20.132
2025/03/01 03:47:17 PM INFO:Switched to page: Corporate Donations
2025/03/01 03:47:17 PM INFO:load_and_filter_data executed successfully
2025/03/01 03:47:17 PM INFO:display_summary_statistics executed successfully
2025/03/01 03:47:17 PM INFO:display_textual_insights executed successfully
2025/03/01 03:47:17 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:47:17 PM ERROR:Error in plot_bar_line_by_year: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 131, in plot_bar_line_by_year
    key=f"year_slider_{widget_key}"
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\plotly_chart.py", line 509, in plotly_chart
    plotly_chart_proto.id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 131, in _register_element_id
    raise StreamlitDuplicateElementId(element_type)
streamlit.errors.StreamlitDuplicateElementId: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
2025/03/01 03:47:17 PM ERROR:Error in display_visualizations: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 114, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 131, in plot_bar_line_by_year
    key=f"year_slider_{widget_key}"
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\plotly_chart.py", line 509, in plotly_chart
    plotly_chart_proto.id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 131, in _register_element_id
    raise StreamlitDuplicateElementId(element_type)
streamlit.errors.StreamlitDuplicateElementId: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
2025/03/01 03:47:18 PM ERROR:Error in display_data_page: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 114, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 131, in plot_bar_line_by_year
    key=f"year_slider_{widget_key}"
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\plotly_chart.py", line 509, in plotly_chart
    plotly_chart_proto.id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 131, in _register_element_id
    raise StreamlitDuplicateElementId(element_type)
streamlit.errors.StreamlitDuplicateElementId: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
2025/03/01 03:47:18 PM ERROR:Error in pagesetup: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 60, in mod_corporate_donations_page
    display_data_page(filter_key="CorporateDonations_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 114, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 131, in plot_bar_line_by_year
    key=f"year_slider_{widget_key}"
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\plotly_chart.py", line 509, in plotly_chart
    plotly_chart_proto.id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 131, in _register_element_id
    raise StreamlitDuplicateElementId(element_type)
streamlit.errors.StreamlitDuplicateElementId: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
2025/03/01 03:47:18 PM CRITICAL:Menu setup crashed: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 60, in mod_corporate_donations_page
    display_data_page(filter_key="CorporateDonations_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 114, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 131, in plot_bar_line_by_year
    key=f"year_slider_{widget_key}"
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\plotly_chart.py", line 509, in plotly_chart
    plotly_chart_proto.id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 131, in _register_element_id
    raise StreamlitDuplicateElementId(element_type)
streamlit.errors.StreamlitDuplicateElementId: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
2025/03/01 03:47:59 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 03:48:00 PM INFO:get_git_version executed successfully
2025/03/01 03:48:01 PM INFO:get_git_version executed successfully
2025/03/01 03:48:01 PM INFO:get_git_version executed successfully
2025/03/01 03:48:01 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:48:01 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:48:01 PM INFO:Setting up the package
2025/03/01 03:48:01 PM INFO:Setting up the package
2025/03/01 03:48:01 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:48:01 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:48:01 PM INFO:get_git_version executed successfully
2025/03/01 03:48:01 PM INFO:get_git_version executed successfully
2025/03/01 03:48:01 PM INFO:Version: v20.117
2025/03/01 03:48:01 PM INFO:Version: v20.117
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:init_state_var executed successfully
2025/03/01 03:48:01 PM INFO:Session_state variables initialized
2025/03/01 03:48:01 PM INFO:Session_state variables initialized
2025/03/01 03:48:01 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:48:01 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:48:01 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:48:01 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:48:01 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:48:01 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:48:01 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:48:01 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:48:01 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:48:01 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:48:01 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:48:01 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:48:01 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:48:01 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:48:01 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:48:01 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:48:01 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:48:01 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:48:01 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:48:01 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:48:01 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:48:01 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:48:01 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:48:01 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:48:01 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:48:01 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:48:01 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:48:01 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:48:01 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:48:01 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:48:01 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:48:01 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:48:01 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:48:01 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:48:01 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:48:01 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:48:01 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:48:01 PM INFO:perc_target: 0.5
2025/03/01 03:48:01 PM INFO:perc_target: 0.5
2025/03/01 03:48:01 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:48:01 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:48:01 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:48:01 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:48:01 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:48:01 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:48:01 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:48:01 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:48:01 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:48:01 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:48:01 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:48:01 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:48:01 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:48:01 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:48:01 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:48:01 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:48:01 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:48:01 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:48:01 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:48:01 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:48:01 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:48:01 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:48:01 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:48:01 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:48:01 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:48:01 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:48:01 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:48:01 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:48:01 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:48:01 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:48:01 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:48:01 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:48:01 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:48:01 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:48:01 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:48:01 PM INFO:Session state Setup complete
2025/03/01 03:48:01 PM INFO:Session state Setup complete
2025/03/01 03:48:01 PM INFO:initialize_session_state executed successfully
2025/03/01 03:48:01 PM INFO:initialize_session_state executed successfully
2025/03/01 03:48:01 PM INFO:Package setup complete
2025/03/01 03:48:01 PM INFO:Package setup complete
2025/03/01 03:48:01 PM INFO:get_git_version executed successfully
2025/03/01 03:48:01 PM INFO:get_git_version executed successfully
2025/03/01 03:48:01 PM INFO:get_git_version executed successfully
2025/03/01 03:48:01 PM INFO:App Version: v20.132
2025/03/01 03:48:01 PM INFO:App Version: v20.132
2025/03/01 03:48:01 PM INFO:Switched to page: Head Line Figures
2025/03/01 03:48:01 PM INFO:Switched to page: Introduction
2025/03/01 03:48:01 PM ERROR:Error in pagesetup: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 30, in hlf_body
    unique_donors = get_donors_ct(filtered_df)
  File "H:\VScode\dashboard_demo-1\components\calculations.py", line 97, in get_donors_ct
    return df["DonorId"].nunique()
TypeError: 'NoneType' object is not subscriptable
2025/03/01 03:48:01 PM INFO:pagesetup executed successfully
2025/03/01 03:48:01 PM CRITICAL:Menu setup crashed: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\headlinefigures.py", line 30, in hlf_body
    unique_donors = get_donors_ct(filtered_df)
  File "H:\VScode\dashboard_demo-1\components\calculations.py", line 97, in get_donors_ct
    return df["DonorId"].nunique()
TypeError: 'NoneType' object is not subscriptable
2025/03/01 03:48:01 PM INFO:No data found in session state, running firstload()
2025/03/01 03:48:03 PM INFO:map_filename: regentity_map_fname
2025/03/01 03:48:03 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:48:03 PM INFO:Dedupe by file
2025/03/01 03:48:03 PM INFO:Dedupe by file, shape: (65278, 34)
2025/03/01 03:48:03 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:48:03 PM INFO:map_filename: donor_map_fname
2025/03/01 03:48:03 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:48:03 PM INFO:Dedupe by file
2025/03/01 03:48:03 PM INFO:Dedupe by file, shape: (65278, 40)
2025/03/01 03:48:03 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:48:03 PM INFO:Data cleanup completed, shape: (65278, 40)
2025/03/01 03:48:03 PM INFO:raw_data_cleanup executed successfully
2025/03/01 03:48:05 PM INFO:load_raw_data executed successfully
2025/03/01 03:48:05 PM INFO:get_raw_data executed successfully
2025/03/01 03:48:05 PM INFO:load_data_to_session executed successfully
2025/03/01 03:48:08 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 03:48:08 PM INFO:map_mp_to_party executed successfully
2025/03/01 03:48:08 PM INFO:Election Dates not found in session, loading now.
2025/03/01 03:48:08 PM INFO:Election Dates Loaded Successfully.
2025/03/01 03:48:08 PM INFO:load_election_dates executed successfully
2025/03/01 03:48:32 PM INFO:Cleaned Data completed, shape: (78745, 58)
2025/03/01 03:48:32 PM INFO:load_cleaned_data executed successfully
2025/03/01 03:48:32 PM INFO:get_cleaned_data executed successfully
2025/03/01 03:48:32 PM INFO:load_data_to_session executed successfully
2025/03/01 03:48:32 PM INFO:load_entity_summary_data executed successfully
2025/03/01 03:48:32 PM INFO:get_party_summary_data executed successfully
2025/03/01 03:48:32 PM INFO:load_data_to_session executed successfully
2025/03/01 03:48:32 PM INFO:load_donorList_data executed successfully
2025/03/01 03:48:32 PM INFO:get_donor_data executed successfully
2025/03/01 03:48:32 PM INFO:load_data_to_session executed successfully
2025/03/01 03:48:32 PM INFO:load_regulated_entity_data executed successfully
2025/03/01 03:48:32 PM INFO:get_regentity_data executed successfully
2025/03/01 03:48:32 PM INFO:load_data_to_session executed successfully
2025/03/01 03:48:32 PM INFO:firstload executed successfully
2025/03/01 03:48:36 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:48:36 PM INFO:Setting up the package
2025/03/01 03:48:36 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:48:36 PM INFO:get_git_version executed successfully
2025/03/01 03:48:36 PM INFO:Version: v20.117
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:init_state_var executed successfully
2025/03/01 03:48:36 PM INFO:Session_state variables initialized
2025/03/01 03:48:36 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:48:36 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:48:36 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:48:36 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:48:36 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:48:36 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:48:36 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:48:36 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:48:36 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:48:36 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:48:36 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:48:36 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:48:36 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:48:36 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:48:36 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:48:36 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:48:36 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:48:36 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:48:36 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:48:36 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:48:36 PM INFO:perc_target: 0.5
2025/03/01 03:48:36 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:48:36 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:48:36 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:48:36 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:48:36 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:48:36 PM INFO:menu_selection: {'title': 'Head Line Figures', 'function': <function hlf_body at 0x000001BDF4176F80>}
2025/03/01 03:48:36 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:48:36 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:48:36 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:48:36 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:48:36 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:48:36 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:48:36 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:48:36 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:48:36 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:48:36 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:48:36 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:48:36 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:48:36 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:48:36 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:48:36 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:48:36 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:48:36 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:48:36 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:48:36 PM INFO:Session state Setup complete
2025/03/01 03:48:36 PM INFO:initialize_session_state executed successfully
2025/03/01 03:48:36 PM INFO:Package setup complete
2025/03/01 03:48:36 PM INFO:get_git_version executed successfully
2025/03/01 03:48:36 PM INFO:App Version: v20.132
2025/03/01 03:48:36 PM INFO:Switched to page: Head Line Figures
2025/03/01 03:48:37 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:48:37 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:48:37 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:48:37 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:48:37 PM INFO:plot_pie_chart executed successfully
2025/03/01 03:48:37 PM INFO:plot_pie_chart executed successfully
2025/03/01 03:48:37 PM INFO:pagesetup executed successfully
2025/03/01 03:48:37 PM INFO:Data already loaded in session state.
2025/03/01 03:48:46 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:48:46 PM INFO:Setting up the package
2025/03/01 03:48:46 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:48:46 PM INFO:get_git_version executed successfully
2025/03/01 03:48:46 PM INFO:Version: v20.117
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:init_state_var executed successfully
2025/03/01 03:48:46 PM INFO:Session_state variables initialized
2025/03/01 03:48:46 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:48:46 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:48:46 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:48:46 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:48:46 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:48:46 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:48:46 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:48:46 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:48:46 PM INFO:year_slider_value_by_year_n_entity: (2001, 2019)
2025/03/01 03:48:46 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:48:46 PM INFO:year_slider_value_by_year_n_type: (2001, 2019)
2025/03/01 03:48:46 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:48:46 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:48:46 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:48:46 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:48:46 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:48:46 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:48:46 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:48:46 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:48:46 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:48:46 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:48:46 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:48:46 PM INFO:perc_target: 0.5
2025/03/01 03:48:46 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:48:46 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:48:46 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:48:46 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:48:46 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:48:46 PM INFO:year_slider_dons_by_year_n_entity: (2001, 2019)
2025/03/01 03:48:46 PM INFO:menu_selection: {'title': 'Bequeths', 'function': <function mod_bequeths_page at 0x000001BDF4599BD0>}
2025/03/01 03:48:46 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:48:46 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:48:46 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:48:46 PM INFO:year_slider_dons_by_year_n_type: (2001, 2019)
2025/03/01 03:48:46 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:48:46 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:48:46 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:48:46 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:48:46 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:48:46 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:48:46 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:48:46 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:48:46 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:48:46 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:48:46 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:48:46 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:48:46 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:48:46 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:48:46 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:48:46 PM INFO:Session state Setup complete
2025/03/01 03:48:46 PM INFO:initialize_session_state executed successfully
2025/03/01 03:48:46 PM INFO:Package setup complete
2025/03/01 03:48:46 PM INFO:get_git_version executed successfully
2025/03/01 03:48:46 PM INFO:App Version: v20.132
2025/03/01 03:48:46 PM INFO:Switched to page: Bequeths
2025/03/01 03:48:46 PM INFO:load_and_filter_data executed successfully
2025/03/01 03:48:47 PM INFO:display_summary_statistics executed successfully
2025/03/01 03:48:47 PM INFO:display_textual_insights executed successfully
2025/03/01 03:48:47 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:48:47 PM ERROR:Error in plot_bar_line_by_year: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 148, in plot_bar_line_by_year
    st.plotly_chart(fig)
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\plotly_chart.py", line 509, in plotly_chart
    plotly_chart_proto.id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 131, in _register_element_id
    raise StreamlitDuplicateElementId(element_type)
streamlit.errors.StreamlitDuplicateElementId: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
2025/03/01 03:48:47 PM ERROR:Error in display_visualizations: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 114, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 148, in plot_bar_line_by_year
    st.plotly_chart(fig)
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\plotly_chart.py", line 509, in plotly_chart
    plotly_chart_proto.id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 131, in _register_element_id
    raise StreamlitDuplicateElementId(element_type)
streamlit.errors.StreamlitDuplicateElementId: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
2025/03/01 03:48:47 PM ERROR:Error in display_data_page: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 114, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 148, in plot_bar_line_by_year
    st.plotly_chart(fig)
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\plotly_chart.py", line 509, in plotly_chart
    plotly_chart_proto.id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 131, in _register_element_id
    raise StreamlitDuplicateElementId(element_type)
streamlit.errors.StreamlitDuplicateElementId: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
2025/03/01 03:48:47 PM ERROR:Error in pagesetup: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 54, in mod_bequeths_page
    display_data_page(filter_key="Bequests_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 114, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 148, in plot_bar_line_by_year
    st.plotly_chart(fig)
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\plotly_chart.py", line 509, in plotly_chart
    plotly_chart_proto.id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 131, in _register_element_id
    raise StreamlitDuplicateElementId(element_type)
streamlit.errors.StreamlitDuplicateElementId: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
2025/03/01 03:48:47 PM CRITICAL:Menu setup crashed: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 54, in mod_bequeths_page
    display_data_page(filter_key="Bequests_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 46, in display_data_page
    display_visualizations(cleaned_c_d_df,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 114, in display_visualizations
    plot_bar_line_by_year(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\Visualisations.py", line 148, in plot_bar_line_by_year
    st.plotly_chart(fig)
  File "H:\python310\lib\site-packages\streamlit\runtime\metrics_util.py", line 410, in wrapped_func
    result = non_optional_func(*args, **kwargs)
  File "H:\python310\lib\site-packages\streamlit\elements\plotly_chart.py", line 509, in plotly_chart
    plotly_chart_proto.id = compute_and_register_element_id(
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 225, in compute_and_register_element_id
    _register_element_id(ctx, element_type, element_id)
  File "H:\python310\lib\site-packages\streamlit\elements\lib\utils.py", line 131, in _register_element_id
    raise StreamlitDuplicateElementId(element_type)
streamlit.errors.StreamlitDuplicateElementId: There are multiple `plotly_chart` elements with the same auto-generated ID. When this element is created, it is assigned an internal ID based on the element type and provided parameters. Multiple elements with the same type and parameters will cause this error.

To fix this error, please pass a unique `key` argument to the `plotly_chart` element.
2025/03/01 03:53:18 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 03:53:18 PM INFO:get_git_version executed successfully
2025/03/01 03:53:19 PM INFO:get_git_version executed successfully
2025/03/01 03:53:19 PM INFO:get_git_version executed successfully
2025/03/01 03:53:19 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:53:19 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:53:19 PM INFO:Setting up the package
2025/03/01 03:53:19 PM INFO:Setting up the package
2025/03/01 03:53:19 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:53:19 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:53:19 PM INFO:get_git_version executed successfully
2025/03/01 03:53:19 PM INFO:get_git_version executed successfully
2025/03/01 03:53:19 PM INFO:Version: v20.117
2025/03/01 03:53:19 PM INFO:Version: v20.117
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:Session_state variables initialized
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:perc_target: 0.5
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:53:19 PM INFO:init_state_var executed successfully
2025/03/01 03:53:19 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:53:19 PM INFO:Session_state variables initialized
2025/03/01 03:53:19 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:53:19 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:53:19 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:53:19 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:53:19 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:53:19 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:53:19 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:53:19 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:53:19 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:53:19 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:53:19 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:53:19 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:53:19 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:53:19 PM INFO:perc_target: 0.5
2025/03/01 03:53:19 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:53:19 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:53:19 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:53:19 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:53:19 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:53:19 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:53:19 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:53:19 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:53:19 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:53:19 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:53:19 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:53:19 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:53:19 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:53:19 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:53:19 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:53:19 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:53:19 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:53:19 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:53:19 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:53:19 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:53:19 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:53:19 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:53:19 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:53:19 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:53:19 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:53:19 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:53:19 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:53:19 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:53:19 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:53:19 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:53:19 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:53:19 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:53:19 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:53:19 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:53:19 PM INFO:Session state Setup complete
2025/03/01 03:53:19 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:53:19 PM INFO:initialize_session_state executed successfully
2025/03/01 03:53:19 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:53:19 PM INFO:Package setup complete
2025/03/01 03:53:19 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:53:19 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:53:19 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:53:19 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:53:19 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:53:19 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:53:19 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:53:19 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:53:19 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:53:19 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:53:19 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:53:19 PM INFO:Session state Setup complete
2025/03/01 03:53:19 PM INFO:initialize_session_state executed successfully
2025/03/01 03:53:19 PM INFO:Package setup complete
2025/03/01 03:53:20 PM INFO:get_git_version executed successfully
2025/03/01 03:53:20 PM INFO:get_git_version executed successfully
2025/03/01 03:53:20 PM INFO:get_git_version executed successfully
2025/03/01 03:53:20 PM INFO:App Version: v20.132
2025/03/01 03:53:20 PM INFO:App Version: v20.132
2025/03/01 03:53:20 PM INFO:Switched to page: Bequeths
2025/03/01 03:53:20 PM INFO:Switched to page: Introduction
2025/03/01 03:53:20 PM ERROR:Error in load_and_filter_data: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:53:20 PM INFO:pagesetup executed successfully
2025/03/01 03:53:20 PM ERROR:Error in display_data_page: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:53:20 PM ERROR:Error in pagesetup: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 54, in mod_bequeths_page
    display_data_page(filter_key="Bequests_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:53:20 PM INFO:No data found in session state, running firstload()
2025/03/01 03:53:20 PM CRITICAL:Menu setup crashed: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 54, in mod_bequeths_page
    display_data_page(filter_key="Bequests_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page.py", line 20, in display_data_page
    cleaned_c_d_df) = load_and_filter_data(filter_key,
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 26, in load_and_filter_data
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 03:53:21 PM INFO:map_filename: regentity_map_fname
2025/03/01 03:53:21 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:53:21 PM INFO:Dedupe by file
2025/03/01 03:53:21 PM INFO:Dedupe by file, shape: (65278, 34)
2025/03/01 03:53:21 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:53:21 PM INFO:map_filename: donor_map_fname
2025/03/01 03:53:21 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:53:21 PM INFO:Dedupe by file
2025/03/01 03:53:22 PM INFO:Dedupe by file, shape: (65278, 40)
2025/03/01 03:53:22 PM INFO:dedupe_entity_file executed successfully
2025/03/01 03:53:22 PM INFO:Data cleanup completed, shape: (65278, 40)
2025/03/01 03:53:22 PM INFO:raw_data_cleanup executed successfully
2025/03/01 03:53:23 PM INFO:load_raw_data executed successfully
2025/03/01 03:53:23 PM INFO:get_raw_data executed successfully
2025/03/01 03:53:24 PM INFO:load_data_to_session executed successfully
2025/03/01 03:53:27 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 03:53:27 PM INFO:map_mp_to_party executed successfully
2025/03/01 03:53:27 PM INFO:Election Dates not found in session, loading now.
2025/03/01 03:53:27 PM INFO:Election Dates Loaded Successfully.
2025/03/01 03:53:27 PM INFO:load_election_dates executed successfully
2025/03/01 03:53:52 PM INFO:Cleaned Data completed, shape: (78745, 58)
2025/03/01 03:53:52 PM INFO:load_cleaned_data executed successfully
2025/03/01 03:53:52 PM INFO:get_cleaned_data executed successfully
2025/03/01 03:53:52 PM INFO:load_data_to_session executed successfully
2025/03/01 03:53:52 PM INFO:load_entity_summary_data executed successfully
2025/03/01 03:53:52 PM INFO:get_party_summary_data executed successfully
2025/03/01 03:53:52 PM INFO:load_data_to_session executed successfully
2025/03/01 03:53:52 PM INFO:load_donorList_data executed successfully
2025/03/01 03:53:52 PM INFO:get_donor_data executed successfully
2025/03/01 03:53:52 PM INFO:load_data_to_session executed successfully
2025/03/01 03:53:52 PM INFO:load_regulated_entity_data executed successfully
2025/03/01 03:53:52 PM INFO:get_regentity_data executed successfully
2025/03/01 03:53:52 PM INFO:load_data_to_session executed successfully
2025/03/01 03:53:52 PM INFO:firstload executed successfully
2025/03/01 03:55:15 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:55:15 PM INFO:Setting up the package
2025/03/01 03:55:15 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:55:15 PM INFO:get_git_version executed successfully
2025/03/01 03:55:15 PM INFO:Version: v20.117
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:init_state_var executed successfully
2025/03/01 03:55:15 PM INFO:Session_state variables initialized
2025/03/01 03:55:15 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:55:15 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:55:15 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:55:15 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:55:15 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:55:15 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:55:15 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:55:15 PM INFO:perc_target: 0.5
2025/03/01 03:55:15 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:55:15 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:55:15 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:55:15 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:55:15 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:55:15 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:55:15 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:55:15 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:55:15 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:55:15 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:55:15 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:55:15 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:55:15 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:55:15 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:55:15 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:55:15 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:55:15 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:55:15 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:55:15 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:55:15 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:55:15 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:55:15 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:55:15 PM INFO:menu_selection: {'title': 'Head Line Figures', 'function': <function hlf_body at 0x0000020ACC946CB0>}
2025/03/01 03:55:15 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:55:15 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:55:15 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:55:15 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:55:15 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:55:15 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:55:15 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:55:15 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:55:15 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:55:15 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:55:15 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:55:15 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:55:15 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:55:15 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:55:15 PM INFO:Session state Setup complete
2025/03/01 03:55:15 PM INFO:initialize_session_state executed successfully
2025/03/01 03:55:15 PM INFO:Package setup complete
2025/03/01 03:55:15 PM INFO:get_git_version executed successfully
2025/03/01 03:55:15 PM INFO:App Version: v20.132
2025/03/01 03:55:15 PM INFO:Switched to page: Head Line Figures
2025/03/01 03:55:16 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:55:16 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:55:16 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:55:16 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:55:17 PM INFO:plot_pie_chart executed successfully
2025/03/01 03:55:17 PM INFO:plot_pie_chart executed successfully
2025/03/01 03:55:17 PM INFO:pagesetup executed successfully
2025/03/01 03:55:17 PM INFO:Data already loaded in session state.
2025/03/01 03:56:19 PM INFO:Logging is set up correctly! Current log level: DEBUG
2025/03/01 03:56:19 PM INFO:get_git_version executed successfully
2025/03/01 03:56:19 PM INFO:get_git_version executed successfully
2025/03/01 03:56:19 PM INFO:get_git_version executed successfully
2025/03/01 03:56:19 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:56:19 PM INFO:Setting up the package
2025/03/01 03:56:19 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:56:19 PM INFO:get_git_version executed successfully
2025/03/01 03:56:19 PM INFO:Version: v20.117
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:init_state_var executed successfully
2025/03/01 03:56:19 PM INFO:Session_state variables initialized
2025/03/01 03:56:19 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:56:19 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:56:19 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:56:19 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:56:19 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:56:19 PM INFO:year_slider_value_by_year_n_type: (2001, 2019)
2025/03/01 03:56:19 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:56:19 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:56:19 PM INFO:perc_target: 0.5
2025/03/01 03:56:19 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:56:19 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:56:19 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:56:19 PM INFO:year_slider_dons_by_year_n_type: (2001, 2019)
2025/03/01 03:56:19 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:56:19 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:56:19 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:56:19 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:56:19 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:56:20 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:56:20 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:56:20 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:56:20 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:56:20 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:56:20 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:56:20 PM INFO:year_slider_value_by_year_n_entity: (2001, 2019)
2025/03/01 03:56:20 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:56:20 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:56:20 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:56:20 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:56:20 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:56:20 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:56:20 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:56:20 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:56:20 PM INFO:menu_selection: {'title': 'Corporate Donations', 'function': <function mod_corporate_donations_page at 0x0000020ACCD75AB0>}
2025/03/01 03:56:20 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:56:20 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:56:20 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:56:20 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:56:20 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:56:20 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:56:20 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:56:20 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:56:20 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:56:20 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:56:20 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:56:20 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:56:20 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:56:20 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:56:20 PM INFO:year_slider_dons_by_year_n_entity: (2001, 2019)
2025/03/01 03:56:20 PM INFO:Session state Setup complete
2025/03/01 03:56:20 PM INFO:initialize_session_state executed successfully
2025/03/01 03:56:20 PM INFO:Package setup complete
2025/03/01 03:56:20 PM INFO:get_git_version executed successfully
2025/03/01 03:56:20 PM INFO:get_git_version executed successfully
2025/03/01 03:56:20 PM INFO:App Version: v20.132
2025/03/01 03:56:20 PM INFO:Switched to page: Corporate Donations
2025/03/01 03:56:20 PM INFO:load_and_filter_data executed successfully
2025/03/01 03:56:20 PM INFO:display_summary_statistics executed successfully
2025/03/01 03:56:20 PM INFO:display_textual_insights executed successfully
2025/03/01 03:56:20 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:56:20 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:56:20 PM INFO:display_visualizations executed successfully
2025/03/01 03:56:20 PM INFO:display_data_page executed successfully
2025/03/01 03:56:20 PM INFO:pagesetup executed successfully
2025/03/01 03:56:20 PM INFO:Data already loaded in session state.
2025/03/01 03:56:29 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:56:29 PM INFO:Setting up the package
2025/03/01 03:56:29 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:56:29 PM INFO:get_git_version executed successfully
2025/03/01 03:56:29 PM INFO:Version: v20.117
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:init_state_var executed successfully
2025/03/01 03:56:29 PM INFO:Session_state variables initialized
2025/03/01 03:56:29 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:56:29 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:56:29 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:56:29 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:56:29 PM INFO:year_slider_leftfiltered_keytarget_label_vis: (2001, 2019)
2025/03/01 03:56:29 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:56:29 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:56:29 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:56:29 PM INFO:perc_target: 0.5
2025/03/01 03:56:29 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:56:29 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:56:29 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:56:29 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:56:29 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:56:29 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:56:29 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:56:29 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:56:29 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:56:29 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:56:29 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:56:29 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:56:29 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:56:29 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:56:29 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:56:29 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:56:29 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:56:29 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:56:29 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:56:29 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:56:29 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:56:29 PM INFO:year_slider_rightfiltered_keytarget_label_vis: (2001, 2019)
2025/03/01 03:56:29 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:56:29 PM INFO:menu_selection: {'title': 'Sponsorships', 'function': <function mod_sponsorship_page at 0x0000020AD0781EA0>}
2025/03/01 03:56:29 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:56:29 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:56:29 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:56:29 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:56:29 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:56:29 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:56:29 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:56:29 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:56:29 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:56:29 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:56:29 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:56:29 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:56:29 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:56:29 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:56:29 PM INFO:Session state Setup complete
2025/03/01 03:56:29 PM INFO:initialize_session_state executed successfully
2025/03/01 03:56:29 PM INFO:Package setup complete
2025/03/01 03:56:29 PM INFO:get_git_version executed successfully
2025/03/01 03:56:29 PM INFO:App Version: v20.132
2025/03/01 03:56:29 PM INFO:Switched to page: Sponsorships
2025/03/01 03:56:29 PM INFO:load_and_filter_data executed successfully
2025/03/01 03:56:29 PM INFO:display_summary_statistics executed successfully
2025/03/01 03:56:29 PM INFO:display_textual_insights executed successfully
2025/03/01 03:56:29 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:56:29 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:56:29 PM INFO:display_visualizations executed successfully
2025/03/01 03:56:29 PM INFO:display_data_page executed successfully
2025/03/01 03:56:29 PM INFO:pagesetup executed successfully
2025/03/01 03:56:29 PM INFO:Data already loaded in session state.
2025/03/01 03:56:41 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:56:41 PM INFO:Setting up the package
2025/03/01 03:56:41 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:56:41 PM INFO:get_git_version executed successfully
2025/03/01 03:56:41 PM INFO:Version: v20.117
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:init_state_var executed successfully
2025/03/01 03:56:41 PM INFO:Session_state variables initialized
2025/03/01 03:56:41 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:56:41 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:56:41 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:56:41 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:56:41 PM INFO:year_slider_leftfiltered_keytarget_label_vis: (2001, 2019)
2025/03/01 03:56:41 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:56:41 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:56:41 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:56:41 PM INFO:perc_target: 0.5
2025/03/01 03:56:41 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:56:41 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:56:41 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:56:41 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:56:41 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:56:41 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:56:41 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:56:41 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:56:41 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:56:41 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:56:41 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:56:41 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:56:41 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:56:41 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:56:41 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:56:41 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:56:41 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:56:41 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:56:41 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:56:41 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:56:41 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:56:41 PM INFO:year_slider_rightfiltered_keytarget_label_vis: (2001, 2019)
2025/03/01 03:56:41 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:56:41 PM INFO:menu_selection: {'title': 'Paid Visits', 'function': <function mod_visits_page at 0x0000020AD0780820>}
2025/03/01 03:56:41 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:56:41 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:56:41 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:56:41 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:56:41 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:56:41 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:56:41 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:56:41 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:56:41 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:56:41 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:56:41 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:56:41 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:56:41 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:56:41 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:56:41 PM INFO:Session state Setup complete
2025/03/01 03:56:41 PM INFO:initialize_session_state executed successfully
2025/03/01 03:56:41 PM INFO:Package setup complete
2025/03/01 03:56:41 PM INFO:get_git_version executed successfully
2025/03/01 03:56:41 PM INFO:App Version: v20.132
2025/03/01 03:56:41 PM INFO:Switched to page: Paid Visits
2025/03/01 03:56:41 PM INFO:load_and_filter_data executed successfully
2025/03/01 03:56:41 PM INFO:display_summary_statistics executed successfully
2025/03/01 03:56:41 PM INFO:display_textual_insights executed successfully
2025/03/01 03:56:41 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:56:41 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:56:41 PM INFO:display_visualizations executed successfully
2025/03/01 03:56:41 PM INFO:display_data_page executed successfully
2025/03/01 03:56:41 PM INFO:pagesetup executed successfully
2025/03/01 03:56:41 PM INFO:Data already loaded in session state.
2025/03/01 03:56:44 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:56:44 PM INFO:Setting up the package
2025/03/01 03:56:44 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:56:44 PM INFO:get_git_version executed successfully
2025/03/01 03:56:44 PM INFO:Version: v20.117
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:init_state_var executed successfully
2025/03/01 03:56:44 PM INFO:Session_state variables initialized
2025/03/01 03:56:44 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:56:44 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:56:44 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:56:44 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:56:44 PM INFO:year_slider_leftfiltered_keytarget_label_vis: (2001, 2019)
2025/03/01 03:56:44 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:56:44 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:56:44 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:56:44 PM INFO:perc_target: 0.5
2025/03/01 03:56:44 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:56:44 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:56:44 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:56:44 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:56:44 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:56:44 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:56:44 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:56:44 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:56:44 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:56:44 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:56:44 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:56:44 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:56:44 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:56:44 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:56:44 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:56:44 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:56:44 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:56:44 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:56:44 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:56:44 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:56:44 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:56:44 PM INFO:year_slider_rightfiltered_keytarget_label_vis: (2001, 2019)
2025/03/01 03:56:44 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:56:44 PM INFO:menu_selection: {'title': 'Dubious Donors', 'function': <function mod_dubious_donors_page at 0x0000020AD0782710>}
2025/03/01 03:56:44 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:56:44 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:56:44 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:56:44 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:56:44 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:56:44 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:56:44 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:56:44 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:56:44 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:56:44 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:56:44 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:56:44 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:56:44 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:56:44 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:56:44 PM INFO:Session state Setup complete
2025/03/01 03:56:44 PM INFO:initialize_session_state executed successfully
2025/03/01 03:56:44 PM INFO:Package setup complete
2025/03/01 03:56:44 PM INFO:get_git_version executed successfully
2025/03/01 03:56:44 PM INFO:App Version: v20.132
2025/03/01 03:56:44 PM INFO:Switched to page: Dubious Donors
2025/03/01 03:56:44 PM INFO:load_and_filter_data executed successfully
2025/03/01 03:56:44 PM INFO:display_summary_statistics executed successfully
2025/03/01 03:56:44 PM INFO:display_textual_insights executed successfully
2025/03/01 03:56:45 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:56:45 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:56:45 PM INFO:display_visualizations executed successfully
2025/03/01 03:56:45 PM INFO:display_data_page executed successfully
2025/03/01 03:56:45 PM INFO:pagesetup executed successfully
2025/03/01 03:56:45 PM INFO:Data already loaded in session state.
2025/03/01 03:56:50 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:56:50 PM INFO:Setting up the package
2025/03/01 03:56:50 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:56:50 PM INFO:get_git_version executed successfully
2025/03/01 03:56:50 PM INFO:Version: v20.117
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:init_state_var executed successfully
2025/03/01 03:56:50 PM INFO:Session_state variables initialized
2025/03/01 03:56:50 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:56:50 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:56:50 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:56:50 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:56:50 PM INFO:year_slider_leftfiltered_keytarget_label_vis: (2001, 2019)
2025/03/01 03:56:50 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:56:50 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:56:50 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:56:50 PM INFO:perc_target: 0.5
2025/03/01 03:56:50 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:56:50 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:56:50 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:56:50 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:56:50 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:56:50 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:56:50 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:56:50 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:56:50 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:56:50 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:56:50 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:56:50 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:56:50 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:56:50 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:56:50 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:56:50 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:56:50 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:56:50 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:56:50 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:56:50 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:56:50 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:56:50 PM INFO:year_slider_rightfiltered_keytarget_label_vis: (2001, 2019)
2025/03/01 03:56:50 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:56:50 PM INFO:menu_selection: {'title': 'Dubious Donations', 'function': <function mod_dubious_donations_page at 0x0000020AD0782290>}
2025/03/01 03:56:50 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:56:50 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:56:50 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:56:50 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:56:50 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:56:50 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:56:50 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:56:50 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:56:50 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:56:50 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:56:50 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:56:50 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:56:50 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:56:50 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:56:50 PM INFO:Session state Setup complete
2025/03/01 03:56:50 PM INFO:initialize_session_state executed successfully
2025/03/01 03:56:50 PM INFO:Package setup complete
2025/03/01 03:56:50 PM INFO:get_git_version executed successfully
2025/03/01 03:56:50 PM INFO:App Version: v20.132
2025/03/01 03:56:50 PM INFO:Switched to page: Dubious Donations
2025/03/01 03:56:50 PM INFO:load_and_filter_data executed successfully
2025/03/01 03:56:51 PM INFO:display_summary_statistics executed successfully
2025/03/01 03:56:51 PM INFO:display_textual_insights executed successfully
2025/03/01 03:56:51 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:56:51 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:56:51 PM INFO:display_visualizations executed successfully
2025/03/01 03:56:51 PM INFO:display_data_page executed successfully
2025/03/01 03:56:51 PM INFO:pagesetup executed successfully
2025/03/01 03:56:51 PM INFO:Data already loaded in session state.
2025/03/01 03:56:57 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:56:57 PM INFO:Setting up the package
2025/03/01 03:56:57 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:56:57 PM INFO:get_git_version executed successfully
2025/03/01 03:56:57 PM INFO:Version: v20.117
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:init_state_var executed successfully
2025/03/01 03:56:57 PM INFO:Session_state variables initialized
2025/03/01 03:56:57 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:56:57 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:56:57 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:56:57 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:56:57 PM INFO:year_slider_leftfiltered_keytarget_label_vis: (2001, 2019)
2025/03/01 03:56:57 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:56:57 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:56:57 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:56:57 PM INFO:perc_target: 0.5
2025/03/01 03:56:57 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:56:57 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:56:57 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:56:57 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:56:57 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:56:57 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:56:57 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:56:57 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:56:57 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:56:57 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:56:57 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:56:57 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:56:57 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:56:57 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:56:57 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:56:57 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:56:57 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:56:57 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:56:57 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:56:57 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:56:57 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:56:57 PM INFO:year_slider_rightfiltered_keytarget_label_vis: (2001, 2019)
2025/03/01 03:56:57 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:56:57 PM INFO:menu_selection: {'title': 'Corporate Donations per Entity', 'function': <function mod_corporate_donations_per_entity_page at 0x0000020AD0782440>}
2025/03/01 03:56:57 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:56:57 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:56:57 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:56:57 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:56:57 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:56:57 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:56:57 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:56:57 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:56:57 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:56:57 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:56:57 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:56:57 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:56:57 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:56:57 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:56:57 PM INFO:Session state Setup complete
2025/03/01 03:56:57 PM INFO:initialize_session_state executed successfully
2025/03/01 03:56:57 PM INFO:Package setup complete
2025/03/01 03:56:57 PM INFO:get_git_version executed successfully
2025/03/01 03:56:57 PM INFO:App Version: v20.132
2025/03/01 03:56:57 PM INFO:Switched to page: Corporate Donations per Entity
2025/03/01 03:56:57 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 03:56:57 PM INFO:display_summary_statistics executed successfully
2025/03/01 03:56:57 PM INFO:display_textual_insights executed successfully
2025/03/01 03:56:58 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:56:58 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:56:58 PM INFO:display_visualizations executed successfully
2025/03/01 03:56:58 PM INFO:display_per_group_data_page executed successfully
2025/03/01 03:56:58 PM INFO:pagesetup executed successfully
2025/03/01 03:56:58 PM INFO:Data already loaded in session state.
2025/03/01 03:57:05 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:57:05 PM INFO:Setting up the package
2025/03/01 03:57:05 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:57:05 PM INFO:get_git_version executed successfully
2025/03/01 03:57:05 PM INFO:Version: v20.117
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:init_state_var executed successfully
2025/03/01 03:57:05 PM INFO:Session_state variables initialized
2025/03/01 03:57:05 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:57:05 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:57:05 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:57:05 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:57:05 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:57:05 PM INFO:year_slider_leftfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 03:57:05 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:57:05 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:57:05 PM INFO:perc_target: 0.5
2025/03/01 03:57:05 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:57:05 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:57:05 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:57:05 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:57:05 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:57:05 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:57:05 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:57:05 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:57:05 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:57:05 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:57:05 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:57:05 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:57:05 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:57:05 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:57:05 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:57:05 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:57:05 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:57:05 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:57:05 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:57:05 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:57:05 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:57:05 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:57:05 PM INFO:year_slider_rightfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 03:57:05 PM INFO:menu_selection: {'title': 'Sponsorship per Entity ', 'function': <function mod_sponsorships_per_entity_page at 0x0000020AD0781F30>}
2025/03/01 03:57:05 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:57:05 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:57:05 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:57:05 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:57:05 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:57:05 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:57:05 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:57:05 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:57:05 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:57:05 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:57:05 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:57:05 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:57:05 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:57:05 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:57:05 PM INFO:Session state Setup complete
2025/03/01 03:57:05 PM INFO:initialize_session_state executed successfully
2025/03/01 03:57:05 PM INFO:Package setup complete
2025/03/01 03:57:05 PM INFO:get_git_version executed successfully
2025/03/01 03:57:05 PM INFO:App Version: v20.132
2025/03/01 03:57:05 PM INFO:Switched to page: Sponsorship per Entity 
2025/03/01 03:57:05 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 03:57:06 PM INFO:display_summary_statistics executed successfully
2025/03/01 03:57:06 PM INFO:display_textual_insights executed successfully
2025/03/01 03:57:06 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:57:06 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:57:06 PM INFO:display_visualizations executed successfully
2025/03/01 03:57:06 PM INFO:display_per_group_data_page executed successfully
2025/03/01 03:57:06 PM INFO:pagesetup executed successfully
2025/03/01 03:57:06 PM INFO:Data already loaded in session state.
2025/03/01 03:57:09 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:57:09 PM INFO:Setting up the package
2025/03/01 03:57:09 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:57:09 PM INFO:get_git_version executed successfully
2025/03/01 03:57:09 PM INFO:Version: v20.117
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:init_state_var executed successfully
2025/03/01 03:57:09 PM INFO:Session_state variables initialized
2025/03/01 03:57:09 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:57:09 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:57:09 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:57:09 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:57:09 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:57:09 PM INFO:year_slider_leftfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 03:57:09 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:57:09 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:57:09 PM INFO:perc_target: 0.5
2025/03/01 03:57:09 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:57:09 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:57:09 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:57:09 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:57:09 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:57:09 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:57:09 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:57:09 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:57:09 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:57:09 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:57:09 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:57:09 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:57:09 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:57:09 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:57:09 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:57:09 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:57:09 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:57:09 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:57:09 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:57:09 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:57:09 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:57:09 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:57:09 PM INFO:year_slider_rightfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 03:57:09 PM INFO:menu_selection: {'title': 'Paid Visits per Entity', 'function': <function mod_visits_per_regulated_entity at 0x0000020AD0781E10>}
2025/03/01 03:57:09 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:57:09 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:57:09 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:57:09 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:57:09 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:57:09 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:57:09 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:57:09 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:57:09 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:57:09 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:57:09 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:57:09 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:57:09 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:57:10 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:57:10 PM INFO:Session state Setup complete
2025/03/01 03:57:10 PM INFO:initialize_session_state executed successfully
2025/03/01 03:57:10 PM INFO:Package setup complete
2025/03/01 03:57:10 PM INFO:get_git_version executed successfully
2025/03/01 03:57:10 PM INFO:App Version: v20.132
2025/03/01 03:57:10 PM INFO:Switched to page: Paid Visits per Entity
2025/03/01 03:57:10 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 03:57:10 PM INFO:display_summary_statistics executed successfully
2025/03/01 03:57:10 PM INFO:display_textual_insights executed successfully
2025/03/01 03:57:10 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:57:10 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:57:10 PM INFO:display_visualizations executed successfully
2025/03/01 03:57:10 PM INFO:display_per_group_data_page executed successfully
2025/03/01 03:57:10 PM INFO:pagesetup executed successfully
2025/03/01 03:57:10 PM INFO:Data already loaded in session state.
2025/03/01 03:57:13 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:57:13 PM INFO:Setting up the package
2025/03/01 03:57:13 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:57:13 PM INFO:get_git_version executed successfully
2025/03/01 03:57:13 PM INFO:Version: v20.117
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:init_state_var executed successfully
2025/03/01 03:57:13 PM INFO:Session_state variables initialized
2025/03/01 03:57:13 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:57:13 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:57:13 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:57:13 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:57:13 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:57:13 PM INFO:year_slider_leftfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 03:57:13 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:57:13 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:57:13 PM INFO:perc_target: 0.5
2025/03/01 03:57:13 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:57:13 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:57:13 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:57:13 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:57:13 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:57:13 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:57:13 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:57:13 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:57:13 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:57:13 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:57:13 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:57:13 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:57:13 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:57:13 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:57:13 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:57:13 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:57:13 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:57:13 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:57:13 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:57:13 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:57:13 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:57:13 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:57:13 PM INFO:year_slider_rightfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 03:57:13 PM INFO:menu_selection: {'title': 'Donors per Regulated Entity', 'function': <function mod_regulated_entity_per_donors_page at 0x0000020AD07825F0>}
2025/03/01 03:57:13 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:57:13 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:57:13 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:57:13 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:57:13 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:57:13 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:57:13 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:57:13 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:57:13 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:57:13 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:57:13 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:57:13 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:57:13 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:57:13 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:57:13 PM INFO:Session state Setup complete
2025/03/01 03:57:13 PM INFO:initialize_session_state executed successfully
2025/03/01 03:57:13 PM INFO:Package setup complete
2025/03/01 03:57:13 PM INFO:get_git_version executed successfully
2025/03/01 03:57:13 PM INFO:App Version: v20.132
2025/03/01 03:57:13 PM INFO:Switched to page: Donors per Regulated Entity
2025/03/01 03:57:14 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 03:57:14 PM INFO:display_summary_statistics executed successfully
2025/03/01 03:57:14 PM INFO:display_textual_insights executed successfully
2025/03/01 03:57:14 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:57:14 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:57:14 PM INFO:display_visualizations executed successfully
2025/03/01 03:57:14 PM INFO:display_per_group_data_page executed successfully
2025/03/01 03:57:14 PM INFO:pagesetup executed successfully
2025/03/01 03:57:14 PM INFO:Data already loaded in session state.
2025/03/01 03:57:15 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:57:15 PM INFO:Setting up the package
2025/03/01 03:57:15 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:57:15 PM INFO:get_git_version executed successfully
2025/03/01 03:57:15 PM INFO:Version: v20.117
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:init_state_var executed successfully
2025/03/01 03:57:15 PM INFO:Session_state variables initialized
2025/03/01 03:57:15 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:57:15 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:57:15 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:57:15 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:57:15 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:57:15 PM INFO:year_slider_leftfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 03:57:15 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:57:15 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:57:15 PM INFO:perc_target: 0.5
2025/03/01 03:57:15 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:57:15 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:57:15 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:57:15 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:57:15 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:57:15 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:57:15 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:57:15 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:57:15 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:57:15 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:57:15 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:57:15 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:57:15 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:57:15 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:57:15 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:57:15 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:57:15 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:57:15 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:57:15 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:57:15 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:57:15 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:57:15 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:57:15 PM INFO:year_slider_rightfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 03:57:15 PM INFO:menu_selection: {'title': 'Dubious Donors per Regulated Entity', 'function': <function mod_dubious_donors_per_entity_page at 0x0000020AD0782680>}
2025/03/01 03:57:15 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:57:16 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:57:16 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:57:16 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:57:16 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:57:16 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:57:16 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:57:16 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:57:16 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:57:16 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:57:16 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:57:16 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:57:16 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:57:16 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:57:16 PM INFO:Session state Setup complete
2025/03/01 03:57:16 PM INFO:initialize_session_state executed successfully
2025/03/01 03:57:16 PM INFO:Package setup complete
2025/03/01 03:57:16 PM INFO:get_git_version executed successfully
2025/03/01 03:57:16 PM INFO:App Version: v20.132
2025/03/01 03:57:16 PM INFO:Switched to page: Dubious Donors per Regulated Entity
2025/03/01 03:57:16 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 03:57:16 PM INFO:display_summary_statistics executed successfully
2025/03/01 03:57:16 PM INFO:display_textual_insights executed successfully
2025/03/01 03:57:16 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:57:16 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:57:16 PM INFO:display_visualizations executed successfully
2025/03/01 03:57:16 PM INFO:display_per_group_data_page executed successfully
2025/03/01 03:57:16 PM INFO:pagesetup executed successfully
2025/03/01 03:57:16 PM INFO:Data already loaded in session state.
2025/03/01 03:57:22 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:57:22 PM INFO:Setting up the package
2025/03/01 03:57:22 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:57:22 PM INFO:get_git_version executed successfully
2025/03/01 03:57:22 PM INFO:Version: v20.117
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:init_state_var executed successfully
2025/03/01 03:57:22 PM INFO:Session_state variables initialized
2025/03/01 03:57:22 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:57:22 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:57:22 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:57:22 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:57:22 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:57:22 PM INFO:year_slider_leftfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 03:57:22 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:57:22 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:57:22 PM INFO:perc_target: 0.5
2025/03/01 03:57:22 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:57:22 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:57:22 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:57:22 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:57:22 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:57:22 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:57:22 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:57:22 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:57:23 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:57:23 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:57:23 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:57:23 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:57:23 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:57:23 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:57:23 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:57:23 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:57:23 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:57:23 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:57:23 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:57:23 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:57:23 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:57:23 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:57:23 PM INFO:year_slider_rightfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 03:57:23 PM INFO:menu_selection: {'title': 'Dubious Donations per Regulated Entity', 'function': <function mod_dubious_donations_per_entity_page at 0x0000020AD0782320>}
2025/03/01 03:57:23 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:57:23 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:57:23 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:57:23 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:57:23 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:57:23 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:57:23 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:57:23 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:57:23 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:57:23 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:57:23 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:57:23 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:57:23 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:57:23 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:57:23 PM INFO:Session state Setup complete
2025/03/01 03:57:23 PM INFO:initialize_session_state executed successfully
2025/03/01 03:57:23 PM INFO:Package setup complete
2025/03/01 03:57:23 PM INFO:get_git_version executed successfully
2025/03/01 03:57:23 PM INFO:App Version: v20.132
2025/03/01 03:57:23 PM INFO:Switched to page: Dubious Donations per Regulated Entity
2025/03/01 03:57:23 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 03:57:23 PM INFO:display_summary_statistics executed successfully
2025/03/01 03:57:23 PM INFO:display_textual_insights executed successfully
2025/03/01 03:57:23 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:57:23 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:57:23 PM INFO:display_visualizations executed successfully
2025/03/01 03:57:23 PM INFO:display_per_group_data_page executed successfully
2025/03/01 03:57:23 PM INFO:pagesetup executed successfully
2025/03/01 03:57:23 PM INFO:Data already loaded in session state.
2025/03/01 03:57:27 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:57:27 PM INFO:Setting up the package
2025/03/01 03:57:27 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:57:27 PM INFO:get_git_version executed successfully
2025/03/01 03:57:27 PM INFO:Version: v20.117
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:init_state_var executed successfully
2025/03/01 03:57:27 PM INFO:Session_state variables initialized
2025/03/01 03:57:27 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:57:27 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:57:27 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:57:27 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:57:27 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:57:27 PM INFO:year_slider_leftfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 03:57:27 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:57:27 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:57:27 PM INFO:perc_target: 0.5
2025/03/01 03:57:27 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:57:27 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:57:27 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:57:27 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:57:27 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:57:27 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:57:27 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:57:27 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:57:27 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:57:27 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:57:27 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:57:27 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:57:27 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:57:27 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:57:27 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:57:27 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:57:27 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:57:27 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:57:27 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:57:27 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:57:27 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:57:27 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:57:27 PM INFO:year_slider_rightfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 03:57:27 PM INFO:menu_selection: {'title': 'Corporate Donations per Donor', 'function': <function mod_corporate_donations_per_donor_page at 0x0000020AD0782200>}
2025/03/01 03:57:27 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:57:27 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:57:27 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:57:27 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:57:27 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:57:27 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:57:27 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:57:27 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:57:27 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:57:27 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:57:27 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:57:27 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:57:27 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:57:27 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:57:27 PM INFO:Session state Setup complete
2025/03/01 03:57:27 PM INFO:initialize_session_state executed successfully
2025/03/01 03:57:27 PM INFO:Package setup complete
2025/03/01 03:57:27 PM INFO:get_git_version executed successfully
2025/03/01 03:57:27 PM INFO:App Version: v20.132
2025/03/01 03:57:27 PM INFO:Switched to page: Corporate Donations per Donor
2025/03/01 03:57:27 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 03:57:27 PM INFO:display_summary_statistics executed successfully
2025/03/01 03:57:27 PM INFO:display_textual_insights executed successfully
2025/03/01 03:57:27 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:57:27 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:57:27 PM INFO:display_visualizations executed successfully
2025/03/01 03:57:27 PM INFO:display_per_group_data_page executed successfully
2025/03/01 03:57:27 PM INFO:pagesetup executed successfully
2025/03/01 03:57:27 PM INFO:Data already loaded in session state.
2025/03/01 03:57:31 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:57:31 PM INFO:Setting up the package
2025/03/01 03:57:31 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:57:31 PM INFO:get_git_version executed successfully
2025/03/01 03:57:31 PM INFO:Version: v20.117
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:init_state_var executed successfully
2025/03/01 03:57:31 PM INFO:Session_state variables initialized
2025/03/01 03:57:31 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:57:31 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:57:31 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:57:31 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:57:31 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:57:31 PM INFO:year_slider_leftfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 03:57:31 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:57:31 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:57:31 PM INFO:perc_target: 0.5
2025/03/01 03:57:31 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:57:31 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:57:31 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:57:31 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:57:31 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:57:31 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:57:31 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:57:31 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:57:31 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:57:31 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:57:31 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:57:31 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:57:31 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:57:31 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:57:31 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:57:31 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:57:31 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:57:31 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:57:31 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:57:31 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:57:31 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:57:31 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:57:31 PM INFO:year_slider_rightfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 03:57:31 PM INFO:menu_selection: {'title': 'Sponsorships per Donor', 'function': <function mod_sponsorships_per_donor_page at 0x0000020AD0781FC0>}
2025/03/01 03:57:31 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:57:31 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:57:31 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:57:31 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:57:31 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:57:31 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:57:31 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:57:31 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:57:31 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:57:31 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:57:31 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:57:31 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:57:31 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:57:31 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:57:31 PM INFO:Session state Setup complete
2025/03/01 03:57:31 PM INFO:initialize_session_state executed successfully
2025/03/01 03:57:31 PM INFO:Package setup complete
2025/03/01 03:57:31 PM INFO:get_git_version executed successfully
2025/03/01 03:57:31 PM INFO:App Version: v20.132
2025/03/01 03:57:31 PM INFO:Switched to page: Sponsorships per Donor
2025/03/01 03:57:31 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 03:57:31 PM INFO:display_summary_statistics executed successfully
2025/03/01 03:57:31 PM INFO:display_textual_insights executed successfully
2025/03/01 03:57:31 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:57:31 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:57:31 PM INFO:display_visualizations executed successfully
2025/03/01 03:57:31 PM INFO:display_per_group_data_page executed successfully
2025/03/01 03:57:31 PM INFO:pagesetup executed successfully
2025/03/01 03:57:31 PM INFO:Data already loaded in session state.
2025/03/01 03:57:47 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:57:47 PM INFO:Setting up the package
2025/03/01 03:57:47 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:57:47 PM INFO:get_git_version executed successfully
2025/03/01 03:57:47 PM INFO:Version: v20.117
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:init_state_var executed successfully
2025/03/01 03:57:47 PM INFO:Session_state variables initialized
2025/03/01 03:57:47 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:57:47 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:57:47 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:57:47 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:57:47 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:57:47 PM INFO:year_slider_leftfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 03:57:47 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:57:47 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:57:47 PM INFO:perc_target: 0.5
2025/03/01 03:57:47 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:57:47 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:57:47 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:57:47 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:57:47 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:57:47 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:57:47 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:57:47 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:57:47 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:57:47 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:57:47 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:57:47 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:57:47 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:57:47 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:57:47 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:57:47 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:57:47 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:57:47 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:57:47 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:57:47 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:57:47 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:57:47 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:57:47 PM INFO:year_slider_rightfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 03:57:47 PM INFO:menu_selection: {'title': 'Paid Visits per Donor', 'function': <function mod_visits_per_donor at 0x0000020AD0781D80>}
2025/03/01 03:57:47 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:57:47 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:57:47 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:57:47 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:57:47 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:57:47 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:57:47 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:57:47 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:57:47 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:57:47 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:57:47 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:57:47 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:57:47 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:57:47 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:57:47 PM INFO:Session state Setup complete
2025/03/01 03:57:47 PM INFO:initialize_session_state executed successfully
2025/03/01 03:57:47 PM INFO:Package setup complete
2025/03/01 03:57:47 PM INFO:get_git_version executed successfully
2025/03/01 03:57:47 PM INFO:App Version: v20.132
2025/03/01 03:57:47 PM INFO:Switched to page: Paid Visits per Donor
2025/03/01 03:57:47 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 03:57:47 PM INFO:display_summary_statistics executed successfully
2025/03/01 03:57:47 PM INFO:display_textual_insights executed successfully
2025/03/01 03:57:47 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:57:47 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:57:47 PM INFO:display_visualizations executed successfully
2025/03/01 03:57:47 PM INFO:display_per_group_data_page executed successfully
2025/03/01 03:57:47 PM INFO:pagesetup executed successfully
2025/03/01 03:57:47 PM INFO:Data already loaded in session state.
2025/03/01 03:57:49 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:57:49 PM INFO:Setting up the package
2025/03/01 03:57:49 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:57:49 PM INFO:get_git_version executed successfully
2025/03/01 03:57:49 PM INFO:Version: v20.117
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:init_state_var executed successfully
2025/03/01 03:57:49 PM INFO:Session_state variables initialized
2025/03/01 03:57:49 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:57:49 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:57:49 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:57:49 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:57:49 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:57:49 PM INFO:year_slider_leftfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 03:57:49 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:57:49 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:57:49 PM INFO:perc_target: 0.5
2025/03/01 03:57:49 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:57:49 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:57:49 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:57:49 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:57:49 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:57:49 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:57:49 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:57:49 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:57:49 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:57:49 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:57:49 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:57:49 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:57:49 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:57:49 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:57:49 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:57:49 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:57:49 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:57:49 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:57:49 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:57:49 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:57:49 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:57:49 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:57:49 PM INFO:year_slider_rightfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 03:57:49 PM INFO:menu_selection: {'title': 'Regulated Entities per Donor', 'function': <function mod_regulated_donor_per_entity_page at 0x0000020AD0782560>}
2025/03/01 03:57:49 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:57:49 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:57:49 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:57:49 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:57:49 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:57:49 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:57:49 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:57:49 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:57:49 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:57:49 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:57:49 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:57:49 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:57:49 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:57:50 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:57:50 PM INFO:Session state Setup complete
2025/03/01 03:57:50 PM INFO:initialize_session_state executed successfully
2025/03/01 03:57:50 PM INFO:Package setup complete
2025/03/01 03:57:50 PM INFO:get_git_version executed successfully
2025/03/01 03:57:50 PM INFO:App Version: v20.132
2025/03/01 03:57:50 PM INFO:Switched to page: Regulated Entities per Donor
2025/03/01 03:57:50 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 03:57:50 PM INFO:display_summary_statistics executed successfully
2025/03/01 03:57:50 PM INFO:display_textual_insights executed successfully
2025/03/01 03:57:50 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:57:50 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:57:50 PM INFO:display_visualizations executed successfully
2025/03/01 03:57:50 PM INFO:display_per_group_data_page executed successfully
2025/03/01 03:57:50 PM INFO:pagesetup executed successfully
2025/03/01 03:57:50 PM INFO:Data already loaded in session state.
2025/03/01 03:57:54 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:57:54 PM INFO:Setting up the package
2025/03/01 03:57:54 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:57:54 PM INFO:get_git_version executed successfully
2025/03/01 03:57:54 PM INFO:Version: v20.117
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:init_state_var executed successfully
2025/03/01 03:57:54 PM INFO:Session_state variables initialized
2025/03/01 03:57:54 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:57:54 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:57:54 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:57:54 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:57:54 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:57:54 PM INFO:year_slider_leftfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 03:57:54 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:57:54 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:57:54 PM INFO:perc_target: 0.5
2025/03/01 03:57:54 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:57:54 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:57:54 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:57:54 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:57:54 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:57:54 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:57:54 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:57:54 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:57:54 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:57:54 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:57:54 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:57:54 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:57:54 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:57:54 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:57:54 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:57:54 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:57:54 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:57:54 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:57:54 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:57:54 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:57:54 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:57:54 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:57:54 PM INFO:year_slider_rightfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 03:57:54 PM INFO:menu_selection: {'title': 'Dubious donations per Donor', 'function': <function mod_dubious_donations_per_donor_page at 0x0000020AD07823B0>}
2025/03/01 03:57:54 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:57:54 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:57:54 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:57:54 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:57:54 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:57:54 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:57:54 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:57:54 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:57:54 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:57:54 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:57:54 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:57:54 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:57:54 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:57:54 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:57:54 PM INFO:Session state Setup complete
2025/03/01 03:57:54 PM INFO:initialize_session_state executed successfully
2025/03/01 03:57:54 PM INFO:Package setup complete
2025/03/01 03:57:54 PM INFO:get_git_version executed successfully
2025/03/01 03:57:54 PM INFO:App Version: v20.132
2025/03/01 03:57:54 PM INFO:Switched to page: Dubious donations per Donor
2025/03/01 03:57:54 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 03:57:55 PM INFO:display_summary_statistics executed successfully
2025/03/01 03:57:55 PM INFO:display_textual_insights executed successfully
2025/03/01 03:57:55 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:57:55 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 03:57:55 PM INFO:display_visualizations executed successfully
2025/03/01 03:57:55 PM INFO:display_per_group_data_page executed successfully
2025/03/01 03:57:55 PM INFO:pagesetup executed successfully
2025/03/01 03:57:55 PM INFO:Data already loaded in session state.
2025/03/01 03:57:57 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 03:57:57 PM INFO:Setting up the package
2025/03/01 03:57:57 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 03:57:57 PM INFO:get_git_version executed successfully
2025/03/01 03:57:57 PM INFO:Version: v20.117
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:init_state_var executed successfully
2025/03/01 03:57:57 PM INFO:Session_state variables initialized
2025/03/01 03:57:57 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 03:57:57 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 03:57:57 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 03:57:57 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 03:57:57 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 03:57:57 PM INFO:year_slider_leftfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 03:57:57 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 03:57:57 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 03:57:57 PM INFO:perc_target: 0.5
2025/03/01 03:57:57 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 03:57:57 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 03:57:57 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 03:57:57 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 03:57:57 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 03:57:57 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 03:57:57 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 03:57:57 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 03:57:57 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 03:57:57 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 03:57:57 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 03:57:57 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 03:57:57 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 03:57:57 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 03:57:57 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 03:57:57 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 03:57:57 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 03:57:57 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 03:57:57 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 03:57:57 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 03:57:57 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 03:57:57 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 03:57:57 PM INFO:year_slider_rightfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 03:57:57 PM INFO:menu_selection: {'title': 'Donations by Political Party', 'function': <function mod_donations_per_political_party_page at 0x0000020AD07824D0>}
2025/03/01 03:57:57 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 03:57:57 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 03:57:57 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 03:57:57 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 03:57:57 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 03:57:57 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 03:57:57 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 03:57:57 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 03:57:57 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 03:57:57 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 03:57:57 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': ['1000001', None, 1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': ['1000001', None, 1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorType': 'Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 03:57:57 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 03:57:57 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 03:57:57 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 03:57:57 PM INFO:Session state Setup complete
2025/03/01 03:57:57 PM INFO:initialize_session_state executed successfully
2025/03/01 03:57:57 PM INFO:Package setup complete
2025/03/01 03:57:57 PM INFO:get_git_version executed successfully
2025/03/01 03:57:57 PM INFO:App Version: v20.132
2025/03/01 03:57:57 PM INFO:Switched to page: Donations by Political Party
2025/03/01 03:57:57 PM ERROR:Error in load_and_filter_pergroup: 'DonorType'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 191, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 234, in pandas._libs.index.IndexEngine._get_loc_duplicates
  File "index.pyx", line 242, in pandas._libs.index.IndexEngine._maybe_get_bool_indexer
  File "index.pyx", line 134, in pandas._libs.index._unpack_bool_indexer
KeyError: 'DonorType'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 417, in load_and_filter_pergroup
    cleaned_c_df = apply_filters(cleaned_df, current_target)
  File "H:\VScode\dashboard_demo-1\components\filters.py", line 37, in apply_filters
    conditions.append(df[column] == value)
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'DonorType'
2025/03/01 03:57:57 PM ERROR:Error in display_per_group_data_page: 'DonorType'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 191, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 234, in pandas._libs.index.IndexEngine._get_loc_duplicates
  File "index.pyx", line 242, in pandas._libs.index.IndexEngine._maybe_get_bool_indexer
  File "index.pyx", line 134, in pandas._libs.index._unpack_bool_indexer
KeyError: 'DonorType'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_donor.py", line 31, in display_per_group_data_page
    ) = load_and_filter_pergroup(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 417, in load_and_filter_pergroup
    cleaned_c_df = apply_filters(cleaned_df, current_target)
  File "H:\VScode\dashboard_demo-1\components\filters.py", line 37, in apply_filters
    conditions.append(df[column] == value)
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'DonorType'
2025/03/01 03:57:57 PM ERROR:Error in pagesetup: 'DonorType'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 191, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 234, in pandas._libs.index.IndexEngine._get_loc_duplicates
  File "index.pyx", line 242, in pandas._libs.index.IndexEngine._maybe_get_bool_indexer
  File "index.pyx", line 134, in pandas._libs.index._unpack_bool_indexer
KeyError: 'DonorType'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 107, in mod_donations_per_political_party_page
    display_per_group_data_page(filter_key="PoliticalParty_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_donor.py", line 31, in display_per_group_data_page
    ) = load_and_filter_pergroup(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 417, in load_and_filter_pergroup
    cleaned_c_df = apply_filters(cleaned_df, current_target)
  File "H:\VScode\dashboard_demo-1\components\filters.py", line 37, in apply_filters
    conditions.append(df[column] == value)
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'DonorType'
2025/03/01 03:57:57 PM CRITICAL:Menu setup crashed: 'DonorType'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 191, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 234, in pandas._libs.index.IndexEngine._get_loc_duplicates
  File "index.pyx", line 242, in pandas._libs.index.IndexEngine._maybe_get_bool_indexer
  File "index.pyx", line 134, in pandas._libs.index._unpack_bool_indexer
KeyError: 'DonorType'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 107, in mod_donations_per_political_party_page
    display_per_group_data_page(filter_key="PoliticalParty_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_donor.py", line 31, in display_per_group_data_page
    ) = load_and_filter_pergroup(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 417, in load_and_filter_pergroup
    cleaned_c_df = apply_filters(cleaned_df, current_target)
  File "H:\VScode\dashboard_demo-1\components\filters.py", line 37, in apply_filters
    conditions.append(df[column] == value)
  File "H:\python310\lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "H:\python310\lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'DonorType'
2025/03/01 04:06:54 PM INFO:Logging is set up correctly! Current log level: INFO
2025/03/01 04:06:54 PM INFO:get_git_version executed successfully
2025/03/01 04:06:55 PM INFO:get_git_version executed successfully
2025/03/01 04:06:55 PM INFO:get_git_version executed successfully
2025/03/01 04:06:55 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 04:06:55 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 04:06:55 PM INFO:Setting up the package
2025/03/01 04:06:55 PM INFO:Setting up the package
2025/03/01 04:06:55 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 04:06:55 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 04:06:55 PM INFO:get_git_version executed successfully
2025/03/01 04:06:55 PM INFO:get_git_version executed successfully
2025/03/01 04:06:55 PM INFO:Version: v20.117
2025/03/01 04:06:55 PM INFO:Version: v20.117
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:init_state_var executed successfully
2025/03/01 04:06:55 PM INFO:Session_state variables initialized
2025/03/01 04:06:55 PM INFO:Session_state variables initialized
2025/03/01 04:06:55 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 04:06:55 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 04:06:55 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 04:06:55 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 04:06:55 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 04:06:55 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 04:06:55 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 04:06:55 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 04:06:55 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 04:06:55 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 04:06:55 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 04:06:55 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 04:06:55 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 04:06:55 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 04:06:55 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 04:06:55 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 04:06:55 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 04:06:55 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 04:06:55 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 04:06:55 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 04:06:55 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 04:06:55 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 04:06:55 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 04:06:55 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 04:06:55 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 04:06:55 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 04:06:55 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 04:06:55 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 04:06:55 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 04:06:55 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 04:06:55 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 04:06:55 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 04:06:55 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 04:06:55 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 04:06:55 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 04:06:55 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 04:06:55 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 04:06:55 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 04:06:55 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 04:06:55 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 04:06:55 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 04:06:55 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 04:06:55 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 04:06:55 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 04:06:55 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 04:06:55 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 04:06:55 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 04:06:55 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 04:06:55 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 04:06:55 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 04:06:55 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 04:06:55 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 04:06:55 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 04:06:55 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 04:06:55 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 04:06:55 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 04:06:55 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 04:06:55 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 04:06:55 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 04:06:55 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 04:06:55 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 04:06:55 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 04:06:55 PM INFO:perc_target: 0.5
2025/03/01 04:06:55 PM INFO:perc_target: 0.5
2025/03/01 04:06:55 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 04:06:55 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 04:06:55 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 04:06:55 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 04:06:55 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 04:06:55 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 04:06:55 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 04:06:55 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 04:06:55 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 04:06:55 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 04:06:55 PM INFO:Session state Setup complete
2025/03/01 04:06:55 PM INFO:Session state Setup complete
2025/03/01 04:06:55 PM INFO:initialize_session_state executed successfully
2025/03/01 04:06:55 PM INFO:initialize_session_state executed successfully
2025/03/01 04:06:55 PM INFO:Package setup complete
2025/03/01 04:06:55 PM INFO:Package setup complete
2025/03/01 04:06:55 PM INFO:get_git_version executed successfully
2025/03/01 04:06:56 PM INFO:get_git_version executed successfully
2025/03/01 04:06:56 PM INFO:get_git_version executed successfully
2025/03/01 04:06:56 PM INFO:App Version: v20.132
2025/03/01 04:06:56 PM INFO:App Version: v20.132
2025/03/01 04:06:56 PM INFO:Switched to page: Donations by Political Party
2025/03/01 04:06:56 PM INFO:Switched to page: Introduction
2025/03/01 04:06:56 PM ERROR:Error in load_and_filter_pergroup: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 347, in load_and_filter_pergroup
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 04:06:56 PM INFO:pagesetup executed successfully
2025/03/01 04:06:56 PM ERROR:Error in display_per_group_data_page: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_donor.py", line 31, in display_per_group_data_page
    ) = load_and_filter_pergroup(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 347, in load_and_filter_pergroup
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 04:06:56 PM ERROR:Error in pagesetup: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 107, in mod_donations_per_political_party_page
    display_per_group_data_page(filter_key="PoliticalParty_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_donor.py", line 31, in display_per_group_data_page
    ) = load_and_filter_pergroup(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 347, in load_and_filter_pergroup
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 04:06:56 PM INFO:No data found in session state, running firstload()
2025/03/01 04:06:56 PM CRITICAL:Menu setup crashed: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
Traceback (most recent call last):
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 452, in __getitem__
    return self._getitem(widget_id, key)
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 497, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "H:\VScode\dashboard_demo-1\PoliticalPartyAnalysisDashboard.py", line 39, in <module>
    politicalpartyanalysis.pagesetup()
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\politicalpartyanalysis.py", line 65, in pagesetup
    app.run()  # Run the  app
  File "H:\VScode\dashboard_demo-1\app_pages\multi_page.py", line 45, in run
    page["function"]()  # Run the selected page's function
  File "H:\VScode\dashboard_demo-1\app_pages\mod_page_calls.py", line 107, in mod_donations_per_political_party_page
    display_per_group_data_page(filter_key="PoliticalParty_ftr",
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\app_pages\modular_page_per_donor.py", line 31, in display_per_group_data_page
    ) = load_and_filter_pergroup(
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 37, in wrapper
    raise e
  File "H:\VScode\dashboard_demo-1\utils\logger.py", line 32, in wrapper
    result = func(*args, **kwargs)
  File "H:\VScode\dashboard_demo-1\components\modular_page_blocks.py", line 347, in load_and_filter_pergroup
    cleaned_df = st.session_state["data_clean"]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state_proxy.py", line 101, in __getitem__
    return get_session_state()[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\safe_session_state.py", line 96, in __getitem__
    return self._state[key]
  File "H:\python310\lib\site-packages\streamlit\runtime\state\session_state.py", line 454, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "data_clean". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization'
2025/03/01 04:06:57 PM INFO:map_filename: regentity_map_fname
2025/03/01 04:06:57 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 04:06:57 PM INFO:Dedupe by file
2025/03/01 04:06:57 PM INFO:Dedupe by file, shape: (65278, 34)
2025/03/01 04:06:57 PM INFO:dedupe_entity_file executed successfully
2025/03/01 04:06:57 PM INFO:map_filename: donor_map_fname
2025/03/01 04:06:57 PM INFO:map_filename found: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 04:06:57 PM INFO:Dedupe by file
2025/03/01 04:06:58 PM INFO:Dedupe by file, shape: (65278, 40)
2025/03/01 04:06:58 PM INFO:dedupe_entity_file executed successfully
2025/03/01 04:06:58 PM INFO:Data cleanup completed, shape: (65278, 40)
2025/03/01 04:06:58 PM INFO:raw_data_cleanup executed successfully
2025/03/01 04:06:59 PM INFO:load_raw_data executed successfully
2025/03/01 04:06:59 PM INFO:get_raw_data executed successfully
2025/03/01 04:06:59 PM INFO:load_data_to_session executed successfully
2025/03/01 04:07:02 PM INFO:Data Updated with PartyName and PartyId successfully
2025/03/01 04:07:02 PM INFO:map_mp_to_party executed successfully
2025/03/01 04:07:03 PM INFO:Election Dates not found in session, loading now.
2025/03/01 04:07:03 PM INFO:Election Dates Loaded Successfully.
2025/03/01 04:07:03 PM INFO:load_election_dates executed successfully
2025/03/01 04:07:26 PM INFO:Cleaned Data completed, shape: (78745, 58)
2025/03/01 04:07:26 PM INFO:load_cleaned_data executed successfully
2025/03/01 04:07:26 PM INFO:get_cleaned_data executed successfully
2025/03/01 04:07:26 PM INFO:load_data_to_session executed successfully
2025/03/01 04:07:26 PM INFO:load_entity_summary_data executed successfully
2025/03/01 04:07:26 PM INFO:get_party_summary_data executed successfully
2025/03/01 04:07:26 PM INFO:load_data_to_session executed successfully
2025/03/01 04:07:26 PM INFO:load_donorList_data executed successfully
2025/03/01 04:07:26 PM INFO:get_donor_data executed successfully
2025/03/01 04:07:26 PM INFO:load_data_to_session executed successfully
2025/03/01 04:07:26 PM INFO:load_regulated_entity_data executed successfully
2025/03/01 04:07:26 PM INFO:get_regentity_data executed successfully
2025/03/01 04:07:26 PM INFO:load_data_to_session executed successfully
2025/03/01 04:07:26 PM INFO:firstload executed successfully
2025/03/01 04:07:30 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 04:07:30 PM INFO:Setting up the package
2025/03/01 04:07:30 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 04:07:30 PM INFO:get_git_version executed successfully
2025/03/01 04:07:30 PM INFO:Version: v20.117
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:init_state_var executed successfully
2025/03/01 04:07:30 PM INFO:Session_state variables initialized
2025/03/01 04:07:30 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 04:07:30 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 04:07:30 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 04:07:30 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 04:07:31 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 04:07:31 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 04:07:31 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 04:07:31 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 04:07:31 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 04:07:31 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 04:07:31 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 04:07:31 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 04:07:31 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 04:07:31 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 04:07:31 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 04:07:31 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 04:07:31 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 04:07:31 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 04:07:31 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 04:07:31 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 04:07:31 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 04:07:31 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 04:07:31 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 04:07:31 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 04:07:31 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 04:07:31 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 04:07:31 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 04:07:31 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 04:07:31 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 04:07:31 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 04:07:31 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 04:07:31 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 04:07:31 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 04:07:31 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 04:07:31 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 04:07:31 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 04:07:31 PM INFO:perc_target: 0.5
2025/03/01 04:07:31 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 04:07:31 PM INFO:menu_selection: {'title': 'Donations by Political Party', 'function': <function mod_donations_per_political_party_page at 0x00000225DA115D80>}
2025/03/01 04:07:31 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 04:07:31 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 04:07:31 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 04:07:31 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 04:07:31 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 04:07:31 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 04:07:31 PM INFO:Session state Setup complete
2025/03/01 04:07:31 PM INFO:initialize_session_state executed successfully
2025/03/01 04:07:31 PM INFO:Package setup complete
2025/03/01 04:07:31 PM INFO:get_git_version executed successfully
2025/03/01 04:07:31 PM INFO:App Version: v20.132
2025/03/01 04:07:31 PM INFO:Switched to page: Donations by Political Party
2025/03/01 04:07:31 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 04:07:31 PM INFO:display_summary_statistics executed successfully
2025/03/01 04:07:31 PM INFO:display_textual_insights executed successfully
2025/03/01 04:07:32 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:07:32 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:07:32 PM INFO:display_visualizations executed successfully
2025/03/01 04:07:32 PM INFO:display_per_group_data_page executed successfully
2025/03/01 04:07:32 PM INFO:pagesetup executed successfully
2025/03/01 04:07:32 PM INFO:Data already loaded in session state.
2025/03/01 04:07:58 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 04:07:58 PM INFO:Setting up the package
2025/03/01 04:07:58 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 04:07:58 PM INFO:get_git_version executed successfully
2025/03/01 04:07:58 PM INFO:Version: v20.117
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:init_state_var executed successfully
2025/03/01 04:07:58 PM INFO:Session_state variables initialized
2025/03/01 04:07:58 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 04:07:58 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 04:07:58 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 04:07:58 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 04:07:58 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 04:07:58 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 04:07:58 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 04:07:58 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 04:07:58 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 04:07:58 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 04:07:58 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 04:07:58 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 04:07:58 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 04:07:58 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 04:07:58 PM INFO:year_slider_rightfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 04:07:58 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 04:07:58 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 04:07:58 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 04:07:58 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 04:07:58 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 04:07:58 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 04:07:58 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 04:07:58 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 04:07:58 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 04:07:58 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 04:07:58 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 04:07:58 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 04:07:58 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 04:07:58 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 04:07:58 PM INFO:year_slider_leftfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 04:07:58 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 04:07:58 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 04:07:58 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 04:07:58 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 04:07:58 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 04:07:58 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 04:07:58 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 04:07:58 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 04:07:58 PM INFO:perc_target: 0.5
2025/03/01 04:07:58 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 04:07:58 PM INFO:menu_selection: {'title': 'Dubious donations per Donor', 'function': <function mod_dubious_donations_per_donor_page at 0x00000225DA115C60>}
2025/03/01 04:07:58 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 04:07:58 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 04:07:58 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 04:07:58 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 04:07:58 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 04:07:58 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 04:07:58 PM INFO:Session state Setup complete
2025/03/01 04:07:58 PM INFO:initialize_session_state executed successfully
2025/03/01 04:07:58 PM INFO:Package setup complete
2025/03/01 04:07:58 PM INFO:get_git_version executed successfully
2025/03/01 04:07:58 PM INFO:App Version: v20.132
2025/03/01 04:07:58 PM INFO:Switched to page: Dubious donations per Donor
2025/03/01 04:07:59 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 04:07:59 PM INFO:display_summary_statistics executed successfully
2025/03/01 04:07:59 PM INFO:display_textual_insights executed successfully
2025/03/01 04:07:59 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:07:59 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:07:59 PM INFO:display_visualizations executed successfully
2025/03/01 04:07:59 PM INFO:display_per_group_data_page executed successfully
2025/03/01 04:07:59 PM INFO:pagesetup executed successfully
2025/03/01 04:07:59 PM INFO:Data already loaded in session state.
2025/03/01 04:08:01 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:01 PM INFO:Setting up the package
2025/03/01 04:08:01 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:01 PM INFO:get_git_version executed successfully
2025/03/01 04:08:01 PM INFO:Version: v20.117
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:init_state_var executed successfully
2025/03/01 04:08:01 PM INFO:Session_state variables initialized
2025/03/01 04:08:01 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 04:08:01 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 04:08:01 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 04:08:01 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 04:08:01 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 04:08:01 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 04:08:01 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 04:08:01 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 04:08:01 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 04:08:01 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 04:08:01 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 04:08:01 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 04:08:01 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 04:08:01 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 04:08:01 PM INFO:year_slider_rightfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:01 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 04:08:01 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 04:08:01 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 04:08:01 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 04:08:01 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 04:08:01 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 04:08:01 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 04:08:01 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 04:08:01 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 04:08:01 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 04:08:01 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 04:08:01 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 04:08:01 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 04:08:01 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 04:08:01 PM INFO:year_slider_leftfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:01 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 04:08:01 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 04:08:01 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 04:08:01 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 04:08:01 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 04:08:01 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 04:08:01 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 04:08:01 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 04:08:01 PM INFO:perc_target: 0.5
2025/03/01 04:08:01 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 04:08:01 PM INFO:menu_selection: {'title': 'Regulated Entities per Donor', 'function': <function mod_regulated_donor_per_entity_page at 0x00000225DA115E10>}
2025/03/01 04:08:01 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 04:08:01 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 04:08:01 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 04:08:01 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 04:08:01 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 04:08:01 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 04:08:01 PM INFO:Session state Setup complete
2025/03/01 04:08:01 PM INFO:initialize_session_state executed successfully
2025/03/01 04:08:01 PM INFO:Package setup complete
2025/03/01 04:08:01 PM INFO:get_git_version executed successfully
2025/03/01 04:08:01 PM INFO:App Version: v20.132
2025/03/01 04:08:01 PM INFO:Switched to page: Regulated Entities per Donor
2025/03/01 04:08:01 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 04:08:01 PM INFO:display_summary_statistics executed successfully
2025/03/01 04:08:01 PM INFO:display_textual_insights executed successfully
2025/03/01 04:08:01 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:01 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:01 PM INFO:display_visualizations executed successfully
2025/03/01 04:08:01 PM INFO:display_per_group_data_page executed successfully
2025/03/01 04:08:01 PM INFO:pagesetup executed successfully
2025/03/01 04:08:01 PM INFO:Data already loaded in session state.
2025/03/01 04:08:03 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:03 PM INFO:Setting up the package
2025/03/01 04:08:03 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:03 PM INFO:get_git_version executed successfully
2025/03/01 04:08:03 PM INFO:Version: v20.117
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:init_state_var executed successfully
2025/03/01 04:08:03 PM INFO:Session_state variables initialized
2025/03/01 04:08:03 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 04:08:03 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 04:08:03 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 04:08:03 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 04:08:03 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 04:08:03 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 04:08:03 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 04:08:03 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 04:08:03 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 04:08:03 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 04:08:03 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 04:08:03 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 04:08:03 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 04:08:03 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 04:08:03 PM INFO:year_slider_rightfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:03 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 04:08:03 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 04:08:03 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 04:08:03 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 04:08:03 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 04:08:03 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 04:08:03 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 04:08:03 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 04:08:03 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 04:08:03 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 04:08:03 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 04:08:03 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 04:08:03 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 04:08:03 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 04:08:03 PM INFO:year_slider_leftfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:03 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 04:08:03 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 04:08:03 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 04:08:03 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 04:08:03 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 04:08:03 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 04:08:03 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 04:08:03 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 04:08:03 PM INFO:perc_target: 0.5
2025/03/01 04:08:03 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 04:08:03 PM INFO:menu_selection: {'title': 'Paid Visits per Donor', 'function': <function mod_visits_per_donor at 0x00000225DA115630>}
2025/03/01 04:08:03 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 04:08:03 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 04:08:03 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 04:08:03 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 04:08:03 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 04:08:03 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 04:08:03 PM INFO:Session state Setup complete
2025/03/01 04:08:03 PM INFO:initialize_session_state executed successfully
2025/03/01 04:08:03 PM INFO:Package setup complete
2025/03/01 04:08:03 PM INFO:get_git_version executed successfully
2025/03/01 04:08:03 PM INFO:App Version: v20.132
2025/03/01 04:08:03 PM INFO:Switched to page: Paid Visits per Donor
2025/03/01 04:08:03 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 04:08:03 PM INFO:display_summary_statistics executed successfully
2025/03/01 04:08:03 PM INFO:display_textual_insights executed successfully
2025/03/01 04:08:04 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:04 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:04 PM INFO:display_visualizations executed successfully
2025/03/01 04:08:04 PM INFO:display_per_group_data_page executed successfully
2025/03/01 04:08:04 PM INFO:pagesetup executed successfully
2025/03/01 04:08:04 PM INFO:Data already loaded in session state.
2025/03/01 04:08:05 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:05 PM INFO:Setting up the package
2025/03/01 04:08:05 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:05 PM INFO:get_git_version executed successfully
2025/03/01 04:08:05 PM INFO:Version: v20.117
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:init_state_var executed successfully
2025/03/01 04:08:05 PM INFO:Session_state variables initialized
2025/03/01 04:08:05 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 04:08:05 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 04:08:05 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 04:08:05 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 04:08:05 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 04:08:05 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 04:08:05 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 04:08:05 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 04:08:05 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 04:08:05 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 04:08:05 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 04:08:05 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 04:08:05 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 04:08:05 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 04:08:05 PM INFO:year_slider_rightfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:05 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 04:08:05 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 04:08:05 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 04:08:05 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 04:08:05 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 04:08:05 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 04:08:05 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 04:08:05 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 04:08:05 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 04:08:05 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 04:08:05 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 04:08:05 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 04:08:05 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 04:08:05 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 04:08:05 PM INFO:year_slider_leftfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:05 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 04:08:05 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 04:08:05 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 04:08:05 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 04:08:05 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 04:08:05 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 04:08:05 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 04:08:05 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 04:08:05 PM INFO:perc_target: 0.5
2025/03/01 04:08:05 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 04:08:05 PM INFO:menu_selection: {'title': 'Sponsorships per Donor', 'function': <function mod_sponsorships_per_donor_page at 0x00000225DA115870>}
2025/03/01 04:08:05 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 04:08:05 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 04:08:05 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 04:08:05 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 04:08:05 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 04:08:05 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 04:08:05 PM INFO:Session state Setup complete
2025/03/01 04:08:05 PM INFO:initialize_session_state executed successfully
2025/03/01 04:08:05 PM INFO:Package setup complete
2025/03/01 04:08:05 PM INFO:get_git_version executed successfully
2025/03/01 04:08:05 PM INFO:App Version: v20.132
2025/03/01 04:08:05 PM INFO:Switched to page: Sponsorships per Donor
2025/03/01 04:08:06 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 04:08:06 PM INFO:display_summary_statistics executed successfully
2025/03/01 04:08:06 PM INFO:display_textual_insights executed successfully
2025/03/01 04:08:06 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:06 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:06 PM INFO:display_visualizations executed successfully
2025/03/01 04:08:06 PM INFO:display_per_group_data_page executed successfully
2025/03/01 04:08:06 PM INFO:pagesetup executed successfully
2025/03/01 04:08:06 PM INFO:Data already loaded in session state.
2025/03/01 04:08:08 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:08 PM INFO:Setting up the package
2025/03/01 04:08:08 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:08 PM INFO:get_git_version executed successfully
2025/03/01 04:08:08 PM INFO:Version: v20.117
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:init_state_var executed successfully
2025/03/01 04:08:08 PM INFO:Session_state variables initialized
2025/03/01 04:08:08 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 04:08:08 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 04:08:08 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 04:08:08 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 04:08:08 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 04:08:08 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 04:08:08 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 04:08:08 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 04:08:08 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 04:08:08 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 04:08:08 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 04:08:08 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 04:08:08 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 04:08:08 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 04:08:08 PM INFO:year_slider_rightfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:08 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 04:08:08 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 04:08:08 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 04:08:08 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 04:08:08 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 04:08:08 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 04:08:08 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 04:08:08 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 04:08:08 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 04:08:08 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 04:08:08 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 04:08:08 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 04:08:08 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 04:08:08 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 04:08:08 PM INFO:year_slider_leftfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:08 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 04:08:08 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 04:08:08 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 04:08:08 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 04:08:08 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 04:08:08 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 04:08:08 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 04:08:08 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 04:08:08 PM INFO:perc_target: 0.5
2025/03/01 04:08:08 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 04:08:08 PM INFO:menu_selection: {'title': 'Corporate Donations per Donor', 'function': <function mod_corporate_donations_per_donor_page at 0x00000225DA115AB0>}
2025/03/01 04:08:08 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 04:08:08 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 04:08:08 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 04:08:08 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 04:08:08 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 04:08:08 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 04:08:08 PM INFO:Session state Setup complete
2025/03/01 04:08:08 PM INFO:initialize_session_state executed successfully
2025/03/01 04:08:08 PM INFO:Package setup complete
2025/03/01 04:08:08 PM INFO:get_git_version executed successfully
2025/03/01 04:08:08 PM INFO:App Version: v20.132
2025/03/01 04:08:08 PM INFO:Switched to page: Corporate Donations per Donor
2025/03/01 04:08:08 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 04:08:08 PM INFO:display_summary_statistics executed successfully
2025/03/01 04:08:08 PM INFO:display_textual_insights executed successfully
2025/03/01 04:08:08 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:08 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:08 PM INFO:display_visualizations executed successfully
2025/03/01 04:08:08 PM INFO:display_per_group_data_page executed successfully
2025/03/01 04:08:08 PM INFO:pagesetup executed successfully
2025/03/01 04:08:08 PM INFO:Data already loaded in session state.
2025/03/01 04:08:10 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:10 PM INFO:Setting up the package
2025/03/01 04:08:10 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:10 PM INFO:get_git_version executed successfully
2025/03/01 04:08:10 PM INFO:Version: v20.117
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:init_state_var executed successfully
2025/03/01 04:08:10 PM INFO:Session_state variables initialized
2025/03/01 04:08:10 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 04:08:10 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 04:08:10 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 04:08:10 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 04:08:10 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 04:08:10 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 04:08:10 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 04:08:10 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 04:08:10 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 04:08:10 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 04:08:10 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 04:08:10 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 04:08:10 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 04:08:10 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 04:08:10 PM INFO:year_slider_rightfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:10 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 04:08:10 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 04:08:10 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 04:08:10 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 04:08:10 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 04:08:10 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 04:08:10 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 04:08:10 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 04:08:10 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 04:08:10 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 04:08:10 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 04:08:10 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 04:08:10 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 04:08:10 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 04:08:10 PM INFO:year_slider_leftfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:10 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 04:08:10 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 04:08:10 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 04:08:10 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 04:08:10 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 04:08:10 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 04:08:10 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 04:08:10 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 04:08:10 PM INFO:perc_target: 0.5
2025/03/01 04:08:10 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 04:08:10 PM INFO:menu_selection: {'title': 'Dubious Donations per Regulated Entity', 'function': <function mod_dubious_donations_per_entity_page at 0x00000225DA115BD0>}
2025/03/01 04:08:10 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 04:08:10 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 04:08:10 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 04:08:10 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 04:08:10 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 04:08:10 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 04:08:10 PM INFO:Session state Setup complete
2025/03/01 04:08:10 PM INFO:initialize_session_state executed successfully
2025/03/01 04:08:10 PM INFO:Package setup complete
2025/03/01 04:08:10 PM INFO:get_git_version executed successfully
2025/03/01 04:08:10 PM INFO:App Version: v20.132
2025/03/01 04:08:10 PM INFO:Switched to page: Dubious Donations per Regulated Entity
2025/03/01 04:08:10 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 04:08:11 PM INFO:display_summary_statistics executed successfully
2025/03/01 04:08:11 PM INFO:display_textual_insights executed successfully
2025/03/01 04:08:11 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:11 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:11 PM INFO:display_visualizations executed successfully
2025/03/01 04:08:11 PM INFO:display_per_group_data_page executed successfully
2025/03/01 04:08:11 PM INFO:pagesetup executed successfully
2025/03/01 04:08:11 PM INFO:Data already loaded in session state.
2025/03/01 04:08:12 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:12 PM INFO:Setting up the package
2025/03/01 04:08:12 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:12 PM INFO:get_git_version executed successfully
2025/03/01 04:08:12 PM INFO:Version: v20.117
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:init_state_var executed successfully
2025/03/01 04:08:12 PM INFO:Session_state variables initialized
2025/03/01 04:08:12 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 04:08:12 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 04:08:12 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 04:08:12 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 04:08:12 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 04:08:12 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 04:08:12 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 04:08:12 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 04:08:12 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 04:08:12 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 04:08:12 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 04:08:12 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 04:08:12 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 04:08:12 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 04:08:12 PM INFO:year_slider_rightfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:12 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 04:08:12 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 04:08:12 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 04:08:12 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 04:08:12 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 04:08:12 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 04:08:12 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 04:08:12 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 04:08:12 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 04:08:12 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 04:08:12 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 04:08:12 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 04:08:12 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 04:08:12 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 04:08:12 PM INFO:year_slider_leftfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:12 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 04:08:12 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 04:08:12 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 04:08:12 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 04:08:12 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 04:08:12 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 04:08:12 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 04:08:12 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 04:08:12 PM INFO:perc_target: 0.5
2025/03/01 04:08:12 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 04:08:12 PM INFO:menu_selection: {'title': 'Dubious Donors per Regulated Entity', 'function': <function mod_dubious_donors_per_entity_page at 0x00000225DA115F30>}
2025/03/01 04:08:12 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 04:08:12 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 04:08:12 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 04:08:12 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 04:08:12 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 04:08:12 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 04:08:12 PM INFO:Session state Setup complete
2025/03/01 04:08:12 PM INFO:initialize_session_state executed successfully
2025/03/01 04:08:12 PM INFO:Package setup complete
2025/03/01 04:08:12 PM INFO:get_git_version executed successfully
2025/03/01 04:08:12 PM INFO:App Version: v20.132
2025/03/01 04:08:12 PM INFO:Switched to page: Dubious Donors per Regulated Entity
2025/03/01 04:08:12 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 04:08:13 PM INFO:display_summary_statistics executed successfully
2025/03/01 04:08:13 PM INFO:display_textual_insights executed successfully
2025/03/01 04:08:13 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:13 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:13 PM INFO:display_visualizations executed successfully
2025/03/01 04:08:13 PM INFO:display_per_group_data_page executed successfully
2025/03/01 04:08:13 PM INFO:pagesetup executed successfully
2025/03/01 04:08:13 PM INFO:Data already loaded in session state.
2025/03/01 04:08:16 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:16 PM INFO:Setting up the package
2025/03/01 04:08:16 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:16 PM INFO:get_git_version executed successfully
2025/03/01 04:08:16 PM INFO:Version: v20.117
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:init_state_var executed successfully
2025/03/01 04:08:16 PM INFO:Session_state variables initialized
2025/03/01 04:08:16 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 04:08:16 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 04:08:16 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 04:08:16 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 04:08:16 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 04:08:16 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 04:08:16 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 04:08:16 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 04:08:16 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 04:08:16 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 04:08:16 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 04:08:16 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 04:08:16 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 04:08:16 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 04:08:16 PM INFO:year_slider_rightfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:16 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 04:08:16 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 04:08:16 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 04:08:16 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 04:08:16 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 04:08:16 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 04:08:16 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 04:08:16 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 04:08:16 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 04:08:16 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 04:08:16 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 04:08:16 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 04:08:16 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 04:08:16 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 04:08:16 PM INFO:year_slider_leftfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:16 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 04:08:16 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 04:08:16 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 04:08:16 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 04:08:16 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 04:08:16 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 04:08:16 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 04:08:16 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 04:08:16 PM INFO:perc_target: 0.5
2025/03/01 04:08:16 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 04:08:16 PM INFO:menu_selection: {'title': 'Donors per Regulated Entity', 'function': <function mod_regulated_entity_per_donors_page at 0x00000225DA115EA0>}
2025/03/01 04:08:16 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 04:08:16 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 04:08:16 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 04:08:16 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 04:08:16 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 04:08:16 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 04:08:16 PM INFO:Session state Setup complete
2025/03/01 04:08:16 PM INFO:initialize_session_state executed successfully
2025/03/01 04:08:16 PM INFO:Package setup complete
2025/03/01 04:08:16 PM INFO:get_git_version executed successfully
2025/03/01 04:08:16 PM INFO:App Version: v20.132
2025/03/01 04:08:16 PM INFO:Switched to page: Donors per Regulated Entity
2025/03/01 04:08:16 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 04:08:16 PM INFO:display_summary_statistics executed successfully
2025/03/01 04:08:16 PM INFO:display_textual_insights executed successfully
2025/03/01 04:08:16 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:17 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:17 PM INFO:display_visualizations executed successfully
2025/03/01 04:08:17 PM INFO:display_per_group_data_page executed successfully
2025/03/01 04:08:17 PM INFO:pagesetup executed successfully
2025/03/01 04:08:17 PM INFO:Data already loaded in session state.
2025/03/01 04:08:17 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:17 PM INFO:Setting up the package
2025/03/01 04:08:17 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:17 PM INFO:get_git_version executed successfully
2025/03/01 04:08:17 PM INFO:Version: v20.117
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:init_state_var executed successfully
2025/03/01 04:08:17 PM INFO:Session_state variables initialized
2025/03/01 04:08:17 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 04:08:17 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 04:08:17 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 04:08:17 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 04:08:17 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 04:08:17 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 04:08:17 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 04:08:17 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 04:08:17 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 04:08:17 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 04:08:17 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 04:08:17 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 04:08:17 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 04:08:17 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 04:08:17 PM INFO:year_slider_rightfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:17 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 04:08:17 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 04:08:17 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 04:08:17 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 04:08:17 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 04:08:17 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 04:08:17 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 04:08:17 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 04:08:17 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 04:08:17 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 04:08:17 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 04:08:17 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 04:08:17 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 04:08:17 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 04:08:17 PM INFO:year_slider_leftfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:17 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 04:08:17 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 04:08:17 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 04:08:17 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 04:08:17 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 04:08:17 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 04:08:17 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 04:08:17 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 04:08:17 PM INFO:perc_target: 0.5
2025/03/01 04:08:17 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 04:08:17 PM INFO:menu_selection: {'title': 'Paid Visits per Entity', 'function': <function mod_visits_per_regulated_entity at 0x00000225DA1156C0>}
2025/03/01 04:08:17 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 04:08:17 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 04:08:17 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 04:08:17 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 04:08:17 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 04:08:17 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 04:08:17 PM INFO:Session state Setup complete
2025/03/01 04:08:17 PM INFO:initialize_session_state executed successfully
2025/03/01 04:08:17 PM INFO:Package setup complete
2025/03/01 04:08:17 PM INFO:get_git_version executed successfully
2025/03/01 04:08:17 PM INFO:App Version: v20.132
2025/03/01 04:08:17 PM INFO:Switched to page: Paid Visits per Entity
2025/03/01 04:08:18 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 04:08:18 PM INFO:display_summary_statistics executed successfully
2025/03/01 04:08:18 PM INFO:display_textual_insights executed successfully
2025/03/01 04:08:18 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:18 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:18 PM INFO:display_visualizations executed successfully
2025/03/01 04:08:18 PM INFO:display_per_group_data_page executed successfully
2025/03/01 04:08:18 PM INFO:pagesetup executed successfully
2025/03/01 04:08:18 PM INFO:Data already loaded in session state.
2025/03/01 04:08:19 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:19 PM INFO:Setting up the package
2025/03/01 04:08:19 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:19 PM INFO:get_git_version executed successfully
2025/03/01 04:08:19 PM INFO:Version: v20.117
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:init_state_var executed successfully
2025/03/01 04:08:19 PM INFO:Session_state variables initialized
2025/03/01 04:08:19 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 04:08:19 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 04:08:19 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 04:08:19 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 04:08:19 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 04:08:19 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 04:08:19 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 04:08:19 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 04:08:19 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 04:08:19 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 04:08:19 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 04:08:19 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 04:08:19 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 04:08:19 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 04:08:19 PM INFO:year_slider_rightfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:19 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 04:08:19 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 04:08:19 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 04:08:19 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 04:08:19 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 04:08:19 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 04:08:19 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 04:08:19 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 04:08:19 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 04:08:19 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 04:08:19 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 04:08:19 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 04:08:19 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 04:08:19 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 04:08:19 PM INFO:year_slider_leftfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:19 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 04:08:19 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 04:08:19 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 04:08:19 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 04:08:19 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 04:08:19 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 04:08:19 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 04:08:19 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 04:08:19 PM INFO:perc_target: 0.5
2025/03/01 04:08:19 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 04:08:19 PM INFO:menu_selection: {'title': 'Sponsorship per Entity ', 'function': <function mod_sponsorships_per_entity_page at 0x00000225DA1157E0>}
2025/03/01 04:08:19 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 04:08:19 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 04:08:19 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 04:08:19 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 04:08:19 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 04:08:19 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 04:08:19 PM INFO:Session state Setup complete
2025/03/01 04:08:19 PM INFO:initialize_session_state executed successfully
2025/03/01 04:08:19 PM INFO:Package setup complete
2025/03/01 04:08:19 PM INFO:get_git_version executed successfully
2025/03/01 04:08:19 PM INFO:App Version: v20.132
2025/03/01 04:08:19 PM INFO:Switched to page: Sponsorship per Entity 
2025/03/01 04:08:19 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 04:08:19 PM INFO:display_summary_statistics executed successfully
2025/03/01 04:08:19 PM INFO:display_textual_insights executed successfully
2025/03/01 04:08:19 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:19 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:19 PM INFO:display_visualizations executed successfully
2025/03/01 04:08:19 PM INFO:display_per_group_data_page executed successfully
2025/03/01 04:08:19 PM INFO:pagesetup executed successfully
2025/03/01 04:08:19 PM INFO:Data already loaded in session state.
2025/03/01 04:08:21 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:21 PM INFO:Setting up the package
2025/03/01 04:08:21 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:21 PM INFO:get_git_version executed successfully
2025/03/01 04:08:21 PM INFO:Version: v20.117
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:init_state_var executed successfully
2025/03/01 04:08:21 PM INFO:Session_state variables initialized
2025/03/01 04:08:21 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 04:08:21 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 04:08:21 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 04:08:21 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 04:08:21 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 04:08:21 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 04:08:21 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 04:08:21 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 04:08:21 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 04:08:21 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 04:08:21 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 04:08:21 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 04:08:21 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 04:08:21 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 04:08:21 PM INFO:year_slider_rightfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:21 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 04:08:21 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 04:08:21 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 04:08:21 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 04:08:21 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 04:08:21 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 04:08:21 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 04:08:21 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 04:08:21 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 04:08:21 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 04:08:21 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 04:08:21 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 04:08:21 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 04:08:21 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 04:08:21 PM INFO:year_slider_leftfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:21 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 04:08:21 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 04:08:21 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 04:08:21 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 04:08:21 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 04:08:21 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 04:08:21 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 04:08:21 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 04:08:21 PM INFO:perc_target: 0.5
2025/03/01 04:08:21 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 04:08:21 PM INFO:menu_selection: {'title': 'Corporate Donations per Entity', 'function': <function mod_corporate_donations_per_entity_page at 0x00000225DA115CF0>}
2025/03/01 04:08:21 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 04:08:21 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 04:08:21 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 04:08:21 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 04:08:21 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 04:08:21 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 04:08:21 PM INFO:Session state Setup complete
2025/03/01 04:08:21 PM INFO:initialize_session_state executed successfully
2025/03/01 04:08:21 PM INFO:Package setup complete
2025/03/01 04:08:21 PM INFO:get_git_version executed successfully
2025/03/01 04:08:21 PM INFO:App Version: v20.132
2025/03/01 04:08:21 PM INFO:Switched to page: Corporate Donations per Entity
2025/03/01 04:08:21 PM INFO:load_and_filter_pergroup executed successfully
2025/03/01 04:08:21 PM INFO:display_summary_statistics executed successfully
2025/03/01 04:08:21 PM INFO:display_textual_insights executed successfully
2025/03/01 04:08:21 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:21 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:21 PM INFO:display_visualizations executed successfully
2025/03/01 04:08:22 PM INFO:display_per_group_data_page executed successfully
2025/03/01 04:08:22 PM INFO:pagesetup executed successfully
2025/03/01 04:08:22 PM INFO:Data already loaded in session state.
2025/03/01 04:08:23 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:23 PM INFO:Setting up the package
2025/03/01 04:08:23 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:23 PM INFO:get_git_version executed successfully
2025/03/01 04:08:23 PM INFO:Version: v20.117
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:init_state_var executed successfully
2025/03/01 04:08:23 PM INFO:Session_state variables initialized
2025/03/01 04:08:23 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 04:08:23 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 04:08:23 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 04:08:23 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 04:08:23 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 04:08:23 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 04:08:23 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 04:08:23 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 04:08:23 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 04:08:23 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 04:08:23 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 04:08:23 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 04:08:23 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 04:08:23 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 04:08:23 PM INFO:year_slider_rightfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:23 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 04:08:23 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 04:08:23 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 04:08:23 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 04:08:23 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 04:08:23 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 04:08:23 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 04:08:23 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 04:08:23 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 04:08:23 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 04:08:23 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 04:08:23 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 04:08:23 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 04:08:23 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 04:08:23 PM INFO:year_slider_leftfilter_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:23 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 04:08:23 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 04:08:23 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 04:08:23 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 04:08:23 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 04:08:23 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 04:08:23 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 04:08:23 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 04:08:23 PM INFO:perc_target: 0.5
2025/03/01 04:08:23 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 04:08:23 PM INFO:menu_selection: {'title': 'Dubious Donations', 'function': <function mod_dubious_donations_page at 0x00000225DA115B40>}
2025/03/01 04:08:23 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 04:08:23 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 04:08:23 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 04:08:23 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 04:08:23 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 04:08:23 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 04:08:23 PM INFO:Session state Setup complete
2025/03/01 04:08:23 PM INFO:initialize_session_state executed successfully
2025/03/01 04:08:23 PM INFO:Package setup complete
2025/03/01 04:08:23 PM INFO:get_git_version executed successfully
2025/03/01 04:08:23 PM INFO:App Version: v20.132
2025/03/01 04:08:23 PM INFO:Switched to page: Dubious Donations
2025/03/01 04:08:23 PM INFO:load_and_filter_data executed successfully
2025/03/01 04:08:23 PM INFO:display_summary_statistics executed successfully
2025/03/01 04:08:23 PM INFO:display_textual_insights executed successfully
2025/03/01 04:08:23 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:23 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:23 PM INFO:display_visualizations executed successfully
2025/03/01 04:08:23 PM INFO:display_data_page executed successfully
2025/03/01 04:08:23 PM INFO:pagesetup executed successfully
2025/03/01 04:08:23 PM INFO:Data already loaded in session state.
2025/03/01 04:08:24 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:24 PM INFO:Setting up the package
2025/03/01 04:08:24 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:24 PM INFO:get_git_version executed successfully
2025/03/01 04:08:24 PM INFO:Version: v20.117
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:init_state_var executed successfully
2025/03/01 04:08:24 PM INFO:Session_state variables initialized
2025/03/01 04:08:24 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 04:08:24 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 04:08:24 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 04:08:24 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 04:08:24 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 04:08:24 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 04:08:24 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 04:08:24 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 04:08:24 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 04:08:24 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 04:08:24 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 04:08:24 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 04:08:24 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 04:08:24 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 04:08:24 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 04:08:24 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 04:08:24 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 04:08:24 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 04:08:24 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 04:08:24 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 04:08:24 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 04:08:24 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 04:08:24 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 04:08:24 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 04:08:24 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 04:08:24 PM INFO:year_slider_rightfiltered_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:24 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 04:08:24 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 04:08:24 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 04:08:24 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 04:08:24 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 04:08:24 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 04:08:24 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 04:08:24 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 04:08:24 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 04:08:24 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 04:08:24 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 04:08:24 PM INFO:perc_target: 0.5
2025/03/01 04:08:24 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 04:08:24 PM INFO:menu_selection: {'title': 'Dubious Donors', 'function': <function mod_dubious_donors_page at 0x00000225DA115FC0>}
2025/03/01 04:08:24 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 04:08:24 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 04:08:24 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 04:08:24 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 04:08:24 PM INFO:year_slider_leftfiltered_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:24 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 04:08:24 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 04:08:24 PM INFO:Session state Setup complete
2025/03/01 04:08:24 PM INFO:initialize_session_state executed successfully
2025/03/01 04:08:24 PM INFO:Package setup complete
2025/03/01 04:08:24 PM INFO:get_git_version executed successfully
2025/03/01 04:08:24 PM INFO:App Version: v20.132
2025/03/01 04:08:24 PM INFO:Switched to page: Dubious Donors
2025/03/01 04:08:25 PM INFO:load_and_filter_data executed successfully
2025/03/01 04:08:25 PM INFO:display_summary_statistics executed successfully
2025/03/01 04:08:25 PM INFO:display_textual_insights executed successfully
2025/03/01 04:08:25 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:25 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:25 PM INFO:display_visualizations executed successfully
2025/03/01 04:08:25 PM INFO:display_data_page executed successfully
2025/03/01 04:08:25 PM INFO:pagesetup executed successfully
2025/03/01 04:08:25 PM INFO:Data already loaded in session state.
2025/03/01 04:08:26 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:26 PM INFO:Setting up the package
2025/03/01 04:08:26 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:26 PM INFO:get_git_version executed successfully
2025/03/01 04:08:26 PM INFO:Version: v20.117
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:init_state_var executed successfully
2025/03/01 04:08:26 PM INFO:Session_state variables initialized
2025/03/01 04:08:26 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 04:08:26 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 04:08:26 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 04:08:26 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 04:08:26 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 04:08:26 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 04:08:26 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 04:08:26 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 04:08:26 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 04:08:26 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 04:08:26 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 04:08:26 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 04:08:26 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 04:08:26 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 04:08:26 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 04:08:26 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 04:08:26 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 04:08:26 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 04:08:26 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 04:08:26 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 04:08:26 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 04:08:26 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 04:08:26 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 04:08:26 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 04:08:26 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 04:08:26 PM INFO:year_slider_rightfiltered_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:26 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 04:08:26 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 04:08:26 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 04:08:26 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 04:08:26 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 04:08:26 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 04:08:26 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 04:08:26 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 04:08:26 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 04:08:26 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 04:08:26 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 04:08:26 PM INFO:perc_target: 0.5
2025/03/01 04:08:26 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 04:08:26 PM INFO:menu_selection: {'title': 'Paid Visits', 'function': <function mod_visits_page at 0x00000225DA114280>}
2025/03/01 04:08:26 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 04:08:26 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 04:08:26 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 04:08:26 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 04:08:26 PM INFO:year_slider_leftfiltered_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:26 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 04:08:26 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 04:08:26 PM INFO:Session state Setup complete
2025/03/01 04:08:26 PM INFO:initialize_session_state executed successfully
2025/03/01 04:08:26 PM INFO:Package setup complete
2025/03/01 04:08:26 PM INFO:get_git_version executed successfully
2025/03/01 04:08:26 PM INFO:App Version: v20.132
2025/03/01 04:08:26 PM INFO:Switched to page: Paid Visits
2025/03/01 04:08:26 PM INFO:load_and_filter_data executed successfully
2025/03/01 04:08:26 PM INFO:display_summary_statistics executed successfully
2025/03/01 04:08:26 PM INFO:display_textual_insights executed successfully
2025/03/01 04:08:26 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:26 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:26 PM INFO:display_visualizations executed successfully
2025/03/01 04:08:26 PM INFO:display_data_page executed successfully
2025/03/01 04:08:26 PM INFO:pagesetup executed successfully
2025/03/01 04:08:26 PM INFO:Data already loaded in session state.
2025/03/01 04:08:28 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:28 PM INFO:Setting up the package
2025/03/01 04:08:28 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:28 PM INFO:get_git_version executed successfully
2025/03/01 04:08:28 PM INFO:Version: v20.117
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:init_state_var executed successfully
2025/03/01 04:08:28 PM INFO:Session_state variables initialized
2025/03/01 04:08:28 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 04:08:28 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 04:08:28 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 04:08:28 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 04:08:28 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 04:08:28 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 04:08:28 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 04:08:28 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 04:08:28 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 04:08:28 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 04:08:28 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 04:08:28 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 04:08:28 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 04:08:28 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 04:08:28 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 04:08:28 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 04:08:28 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 04:08:28 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 04:08:28 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 04:08:28 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 04:08:28 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 04:08:28 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 04:08:28 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 04:08:28 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 04:08:28 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 04:08:28 PM INFO:year_slider_rightfiltered_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:28 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 04:08:28 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 04:08:28 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 04:08:28 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 04:08:28 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 04:08:28 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 04:08:28 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 04:08:28 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 04:08:28 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 04:08:28 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 04:08:28 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 04:08:28 PM INFO:perc_target: 0.5
2025/03/01 04:08:28 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 04:08:28 PM INFO:menu_selection: {'title': 'Sponsorships', 'function': <function mod_sponsorship_page at 0x00000225DA115750>}
2025/03/01 04:08:28 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 04:08:28 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 04:08:28 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 04:08:28 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 04:08:28 PM INFO:year_slider_leftfiltered_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:28 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 04:08:28 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 04:08:28 PM INFO:Session state Setup complete
2025/03/01 04:08:28 PM INFO:initialize_session_state executed successfully
2025/03/01 04:08:28 PM INFO:Package setup complete
2025/03/01 04:08:28 PM INFO:get_git_version executed successfully
2025/03/01 04:08:28 PM INFO:App Version: v20.132
2025/03/01 04:08:28 PM INFO:Switched to page: Sponsorships
2025/03/01 04:08:28 PM INFO:load_and_filter_data executed successfully
2025/03/01 04:08:28 PM INFO:display_summary_statistics executed successfully
2025/03/01 04:08:28 PM INFO:display_textual_insights executed successfully
2025/03/01 04:08:28 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:28 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:28 PM INFO:display_visualizations executed successfully
2025/03/01 04:08:28 PM INFO:display_data_page executed successfully
2025/03/01 04:08:28 PM INFO:pagesetup executed successfully
2025/03/01 04:08:28 PM INFO:Data already loaded in session state.
2025/03/01 04:08:29 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:29 PM INFO:Setting up the package
2025/03/01 04:08:29 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:29 PM INFO:get_git_version executed successfully
2025/03/01 04:08:29 PM INFO:Version: v20.117
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:init_state_var executed successfully
2025/03/01 04:08:29 PM INFO:Session_state variables initialized
2025/03/01 04:08:29 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 04:08:29 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 04:08:29 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 04:08:29 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 04:08:29 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 04:08:29 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 04:08:29 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 04:08:29 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 04:08:29 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 04:08:29 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 04:08:29 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 04:08:29 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 04:08:29 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 04:08:29 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 04:08:29 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 04:08:29 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 04:08:29 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 04:08:29 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 04:08:29 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 04:08:29 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 04:08:29 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 04:08:29 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 04:08:29 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 04:08:29 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 04:08:29 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 04:08:29 PM INFO:year_slider_rightfiltered_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:29 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 04:08:29 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 04:08:29 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 04:08:29 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 04:08:29 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 04:08:29 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 04:08:29 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 04:08:29 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 04:08:29 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 04:08:29 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 04:08:29 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 04:08:29 PM INFO:perc_target: 0.5
2025/03/01 04:08:29 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 04:08:29 PM INFO:menu_selection: {'title': 'Corporate Donations', 'function': <function mod_corporate_donations_page at 0x00000225DA115990>}
2025/03/01 04:08:29 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 04:08:29 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 04:08:29 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 04:08:29 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 04:08:29 PM INFO:year_slider_leftfiltered_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:29 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 04:08:29 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 04:08:29 PM INFO:Session state Setup complete
2025/03/01 04:08:29 PM INFO:initialize_session_state executed successfully
2025/03/01 04:08:29 PM INFO:Package setup complete
2025/03/01 04:08:29 PM INFO:get_git_version executed successfully
2025/03/01 04:08:29 PM INFO:App Version: v20.132
2025/03/01 04:08:29 PM INFO:Switched to page: Corporate Donations
2025/03/01 04:08:29 PM INFO:load_and_filter_data executed successfully
2025/03/01 04:08:29 PM INFO:display_summary_statistics executed successfully
2025/03/01 04:08:29 PM INFO:display_textual_insights executed successfully
2025/03/01 04:08:29 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:29 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:29 PM INFO:display_visualizations executed successfully
2025/03/01 04:08:29 PM INFO:display_data_page executed successfully
2025/03/01 04:08:29 PM INFO:pagesetup executed successfully
2025/03/01 04:08:29 PM INFO:Data already loaded in session state.
2025/03/01 04:08:30 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:30 PM INFO:Setting up the package
2025/03/01 04:08:30 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:30 PM INFO:get_git_version executed successfully
2025/03/01 04:08:30 PM INFO:Version: v20.117
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:init_state_var executed successfully
2025/03/01 04:08:30 PM INFO:Session_state variables initialized
2025/03/01 04:08:30 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 04:08:30 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 04:08:30 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 04:08:30 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 04:08:30 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 04:08:30 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 04:08:30 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 04:08:30 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 04:08:30 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 04:08:30 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 04:08:30 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 04:08:30 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 04:08:30 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 04:08:30 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 04:08:30 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 04:08:30 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 04:08:30 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 04:08:30 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 04:08:30 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 04:08:30 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 04:08:30 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 04:08:30 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 04:08:30 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 04:08:30 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 04:08:30 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 04:08:30 PM INFO:year_slider_rightfiltered_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:30 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 04:08:30 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 04:08:30 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 04:08:30 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 04:08:30 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 04:08:30 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 04:08:30 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 04:08:30 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 04:08:30 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 04:08:30 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 04:08:30 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 04:08:30 PM INFO:perc_target: 0.5
2025/03/01 04:08:30 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 04:08:30 PM INFO:menu_selection: {'title': 'Bequeths', 'function': <function mod_bequeths_page at 0x00000225DA115900>}
2025/03/01 04:08:30 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 04:08:30 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 04:08:30 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 04:08:30 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 04:08:30 PM INFO:year_slider_leftfiltered_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:30 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 04:08:30 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 04:08:30 PM INFO:Session state Setup complete
2025/03/01 04:08:30 PM INFO:initialize_session_state executed successfully
2025/03/01 04:08:30 PM INFO:Package setup complete
2025/03/01 04:08:30 PM INFO:get_git_version executed successfully
2025/03/01 04:08:30 PM INFO:App Version: v20.132
2025/03/01 04:08:30 PM INFO:Switched to page: Bequeths
2025/03/01 04:08:30 PM INFO:load_and_filter_data executed successfully
2025/03/01 04:08:30 PM INFO:display_summary_statistics executed successfully
2025/03/01 04:08:30 PM INFO:display_textual_insights executed successfully
2025/03/01 04:08:30 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:30 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:30 PM INFO:display_visualizations executed successfully
2025/03/01 04:08:30 PM INFO:display_data_page executed successfully
2025/03/01 04:08:30 PM INFO:pagesetup executed successfully
2025/03/01 04:08:30 PM INFO:Data already loaded in session state.
2025/03/01 04:08:31 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:31 PM INFO:Setting up the package
2025/03/01 04:08:31 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:31 PM INFO:get_git_version executed successfully
2025/03/01 04:08:31 PM INFO:Version: v20.117
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:init_state_var executed successfully
2025/03/01 04:08:31 PM INFO:Session_state variables initialized
2025/03/01 04:08:31 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 04:08:31 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 04:08:31 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 04:08:31 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 04:08:31 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 04:08:31 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 04:08:31 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 04:08:31 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 04:08:31 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 04:08:31 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 04:08:31 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 04:08:31 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 04:08:31 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 04:08:31 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 04:08:31 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 04:08:31 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 04:08:31 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 04:08:31 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 04:08:31 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 04:08:31 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 04:08:31 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 04:08:31 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 04:08:31 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 04:08:31 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 04:08:31 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 04:08:31 PM INFO:year_slider_rightfiltered_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:31 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 04:08:31 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 04:08:31 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 04:08:31 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 04:08:31 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 04:08:31 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 04:08:31 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 04:08:31 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 04:08:31 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 04:08:31 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 04:08:31 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 04:08:31 PM INFO:perc_target: 0.5
2025/03/01 04:08:31 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 04:08:31 PM INFO:menu_selection: {'title': 'Head Line Figures', 'function': <function hlf_body at 0x00000225D9CEACB0>}
2025/03/01 04:08:31 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 04:08:31 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 04:08:31 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 04:08:31 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 04:08:31 PM INFO:year_slider_leftfiltered_keytarget_label_vis: (2001, 2019)
2025/03/01 04:08:31 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 04:08:31 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 04:08:31 PM INFO:Session state Setup complete
2025/03/01 04:08:31 PM INFO:initialize_session_state executed successfully
2025/03/01 04:08:31 PM INFO:Package setup complete
2025/03/01 04:08:31 PM INFO:get_git_version executed successfully
2025/03/01 04:08:31 PM INFO:App Version: v20.132
2025/03/01 04:08:31 PM INFO:Switched to page: Head Line Figures
2025/03/01 04:08:32 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:32 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:32 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:32 PM INFO:plot_bar_line_by_year executed successfully
2025/03/01 04:08:32 PM INFO:plot_pie_chart executed successfully
2025/03/01 04:08:43 PM INFO:plot_pie_chart executed successfully
2025/03/01 04:08:43 PM INFO:pagesetup executed successfully
2025/03/01 04:08:43 PM INFO:Data already loaded in session state.
2025/03/01 04:08:51 PM INFO:Current Working Directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:51 PM INFO:Setting up the package
2025/03/01 04:08:51 PM INFO:Module directory: H:\VScode\dashboard_demo-1
2025/03/01 04:08:51 PM INFO:get_git_version executed successfully
2025/03/01 04:08:51 PM INFO:Version: v20.117
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:init_state_var executed successfully
2025/03/01 04:08:51 PM INFO:Session_state variables initialized
2025/03/01 04:08:51 PM INFO:components_dir: H:\VScode\dashboard_demo-1\components
2025/03/01 04:08:51 PM INFO:Cash_ftr: {'DonationType': 'Cash'}
2025/03/01 04:08:51 PM INFO:data_donor:          DonorId                          Donor Name  Donations Value  Donation Events  Donation Mean
0            1.0               Agents Training Trust         56000.00                3   18666.666667
1            2.0    Birkenhead North End Labour Club        118680.84                2   59340.420000
2            3.0                Bord Institute Trust         38250.00                5    7650.000000
3            4.0        Branksome Liberal Club Trust        132991.78               28    4749.706429
4            5.0                    Bridgwater Trust         11200.00                5    2240.000000
...          ...                                 ...              ...              ...            ...
30214    87478.0                       Martin Thomas          3529.41                2    1764.705000
30215    87479.0                    Ishbel A Mcneill         11520.00                1   11520.000000
30216    87480.0                           Ann C Hay        157350.07                1  157350.070000
30217    87482.0  Glasgow Unionist Association Trust         50000.00                1   50000.000000
30218  1000001.0                  Unidentified Donor       1043384.21              121    8623.010000

[30219 rows x 5 columns]
2025/03/01 04:08:51 PM INFO:data_remappings: {'NatureOfDonation': {'IsBequest': 'Is A Bequest', 'IsAggregation': 'Aggregated Donation', 'IsSponsorship': 'Sponsorship', 'Donation to nan': 'Other', 'Other Payment': 'Other'}, 'PartyParents': {'Conservatives': 52, 'Labour': 53, 'Liberal Democrats': 90, 'Scottish National Party': 102, 'Green Party': 63, 'Plaid Cymru': 77, 'UKIP': 85, 'Unknown': 0}}
2025/03/01 04:08:51 PM INFO:data_clean:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ... WeeksTillNextElection WeeksSinceLastElection QuartersTillNextElection QuartersSinceLastElection
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...                    15                   4710                        2                       363
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...                    15                   4710                        2                       363
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...                    15                   4710                        2                       363
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...                    15                   4710                        2                       363
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...                    15                   4709                        2                       363
...          ...                              ...                    ...        ...  ...                   ...                    ...                      ...                       ...
78740   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...                    62                   4532                        5                       349
78741   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                    70                   4524                        6                       348
78742   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                    51                   4543                        4                       350
78743   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                     2                   4591                        1                       354
78744   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                     2                   4592                        1                       354

[78745 rows x 58 columns]
2025/03/01 04:08:51 PM INFO:BASE_DIR: H:\VScode\dashboard_demo-1
2025/03/01 04:08:51 PM INFO:politician_party_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople_Final.csv
2025/03/01 04:08:51 PM INFO:year_slider_value_by_year_n_entity: (2001, 2019)
2025/03/01 04:08:51 PM INFO:party_summary_fname: H:\VScode\dashboard_demo-1\output\party_summary.csv
2025/03/01 04:08:51 PM INFO:mppartymemb_fname: H:\VScode\dashboard_demo-1\reference_files\mppartymemb_pypd.csv
2025/03/01 04:08:51 PM INFO:raw_data:            ECRef      OriginalRegulatedEntityName    RegulatedEntityType      Value  ...                 CleanedDonorName                DonorStatus2  DonorId                        DonorName
0      NC0408174                   Mr Andy Street        Regulated Donee    1876.56  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
1      NC0408173                   Mr Andy Street        Regulated Donee    2700.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
2      NC0408177                   Mr Andy Street        Regulated Donee    4852.58  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
3      NC0408176                   Mr Andy Street        Regulated Donee    2500.00  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
4      NC0408170                   Mr Andy Street        Regulated Donee    4524.05  ...  Conservative And Unionist Party  Registered Political Party  86310.0  Conservative And Unionist Party
...          ...                              ...                    ...        ...  ...                              ...                         ...      ...                              ...
65273   C0242478               Vote Leave Limited  Permitted Participant   10000.00  ...          Shaftesbury Investments                     Company  74198.0          Shaftesbury Investments
65274   C0242461               Vote Leave Limited  Permitted Participant  100000.00  ...                Mr Jeremy Hosking                  Individual  74184.0                Mr Jeremy Hosking
65275   C0243560               Vote Leave Limited  Permitted Participant   40000.00  ...                   Anthony Clarke                  Individual  23556.0                   Anthony Clarke
65276   C0319710  Conservative And Unionist Party        Political Party   50000.00  ...                Mr Peter A Dubens                  Individual   2146.0                Mr Peter A Dubens
65277   C0319727  Conservative And Unionist Party        Political Party   15000.00  ...                 Mr Ravi S Kailas                  Individual  74743.0                 Mr Ravi S Kailas

[65278 rows x 40 columns]
2025/03/01 04:08:51 PM INFO:PLACEHOLDER_ID: 1000001
2025/03/01 04:08:51 PM INFO:directories: {'base_dir': 'H:\\VScode\\dashboard_demo-1', 'data_dir': 'H:\\VScode\\dashboard_demo-1\\data', 'output_dir': 'H:\\VScode\\dashboard_demo-1\\output', 'logs_dir': 'H:\\VScode\\dashboard_demo-1\\logs', 'reference_dir': 'H:\\VScode\\dashboard_demo-1\\reference_files', 'components_dir': 'H:\\VScode\\dashboard_demo-1\\components', 'app_pages_dir': 'H:\\VScode\\dashboard_demo-1\\app_pages', 'utils_dir': 'H:\\VScode\\dashboard_demo-1\\utils'}
2025/03/01 04:08:51 PM INFO:ListofPoliticalPeople_fname: H:\VScode\dashboard_demo-1\reference_files\ListOfPoliticalPeople.csv
2025/03/01 04:08:51 PM INFO:cleaned_data_fname: H:\VScode\dashboard_demo-1\output\cleaned_data.csv
2025/03/01 04:08:51 PM INFO:regentity_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalEntityDeDuped.csv
2025/03/01 04:08:51 PM INFO:PLACEHOLDER_DATE: 1900-01-01 00:00:00
2025/03/01 04:08:51 PM INFO:CREDENTIALS_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_credentials.json
2025/03/01 04:08:51 PM INFO:reference_dir: H:\VScode\dashboard_demo-1\reference_files
2025/03/01 04:08:51 PM INFO:data_dir: H:\VScode\dashboard_demo-1\data
2025/03/01 04:08:51 PM INFO:cleaned_donorlist_fname: H:\VScode\dashboard_demo-1\output\cleaned_donorlist.csv
2025/03/01 04:08:51 PM INFO:output_dir: H:\VScode\dashboard_demo-1\output
2025/03/01 04:08:51 PM INFO:data_party_sum:              RegulatedEntityName  DonationsValue  DonationEvents  DonationMean         RegEntity_Group
0     A Minority Pastime Limited         6612.00               1   6612.000000  Single Donation Entity
1                    A. A. Craig        12100.00              11   1100.000000            Small Entity
2                Abisola Ifasawo         1650.00               1   1650.000000  Single Donation Entity
3                  Adam Holloway        31341.00              11   2849.181818            Small Entity
4                    Adam Ingram         5245.20               1   5245.200000  Single Donation Entity
...                          ...             ...             ...           ...                     ...
1356   Young Britons' Foundation        54999.00               2  27499.500000       Very Small Entity
1357               Yvette Cooper       545172.31              49  11125.965510     Small Medium Entity
1358             Yvonne Fovargue         6758.06               2   3379.030000       Very Small Entity
1359               Zac Goldsmith        50000.00               1  50000.000000  Single Donation Entity
1360              Órlaithí Flynn        10000.00               1  10000.000000  Single Donation Entity

[1361 rows x 5 columns]
2025/03/01 04:08:51 PM INFO:year_slider_value_by_year_n_type: (2001, 2019)
2025/03/01 04:08:51 PM INFO:LOG_LEVEL: DEBUG
2025/03/01 04:08:51 PM INFO:TEXT_FILE: H:\VScode\dashboard_demo-1\reference_files\admin_text.json
2025/03/01 04:08:51 PM INFO:security: {'is_admin': False, 'is_authenticated': False, 'username': '', 'password': ''}
2025/03/01 04:08:51 PM INFO:donor_map_fname: H:\VScode\dashboard_demo-1\reference_files\PoliticalDonorsDeDuped.csv
2025/03/01 04:08:51 PM INFO:thresholds: {(0, 0): 'No Relevant Donations', (1, 1): 'Single Donation Entity', (2, 5): 'Very Small Entity', (6, 15): 'Small Entity', (16, 100): 'Small Medium Entity', (101, 200): 'Medium Entity', (201, 500): 'Medium Large Entity', (501, 1000): 'Large Entity'}
2025/03/01 04:08:51 PM INFO:cleaned_regentity_fname: H:\VScode\dashboard_demo-1\output\cleaned_regentity.csv
2025/03/01 04:08:51 PM INFO:data_regentity:       RegulatedEntityId                              Regulated Entity Name  Regulated Entity Group  Donations Value  Donation Events  Donation Mean
0                  17.0                                  English Democrats            Small Entity         99000.00               11    9000.000000
1                  19.0                         Legalise Cannabis Alliance            Small Entity         35500.00               13    2730.769231
2                  30.0        Upminster And Cranham Residents Association  Single Donation Entity         10000.00                1   10000.000000
3                  39.0                                          Sinn Féin     Medium Large Entity       2506699.11              359    6982.448774
4                  44.0  Independent Kidderminster Hospital And Health ...            Small Entity         31949.00                8    3993.625000
...                 ...                                                ...                     ...              ...              ...            ...
1359            10263.0                                    Jonathan Gullis  Single Donation Entity          2500.00                1    2500.000000
1360            10264.0                                      Robert Largan  Single Donation Entity          2000.00                1    2000.000000
1361            10265.0                                         Jane Dodds       Very Small Entity          3529.41                2    1764.705000
1362            10266.0                                        Phil Wilson  Single Donation Entity          2000.00                1    2000.000000
1363            10267.0                Scottish Unionist Association Trust       Very Small Entity        218870.07                3   72956.690000

[1364 rows x 6 columns]
2025/03/01 04:08:51 PM INFO:filter_def: {'Sponsorships_ftr': {'NatureOfDonation': 'Sponsorship', 'IsSponsorshipInt': 1}, 'ReturnedDonations_ftr': {'DonationAction': ['Returned', 'Forfeited'], 'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonors_ftr': {'DubiousDonor': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'DubiousDonations_ftr': {'DubiousData': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}, 'AggregatedDonations_ftr': {'IsAggregationInt': 1, 'NatureOfDonation': 'Aggregated Donation', 'DonationType': 'Aggregated Donation'}, 'SafeDonors_ftr': {'DonorType': ['Trade Union', 'Registered Political Party', 'Friendly Society', 'Public Fund']}, 'DubiousDonationType_ftr': {'NatureOfDonation': ['Impermissible Donor', 'Unidentified Donor', 'Total value of donations not reported individually', 'Aggregated Donation'], 'DonorStatus': ['Impermissible Donor', 'Unidentified Donor', 'Unidentifiable Donor']}, 'BlankDate_ftr': {'ReceivedDate': ['PLACEHOLDER_DATE', None]}, 'BlankDonor_ftr': {'DonorId': [1000001]}, 'BlankRegEntity_ftr': {'RegulatedEntityId': [1000001]}, 'DonatedVisits_ftr': {'DonationType': 'Visit', 'NatureOfDonation': 'Visit'}, 'Bequests_ftr': {'IsBequestInt': 1, 'NatureOfDonation': 'Bequest', 'DonationType': 'Bequest'}, 'CorporateDonations_ftr': {'DonorStatus': ['Company', 'Partnership', 'Limited Liability Partnership']}, 'RegulatedEntity_ftr': {'RegulatedEntityType': ['Political Party', 'Regulated Donee', 'Permitted Participant', 'Third Party']}, 'PoliticalParty_ftr': {'DonorStatus': 'Registered Political Party'}, 'Cash_ftr': {'DonationType': 'Cash'}, 'NonCash_ftr': {'DonationType': 'Non Cash'}}
2025/03/01 04:08:51 PM INFO:cleaned_donations_fname: H:\VScode\dashboard_demo-1\output\cleaned_donations.csv
2025/03/01 04:08:51 PM INFO:ec_donations_fname: Donations_accepted_by_political_parties.csv
2025/03/01 04:08:51 PM INFO:original_data_fname: H:\VScode\dashboard_demo-1\reference_files\original_data.csv
2025/03/01 04:08:51 PM INFO:app_pages_dir: H:\VScode\dashboard_demo-1\app_pages
2025/03/01 04:08:51 PM INFO:RERUN_MP_PARTY_MEMBERSHIP: False
2025/03/01 04:08:51 PM INFO:potential_regulatedentity_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_regentiity_duplicates.csv
2025/03/01 04:08:51 PM INFO:perc_target: 0.5
2025/03/01 04:08:51 PM INFO:utils_dir: H:\VScode\dashboard_demo-1\utils
2025/03/01 04:08:51 PM INFO:year_slider_dons_by_year_n_entity: (2001, 2019)
2025/03/01 04:08:51 PM INFO:menu_selection: {'title': 'Introduction', 'function': <function introduction_body at 0x00000225D9CEAB00>}
2025/03/01 04:08:51 PM INFO:potential_donor_duplicates_fname: H:\VScode\dashboard_demo-1\reference_files\potential_donor_duplicates.csv
2025/03/01 04:08:51 PM INFO:Donor_dedupe_cleaned_fname: H:\VScode\dashboard_demo-1\reference_files\Donor_dedupe_cleaned_data.csv
2025/03/01 04:08:51 PM INFO:ElectionDatesAscend: [datetime.date(1929, 5, 30), datetime.date(1931, 10, 27), datetime.date(1935, 11, 14), datetime.date(1945, 7, 5), datetime.date(1950, 2, 23), datetime.date(1951, 10, 25), datetime.date(1955, 5, 26), datetime.date(1959, 10, 8), datetime.date(1964, 10, 15), datetime.date(1966, 3, 31), datetime.date(1970, 6, 18), datetime.date(1974, 2, 28), datetime.date(1974, 10, 10), datetime.date(1979, 5, 3), datetime.date(1983, 6, 9), datetime.date(1987, 6, 11), datetime.date(1992, 4, 9), datetime.date(1997, 5, 1), datetime.date(2001, 6, 7), datetime.date(2005, 5, 5), datetime.date(2010, 5, 6), datetime.date(2015, 5, 7), datetime.date(2017, 6, 8), datetime.date(2019, 12, 12)]
2025/03/01 04:08:51 PM INFO:filenames: {'reference_dir': {'Donor_dedupe_cleaned_fname': 'Donor_dedupe_cleaned_data.csv', 'ListofPoliticalPeople_fname': 'ListOfPoliticalPeople.csv', 'mppartymemb_fname': 'mppartymemb_pypd.csv', 'donor_map_fname': 'PoliticalDonorsDeDuped.csv', 'politician_party_fname': 'ListOfPoliticalPeople_Final.csv', 'regentity_map_fname': 'PoliticalEntityDeDuped.csv', 'potential_donor_duplicates_fname': 'potential_donor_duplicates.csv', 'potential_regulatedentity_duplicates_fname': 'potential_regentiity_duplicates.csv', 'original_data_fname': 'original_data.csv', 'CREDENTIALS_FILE': 'admin_credentials.json', 'TEXT_FILE': 'admin_text.json'}, 'output_dir': {'cleaned_data_fname': 'cleaned_data.csv', 'cleaned_donations_fname': 'cleaned_donations.csv', 'cleaned_donorlist_fname': 'cleaned_donorlist.csv', 'cleaned_regentity_fname': 'cleaned_regentity.csv', 'party_summary_fname': 'party_summary.csv'}, 'BASE_DIR': {'ec_donations_fname': 'Donations_accepted_by_political_parties.csv'}}
2025/03/01 04:08:51 PM INFO:year_slider_dons_by_year_n_type: (2001, 2019)
2025/03/01 04:08:51 PM INFO:logs_dir: H:\VScode\dashboard_demo-1\logs
2025/03/01 04:08:51 PM INFO:ElectionDatesDescend: [datetime.date(2019, 12, 12), datetime.date(2017, 6, 8), datetime.date(2015, 5, 7), datetime.date(2010, 5, 6), datetime.date(2005, 5, 5), datetime.date(2001, 6, 7), datetime.date(1997, 5, 1), datetime.date(1992, 4, 9), datetime.date(1987, 6, 11), datetime.date(1983, 6, 9), datetime.date(1979, 5, 3), datetime.date(1974, 10, 10), datetime.date(1974, 2, 28), datetime.date(1970, 6, 18), datetime.date(1966, 3, 31), datetime.date(1964, 10, 15), datetime.date(1959, 10, 8), datetime.date(1955, 5, 26), datetime.date(1951, 10, 25), datetime.date(1950, 2, 23), datetime.date(1945, 7, 5), datetime.date(1935, 11, 14), datetime.date(1931, 10, 27), datetime.date(1929, 5, 30)]
2025/03/01 04:08:51 PM INFO:Session state Setup complete
2025/03/01 04:08:51 PM INFO:initialize_session_state executed successfully
2025/03/01 04:08:51 PM INFO:Package setup complete
2025/03/01 04:08:51 PM INFO:get_git_version executed successfully
2025/03/01 04:08:51 PM INFO:App Version: v20.132
2025/03/01 04:08:51 PM INFO:Switched to page: Introduction
2025/03/01 04:08:51 PM INFO:pagesetup executed successfully
2025/03/01 04:08:51 PM INFO:Data already loaded in session state.
